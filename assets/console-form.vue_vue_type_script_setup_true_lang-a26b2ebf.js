import{x as N,y as I,z as T,A as K,o as O,m as R,B as z,p as P}from"./vendor-5fa84e51.js";import{d as U,b as p,j as $,m as f,S as v,R as a,O as t,ak as j,V as d,W as h,u as m,X as k,t as M}from"./@vue-30559afa.js";const W=M("label",{class:"operation-label"},"指令：",-1),F=U({__name:"console-form",props:{localStream:{},dataChannel:{},peerConnection:{},btnDiabled:{type:Boolean},experiment:{type:Boolean}},setup(w,{expose:C}){const u=w,l=p(""),c=p(""),o=p(!1),n=p(!0);let r;const y=e=>{c.value+=`${e}
`},_=()=>{var e;l.value&&((e=u.dataChannel)==null||e.send(l.value),y(`发送指令：${l.value}`),l.value="")},V=()=>{o.value=!o.value,u.localStream.getAudioTracks().forEach(e=>{e.enabled=o.value})},S=()=>{n.value=!n.value,u.localStream.getVideoTracks().forEach(e=>{e.enabled=n.value})},x=()=>{c.value="",o.value=!1,u.localStream.getAudioTracks().forEach(e=>{e.enabled=!1})};$(()=>{"webkitSpeechRecognition"in window&&(r=new webkitSpeechRecognition,r.lang="zh-CN",r.onresult=e=>{const s=e.results[e.resultIndex][0].transcript;console.log("语音识别结果：",s)},r.onerror=function(e){console.error("语音识别错误：",e.error)})});const B=()=>{r.start()},E=()=>{r.stop()};return C({writeInfo:y,reduction:x}),(e,s)=>{const g=O,i=R,D=z,A=P;return f(),v(A,{class:"box-card"},{default:a(()=>[W,t(g,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=b=>l.value=b),style:{width:"200px","margin-right":"20px"},placeholder:"要发送的指令",clearable:"",disabled:e.btnDiabled,onKeyup:j(_,["enter"])},null,8,["modelValue","disabled","onKeyup"]),t(i,{type:"primary",onClick:_,disabled:e.btnDiabled},{default:a(()=>[d("发送指令")]),_:1},8,["disabled"]),t(i,{type:o.value?"warning":"primary",onClick:V,disabled:e.btnDiabled,icon:o.value?m(N):m(I)},{default:a(()=>[d(h(o.value?"关闭":"打开")+"麦克风 ",1)]),_:1},8,["type","disabled","icon"]),t(i,{type:n.value?"warning":"primary",onClick:S,icon:n.value?m(T):m(K)},{default:a(()=>[d(h(n.value?"关闭":"打开")+"本地视频",1)]),_:1},8,["type","icon"]),t(D,{placement:"bottom",title:"指令面板",width:500,trigger:"click"},{reference:a(()=>[t(i,{disabled:e.btnDiabled},{default:a(()=>[d("打开对话框")]),_:1},8,["disabled"])]),default:a(()=>[t(g,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=b=>c.value=b),readonly:"",placeholder:"Please input",rows:6,"show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1}),e.experiment?(f(),v(i,{key:0,type:"primary",onClick:B},{default:a(()=>[d("开始录音")]),_:1})):k("",!0),e.experiment?(f(),v(i,{key:1,type:"primary",onClick:E},{default:a(()=>[d("结束录音")]),_:1})):k("",!0)]),_:1})}}});export{F as _};
