import{z as I,A as $,B as K,C as O,o as R,m as z,D as M,p as P}from"./vendor-ac01758b.js";import{d as U,b as V,c as w,j,m as b,S as f,R as a,O as t,ai as T,V as s,W as g,u as p,X as k,t as W}from"./@vue-cdc79bd8.js";const X=W("label",{class:"operation-label"},"文本指令：",-1),G=U({__name:"console-form",props:{localStream:{},dataChannel:{},peerConnection:{},btnDiabled:{type:Boolean},experiment:{type:Boolean},mediaDevices:{}},emits:["handleAudio","handleVideo"],setup(D,{expose:x,emit:c}){const d=D,n=V(""),u=V("");let l;const m=w(()=>d.mediaDevices.audio),v=w(()=>d.mediaDevices.video),y=e=>{u.value+=`${e}
`},_=()=>{var e;n.value&&((e=d.dataChannel)==null||e.send(n.value),y(`发送指令：${n.value}`),n.value="")},B=()=>{u.value="",c("handleAudio",!1)},h=e=>{e==="audio"?c("handleAudio",!d.mediaDevices.audio):c("handleVideo",!d.mediaDevices.video)};j(()=>{"webkitSpeechRecognition"in window&&(l=new webkitSpeechRecognition,l.lang="zh-CN",l.onresult=e=>{const o=e.results[e.resultIndex][0].transcript;console.log("语音识别结果：",o)},l.onerror=function(e){console.error("语音识别错误：",e.error)})});const S=()=>{l.start()},A=()=>{l.stop()};return x({writeInfo:y,reduction:B}),(e,o)=>{const C=R,i=z,N=M,E=P;return b(),f(E,{class:"box-card"},{default:a(()=>[X,t(C,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=r=>n.value=r),style:{width:"200px","margin-right":"10px"},placeholder:"要发送的指令",clearable:"",disabled:e.btnDiabled,onKeyup:T(_,["enter"])},null,8,["modelValue","disabled","onKeyup"]),t(i,{type:"primary",onClick:_,disabled:e.btnDiabled},{default:a(()=>[s("发送指令")]),_:1},8,["disabled"]),t(i,{type:m.value?"success":"primary",onClick:o[1]||(o[1]=r=>h("audio")),disabled:e.btnDiabled,icon:m.value?p(I):p($)},{default:a(()=>[s(g(m.value?"关闭":"打开")+"麦克风 ",1)]),_:1},8,["type","disabled","icon"]),t(i,{type:v.value?"success":"primary",onClick:o[2]||(o[2]=r=>h("video")),icon:v.value?p(K):p(O)},{default:a(()=>[s(g(v.value?"关闭":"打开")+"本地视频",1)]),_:1},8,["type","icon"]),t(N,{placement:"bottom",title:"指令面板",width:500,trigger:"click"},{reference:a(()=>[t(i,{disabled:e.btnDiabled},{default:a(()=>[s("打开对话框")]),_:1},8,["disabled"])]),default:a(()=>[t(C,{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=r=>u.value=r),readonly:"",placeholder:"Please input",rows:6,"show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1}),e.experiment?(b(),f(i,{key:0,type:"primary",onClick:S},{default:a(()=>[s("开始录音")]),_:1})):k("",!0),e.experiment?(b(),f(i,{key:1,type:"primary",onClick:A},{default:a(()=>[s("结束录音")]),_:1})):k("",!0)]),_:1})}}});export{G as _};
