import{a7 as Ye,a8 as _,a9 as z,aa as N,ab as be,ac as ye,ad as P,ae as F,S as Le,b as Re,o as S,c as We,w as Xe,e as U,f as Oe,g as Ke,af as Qe,ag as Ge,ah as Je,A as $e,V as we,z as T,F as _e,k as Ae,ai as et,a3 as tt,a1 as nt,a2 as ot,aj as at,ak as st,B as Ee,al as ve,t as K,am as Pe,U as it,an as rt,ao as ct,ap as lt,Y as pt,D as dt,G as ut}from"./vendor-62a7e91c.js";import{_ as ke}from"./index-b97f6eea.js";const Te={type:"change"},Q={type:"start"},xe={type:"end"};class ft extends Ye{constructor(i,n){super(),n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=i,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new _,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:z.ROTATE,MIDDLE:z.DOLLY,RIGHT:z.PAN},this.touches={ONE:N.ROTATE,TWO:N.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",ue),this._domElementKeyEvents=t},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Te),e.update(),a=o.NONE},this.update=function(){const t=new _,s=new be().setFromUnitVectors(i.up,new _(0,1,0)),g=s.clone().invert(),y=new _,E=new be,I=2*Math.PI;return function(){const ge=e.object.position;t.copy(ge).sub(e.target),t.applyQuaternion(s),c.setFromVector3(t),e.autoRotate&&a===o.NONE&&q(H()),e.enableDamping?(c.theta+=A.theta*e.dampingFactor,c.phi+=A.phi*e.dampingFactor):(c.theta+=A.theta,c.phi+=A.phi);let k=e.minAzimuthAngle,M=e.maxAzimuthAngle;return isFinite(k)&&isFinite(M)&&(k<-Math.PI?k+=I:k>Math.PI&&(k-=I),M<-Math.PI?M+=I:M>Math.PI&&(M-=I),k<=M?c.theta=Math.max(k,Math.min(M,c.theta)):c.theta=c.theta>(k+M)/2?Math.max(k,c.theta):Math.min(M,c.theta)),c.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=w,c.radius=Math.max(e.minDistance,Math.min(e.maxDistance,c.radius)),e.enableDamping===!0?e.target.addScaledVector(p,e.dampingFactor):e.target.add(p),t.setFromSpherical(c),t.applyQuaternion(g),ge.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(A.theta*=1-e.dampingFactor,A.phi*=1-e.dampingFactor,p.multiplyScalar(1-e.dampingFactor)):(A.set(0,0,0),p.set(0,0,0)),w=1,l||y.distanceToSquared(e.object.position)>u||8*(1-E.dot(e.object.quaternion))>u?(e.dispatchEvent(Te),y.copy(e.object.position),E.copy(e.object.quaternion),l=!1,!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",fe),e.domElement.removeEventListener("pointerdown",le),e.domElement.removeEventListener("pointercancel",pe),e.domElement.removeEventListener("wheel",de),e.domElement.removeEventListener("pointermove",Y),e.domElement.removeEventListener("pointerup",W),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",ue)};const e=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=o.NONE;const u=1e-6,c=new ye,A=new ye;let w=1;const p=new _;let l=!1;const d=new P,f=new P,C=new P,x=new P,L=new P,D=new P,R=new P,h=new P,b=new P,r=[],O={};function H(){return 2*Math.PI/60/60*e.autoRotateSpeed}function v(){return Math.pow(.95,e.zoomSpeed)}function q(t){A.theta+=t}function G(t){A.phi+=t}const J=function(){const t=new _;return function(g,y){t.setFromMatrixColumn(y,0),t.multiplyScalar(-g),p.add(t)}}(),$=function(){const t=new _;return function(g,y){e.screenSpacePanning===!0?t.setFromMatrixColumn(y,1):(t.setFromMatrixColumn(y,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(g),p.add(t)}}(),j=function(){const t=new _;return function(g,y){const E=e.domElement;if(e.object.isPerspectiveCamera){const I=e.object.position;t.copy(I).sub(e.target);let B=t.length();B*=Math.tan(e.object.fov/2*Math.PI/180),J(2*g*B/E.clientHeight,e.object.matrix),$(2*y*B/E.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(J(g*(e.object.right-e.object.left)/e.object.zoom/E.clientWidth,e.object.matrix),$(y*(e.object.top-e.object.bottom)/e.object.zoom/E.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function V(t){e.object.isPerspectiveCamera?w/=t:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*t)),e.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ee(t){e.object.isPerspectiveCamera?w*=t:e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/t)),e.object.updateProjectionMatrix(),l=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function te(t){d.set(t.clientX,t.clientY)}function Me(t){R.set(t.clientX,t.clientY)}function ne(t){x.set(t.clientX,t.clientY)}function Ce(t){f.set(t.clientX,t.clientY),C.subVectors(f,d).multiplyScalar(e.rotateSpeed);const s=e.domElement;q(2*Math.PI*C.x/s.clientHeight),G(2*Math.PI*C.y/s.clientHeight),d.copy(f),e.update()}function De(t){h.set(t.clientX,t.clientY),b.subVectors(h,R),b.y>0?V(v()):b.y<0&&ee(v()),R.copy(h),e.update()}function Se(t){L.set(t.clientX,t.clientY),D.subVectors(L,x).multiplyScalar(e.panSpeed),j(D.x,D.y),x.copy(L),e.update()}function je(t){t.deltaY<0?ee(v()):t.deltaY>0&&V(v()),e.update()}function Ie(t){let s=!1;switch(t.code){case e.keys.UP:j(0,e.keyPanSpeed),s=!0;break;case e.keys.BOTTOM:j(0,-e.keyPanSpeed),s=!0;break;case e.keys.LEFT:j(e.keyPanSpeed,0),s=!0;break;case e.keys.RIGHT:j(-e.keyPanSpeed,0),s=!0;break}s&&(t.preventDefault(),e.update())}function oe(){if(r.length===1)d.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),s=.5*(r[0].pageY+r[1].pageY);d.set(t,s)}}function ae(){if(r.length===1)x.set(r[0].pageX,r[0].pageY);else{const t=.5*(r[0].pageX+r[1].pageX),s=.5*(r[0].pageY+r[1].pageY);x.set(t,s)}}function se(){const t=r[0].pageX-r[1].pageX,s=r[0].pageY-r[1].pageY,g=Math.sqrt(t*t+s*s);R.set(0,g)}function ze(){e.enableZoom&&se(),e.enablePan&&ae()}function Ne(){e.enableZoom&&se(),e.enableRotate&&oe()}function ie(t){if(r.length==1)f.set(t.pageX,t.pageY);else{const g=X(t),y=.5*(t.pageX+g.x),E=.5*(t.pageY+g.y);f.set(y,E)}C.subVectors(f,d).multiplyScalar(e.rotateSpeed);const s=e.domElement;q(2*Math.PI*C.x/s.clientHeight),G(2*Math.PI*C.y/s.clientHeight),d.copy(f)}function re(t){if(r.length===1)L.set(t.pageX,t.pageY);else{const s=X(t),g=.5*(t.pageX+s.x),y=.5*(t.pageY+s.y);L.set(g,y)}D.subVectors(L,x).multiplyScalar(e.panSpeed),j(D.x,D.y),x.copy(L)}function ce(t){const s=X(t),g=t.pageX-s.x,y=t.pageY-s.y,E=Math.sqrt(g*g+y*y);h.set(0,E),b.set(0,Math.pow(h.y/R.y,e.zoomSpeed)),V(b.y),R.copy(h)}function Ue(t){e.enableZoom&&ce(t),e.enablePan&&re(t)}function He(t){e.enableZoom&&ce(t),e.enableRotate&&ie(t)}function le(t){e.enabled!==!1&&(r.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",Y),e.domElement.addEventListener("pointerup",W)),Ve(t),t.pointerType==="touch"?Fe(t):Be(t))}function Y(t){e.enabled!==!1&&(t.pointerType==="touch"?qe(t):Ze(t))}function W(t){me(t),r.length===0&&(e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",Y),e.domElement.removeEventListener("pointerup",W)),e.dispatchEvent(xe),a=o.NONE}function pe(t){me(t)}function Be(t){let s;switch(t.button){case 0:s=e.mouseButtons.LEFT;break;case 1:s=e.mouseButtons.MIDDLE;break;case 2:s=e.mouseButtons.RIGHT;break;default:s=-1}switch(s){case z.DOLLY:if(e.enableZoom===!1)return;Me(t),a=o.DOLLY;break;case z.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;ne(t),a=o.PAN}else{if(e.enableRotate===!1)return;te(t),a=o.ROTATE}break;case z.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;te(t),a=o.ROTATE}else{if(e.enablePan===!1)return;ne(t),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&e.dispatchEvent(Q)}function Ze(t){if(e.enabled!==!1)switch(a){case o.ROTATE:if(e.enableRotate===!1)return;Ce(t);break;case o.DOLLY:if(e.enableZoom===!1)return;De(t);break;case o.PAN:if(e.enablePan===!1)return;Se(t);break}}function de(t){e.enabled===!1||e.enableZoom===!1||a!==o.NONE||(t.preventDefault(),e.dispatchEvent(Q),je(t),e.dispatchEvent(xe))}function ue(t){e.enabled===!1||e.enablePan===!1||Ie(t)}function Fe(t){switch(he(t),r.length){case 1:switch(e.touches.ONE){case N.ROTATE:if(e.enableRotate===!1)return;oe(),a=o.TOUCH_ROTATE;break;case N.PAN:if(e.enablePan===!1)return;ae(),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(e.touches.TWO){case N.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ze(),a=o.TOUCH_DOLLY_PAN;break;case N.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ne(),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&e.dispatchEvent(Q)}function qe(t){switch(he(t),a){case o.TOUCH_ROTATE:if(e.enableRotate===!1)return;ie(t),e.update();break;case o.TOUCH_PAN:if(e.enablePan===!1)return;re(t),e.update();break;case o.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ue(t),e.update();break;case o.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;He(t),e.update();break;default:a=o.NONE}}function fe(t){e.enabled!==!1&&t.preventDefault()}function Ve(t){r.push(t)}function me(t){delete O[t.pointerId];for(let s=0;s<r.length;s++)if(r[s].pointerId==t.pointerId){r.splice(s,1);return}}function he(t){let s=O[t.pointerId];s===void 0&&(s=new P,O[t.pointerId]=s),s.set(t.pageX,t.pageY)}function X(t){const s=t.pointerId===r[0].pointerId?r[1]:r[0];return O[s.pointerId]}e.domElement.addEventListener("contextmenu",fe),e.domElement.addEventListener("pointerdown",le),e.domElement.addEventListener("pointercancel",pe),e.domElement.addEventListener("wheel",de,{passive:!1}),this.update()}}const mt={animateCamera:(m,i,n,e,o=2e3,a)=>{const u=new F.Tween({x1:m.position.x,y1:m.position.y,z1:m.position.z,x2:i.target.x,y2:i.target.y,z2:i.target.z});u.to({x1:n.x,y1:n.y,z1:n.z,x2:e.x,y2:e.y,z2:e.z},o),u.onUpdate(function(c){m.position.x=c.x1,m.position.y=c.y1,m.position.z=c.z1,i.target.x=c.x2,i.target.y=c.y2,i.target.z=c.z2,i.update()}),u.onComplete(function(){i.enabled=!0,i.update(),a()}),u.easing(F.Easing.Cubic.InOut),u.start()}},ht=m=>new Promise(i=>{setTimeout(i,m)}),gt=(m,i)=>{const n=document.createElement("div");n.style.position="fixed",n.style.maxWidth="80%",n.style.color="white",n.style.fontSize="14px",n.style.boxSizing="border-box",n.style.background="rgba(0,0,0,0.76)",n.style.padding="0.8em 2.618em",n.style.top="40%",n.style.left="50%",n.style.zIndex=999999999,n.style.borderRadius="3px",n.style.opacity="0",n.innerText=m,document.body.appendChild(n),n.style.marginLeft=-(n.offsetWidth/2)+"px",n.style.marginTop=-n.offsetHeight/2+"px",setTimeout(function(){n.style.marginLeft=-(n.offsetWidth/2)+"px",n.style.marginTop=-n.offsetHeight+"px",n.style.transition="all 0.3s",n.style.opacity="1",setTimeout(function(){n.style.opacity="0",n.style.marginTop=-n.offsetHeight/2+"px",setTimeout(function(){document.body.removeChild(n)},300)},parseInt(i)||1618)},0)},Z=[{name:"客厅",key:"living-room",map:new URL("/assets/map_living_room-3b943256.jpg",self.location).href,showSwitch:!0,position:new _(0,0,0),interactivePoints:[{key:"tv",value:"电视机",description:"智能电视",cover:new URL("/assets/cover_living_room_tv-73e5fbd3.png",self.location).href,position:new _(-6,2,-8)},{key:"fridge",value:"冰箱",description:"豪华冰箱",cover:new URL("/assets/cover_living_room_fridge-be328301.png",self.location).href,position:new _(-12,4,9)},{key:"sofa",value:"沙发",description:"舒适沙发",cover:new URL("/assets/cover_living_room_sofa-7272eb82.png",self.location).href,position:new _(6,0,-8)}]},{name:"卧室",key:"bed-room",map:new URL("/assets/map_bed_room-54905436.jpg",self.location).href,showSwitch:!0,position:new _(-32,0,0),interactivePoints:[{key:"bed",value:"床",description:"温暖的床",cover:new URL("/assets/cover_bed_room_bed-b049b23b.png",self.location).href,position:new _(-38,2,-14)}]},{name:"书房",key:"study-room",map:new URL("/assets/map_study_room-e6b1d86f.jpg",self.location).href,showSwitch:!0,position:new _(32,0,0),interactivePoints:[{key:"art",value:"艺术品",description:"绝版作品",cover:new URL("/assets/cover_study_room_art-bdfabd4f.png",self.location).href,position:new _(42,6,-8)}]}],bt=[new URL("/assets/map_bed_room-54905436.jpg",self.location).href,new URL("/assets/map_study_room-e6b1d86f.jpg",self.location).href,new URL("/assets/map_living_room-3b943256.jpg",self.location).href,new URL("/assets/cover_bed_room_bed-b049b23b.png",self.location).href,new URL("/assets/cover_living_room_fridge-be328301.png",self.location).href,new URL("/assets/cover_living_room_sofa-7272eb82.png",self.location).href,new URL("/assets/cover_living_room_tv-73e5fbd3.png",self.location).href,new URL("/assets/cover_study_room_art-bdfabd4f.png",self.location).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAMAAAANxBKoAAABO1BMVEUAAACK93XP/Mpl9VL1//Oi+JBj9VD///////9w9V9u9l5a9Eal+Zpr9Vtd9Ur2/u39//xz9mJn9FWl+ZuX+Itd80r///9j9VGV94qI93p39mj2/vTS/My5+rH///9/9m/J+8D///+q+Z9e80z6/vrq/ejK+8Tb/NaL93+F93h/9nD////s/ejC+7uZ+I1n9FTb/di1+qyL937E+72t+aTm/eJ/9nDB+7jp/eSV+Iq7+rP///////+C9nOV94l59Wl29Wam+ZuL9n1/9nB89W1w9WC2+q2O94Ft9FyG9nhz9WPU/NCc95CZ942R94Vn9FWi+Zdq9Fjy/vDb/NfD+72v+qas+KKg+JSJ9nuF9nde9Ezk/eDg/dzG+8DA+7m8+rW6+rKx+amp+J9j9FH3/vbr/eno/eXK+8SP94KQBCRYAAAAPHRSTlMAB/4hDw+Af/Dds7OATEwI9/f38O/es7OAgIB/f09OJSIh9/fw8PDv7+/v3d3d3d2zs7OYmH9WU0xMPC0T+BUCAAABcUlEQVRIx+2T11LCQBhGAxZUUMCuNHvvvQRCKAEp0iWgdBXf/wncL8ngeJHd9Vq+6zNnzmz+CMMZe7Tws+uLop+Xddpc4sQoJ+w/FEXRxh1Bxqd2elyE5VTfHRWL75zqtbO3188P4Gy102tNl3R8i6n2HTf6BC8B97AizpVWs0xw6Lfpaotj46WjtJvlhhU111T4/qQqy8BbBE+nd2nqwEUilM3k5W5FUQjet3opEavBWiTxHNLwDuJ3zNXTk2EpGlQJnjVqmpdm7MhSLhkH/hQx8IrSvjWj7fVerhBPSTGCa/HAH0zd9nq9V0imwrFgTU2E9HifYLqZBaLXamoqqclU5e4V7cOMb/Z+xefnxig4cgbxX4h30Gjk5LT4qP7ydDlyZgt6jYqagZz58qiZh5yRc/rz8stMGjmIx9mw5ciZIjUxnA1TbhyZHr8HOU+OW4tf4aKRg/h9yDlzSDyvHP+TWzqAnDtHuhH+sIBF+Ff7BsrQZcT79VwqAAAAAElFTkSuQmCC",self.location).href,new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAq1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Nr6iZAAAAOHRSTlMAG+HvCgbq5U8N+/N+9j+cPB0R3MVlomg1KCEVuqaNhGzUy7WWeFRHMBfIwK2TkIleWizPcldMD7Nt9v4AAAIFSURBVFjD7dXZcqpAEAZgZN9R9tUoRjFucUvC+z/ZgZrFBk2Qc5VU8V9YM639CdqjzJAhQ4b8jQhfo2gse8upv9i4Waic4mea7MnZxE2OpKklDWe7hquP+UddStW0CvR9luaOaJTfJLbqR9Y/3l3ITEJNHZlYeGG4L6YC+nmxLHsB6ELWFLB7ACDiW2/gtbkvCPD1n8CKAIr0QxenPQ1o6eaufS6/jQIOb0YtQG4CecQwK63Vn9TPhxwG9qS+OC79XCwIwNcAF9dLr4RRQzwnLUCNZp4ZRQIF2Ko4Res5BFL6Dgg44LpmqpXCumMI4M07BAIGx28D6KZmANDwVJwgYBLgioAprnNjBHgAEPFsf0KADuuxG+AStP6AQEiA4B6AtyiwtxfrEDgR4ICAdwqgr/sIAR2tcwhYBLg0AW3NSq51lXkISHa9lJtjjD/ZomwCahGfQ3kZMRAoF5UQtk5FhiZ1joEXUtfmIjwLglPWcV4zg/ziqOQmqmuItiUAQGQIwKjFbaTFxdYoOwGW1uiA7cC+D0BvfCR2AyY4TCCOTSeqDeiNLas8BFRyxLIOQP1gSBQN1HVSTaQfADXXz+DfbLb3d6l7cSTOSG9l+TvA2C7Xj/8WlWTCg73VApIaEHdezDwZ+7DbXliOzEEqbBxLTpie4ZN4bX6egmtgKybPDBky5NfmH4rhB33Igw6vAAAAAElFTkSuQmCC",self.location).href];class yt{constructor(){this.data=[],this.self={},this.load={},this.setupSelf(),this.setupLoad()}setupSelf(){const i=this,n={};n.allType={image:["jpg","png"],json:["json"],audio:["mp3"]},n.getType=function(e){const o=e.match(/[^\.]+$/)[0];let a=null;for(const u in n.allType)if(n.allType[u].join(",").indexOf(o)!==-1){a=u;break}else a="nonsupport";return a},n.setData=function(e){const o=[];e.forEach(function(a,u,c){const A=a.url||a,w=n.getType(A),p=a.callback||null;o.push({url:A,type:w,callback:p})}),this.data=o,i.data=o},this.self=n}setupLoad(){const i=this,n={};n.events={start:null,loading:null,complete:null,error:null},n.on=function(e,o){n.events[e]=o},n.off=function(e){n.events[e]=null},n.start=function(e){const o=e||i.data;n.nowProgress=0,n.allProgress=o.length,n._runEvent("start"),o.forEach(function(a,u,c){a.type!=="nonsupport"&&n[`_${a.type}`](a)})},n._complete=function(e,o){e.callback&&e.callback(o),n.nowProgress++,n._runEvent("loading"),n._runEvent("complete")},n._error=function(e,o){n._runEvent("error")},n._runEvent=function(e){switch(e){case"start":n.events.start&&n.start();break;case"loading":n.events.loading&&n.events.loading({nowProgress:n.nowProgress,allProgress:n.allProgress});break;case"complete":n.events.complete&&n.nowProgress===n.allProgress&&n.events.complete();break;case"error":n.events.error&&n.events.error();break}},n._get=function(e,o){const a=new XMLHttpRequest;a.open("post",e.url,!0),a.responseType=o,a.send(),a.onload=function(u){n._complete(e,u.currentTarget.response)},a.onerror=function(u){console.log(`error:${u}`)}},n._image=function(e){const o=new Image;o.src=e.url,o.onload=function(a){n._complete(e,a)},o.error=function(a){n.error(e,a)}},n._json=function(e){n._get(e,"json")},n._audio=function(e){n._get(e,"arraybuffer")},this.load=n}}const wt={key:0,class:"progress"},_t={__name:"progress",props:{resourceList:{type:Array,required:!0}},setup(m){const i=m,n=Le({loadingComplete:!1,percent:0}),e=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}];return Re(()=>{const o=new yt;o.self.setData(i.resourceList),o.load.start(),o.load.on("loading",function(a){n.percent=0+Math.floor(a.nowProgress/a.allProgress*100)}),o.load.on("complete",function(){console.log("load complete"),n.loadingComplete=!0})}),(o,a)=>{const u=Ge;return S(),We(Qe,null,{default:Xe(()=>[n.loadingComplete?Ke("",!0):(S(),U("div",wt,[Oe(u,{type:"dashboard",percentage:n.percent,color:e,width:200},null,8,["percentage"])]))]),_:1})}}},At=ke(_t,[["__scopeId","data-v-40b6f4c0"]]);const Et=m=>(dt("data-v-f9f811e2"),m=m(),ut(),m),vt={class:"home"},Pt=et('<canvas class="webgl" data-v-f9f811e2></canvas><div class="vr" data-v-f9f811e2><span class="vr-box" data-v-f9f811e2><i class="vr-icon" data-v-f9f811e2></i><b class="vr-text" data-v-f9f811e2>全景漫游</b></span></div>',2),Tt={class:"switch"},xt=["onClick"],Lt={class:"switch-button__text"},Rt=Et(()=>T("i",{class:"switch-button__icon"},null,-1)),Ot=["onClick"],kt={class:"point-label__tips"},Mt={class:"point-cover"},Ct={class:"point-info"},Dt={class:"point-info__text p1"},St={class:"point-info__text p2"},jt={__name:"home-view",setup(m){const i=Le({renderer:null,camera:null,scene:null,controls:null,cameraZAxis:2,currentRoom:"living-room"}),n={};let e=0;const o=Je(()=>{const w=[];return Z.forEach(p=>{p.interactivePoints&&p.interactivePoints.length>0&&p.interactivePoints.forEach(l=>{l={room:p.key,...l},w.push(l)})}),w}),a=()=>{n.width=window.innerWidth,n.height=window.innerHeight,i.renderer.setSize(n.width,n.height),i.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.camera.aspect=n.width/n.height,i.camera.updateProjectionMatrix()},u=()=>{const w=document.querySelector("canvas.webgl"),p=new tt({canvas:w});p.setSize(n.width,n.height),p.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.renderer=p;const l=new nt;i.scene=l;const d=new ot(65,n.width/n.height,.1,1e3);d.position.z=i.cameraZAxis,l.add(d),i.camera=d;const f=new ft(d,p.domElement);f.target.set(0,0,0),f.enableDamping=!0,f.enablePan=!1,f.maxDistance=12,f.minPolarAngle=Math.PI/2,f.maxPolarAngle=Math.PI/2,i.controls=f,window.addEventListener("resize",a);const C=new at,x=(h,b,r)=>{const O=new rt(16,256,256);O.scale(1,1,-1);const H=new ct({map:C.load(r),side:lt}),v=new pt(O,H);return v.name=h,v.position.set(b.x,b.y,b.z),v.rotation.y=Math.PI/2,l.add(v),v};Z.map(h=>x(h.key,h.position,h.map));const L=new st,D=o.value.map((h,b)=>({...h,element:document.querySelector(`.point-${b}`)})),R=()=>{if(p)for(const h of D){const b=h.position.clone(),r=b.project(d);if(L.setFromCamera(b,d),Math.abs(r.x)>1||Math.abs(r.y)>1||Math.abs(r.z)>1){h.element.style.transform="scale(0, 0)";continue}const O=b.x*n.width*.5,H=-b.y*n.height*.5;h.element.style.transform=`translateX(${O}px) translateY(${H}px)`}f&&f.update(),F&&F.update(),p.render(l,d),e=window.requestAnimationFrame(R)};R()},c=async w=>{const p=Z.filter(l=>l.key===w)[0];if(i.camera){const l=p.position.x,d=p.position.y,f=p.position.z;mt.animateCamera(i.camera,i.controls,{x:l,y:d,z:i.cameraZAxis},{x:l,y:d,z:f},1600,()=>({})),i.controls.update()}await ht(1600),i.currentRoom=p.key},A=w=>{gt(`您点击了${w.value}`)};return Re(()=>{n.width=window.innerWidth,n.height=window.innerHeight,u()}),$e(()=>{window.removeEventListener("resize",a),window.cancelAnimationFrame(e)}),(w,p)=>(S(),U("div",vt,[Oe(At,{resourceList:we(bt)},null,8,["resourceList"]),Pt,T("div",Tt,[(S(!0),U(_e,null,Ae(we(Z),(l,d)=>Ee((S(),U("span",{class:"switch-button",key:d,onClick:f=>c(l.key)},[T("b",Lt,K(l.name),1),Rt],8,xt)),[[ve,l.key!==i.currentRoom]])),128))]),(S(!0),U(_e,null,Ae(o.value,(l,d)=>Ee((S(),U("div",{class:Pe(["point",[`point-${d}`,`point-${l.key}`]]),key:d,onClick:f=>A(l)},[T("div",{class:Pe(["point-label animate-point-wave",[`label-${d}`,`label-${l.key}`]])},[T("label",kt,[T("div",Mt,[T("i",{class:"point-cover__icon",style:it({background:`url(${l.cover}) no-repeat center`,"background-size":"contain"})},null,4)]),T("div",Ct,[T("p",Dt,K(l.value),1),T("p",St,K(l.description),1)])])],2)],10,Ot)),[[ve,l.room===i.currentRoom]])),128))]))}},Nt=ke(jt,[["__scopeId","data-v-f9f811e2"]]);export{Nt as default};
