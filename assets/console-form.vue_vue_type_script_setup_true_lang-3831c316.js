import{x as w,y as D,z as E,A as S,o as B,m as T,B as q,p as A}from"./vendor-5fa84e51.js";import{d as I,b as c,m as K,S as N,R as a,O as t,ak as O,V as i,W as _,u as p,t as P}from"./@vue-30559afa.js";const R=P("label",{class:"operation-label"},"指令：",-1),z=I({__name:"console-form",props:{localStream:{type:MediaStream,required:!0},dataChannel:{type:RTCDataChannel,required:!0},peerConnection:{type:RTCPeerConnection,required:!0},btnDiabled:{type:Boolean,required:!0}},setup(l,{expose:C}){const d=l,r=c(""),m=c(""),o=c(!1),n=c(!0),v=e=>{m.value+=`${e}
`},f=()=>{d.dataChannel.send(r.value),v(`发送指令：${r.value}`),r.value=""},h=()=>{d.localStream.getTracks().forEach(e=>{e.stop()}),d.peerConnection.close()},g=()=>{o.value=!o.value,d.localStream.getAudioTracks().forEach(e=>{e.enabled=o.value})},k=()=>{n.value=!n.value,d.localStream.getVideoTracks().forEach(e=>{e.enabled=n.value})};return C({writeInfo:v}),(e,u)=>{const y=B,s=T,x=q,V=A;return K(),N(V,{class:"box-card"},{default:a(()=>[R,t(y,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=b=>r.value=b),style:{width:"200px","margin-right":"20px"},placeholder:"要发送的指令",clearable:"",disabled:l.btnDiabled,onKeyup:O(f,["enter"])},null,8,["modelValue","disabled","onKeyup"]),t(s,{type:"primary",onClick:f,disabled:l.btnDiabled},{default:a(()=>[i("发送指令")]),_:1},8,["disabled"]),t(s,{type:o.value?"warning":"primary",onClick:g,disabled:l.btnDiabled,icon:o.value?p(w):p(D)},{default:a(()=>[i(_(o.value?"关闭":"打开")+"麦克风 ",1)]),_:1},8,["type","disabled","icon"]),t(s,{type:n.value?"warning":"primary",onClick:k,icon:n.value?p(E):p(S)},{default:a(()=>[i(_(n.value?"关闭":"打开")+"视频",1)]),_:1},8,["type","icon"]),t(s,{type:"danger",onClick:h,disabled:l.btnDiabled},{default:a(()=>[i("关闭连接")]),_:1},8,["disabled"]),t(x,{placement:"bottom",title:"指令面板",width:500,trigger:"click"},{reference:a(()=>[t(s,{disabled:l.btnDiabled},{default:a(()=>[i("打开对话框")]),_:1},8,["disabled"])]),default:a(()=>[t(y,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=b=>m.value=b),readonly:"",placeholder:"Please input",rows:6,"show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})}}});export{z as _};
