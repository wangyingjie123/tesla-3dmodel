var He=Object.defineProperty,je=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var we=(a,n,s)=>n in a?He(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,J=(a,n)=>{for(var s in n||(n={}))We.call(n,s)&&we(a,s,n[s]);if(xe)for(var s of xe(n))Ue.call(n,s)&&we(a,s,n[s]);return a},Se=(a,n)=>je(a,Ke(n));var j=(a,n,s)=>new Promise((o,i)=>{var c=r=>{try{m(s.next(r))}catch(p){i(p)}},d=r=>{try{m(s.throw(r))}catch(p){i(p)}},m=r=>r.done?o(r.value):Promise.resolve(r.value).then(c,d);m((s=s.apply(a,n)).next())});import{H as v,ah as Ye,ai as _e,r as $,B as Ce,k as Xe,$ as qe,l as Q,a1 as Ie,A as Ze,U as ne,aa as ee,d as $e,aj as Ge,ak as Je,al as Qe,am as et,an as tt,ao as at,u as Ee,ap as te,aq as ot,ar as st,as as nt,at as lt,a6 as rt,D as ae,f as it,au as M,av as ut,i as dt,O as ct,o as f,c as x,s as y,F as oe,n as h,m as t,q as K,e as P,W as w,w as A,Z as W,N as L,aw as se,a as pt,ax as ft,L as vt,ay as mt,t as U,x as yt,y as ht,a2 as bt,Y as ze,az as ke,z as gt}from"./index-94e44db4.js";const xt=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),wt=["class","style"],St=/^on[A-Z]/,Ct=(a={})=>{const{excludeListeners:n=!1,excludeKeys:s}=a,o=v(()=>((s==null?void 0:s.value)||[]).concat(wt)),i=_e();return i?v(()=>{var c;return Ye(Object.entries((c=i.proxy)==null?void 0:c.$attrs).filter(([d])=>!o.value.includes(d)&&!(n&&St.test(d))))}):v(()=>({}))};function It(a){const n=$();function s(){if(a.value==null)return;const{selectionStart:i,selectionEnd:c,value:d}=a.value;if(i==null||c==null)return;const m=d.slice(0,Math.max(0,i)),r=d.slice(Math.max(0,c));n.value={selectionStart:i,selectionEnd:c,value:d,beforeTxt:m,afterTxt:r}}function o(){if(a.value==null||n.value==null)return;const{value:i}=a.value,{beforeTxt:c,afterTxt:d,selectionStart:m}=n.value;if(c==null||d==null||m==null)return;let r=i.length;if(i.endsWith(d))r=i.length-d.length;else if(i.startsWith(c))r=c.length;else{const p=c[m-1],S=i.indexOf(p,m-1);S!==-1&&(r=S+1)}a.value.setSelectionRange(r,r)}return[s,o]}let b;const Et=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,zt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function kt(a){const n=window.getComputedStyle(a),s=n.getPropertyValue("box-sizing"),o=Number.parseFloat(n.getPropertyValue("padding-bottom"))+Number.parseFloat(n.getPropertyValue("padding-top")),i=Number.parseFloat(n.getPropertyValue("border-bottom-width"))+Number.parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:zt.map(d=>`${d}:${n.getPropertyValue(d)}`).join(";"),paddingSize:o,borderSize:i,boxSizing:s}}function Pe(a,n=1,s){var o;b||(b=document.createElement("textarea"),document.body.appendChild(b));const{paddingSize:i,borderSize:c,boxSizing:d,contextStyle:m}=kt(a);b.setAttribute("style",`${m};${Et}`),b.value=a.value||a.placeholder||"";let r=b.scrollHeight;const p={};d==="border-box"?r=r+c:d==="content-box"&&(r=r-i),b.value="";const S=b.scrollHeight-i;if(Ce(n)){let g=S*n;d==="border-box"&&(g=g+i+c),r=Math.max(g,r),p.minHeight=`${g}px`}if(Ce(s)){let g=S*s;d==="border-box"&&(g=g+i+c),r=Math.min(g,r)}return p.height=`${r}px`,(o=b.parentNode)==null||o.removeChild(b),b=void 0,p}const Pt=Xe({id:{type:String,default:void 0},size:qe,disabled:Boolean,modelValue:{type:Q([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ie},prefixIcon:{type:Ie},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Q([Object,Array,String]),default:()=>Ze({})}}),$t={[ne]:a=>ee(a),input:a=>ee(a),change:a=>ee(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Nt=["role"],Vt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Ft=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Tt=$e({name:"ElInput",inheritAttrs:!1}),Bt=$e(Se(J({},Tt),{props:Pt,emits:$t,setup(a,{expose:n,emit:s}){const o=a,i=Ge(),c=Je(),d=v(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=i["aria-haspopup"],e["aria-owns"]=i["aria-owns"],e["aria-expanded"]=i["aria-expanded"]),e}),m=Ct({excludeKeys:v(()=>Object.keys(d.value))}),{form:r,formItem:p}=Qe(),{inputId:S}=et(o,{formItemContext:p}),g=tt(),E=at(),l=Ee("input"),le=Ee("textarea"),R=te(),z=te(),N=$(!1),Y=$(!1),V=$(!1),D=$(!1),re=$(),_=te(o.inputStyle),F=v(()=>R.value||z.value),ie=v(()=>{var e;return(e=r==null?void 0:r.statusIcon)!=null?e:!1}),T=v(()=>(p==null?void 0:p.validateState)||""),ue=v(()=>T.value&&ot[T.value]),Ne=v(()=>D.value?st:nt),Ve=v(()=>[i.style,o.inputStyle]),de=v(()=>[o.inputStyle,_.value,{resize:o.resize}]),C=v(()=>lt(o.modelValue)?"":String(o.modelValue)),O=v(()=>o.clearable&&!E.value&&!o.readonly&&!!C.value&&(N.value||Y.value)),X=v(()=>o.showPassword&&!E.value&&!o.readonly&&!!C.value&&(!!C.value||N.value)),k=v(()=>o.showWordLimit&&!!m.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!E.value&&!o.readonly&&!o.showPassword),q=v(()=>Array.from(C.value).length),Fe=v(()=>!!k.value&&q.value>Number(m.value.maxlength)),Te=v(()=>!!c.suffix||!!o.suffixIcon||O.value||o.showPassword||k.value||!!T.value&&ie.value),[Be,Me]=It(R);rt(z,e=>{if(!k.value||o.resize!=="both")return;const u=e[0],{width:I}=u.contentRect;re.value={right:`calc(100% - ${I+15+6}px)`}});const H=()=>{const{type:e,autosize:u}=o;if(!(!bt||e!=="textarea"))if(u){const I=ze(u)?u.minRows:void 0,G=ze(u)?u.maxRows:void 0;_.value=J({},Pe(z.value,I,G))}else _.value={minHeight:Pe(z.value).minHeight}},B=()=>{const e=F.value;!e||e.value===C.value||(e.value=C.value)},Z=e=>j(this,null,function*(){Be();let{value:u}=e.target;if(o.formatter&&(u=o.parser?o.parser(u):u,u=o.formatter(u)),!V.value){if(u===C.value){B();return}s(ne,u),s("input",u),yield M(),B(),Me()}}),ce=e=>{s("change",e.target.value)},pe=e=>{s("compositionstart",e),V.value=!0},fe=e=>{var u;s("compositionupdate",e);const I=(u=e.target)==null?void 0:u.value,G=I[I.length-1]||"";V.value=!xt(G)},ve=e=>{s("compositionend",e),V.value&&(V.value=!1,Z(e))},Ae=()=>{D.value=!D.value,me()},me=()=>j(this,null,function*(){var e;yield M(),(e=F.value)==null||e.focus()}),Le=()=>{var e;return(e=F.value)==null?void 0:e.blur()},ye=e=>{N.value=!0,s("focus",e)},he=e=>{var u;N.value=!1,s("blur",e),o.validateEvent&&((u=p==null?void 0:p.validate)==null||u.call(p,"blur").catch(I=>ke()))},Re=e=>{Y.value=!1,s("mouseleave",e)},De=e=>{Y.value=!0,s("mouseenter",e)},be=e=>{s("keydown",e)},Oe=()=>{var e;(e=F.value)==null||e.select()},ge=()=>{s(ne,""),s("change",""),s("clear"),s("input","")};return ae(()=>o.modelValue,()=>{var e;M(()=>H()),o.validateEvent&&((e=p==null?void 0:p.validate)==null||e.call(p,"change").catch(u=>ke()))}),ae(C,()=>B()),ae(()=>o.type,()=>j(this,null,function*(){yield M(),B(),H()})),it(()=>{!o.formatter&&o.parser,B(),M(H)}),n({input:R,textarea:z,ref:F,textareaStyle:de,autosize:ut(o,"autosize"),focus:me,blur:Le,select:Oe,clear:ge,resizeTextarea:H}),(e,u)=>dt((f(),x("div",se(t(d),{class:[e.type==="textarea"?t(le).b():t(l).b(),t(l).m(t(g)),t(l).is("disabled",t(E)),t(l).is("exceed",t(Fe)),{[t(l).b("group")]:e.$slots.prepend||e.$slots.append,[t(l).bm("group","append")]:e.$slots.append,[t(l).bm("group","prepend")]:e.$slots.prepend,[t(l).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(l).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(l).bm("suffix","password-clear")]:t(O)&&t(X)},e.$attrs.class],style:t(Ve),role:e.containerRole,onMouseenter:De,onMouseleave:Re}),[y(" input "),e.type!=="textarea"?(f(),x(oe,{key:0},[y(" prepend slot "),e.$slots.prepend?(f(),x("div",{key:0,class:h(t(l).be("group","prepend"))},[K(e.$slots,"prepend")],2)):y("v-if",!0),P("div",{class:h([t(l).e("wrapper"),t(l).is("focus",N.value)])},[y(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),x("span",{key:0,class:h(t(l).e("prefix"))},[P("span",{class:h(t(l).e("prefix-inner"))},[K(e.$slots,"prefix"),e.prefixIcon?(f(),w(t(L),{key:0,class:h(t(l).e("icon"))},{default:A(()=>[(f(),w(W(e.prefixIcon)))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0),P("input",se({id:t(S),ref_key:"input",ref:R,class:t(l).e("inner")},t(m),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(E),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:o.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Z,onFocus:ye,onBlur:he,onChange:ce,onKeydown:be}),null,16,Vt),y(" suffix slot "),t(Te)?(f(),x("span",{key:1,class:h(t(l).e("suffix"))},[P("span",{class:h(t(l).e("suffix-inner"))},[!t(O)||!t(X)||!t(k)?(f(),x(oe,{key:0},[K(e.$slots,"suffix"),e.suffixIcon?(f(),w(t(L),{key:0,class:h(t(l).e("icon"))},{default:A(()=>[(f(),w(W(e.suffixIcon)))]),_:1},8,["class"])):y("v-if",!0)],64)):y("v-if",!0),t(O)?(f(),w(t(L),{key:1,class:h([t(l).e("icon"),t(l).e("clear")]),onMousedown:vt(t(mt),["prevent"]),onClick:ge},{default:A(()=>[pt(t(ft))]),_:1},8,["class","onMousedown"])):y("v-if",!0),t(X)?(f(),w(t(L),{key:2,class:h([t(l).e("icon"),t(l).e("password")]),onClick:Ae},{default:A(()=>[(f(),w(W(t(Ne))))]),_:1},8,["class"])):y("v-if",!0),t(k)?(f(),x("span",{key:3,class:h(t(l).e("count"))},[P("span",{class:h(t(l).e("count-inner"))},U(t(q))+" / "+U(t(m).maxlength),3)],2)):y("v-if",!0),t(T)&&t(ue)&&t(ie)?(f(),w(t(L),{key:4,class:h([t(l).e("icon"),t(l).e("validateIcon"),t(l).is("loading",t(T)==="validating")])},{default:A(()=>[(f(),w(W(t(ue))))]),_:1},8,["class"])):y("v-if",!0)],2)],2)):y("v-if",!0)],2),y(" append slot "),e.$slots.append?(f(),x("div",{key:1,class:h(t(l).be("group","append"))},[K(e.$slots,"append")],2)):y("v-if",!0)],64)):(f(),x(oe,{key:1},[y(" textarea "),P("textarea",se({id:t(S),ref_key:"textarea",ref:z,class:t(le).e("inner")},t(m),{tabindex:e.tabindex,disabled:t(E),readonly:e.readonly,autocomplete:e.autocomplete,style:t(de),"aria-label":e.label,placeholder:e.placeholder,form:o.form,onCompositionstart:pe,onCompositionupdate:fe,onCompositionend:ve,onInput:Z,onFocus:ye,onBlur:he,onChange:ce,onKeydown:be}),null,16,Ft),t(k)?(f(),x("span",{key:0,style:yt(re.value),class:h(t(l).e("count"))},U(t(q))+" / "+U(t(m).maxlength),7)):y("v-if",!0)],64))],16,Nt)),[[ct,e.type!=="hidden"]])}}));var Mt=ht(Bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Rt=gt(Mt);export{Rt as E};
