import{s as Ny,u as K,c as _e,r as lu,n as Di,d as tt,i as pn,h as Gn,p as kr,a as it,w as Ot,g as g9,o as m9,b as cu,e as ni,f as nr,j as y9,k as Ne,l as Ke,m as Ct,q as ss,t as XI,v as b9,N as Sv,x as Rh,y as v0,z as Jo,A as x9,B as UB,C as jo,D as vo,E as _9,F as vt,G as Ni,H as w9,I as mg,J as bl,K as cf,L as Nt,M as Or,O as Xe,P as Xt,Q as Ft,R as so,S as Zn,T as dT,U as or,V as wr,W as S9,X as WB,Y as C9,Z as ff,_ as T9,$ as E9,a0 as k9,a1 as Ih,a2 as vw,a3 as KI,a4 as Lp,a5 as Dc,a6 as A9,a7 as R9,a8 as pT,a9 as I9,aa as P9,ab as D9,ac as $9,ad as N9,ae as O9,af as YI}from"./@vue-83231dd6.js";function HB(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const fh=typeof window<"u";function L9(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const mn=Object.assign;function ox(n,e){const t={};for(const r in e){const i=e[r];t[r]=co(i)?i.map(n):n(i)}return t}const ev=()=>{},co=Array.isArray,M9=/\/$/,B9=n=>n.replace(M9,"");function sx(n,e,t="/"){let r,i={},a="",o="";const s=e.indexOf("#");let u=e.indexOf("?");return s<u&&s>=0&&(u=-1),u>-1&&(r=e.slice(0,u),a=e.slice(u+1,s>-1?s:e.length),i=n(a)),s>-1&&(r=r||e.slice(0,s),o=e.slice(s,e.length)),r=U9(r??e,t),{fullPath:r+(a&&"?")+a+o,path:r,query:i,hash:o}}function F9(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ZI(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function V9(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Gh(e.matched[r],t.matched[i])&&GB(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Gh(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function GB(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!z9(n[t],e[t]))return!1;return!0}function z9(n,e){return co(n)?QI(n,e):co(e)?QI(e,n):n===e}function QI(n,e){return co(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function U9(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/");let i=t.length-1,a,o;for(a=0;a<r.length;a++)if(o=r[a],o!==".")if(o==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var Cv;(function(n){n.pop="pop",n.push="push"})(Cv||(Cv={}));var tv;(function(n){n.back="back",n.forward="forward",n.unknown=""})(tv||(tv={}));function W9(n){if(!n)if(fh){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),B9(n)}const H9=/^[^#]+#/;function G9(n,e){return n.replace(H9,"#")+e}function j9(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const k1=()=>({left:window.pageXOffset,top:window.pageYOffset});function q9(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=j9(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function JI(n,e){return(history.state?history.state.position-e:-1)+n}const gw=new Map;function X9(n,e){gw.set(n,e)}function K9(n){const e=gw.get(n);return gw.delete(n),e}let Y9=()=>location.protocol+"//"+location.host;function jB(n,e){const{pathname:t,search:r,hash:i}=e,a=n.indexOf("#");if(a>-1){let s=i.includes(n.slice(a))?n.slice(a).length:1,u=i.slice(s);return u[0]!=="/"&&(u="/"+u),ZI(u,"")}return ZI(t,n)+r+i}function Z9(n,e,t,r){let i=[],a=[],o=null;const s=({state:h})=>{const d=jB(n,location),p=t.value,g=e.value;let m=0;if(h){if(t.value=d,e.value=h,o&&o===p){o=null;return}m=g?h.position-g.position:0}else r(d);i.forEach(y=>{y(t.value,p,{delta:m,type:Cv.pop,direction:m?m>0?tv.forward:tv.back:tv.unknown})})};function u(){o=t.value}function l(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return a.push(d),d}function c(){const{history:h}=window;h.state&&h.replaceState(mn({},h.state,{scroll:k1()}),"")}function f(){for(const h of a)h();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:u,listen:l,destroy:f}}function eP(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?k1():null}}function Q9(n){const{history:e,location:t}=window,r={value:jB(n,t)},i={value:e.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(u,l,c){const f=n.indexOf("#"),h=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+u:Y9()+n+u;try{e[c?"replaceState":"pushState"](l,"",h),i.value=l}catch(d){console.error(d),t[c?"replace":"assign"](h)}}function o(u,l){const c=mn({},e.state,eP(i.value.back,u,i.value.forward,!0),l,{position:i.value.position});a(u,c,!0),r.value=u}function s(u,l){const c=mn({},i.value,e.state,{forward:u,scroll:k1()});a(c.current,c,!0);const f=mn({},eP(r.value,u,null),{position:c.position+1},l);a(u,f,!1),r.value=u}return{location:r,state:i,push:s,replace:o}}function P5e(n){n=W9(n);const e=Q9(n),t=Z9(n,e.state,e.location,e.replace);function r(a,o=!0){o||t.pauseListeners(),history.go(a)}const i=mn({location:"",base:n,go:r,createHref:G9.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function J9(n){return typeof n=="string"||n&&typeof n=="object"}function qB(n){return typeof n=="string"||typeof n=="symbol"}const Au={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},XB=Symbol("");var tP;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(tP||(tP={}));function jh(n,e){return mn(new Error,{type:n,[XB]:!0},e)}function Ns(n,e){return n instanceof Error&&XB in n&&(e==null||!!(n.type&e))}const nP="[^/]+?",e7={sensitive:!1,strict:!1,start:!0,end:!0},t7=/[.+*?^${}()[\]/\\]/g;function n7(n,e){const t=mn({},e7,e),r=[];let i=t.start?"^":"";const a=[];for(const l of n){const c=l.length?[]:[90];t.strict&&!l.length&&(i+="/");for(let f=0;f<l.length;f++){const h=l[f];let d=40+(t.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(t7,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=h;a.push({name:p,repeatable:g,optional:m});const b=y||nP;if(b!==nP){d+=10;try{new RegExp(`(${b})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+w.message)}}let _=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;f||(_=m&&l.length<2?`(?:/${_})`:"/"+_),m&&(_+="?"),i+=_,d+=20,m&&(d+=-8),g&&(d+=-20),b===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(t.strict&&t.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function s(l){const c=l.match(o),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=a[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function u(l){let c="",f=!1;for(const h of n){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:g,optional:m}=d,y=p in l?l[p]:"";if(co(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=co(y)?y.join("/"):y;if(!b)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c||"/"}return{re:o,score:r,keys:a,parse:s,stringify:u}}function r7(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function i7(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const a=r7(r[t],i[t]);if(a)return a;t++}if(Math.abs(i.length-r.length)===1){if(rP(r))return 1;if(rP(i))return-1}return i.length-r.length}function rP(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const a7={type:0,value:""},o7=/[a-zA-Z0-9_]/;function s7(n){if(!n)return[[]];if(n==="/")return[[a7]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(d){throw new Error(`ERR (${t})/"${l}": ${d}`)}let t=0,r=t;const i=[];let a;function o(){a&&i.push(a),a=[]}let s=0,u,l="",c="";function f(){l&&(t===0?a.push({type:0,value:l}):t===1||t===2||t===3?(a.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:l,regexp:c,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),l="")}function h(){l+=u}for(;s<n.length;){if(u=n[s++],u==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:u==="/"?(l&&f(),o()):u===":"?(f(),t=1):h();break;case 4:h(),t=r;break;case 1:u==="("?t=2:o7.test(u)?h():(f(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&s--);break;case 2:u===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+u:t=3:c+=u;break;case 3:f(),t=0,u!=="*"&&u!=="?"&&u!=="+"&&s--,c="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),i}function u7(n,e,t){const r=n7(s7(n.path),t),i=mn(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function l7(n,e){const t=[],r=new Map;e=oP({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function a(c,f,h){const d=!h,p=c7(c);p.aliasOf=h&&h.record;const g=oP(e,c),m=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of _)m.push(mn({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let y,b;for(const _ of m){const{path:w}=_;if(f&&w[0]!=="/"){const T=f.record.path,E=T[T.length-1]==="/"?"":"/";_.path=f.record.path+(w&&E+w)}if(y=u7(_,f,g),h?h.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),d&&c.name&&!aP(y)&&o(c.name)),p.children){const T=p.children;for(let E=0;E<T.length;E++)a(T[E],y,h&&h.children[E])}h=h||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&u(y)}return b?()=>{o(b)}:ev}function o(c){if(qB(c)){const f=r.get(c);f&&(r.delete(c),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(c);f>-1&&(t.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function s(){return t}function u(c){let f=0;for(;f<t.length&&i7(c,t[f])>=0&&(c.record.path!==t[f].record.path||!KB(c,t[f]));)f++;t.splice(f,0,c),c.record.name&&!aP(c)&&r.set(c.record.name,c)}function l(c,f){let h,d={},p,g;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw jh(1,{location:c});g=h.record.name,d=mn(iP(f.params,h.keys.filter(b=>!b.optional).map(b=>b.name)),c.params&&iP(c.params,h.keys.map(b=>b.name))),p=h.stringify(d)}else if("path"in c)p=c.path,h=t.find(b=>b.re.test(p)),h&&(d=h.parse(p),g=h.record.name);else{if(h=f.name?r.get(f.name):t.find(b=>b.re.test(f.path)),!h)throw jh(1,{location:c,currentLocation:f});g=h.record.name,d=mn({},f.params,c.params),p=h.stringify(d)}const m=[];let y=h;for(;y;)m.unshift(y.record),y=y.parent;return{name:g,path:p,params:d,matched:m,meta:h7(m)}}return n.forEach(c=>a(c)),{addRoute:a,resolve:l,removeRoute:o,getRoutes:s,getRecordMatcher:i}}function iP(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function c7(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:f7(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function f7(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="boolean"?t:t[r];return e}function aP(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function h7(n){return n.reduce((e,t)=>mn(e,t.meta),{})}function oP(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function KB(n,e){return e.children.some(t=>t===n||KB(n,t))}const YB=/#/g,d7=/&/g,p7=/\//g,v7=/=/g,g7=/\?/g,ZB=/\+/g,m7=/%5B/g,y7=/%5D/g,QB=/%5E/g,b7=/%60/g,JB=/%7B/g,x7=/%7C/g,e3=/%7D/g,_7=/%20/g;function vT(n){return encodeURI(""+n).replace(x7,"|").replace(m7,"[").replace(y7,"]")}function w7(n){return vT(n).replace(JB,"{").replace(e3,"}").replace(QB,"^")}function mw(n){return vT(n).replace(ZB,"%2B").replace(_7,"+").replace(YB,"%23").replace(d7,"%26").replace(b7,"`").replace(JB,"{").replace(e3,"}").replace(QB,"^")}function S7(n){return mw(n).replace(v7,"%3D")}function C7(n){return vT(n).replace(YB,"%23").replace(g7,"%3F")}function T7(n){return n==null?"":C7(n).replace(p7,"%2F")}function g0(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function E7(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const a=r[i].replace(ZB," "),o=a.indexOf("="),s=g0(o<0?a:a.slice(0,o)),u=o<0?null:g0(a.slice(o+1));if(s in e){let l=e[s];co(l)||(l=e[s]=[l]),l.push(u)}else e[s]=u}return e}function sP(n){let e="";for(let t in n){const r=n[t];if(t=S7(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(co(r)?r.map(a=>a&&mw(a)):[r&&mw(r)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+t,a!=null&&(e+="="+a))})}return e}function k7(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=co(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const A7=Symbol(""),uP=Symbol(""),gT=Symbol(""),t3=Symbol(""),yw=Symbol("");function ip(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n,reset:t}}function zu(n,e,t,r,i){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,s)=>{const u=f=>{f===!1?s(jh(4,{from:t,to:e})):f instanceof Error?s(f):J9(f)?s(jh(2,{from:e,to:f})):(a&&r.enterCallbacks[i]===a&&typeof f=="function"&&a.push(f),o())},l=n.call(r&&r.instances[i],e,t,u);let c=Promise.resolve(l);n.length<3&&(c=c.then(u)),c.catch(f=>s(f))})}function ux(n,e,t,r){const i=[];for(const a of n)for(const o in a.components){let s=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(R7(s)){const l=(s.__vccOpts||s)[e];l&&i.push(zu(l,t,r,a,o))}else{let u=s();i.push(()=>u.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const c=L9(l)?l.default:l;a.components[o]=c;const h=(c.__vccOpts||c)[e];return h&&zu(h,t,r,a,o)()}))}}return i}function R7(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function lP(n){const e=pn(gT),t=pn(t3),r=_e(()=>e.resolve(K(n.to))),i=_e(()=>{const{matched:u}=r.value,{length:l}=u,c=u[l-1],f=t.matched;if(!c||!f.length)return-1;const h=f.findIndex(Gh.bind(null,c));if(h>-1)return h;const d=cP(u[l-2]);return l>1&&cP(c)===d&&f[f.length-1].path!==d?f.findIndex(Gh.bind(null,u[l-2])):h}),a=_e(()=>i.value>-1&&$7(t.params,r.value.params)),o=_e(()=>i.value>-1&&i.value===t.matched.length-1&&GB(t.params,r.value.params));function s(u={}){return D7(u)?e[K(n.replace)?"replace":"push"](K(n.to)).catch(ev):Promise.resolve()}return{route:r,href:_e(()=>r.value.href),isActive:a,isExactActive:o,navigate:s}}const I7=tt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lP,setup(n,{slots:e}){const t=lu(lP(n)),{options:r}=pn(gT),i=_e(()=>({[fP(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[fP(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const a=e.default&&e.default(t);return n.custom?a:Gn("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},a)}}}),P7=I7;function D7(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function $7(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!co(i)||i.length!==r.length||r.some((a,o)=>a!==i[o]))return!1}return!0}function cP(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const fP=(n,e,t)=>n??e??t,N7=tt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=pn(yw),i=_e(()=>n.route||r.value),a=pn(uP,0),o=_e(()=>{let l=K(a);const{matched:c}=i.value;let f;for(;(f=c[l])&&!f.components;)l++;return l}),s=_e(()=>i.value.matched[o.value]);kr(uP,_e(()=>o.value+1)),kr(A7,s),kr(yw,i);const u=it();return Ot(()=>[u.value,s.value,n.name],([l,c,f],[h,d,p])=>{c&&(c.instances[f]=l,d&&d!==c&&l&&l===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),l&&c&&(!d||!Gh(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=i.value,c=n.name,f=s.value,h=f&&f.components[c];if(!h)return hP(t.default,{Component:h,route:l});const d=f.props[c],p=d?d===!0?l.params:typeof d=="function"?d(l):d:null,m=Gn(h,mn({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(f.instances[c]=null)},ref:u}));return hP(t.default,{Component:m,route:l})||m}}});function hP(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const O7=N7;function D5e(n){const e=l7(n.routes,n),t=n.parseQuery||E7,r=n.stringifyQuery||sP,i=n.history,a=ip(),o=ip(),s=ip(),u=Ny(Au);let l=Au;fh&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ox.bind(null,de=>""+de),f=ox.bind(null,T7),h=ox.bind(null,g0);function d(de,Ce){let ye,Ee;return qB(de)?(ye=e.getRecordMatcher(de),Ee=Ce):Ee=de,e.addRoute(Ee,ye)}function p(de){const Ce=e.getRecordMatcher(de);Ce&&e.removeRoute(Ce)}function g(){return e.getRoutes().map(de=>de.record)}function m(de){return!!e.getRecordMatcher(de)}function y(de,Ce){if(Ce=mn({},Ce||u.value),typeof de=="string"){const Be=sx(t,de,Ce.path),et=e.resolve({path:Be.path},Ce),xt=i.createHref(Be.fullPath);return mn(Be,et,{params:h(et.params),hash:g0(Be.hash),redirectedFrom:void 0,href:xt})}let ye;if("path"in de)ye=mn({},de,{path:sx(t,de.path,Ce.path).path});else{const Be=mn({},de.params);for(const et in Be)Be[et]==null&&delete Be[et];ye=mn({},de,{params:f(de.params)}),Ce.params=f(Ce.params)}const Ee=e.resolve(ye,Ce),De=de.hash||"";Ee.params=c(h(Ee.params));const Me=F9(r,mn({},de,{hash:w7(De),path:Ee.path})),Ie=i.createHref(Me);return mn({fullPath:Me,hash:De,query:r===sP?k7(de.query):de.query||{}},Ee,{redirectedFrom:void 0,href:Ie})}function b(de){return typeof de=="string"?sx(t,de,u.value.path):mn({},de)}function _(de,Ce){if(l!==de)return jh(8,{from:Ce,to:de})}function w(de){return A(de)}function T(de){return w(mn(b(de),{replace:!0}))}function E(de){const Ce=de.matched[de.matched.length-1];if(Ce&&Ce.redirect){const{redirect:ye}=Ce;let Ee=typeof ye=="function"?ye(de):ye;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=b(Ee):{path:Ee},Ee.params={}),mn({query:de.query,hash:de.hash,params:"path"in Ee?{}:de.params},Ee)}}function A(de,Ce){const ye=l=y(de),Ee=u.value,De=de.state,Me=de.force,Ie=de.replace===!0,Be=E(ye);if(Be)return A(mn(b(Be),{state:typeof Be=="object"?mn({},De,Be.state):De,force:Me,replace:Ie}),Ce||ye);const et=ye;et.redirectedFrom=Ce;let xt;return!Me&&V9(r,Ee,ye)&&(xt=jh(16,{to:et,from:Ee}),le(Ee,Ee,!0,!1)),(xt?Promise.resolve(xt):$(et,Ee)).catch(Vt=>Ns(Vt)?Ns(Vt,2)?Vt:Q(Vt):X(Vt,et,Ee)).then(Vt=>{if(Vt){if(Ns(Vt,2))return A(mn({replace:Ie},b(Vt.to),{state:typeof Vt.to=="object"?mn({},De,Vt.to.state):De,force:Me}),Ce||et)}else Vt=N(et,Ee,!0,Ie,De);return D(et,Ee,Vt),Vt})}function I(de,Ce){const ye=_(de,Ce);return ye?Promise.reject(ye):Promise.resolve()}function $(de,Ce){let ye;const[Ee,De,Me]=L7(de,Ce);ye=ux(Ee.reverse(),"beforeRouteLeave",de,Ce);for(const Be of Ee)Be.leaveGuards.forEach(et=>{ye.push(zu(et,de,Ce))});const Ie=I.bind(null,de,Ce);return ye.push(Ie),Wf(ye).then(()=>{ye=[];for(const Be of a.list())ye.push(zu(Be,de,Ce));return ye.push(Ie),Wf(ye)}).then(()=>{ye=ux(De,"beforeRouteUpdate",de,Ce);for(const Be of De)Be.updateGuards.forEach(et=>{ye.push(zu(et,de,Ce))});return ye.push(Ie),Wf(ye)}).then(()=>{ye=[];for(const Be of de.matched)if(Be.beforeEnter&&!Ce.matched.includes(Be))if(co(Be.beforeEnter))for(const et of Be.beforeEnter)ye.push(zu(et,de,Ce));else ye.push(zu(Be.beforeEnter,de,Ce));return ye.push(Ie),Wf(ye)}).then(()=>(de.matched.forEach(Be=>Be.enterCallbacks={}),ye=ux(Me,"beforeRouteEnter",de,Ce),ye.push(Ie),Wf(ye))).then(()=>{ye=[];for(const Be of o.list())ye.push(zu(Be,de,Ce));return ye.push(Ie),Wf(ye)}).catch(Be=>Ns(Be,8)?Be:Promise.reject(Be))}function D(de,Ce,ye){for(const Ee of s.list())Ee(de,Ce,ye)}function N(de,Ce,ye,Ee,De){const Me=_(de,Ce);if(Me)return Me;const Ie=Ce===Au,Be=fh?history.state:{};ye&&(Ee||Ie?i.replace(de.fullPath,mn({scroll:Ie&&Be&&Be.scroll},De)):i.push(de.fullPath,De)),u.value=de,le(de,Ce,ye,Ie),Q()}let z;function F(){z||(z=i.listen((de,Ce,ye)=>{if(!Ae.listening)return;const Ee=y(de),De=E(Ee);if(De){A(mn(De,{replace:!0}),Ee).catch(ev);return}l=Ee;const Me=u.value;fh&&X9(JI(Me.fullPath,ye.delta),k1()),$(Ee,Me).catch(Ie=>Ns(Ie,12)?Ie:Ns(Ie,2)?(A(Ie.to,Ee).then(Be=>{Ns(Be,20)&&!ye.delta&&ye.type===Cv.pop&&i.go(-1,!1)}).catch(ev),Promise.reject()):(ye.delta&&i.go(-ye.delta,!1),X(Ie,Ee,Me))).then(Ie=>{Ie=Ie||N(Ee,Me,!1),Ie&&(ye.delta&&!Ns(Ie,8)?i.go(-ye.delta,!1):ye.type===Cv.pop&&Ns(Ie,20)&&i.go(-1,!1)),D(Ee,Me,Ie)}).catch(ev)}))}let G=ip(),U=ip(),H;function X(de,Ce,ye){Q(de);const Ee=U.list();return Ee.length?Ee.forEach(De=>De(de,Ce,ye)):console.error(de),Promise.reject(de)}function Z(){return H&&u.value!==Au?Promise.resolve():new Promise((de,Ce)=>{G.add([de,Ce])})}function Q(de){return H||(H=!de,F(),G.list().forEach(([Ce,ye])=>de?ye(de):Ce()),G.reset()),de}function le(de,Ce,ye,Ee){const{scrollBehavior:De}=n;if(!fh||!De)return Promise.resolve();const Me=!ye&&K9(JI(de.fullPath,0))||(Ee||!ye)&&history.state&&history.state.scroll||null;return Di().then(()=>De(de,Ce,Me)).then(Ie=>Ie&&q9(Ie)).catch(Ie=>X(Ie,de,Ce))}const ge=de=>i.go(de);let be;const ke=new Set,Ae={currentRoute:u,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:g,resolve:y,options:n,push:w,replace:T,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:U.add,isReady:Z,install(de){const Ce=this;de.component("RouterLink",P7),de.component("RouterView",O7),de.config.globalProperties.$router=Ce,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>K(u)}),fh&&!be&&u.value===Au&&(be=!0,w(i.location).catch(De=>{}));const ye={};for(const De in Au)ye[De]=_e(()=>u.value[De]);de.provide(gT,Ce),de.provide(t3,lu(ye)),de.provide(yw,u);const Ee=de.unmount;ke.add(de),de.unmount=function(){ke.delete(de),ke.size<1&&(l=Au,z&&z(),z=null,u.value=Au,be=!1,H=!1),Ee()}}};return Ae}function Wf(n){return n.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function L7(n,e){const t=[],r=[],i=[],a=Math.max(e.matched.length,n.matched.length);for(let o=0;o<a;o++){const s=e.matched[o];s&&(n.matched.find(l=>Gh(l,s))?r.push(s):t.push(s));const u=n.matched[o];u&&(e.matched.find(l=>Gh(l,u))||i.push(u))}return[t,r,i]}var M7=typeof global=="object"&&global&&global.Object===Object&&global;const n3=M7;var B7=typeof self=="object"&&self&&self.Object===Object&&self,F7=n3||B7||Function("return this")();const ms=F7;var V7=ms.Symbol;const al=V7;var r3=Object.prototype,z7=r3.hasOwnProperty,U7=r3.toString,ap=al?al.toStringTag:void 0;function W7(n){var e=z7.call(n,ap),t=n[ap];try{n[ap]=void 0;var r=!0}catch{}var i=U7.call(n);return r&&(e?n[ap]=t:delete n[ap]),i}var H7=Object.prototype,G7=H7.toString;function j7(n){return G7.call(n)}var q7="[object Null]",X7="[object Undefined]",dP=al?al.toStringTag:void 0;function _d(n){return n==null?n===void 0?X7:q7:dP&&dP in Object(n)?W7(n):j7(n)}function wd(n){return n!=null&&typeof n=="object"}var K7="[object Symbol]";function mT(n){return typeof n=="symbol"||wd(n)&&_d(n)==K7}function Y7(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var Z7=Array.isArray;const hf=Z7;var Q7=1/0,pP=al?al.prototype:void 0,vP=pP?pP.toString:void 0;function i3(n){if(typeof n=="string")return n;if(hf(n))return Y7(n,i3)+"";if(mT(n))return vP?vP.call(n):"";var e=n+"";return e=="0"&&1/n==-Q7?"-0":e}function Wc(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var J7="[object AsyncFunction]",eq="[object Function]",tq="[object GeneratorFunction]",nq="[object Proxy]";function a3(n){if(!Wc(n))return!1;var e=_d(n);return e==eq||e==tq||e==J7||e==nq}var rq=ms["__core-js_shared__"];const lx=rq;var gP=function(){var n=/[^.]+$/.exec(lx&&lx.keys&&lx.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function iq(n){return!!gP&&gP in n}var aq=Function.prototype,oq=aq.toString;function df(n){if(n!=null){try{return oq.call(n)}catch{}try{return n+""}catch{}}return""}var sq=/[\\^$.*+?()[\]{}|]/g,uq=/^\[object .+?Constructor\]$/,lq=Function.prototype,cq=Object.prototype,fq=lq.toString,hq=cq.hasOwnProperty,dq=RegExp("^"+fq.call(hq).replace(sq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pq(n){if(!Wc(n)||iq(n))return!1;var e=a3(n)?dq:uq;return e.test(df(n))}function vq(n,e){return n==null?void 0:n[e]}function pf(n,e){var t=vq(n,e);return pq(t)?t:void 0}var gq=pf(ms,"WeakMap");const bw=gq;var mP=Object.create,mq=function(){function n(){}return function(e){if(!Wc(e))return{};if(mP)return mP(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const yq=mq;function bq(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var xq=function(){try{var n=pf(Object,"defineProperty");return n({},"",{}),n}catch{}}();const yP=xq;function _q(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var wq=9007199254740991,Sq=/^(?:0|[1-9]\d*)$/;function o3(n,e){var t=typeof n;return e=e??wq,!!e&&(t=="number"||t!="symbol"&&Sq.test(n))&&n>-1&&n%1==0&&n<e}function s3(n,e,t){e=="__proto__"&&yP?yP(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function u3(n,e){return n===e||n!==n&&e!==e}var Cq=Object.prototype,Tq=Cq.hasOwnProperty;function yT(n,e,t){var r=n[e];(!(Tq.call(n,e)&&u3(r,t))||t===void 0&&!(e in n))&&s3(n,e,t)}function A1(n,e,t,r){var i=!t;t||(t={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=r?r(t[s],n[s],s,t,n):void 0;u===void 0&&(u=n[s]),i?s3(t,s,u):yT(t,s,u)}return t}var Eq=9007199254740991;function l3(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Eq}function c3(n){return n!=null&&l3(n.length)&&!a3(n)}var kq=Object.prototype;function bT(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||kq;return n===t}function Aq(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var Rq="[object Arguments]";function bP(n){return wd(n)&&_d(n)==Rq}var f3=Object.prototype,Iq=f3.hasOwnProperty,Pq=f3.propertyIsEnumerable,Dq=bP(function(){return arguments}())?bP:function(n){return wd(n)&&Iq.call(n,"callee")&&!Pq.call(n,"callee")};const $q=Dq;function Nq(){return!1}var h3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xP=h3&&typeof module=="object"&&module&&!module.nodeType&&module,Oq=xP&&xP.exports===h3,_P=Oq?ms.Buffer:void 0,Lq=_P?_P.isBuffer:void 0,Mq=Lq||Nq;const d3=Mq;var Bq="[object Arguments]",Fq="[object Array]",Vq="[object Boolean]",zq="[object Date]",Uq="[object Error]",Wq="[object Function]",Hq="[object Map]",Gq="[object Number]",jq="[object Object]",qq="[object RegExp]",Xq="[object Set]",Kq="[object String]",Yq="[object WeakMap]",Zq="[object ArrayBuffer]",Qq="[object DataView]",Jq="[object Float32Array]",eX="[object Float64Array]",tX="[object Int8Array]",nX="[object Int16Array]",rX="[object Int32Array]",iX="[object Uint8Array]",aX="[object Uint8ClampedArray]",oX="[object Uint16Array]",sX="[object Uint32Array]",Vn={};Vn[Jq]=Vn[eX]=Vn[tX]=Vn[nX]=Vn[rX]=Vn[iX]=Vn[aX]=Vn[oX]=Vn[sX]=!0;Vn[Bq]=Vn[Fq]=Vn[Zq]=Vn[Vq]=Vn[Qq]=Vn[zq]=Vn[Uq]=Vn[Wq]=Vn[Hq]=Vn[Gq]=Vn[jq]=Vn[qq]=Vn[Xq]=Vn[Kq]=Vn[Yq]=!1;function uX(n){return wd(n)&&l3(n.length)&&!!Vn[_d(n)]}function xT(n){return function(e){return n(e)}}var p3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nv=p3&&typeof module=="object"&&module&&!module.nodeType&&module,lX=nv&&nv.exports===p3,cx=lX&&n3.process,cX=function(){try{var n=nv&&nv.require&&nv.require("util").types;return n||cx&&cx.binding&&cx.binding("util")}catch{}}();const qh=cX;var wP=qh&&qh.isTypedArray,fX=wP?xT(wP):uX;const hX=fX;var dX=Object.prototype,pX=dX.hasOwnProperty;function v3(n,e){var t=hf(n),r=!t&&$q(n),i=!t&&!r&&d3(n),a=!t&&!r&&!i&&hX(n),o=t||r||i||a,s=o?Aq(n.length,String):[],u=s.length;for(var l in n)(e||pX.call(n,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||o3(l,u)))&&s.push(l);return s}function g3(n,e){return function(t){return n(e(t))}}var vX=g3(Object.keys,Object);const gX=vX;var mX=Object.prototype,yX=mX.hasOwnProperty;function bX(n){if(!bT(n))return gX(n);var e=[];for(var t in Object(n))yX.call(n,t)&&t!="constructor"&&e.push(t);return e}function _T(n){return c3(n)?v3(n):bX(n)}function xX(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var _X=Object.prototype,wX=_X.hasOwnProperty;function SX(n){if(!Wc(n))return xX(n);var e=bT(n),t=[];for(var r in n)r=="constructor"&&(e||!wX.call(n,r))||t.push(r);return t}function wT(n){return c3(n)?v3(n,!0):SX(n)}var CX=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,TX=/^\w*$/;function EX(n,e){if(hf(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||mT(n)?!0:TX.test(n)||!CX.test(n)||e!=null&&n in Object(e)}var kX=pf(Object,"create");const Tv=kX;function AX(){this.__data__=Tv?Tv(null):{},this.size=0}function RX(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var IX="__lodash_hash_undefined__",PX=Object.prototype,DX=PX.hasOwnProperty;function $X(n){var e=this.__data__;if(Tv){var t=e[n];return t===IX?void 0:t}return DX.call(e,n)?e[n]:void 0}var NX=Object.prototype,OX=NX.hasOwnProperty;function LX(n){var e=this.__data__;return Tv?e[n]!==void 0:OX.call(e,n)}var MX="__lodash_hash_undefined__";function BX(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Tv&&e===void 0?MX:e,this}function Hc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Hc.prototype.clear=AX;Hc.prototype.delete=RX;Hc.prototype.get=$X;Hc.prototype.has=LX;Hc.prototype.set=BX;function FX(){this.__data__=[],this.size=0}function R1(n,e){for(var t=n.length;t--;)if(u3(n[t][0],e))return t;return-1}var VX=Array.prototype,zX=VX.splice;function UX(n){var e=this.__data__,t=R1(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():zX.call(e,t,1),--this.size,!0}function WX(n){var e=this.__data__,t=R1(e,n);return t<0?void 0:e[t][1]}function HX(n){return R1(this.__data__,n)>-1}function GX(n,e){var t=this.__data__,r=R1(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function fu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}fu.prototype.clear=FX;fu.prototype.delete=UX;fu.prototype.get=WX;fu.prototype.has=HX;fu.prototype.set=GX;var jX=pf(ms,"Map");const Ev=jX;function qX(){this.size=0,this.__data__={hash:new Hc,map:new(Ev||fu),string:new Hc}}function XX(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function I1(n,e){var t=n.__data__;return XX(e)?t[typeof e=="string"?"string":"hash"]:t.map}function KX(n){var e=I1(this,n).delete(n);return this.size-=e?1:0,e}function YX(n){return I1(this,n).get(n)}function ZX(n){return I1(this,n).has(n)}function QX(n,e){var t=I1(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function xl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}xl.prototype.clear=qX;xl.prototype.delete=KX;xl.prototype.get=YX;xl.prototype.has=ZX;xl.prototype.set=QX;var JX="Expected a function";function ST(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(JX);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=t.cache;if(a.has(i))return a.get(i);var o=n.apply(this,r);return t.cache=a.set(i,o)||a,o};return t.cache=new(ST.Cache||xl),t}ST.Cache=xl;var eK=500;function tK(n){var e=ST(n,function(r){return t.size===eK&&t.clear(),r}),t=e.cache;return e}var nK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rK=/\\(\\)?/g,iK=tK(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(nK,function(t,r,i,a){e.push(i?a.replace(rK,"$1"):r||t)}),e});const aK=iK;function oK(n){return n==null?"":i3(n)}function m3(n,e){return hf(n)?n:EX(n,e)?[n]:aK(oK(n))}var sK=1/0;function y3(n){if(typeof n=="string"||mT(n))return n;var e=n+"";return e=="0"&&1/n==-sK?"-0":e}function uK(n,e){e=m3(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[y3(e[t++])];return t&&t==r?n:void 0}function b3(n,e,t){var r=n==null?void 0:uK(n,e);return r===void 0?t:r}function x3(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var lK=g3(Object.getPrototypeOf,Object);const _3=lK;function kv(){if(!arguments.length)return[];var n=arguments[0];return hf(n)?n:[n]}function cK(){this.__data__=new fu,this.size=0}function fK(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function hK(n){return this.__data__.get(n)}function dK(n){return this.__data__.has(n)}var pK=200;function vK(n,e){var t=this.__data__;if(t instanceof fu){var r=t.__data__;if(!Ev||r.length<pK-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new xl(r)}return t.set(n,e),this.size=t.size,this}function Sd(n){var e=this.__data__=new fu(n);this.size=e.size}Sd.prototype.clear=cK;Sd.prototype.delete=fK;Sd.prototype.get=hK;Sd.prototype.has=dK;Sd.prototype.set=vK;function gK(n,e){return n&&A1(e,_T(e),n)}function mK(n,e){return n&&A1(e,wT(e),n)}var w3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SP=w3&&typeof module=="object"&&module&&!module.nodeType&&module,yK=SP&&SP.exports===w3,CP=yK?ms.Buffer:void 0,TP=CP?CP.allocUnsafe:void 0;function bK(n,e){if(e)return n.slice();var t=n.length,r=TP?TP(t):new n.constructor(t);return n.copy(r),r}function xK(n,e){for(var t=-1,r=n==null?0:n.length,i=0,a=[];++t<r;){var o=n[t];e(o,t,n)&&(a[i++]=o)}return a}function S3(){return[]}var _K=Object.prototype,wK=_K.propertyIsEnumerable,EP=Object.getOwnPropertySymbols,SK=EP?function(n){return n==null?[]:(n=Object(n),xK(EP(n),function(e){return wK.call(n,e)}))}:S3;const CT=SK;function CK(n,e){return A1(n,CT(n),e)}var TK=Object.getOwnPropertySymbols,EK=TK?function(n){for(var e=[];n;)x3(e,CT(n)),n=_3(n);return e}:S3;const C3=EK;function kK(n,e){return A1(n,C3(n),e)}function T3(n,e,t){var r=e(n);return hf(n)?r:x3(r,t(n))}function AK(n){return T3(n,_T,CT)}function RK(n){return T3(n,wT,C3)}var IK=pf(ms,"DataView");const xw=IK;var PK=pf(ms,"Promise");const _w=PK;var DK=pf(ms,"Set");const ww=DK;var kP="[object Map]",$K="[object Object]",AP="[object Promise]",RP="[object Set]",IP="[object WeakMap]",PP="[object DataView]",NK=df(xw),OK=df(Ev),LK=df(_w),MK=df(ww),BK=df(bw),mc=_d;(xw&&mc(new xw(new ArrayBuffer(1)))!=PP||Ev&&mc(new Ev)!=kP||_w&&mc(_w.resolve())!=AP||ww&&mc(new ww)!=RP||bw&&mc(new bw)!=IP)&&(mc=function(n){var e=_d(n),t=e==$K?n.constructor:void 0,r=t?df(t):"";if(r)switch(r){case NK:return PP;case OK:return kP;case LK:return AP;case MK:return RP;case BK:return IP}return e});const TT=mc;var FK=Object.prototype,VK=FK.hasOwnProperty;function zK(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&VK.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var UK=ms.Uint8Array;const DP=UK;function ET(n){var e=new n.constructor(n.byteLength);return new DP(e).set(new DP(n)),e}function WK(n,e){var t=e?ET(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var HK=/\w*$/;function GK(n){var e=new n.constructor(n.source,HK.exec(n));return e.lastIndex=n.lastIndex,e}var $P=al?al.prototype:void 0,NP=$P?$P.valueOf:void 0;function jK(n){return NP?Object(NP.call(n)):{}}function qK(n,e){var t=e?ET(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var XK="[object Boolean]",KK="[object Date]",YK="[object Map]",ZK="[object Number]",QK="[object RegExp]",JK="[object Set]",eY="[object String]",tY="[object Symbol]",nY="[object ArrayBuffer]",rY="[object DataView]",iY="[object Float32Array]",aY="[object Float64Array]",oY="[object Int8Array]",sY="[object Int16Array]",uY="[object Int32Array]",lY="[object Uint8Array]",cY="[object Uint8ClampedArray]",fY="[object Uint16Array]",hY="[object Uint32Array]";function dY(n,e,t){var r=n.constructor;switch(e){case nY:return ET(n);case XK:case KK:return new r(+n);case rY:return WK(n,t);case iY:case aY:case oY:case sY:case uY:case lY:case cY:case fY:case hY:return qK(n,t);case YK:return new r;case ZK:case eY:return new r(n);case QK:return GK(n);case JK:return new r;case tY:return jK(n)}}function pY(n){return typeof n.constructor=="function"&&!bT(n)?yq(_3(n)):{}}var vY="[object Map]";function gY(n){return wd(n)&&TT(n)==vY}var OP=qh&&qh.isMap,mY=OP?xT(OP):gY;const yY=mY;var bY="[object Set]";function xY(n){return wd(n)&&TT(n)==bY}var LP=qh&&qh.isSet,_Y=LP?xT(LP):xY;const wY=_Y;var SY=1,CY=2,TY=4,E3="[object Arguments]",EY="[object Array]",kY="[object Boolean]",AY="[object Date]",RY="[object Error]",k3="[object Function]",IY="[object GeneratorFunction]",PY="[object Map]",DY="[object Number]",A3="[object Object]",$Y="[object RegExp]",NY="[object Set]",OY="[object String]",LY="[object Symbol]",MY="[object WeakMap]",BY="[object ArrayBuffer]",FY="[object DataView]",VY="[object Float32Array]",zY="[object Float64Array]",UY="[object Int8Array]",WY="[object Int16Array]",HY="[object Int32Array]",GY="[object Uint8Array]",jY="[object Uint8ClampedArray]",qY="[object Uint16Array]",XY="[object Uint32Array]",On={};On[E3]=On[EY]=On[BY]=On[FY]=On[kY]=On[AY]=On[VY]=On[zY]=On[UY]=On[WY]=On[HY]=On[PY]=On[DY]=On[A3]=On[$Y]=On[NY]=On[OY]=On[LY]=On[GY]=On[jY]=On[qY]=On[XY]=!0;On[RY]=On[k3]=On[MY]=!1;function Oy(n,e,t,r,i,a){var o,s=e&SY,u=e&CY,l=e&TY;if(t&&(o=i?t(n,r,i,a):t(n)),o!==void 0)return o;if(!Wc(n))return n;var c=hf(n);if(c){if(o=zK(n),!s)return bq(n,o)}else{var f=TT(n),h=f==k3||f==IY;if(d3(n))return bK(n,s);if(f==A3||f==E3||h&&!i){if(o=u||h?{}:pY(n),!s)return u?kK(n,mK(o,n)):CK(n,gK(o,n))}else{if(!On[f])return i?n:{};o=dY(n,f,s)}}a||(a=new Sd);var d=a.get(n);if(d)return d;a.set(n,o),wY(n)?n.forEach(function(m){o.add(Oy(m,e,t,m,n,a))}):yY(n)&&n.forEach(function(m,y){o.set(y,Oy(m,e,t,y,n,a))});var p=l?u?RK:AK:u?wT:_T,g=c?void 0:p(n);return _q(g||n,function(m,y){g&&(y=m,m=n[y]),yT(o,y,Oy(m,e,t,y,n,a))}),o}var KY=4;function MP(n){return Oy(n,KY)}function R3(n){for(var e=-1,t=n==null?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}function P1(n){return n==null}function YY(n,e,t,r){if(!Wc(n))return n;e=m3(e,n);for(var i=-1,a=e.length,o=a-1,s=n;s!=null&&++i<a;){var u=y3(e[i]),l=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return n;if(i!=o){var c=s[u];l=r?r(c,u,s):void 0,l===void 0&&(l=Wc(c)?c:o3(e[i+1])?[]:{})}yT(s,u,l),s=s[u]}return n}function ZY(n,e,t){return n==null?n:YY(n,e,t)}const Ly=function(n,e,...t){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const i=document.createEvent(r);return i.initEvent(e,...t),n.dispatchEvent(i),n},Fs=(n,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const a=n==null?void 0:n(i);if(t===!1||!a)return e==null?void 0:e(i)};var BP;const di=typeof window<"u",D1=n=>typeof n=="boolean",eu=n=>typeof n=="number",QY=n=>typeof n=="string",JY=()=>{};di&&((BP=window==null?void 0:window.navigator)!=null&&BP.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function m0(n){return typeof n=="function"?n():K(n)}function eZ(n,e){function t(...r){n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})}return t}function tZ(n,e={}){let t,r;return a=>{const o=m0(n),s=m0(e.maxWait);if(t&&clearTimeout(t),o<=0||s!==void 0&&s<=0)return r&&(clearTimeout(r),r=null),a();s&&!r&&(r=setTimeout(()=>{t&&clearTimeout(t),r=null,a()},s)),t=setTimeout(()=>{r&&clearTimeout(r),r=null,a()},o)}}function nZ(n){return n}function $1(n){return g9()?(m9(n),!0):!1}function rZ(n,e=200,t={}){return eZ(tZ(e,t),n)}function iZ(n,e=200,t={}){const r=it(n.value),i=rZ(()=>{r.value=n.value},e,t);return Ot(n,()=>i()),r}function aZ(n,e=!0){cu()?ni(n):e?n():Di(n)}function Sw(n,e,t={}){const{immediate:r=!0}=t,i=it(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function s(){i.value=!1,o()}function u(...l){o(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,n(...l)},m0(e))}return r&&(i.value=!0,di&&u()),$1(s),{isPending:i,start:u,stop:s}}function ju(n){var e;const t=m0(n);return(e=t==null?void 0:t.$el)!=null?e:t}const kT=di?window:void 0;function Mp(...n){let e,t,r,i;if(QY(n[0])||Array.isArray(n[0])?([t,r,i]=n,e=kT):[e,t,r,i]=n,!e)return JY;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const a=[],o=()=>{a.forEach(c=>c()),a.length=0},s=(c,f,h)=>(c.addEventListener(f,h,i),()=>c.removeEventListener(f,h,i)),u=Ot(()=>ju(e),c=>{o(),c&&a.push(...t.flatMap(f=>r.map(h=>s(c,f,h))))},{immediate:!0,flush:"post"}),l=()=>{u(),o()};return $1(l),l}function oZ(n,e,t={}){const{window:r=kT,ignore:i,capture:a=!0,detectIframe:o=!1}=t;if(!r)return;let s=!0,u;const l=d=>{r.clearTimeout(u);const p=ju(n);if(!(!p||p===d.target||d.composedPath().includes(p))){if(!s){s=!0;return}e(d)}},c=d=>i&&i.some(p=>{const g=ju(p);return g&&(d.target===g||d.composedPath().includes(g))}),f=[Mp(r,"click",l,{passive:!0,capture:a}),Mp(r,"pointerdown",d=>{const p=ju(n);p&&(s=!d.composedPath().includes(p)&&!c(d))},{passive:!0}),Mp(r,"pointerup",d=>{if(d.button===0){const p=d.composedPath();d.composedPath=()=>p,u=r.setTimeout(()=>l(d),50)}},{passive:!0}),o&&Mp(r,"blur",d=>{var p;const g=ju(n);((p=r.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(g!=null&&g.contains(r.document.activeElement))&&e(d)})].filter(Boolean);return()=>f.forEach(d=>d())}function sZ(n,e=!1){const t=it(),r=()=>t.value=Boolean(n());return r(),aZ(r,e),t}const Cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tw="__vueuse_ssr_handlers__";Cw[Tw]=Cw[Tw]||{};Cw[Tw];var FP=Object.getOwnPropertySymbols,uZ=Object.prototype.hasOwnProperty,lZ=Object.prototype.propertyIsEnumerable,cZ=(n,e)=>{var t={};for(var r in n)uZ.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&FP)for(var r of FP(n))e.indexOf(r)<0&&lZ.call(n,r)&&(t[r]=n[r]);return t};function N1(n,e,t={}){const r=t,{window:i=kT}=r,a=cZ(r,["window"]);let o;const s=sZ(()=>i&&"ResizeObserver"in i),u=()=>{o&&(o.disconnect(),o=void 0)},l=Ot(()=>ju(n),f=>{u(),s.value&&i&&f&&(o=new ResizeObserver(e),o.observe(f,a))},{immediate:!0,flush:"post"}),c=()=>{u(),l()};return $1(c),{isSupported:s,stop:c}}var VP;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(VP||(VP={}));var fZ=Object.defineProperty,zP=Object.getOwnPropertySymbols,hZ=Object.prototype.hasOwnProperty,dZ=Object.prototype.propertyIsEnumerable,UP=(n,e,t)=>e in n?fZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pZ=(n,e)=>{for(var t in e||(e={}))hZ.call(e,t)&&UP(n,t,e[t]);if(zP)for(var t of zP(e))dZ.call(e,t)&&UP(n,t,e[t]);return n};const vZ={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};pZ({linear:nZ},vZ);const gZ=n=>n===void 0,Av=n=>typeof Element>"u"?!1:n instanceof Element,mZ=n=>nr(n)?!Number.isNaN(Number(n)):!1,WP=n=>Object.keys(n),fx=(n,e,t)=>({get value(){return b3(n,e,t)},set value(r){ZY(n,e,r)}});class yZ extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Rv(n,e){throw new yZ(`[${n}] ${e}`)}const I3=(n="")=>n.split(" ").filter(e=>!!e.trim()),bZ=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},xh=(n,e)=>{!n||!e.trim()||n.classList.add(...I3(e))},$c=(n,e)=>{!n||!e.trim()||n.classList.remove(...I3(e))},op=(n,e)=>{var t;if(!di||!n||!e)return"";let r=y9(e);r==="float"&&(r="cssFloat");try{const i=n.style[r];if(i)return i;const a=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return a?a[r]:""}catch{return n.style[r]}};function Ew(n,e="px"){if(!n)return"";if(eu(n)||mZ(n))return`${n}${e}`;if(nr(n))return n}/*! Element Plus Icons Vue v2.0.10 */var yi=(n,e)=>{let t=n.__vccOpts||n;for(let[r,i]of e)t[r]=i;return t},xZ={name:"ArrowDown"},_Z={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},wZ=Ct("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),SZ=[wZ];function CZ(n,e,t,r,i,a){return Ne(),Ke("svg",_Z,SZ)}var TZ=yi(xZ,[["render",CZ],["__file","arrow-down.vue"]]),EZ={name:"ArrowRight"},kZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},AZ=Ct("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),RZ=[AZ];function IZ(n,e,t,r,i,a){return Ne(),Ke("svg",kZ,RZ)}var P3=yi(EZ,[["render",IZ],["__file","arrow-right.vue"]]),PZ={name:"Check"},DZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$Z=Ct("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),NZ=[$Z];function OZ(n,e,t,r,i,a){return Ne(),Ke("svg",DZ,NZ)}var LZ=yi(PZ,[["render",OZ],["__file","check.vue"]]),MZ={name:"CircleCheck"},BZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},FZ=Ct("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),VZ=Ct("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),zZ=[FZ,VZ];function UZ(n,e,t,r,i,a){return Ne(),Ke("svg",BZ,zZ)}var D3=yi(MZ,[["render",UZ],["__file","circle-check.vue"]]),WZ={name:"CircleCloseFilled"},HZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},GZ=Ct("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),jZ=[GZ];function qZ(n,e,t,r,i,a){return Ne(),Ke("svg",HZ,jZ)}var $3=yi(WZ,[["render",qZ],["__file","circle-close-filled.vue"]]),XZ={name:"CircleClose"},KZ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},YZ=Ct("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),ZZ=Ct("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),QZ=[YZ,ZZ];function JZ(n,e,t,r,i,a){return Ne(),Ke("svg",KZ,QZ)}var AT=yi(XZ,[["render",JZ],["__file","circle-close.vue"]]),eQ={name:"Close"},tQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},nQ=Ct("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),rQ=[nQ];function iQ(n,e,t,r,i,a){return Ne(),Ke("svg",tQ,rQ)}var N3=yi(eQ,[["render",iQ],["__file","close.vue"]]),aQ={name:"Hide"},oQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},sQ=Ct("path",{d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z",fill:"currentColor"},null,-1),uQ=Ct("path",{d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z",fill:"currentColor"},null,-1),lQ=[sQ,uQ];function cQ(n,e,t,r,i,a){return Ne(),Ke("svg",oQ,lQ)}var fQ=yi(aQ,[["render",cQ],["__file","hide.vue"]]),hQ={name:"InfoFilled"},dQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pQ=Ct("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),vQ=[pQ];function gQ(n,e,t,r,i,a){return Ne(),Ke("svg",dQ,vQ)}var O3=yi(hQ,[["render",gQ],["__file","info-filled.vue"]]),mQ={name:"Loading"},yQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},bQ=Ct("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),xQ=[bQ];function _Q(n,e,t,r,i,a){return Ne(),Ke("svg",yQ,xQ)}var L3=yi(mQ,[["render",_Q],["__file","loading.vue"]]),wQ={name:"More"},SQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},CQ=Ct("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),TQ=[CQ];function EQ(n,e,t,r,i,a){return Ne(),Ke("svg",SQ,TQ)}var kQ=yi(wQ,[["render",EQ],["__file","more.vue"]]),AQ={name:"PictureFilled"},RQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},IQ=Ct("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),PQ=[IQ];function DQ(n,e,t,r,i,a){return Ne(),Ke("svg",RQ,PQ)}var $Q=yi(AQ,[["render",DQ],["__file","picture-filled.vue"]]),NQ={name:"SuccessFilled"},OQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},LQ=Ct("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),MQ=[LQ];function BQ(n,e,t,r,i,a){return Ne(),Ke("svg",OQ,MQ)}var M3=yi(NQ,[["render",BQ],["__file","success-filled.vue"]]),FQ={name:"View"},VQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},zQ=Ct("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),UQ=[zQ];function WQ(n,e,t,r,i,a){return Ne(),Ke("svg",VQ,UQ)}var HQ=yi(FQ,[["render",WQ],["__file","view.vue"]]),GQ={name:"WarningFilled"},jQ={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qQ=Ct("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),XQ=[qQ];function KQ(n,e,t,r,i,a){return Ne(),Ke("svg",jQ,XQ)}var RT=yi(GQ,[["render",KQ],["__file","warning-filled.vue"]]);const B3="__epPropKey",pt=n=>n,YQ=n=>ss(n)&&!!n[B3],O1=(n,e)=>{if(!ss(n)||YQ(n))return n;const{values:t,required:r,default:i,type:a,validator:o}=n,u={type:a,required:!!r,validator:t||o?l=>{let c=!1,f=[];if(t&&(f=Array.from(t),XI(n,"default")&&f.push(i),c||(c=f.includes(l))),o&&(c||(c=o(l))),!c&&f.length>0){const h=[...new Set(f)].map(d=>JSON.stringify(d)).join(", ");b9(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${h}], got value ${JSON.stringify(l)}.`)}return c}:void 0,[B3]:!0};return XI(n,"default")&&(u.default=i),u},vn=n=>R3(Object.entries(n).map(([e,t])=>[e,O1(t,e)])),js=pt([String,Object,Function]),ZQ={Close:N3,SuccessFilled:M3,InfoFilled:O3,WarningFilled:RT,CircleCloseFilled:$3},HP={success:M3,warning:RT,error:$3,info:O3},QQ={validating:L3,success:D3,error:AT},ri=(n,e)=>{if(n.install=t=>{for(const r of[n,...Object.values(e??{})])t.component(r.name,r)},e)for(const[t,r]of Object.entries(e))n[t]=r;return n},JQ=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),go=n=>(n.install=Sv,n),hi={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},hx=["sun","mon","tue","wed","thu","fri","sat"],Gc="update:modelValue",F3="change",V3="input",IT=["","default","small","large"],My=n=>{const e=Rh(n)?n:[n],t=[];return e.forEach(r=>{var i;Rh(r)?t.push(...My(r)):v0(r)&&Rh(r.children)?t.push(...My(r.children)):(t.push(r),v0(r)&&((i=r.component)!=null&&i.subTree)&&t.push(...My(r.component.subTree)))}),t},eJ=n=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(n),PT=()=>Math.floor(Math.random()*1e4),Us=n=>n,tJ=["class","style"],nJ=/^on[A-Z]/,rJ=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,r=_e(()=>((t==null?void 0:t.value)||[]).concat(tJ)),i=cu();return i?_e(()=>{var a;return R3(Object.entries((a=i.proxy)==null?void 0:a.$attrs).filter(([o])=>!r.value.includes(o)&&!(e&&nJ.test(o))))}):_e(()=>({}))},z3=Symbol("buttonGroupContextKey"),U3=Symbol("collapseContextKey"),W3=Symbol(),Cd=Symbol("formContextKey"),jc=Symbol("formItemContextKey"),H3=Symbol("rowContextKey"),DT=Symbol("popper"),G3=Symbol("popperContent"),$T=Symbol("elTooltip"),j3=n=>{const e=cu();return _e(()=>{var t,r;return(r=((t=e.proxy)==null?void 0:t.$props)[n])!=null?r:void 0})},y0=it();function _l(n,e=void 0){const t=cu()?pn(W3,y0):y0;return n?_e(()=>{var r,i;return(i=(r=t.value)==null?void 0:r[n])!=null?i:e}):t}const iJ=(n,e,t=!1)=>{var r;const i=!!cu(),a=i?_l():void 0,o=(r=e==null?void 0:e.provide)!=null?r:i?kr:void 0;if(!o)return;const s=_e(()=>{const u=K(n);return a!=null&&a.value?aJ(a.value,u):u});return o(W3,s),(t||!y0.value)&&(y0.value=s.value),s},aJ=(n,e)=>{var t;const r=[...new Set([...WP(n),...WP(e)])],i={};for(const a of r)i[a]=(t=e[a])!=null?t:n[a];return i},NT=O1({type:String,values:IT,required:!1}),L1=(n,e={})=>{const t=it(void 0),r=e.prop?t:j3("size"),i=e.global?t:_l("size"),a=e.form?{size:void 0}:pn(Cd,void 0),o=e.formItem?{size:void 0}:pn(jc,void 0);return _e(()=>r.value||K(n)||(o==null?void 0:o.size)||(a==null?void 0:a.size)||i.value||"")},OT=n=>{const e=j3("disabled"),t=pn(Cd,void 0);return _e(()=>e.value||K(n)||(t==null?void 0:t.disabled)||!1)},q3=({from:n,replacement:e,scope:t,version:r,ref:i,type:a="API"},o)=>{Ot(()=>K(o),s=>{},{immediate:!0})},LT="el",oJ="is-",Hl=(n,e,t,r,i)=>{let a=`${n}-${e}`;return t&&(a+=`-${t}`),r&&(a+=`__${r}`),i&&(a+=`--${i}`),a},Rt=n=>{const e=_l("namespace",LT);return{namespace:e,b:(p="")=>Hl(e.value,n,p,"",""),e:p=>p?Hl(e.value,n,"",p,""):"",m:p=>p?Hl(e.value,n,"","",p):"",be:(p,g)=>p&&g?Hl(e.value,n,p,g,""):"",em:(p,g)=>p&&g?Hl(e.value,n,"",p,g):"",bm:(p,g)=>p&&g?Hl(e.value,n,p,"",g):"",bem:(p,g,m)=>p&&g&&m?Hl(e.value,n,p,g,m):"",is:(p,...g)=>{const m=g.length>=1?g[0]:!0;return p&&m?`${oJ}${p}`:""},cssVar:p=>{const g={};for(const m in p)p[m]&&(g[`--${e.value}-${m}`]=p[m]);return g},cssVarName:p=>`--${e.value}-${p}`,cssVarBlock:p=>{const g={};for(const m in p)p[m]&&(g[`--${e.value}-${n}-${m}`]=p[m]);return g},cssVarBlockName:p=>`--${e.value}-${n}-${p}`}},sJ={prefix:Math.floor(Math.random()*1e4),current:0},uJ=Symbol("elIdInjection"),MT=n=>{const e=pn(uJ,sJ),t=_l("namespace",LT);return _e(()=>K(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},X3=()=>{const n=pn(Cd,void 0),e=pn(jc,void 0);return{form:n,formItem:e}},lJ=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:r})=>{t||(t=it(!1)),r||(r=it(!1));const i=it();let a;const o=_e(()=>{var s;return!!(!n.label&&e&&e.inputIds&&((s=e.inputIds)==null?void 0:s.length)<=1)});return ni(()=>{a=Ot([Jo(n,"id"),t],([s,u])=>{const l=s??(u?void 0:MT().value);l!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!u&&l&&e.addInputId(l)),i.value=l)},{immediate:!0})}),x9(()=>{a&&a(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:o,inputId:i}};var cJ={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const fJ=n=>(e,t)=>hJ(e,t,K(n)),hJ=(n,e,t)=>b3(t,n,n).replace(/\{(\w+)\}/g,(r,i)=>{var a;return`${(a=e==null?void 0:e[i])!=null?a:`{${i}}`}`}),dJ=n=>{const e=_e(()=>K(n).name),t=UB(n)?n:it(n);return{lang:e,locale:t,t:fJ(n)}},BT=()=>{const n=_l("locale");return dJ(_e(()=>n.value||cJ))},pJ=O1({type:pt(Boolean),default:null}),vJ=O1({type:pt(Function)}),gJ=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,r=[e],i={[n]:pJ,[t]:vJ};return{useModelToggle:({indicator:o,toggleReason:s,shouldHideWhenRouteChanges:u,shouldProceed:l,onShow:c,onHide:f})=>{const h=cu(),{emit:d}=h,p=h.props,g=_e(()=>jo(p[t])),m=_e(()=>p[n]===null),y=A=>{o.value!==!0&&(o.value=!0,s&&(s.value=A),jo(c)&&c(A))},b=A=>{o.value!==!1&&(o.value=!1,s&&(s.value=A),jo(f)&&f(A))},_=A=>{if(p.disabled===!0||jo(l)&&!l())return;const I=g.value&&di;I&&d(e,!0),(m.value||!I)&&y(A)},w=A=>{if(p.disabled===!0||!di)return;const I=g.value&&di;I&&d(e,!1),(m.value||!I)&&b(A)},T=A=>{D1(A)&&(p.disabled&&A?g.value&&d(e,!1):o.value!==A&&(A?y():b()))},E=()=>{o.value?w():_()};return Ot(()=>p[n],T),u&&h.appContext.config.globalProperties.$route!==void 0&&Ot(()=>({...h.proxy.$route}),()=>{u.value&&o.value&&w()}),ni(()=>{T(p[n])}),{hide:w,show:_,toggle:E,hasUpdateHandler:g}},useModelToggleProps:i,useModelToggleEmits:r}},mJ=(n,e=0)=>{if(e===0)return n;const t=it(!1);let r=0;const i=()=>{r&&clearTimeout(r),r=window.setTimeout(()=>{t.value=n.value},e)};return ni(i),Ot(()=>n.value,a=>{a?i():t.value=a}),t};function yJ(){let n;const e=(r,i)=>{t(),n=window.setTimeout(r,i)},t=()=>window.clearTimeout(n);return $1(()=>t()),{registerTimeout:e,cancelTimeout:t}}let hh=[];const GP=n=>{const e=n;e.key===hi.esc&&hh.forEach(t=>t(e))},bJ=n=>{ni(()=>{hh.length===0&&document.addEventListener("keydown",GP),di&&hh.push(n)}),vo(()=>{hh=hh.filter(e=>e!==n),hh.length===0&&di&&document.removeEventListener("keydown",GP)})};let jP;const xJ=_l("namespace",LT),K3=`${xJ.value}-popper-container-${PT()}`,Y3=`#${K3}`,_J=()=>{const n=document.createElement("div");return n.id=K3,document.body.appendChild(n),n},wJ=()=>{_9(()=>{di&&(!jP||!document.body.querySelector(Y3))&&(jP=_J())})},SJ=vn({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),CJ=({showAfter:n,hideAfter:e,open:t,close:r})=>{const{registerTimeout:i}=yJ();return{onOpen:s=>{i(()=>{t(s)},K(n))},onClose:s=>{i(()=>{r(s)},K(e))}}},Z3=Symbol("elForwardRef"),TJ=n=>{kr(Z3,{setForwardRef:t=>{n.value=t}})},EJ=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),qP=it(0),FT=()=>{const n=_l("zIndex",2e3),e=_e(()=>n.value+qP.value);return{initialZIndex:n,currentZIndex:e,nextZIndex:()=>(qP.value++,e.value)}};function kJ(n){const e=it();function t(){if(n.value==null)return;const{selectionStart:i,selectionEnd:a,value:o}=n.value;if(i==null||a==null)return;const s=o.slice(0,Math.max(0,i)),u=o.slice(Math.max(0,a));e.value={selectionStart:i,selectionEnd:a,value:o,beforeTxt:s,afterTxt:u}}function r(){if(n.value==null||e.value==null)return;const{value:i}=n.value,{beforeTxt:a,afterTxt:o,selectionStart:s}=e.value;if(a==null||o==null||s==null)return;let u=i.length;if(i.endsWith(o))u=i.length-o.length;else if(i.startsWith(a))u=a.length;else{const l=a[s-1],c=i.indexOf(l,s-1);c!==-1&&(u=c+1)}n.value.setSelectionRange(u,u)}return[t,r]}var Zt=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t};const AJ=vn({size:{type:pt([Number,String])},color:{type:String}}),RJ=tt({name:"ElIcon",inheritAttrs:!1}),IJ=tt({...RJ,props:AJ,setup(n){const e=n,t=Rt("icon"),r=_e(()=>{const{size:i,color:a}=e;return!i&&!a?{}:{fontSize:gZ(i)?void 0:Ew(i),"--color":a}});return(i,a)=>(Ne(),Ke("i",Ni({class:K(t).b(),style:K(r)},i.$attrs),[vt(i.$slots,"default")],16))}});var PJ=Zt(IJ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const Zi=ri(PJ);let qa;const DJ=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,$J=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function NJ(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:$J.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:t}}function XP(n,e=1,t){var r;qa||(qa=document.createElement("textarea"),document.body.appendChild(qa));const{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=NJ(n);qa.setAttribute("style",`${s};${DJ}`),qa.value=n.value||n.placeholder||"";let u=qa.scrollHeight;const l={};o==="border-box"?u=u+a:o==="content-box"&&(u=u-i),qa.value="";const c=qa.scrollHeight-i;if(eu(e)){let f=c*e;o==="border-box"&&(f=f+i+a),u=Math.max(f,u),l.minHeight=`${f}px`}if(eu(t)){let f=c*t;o==="border-box"&&(f=f+i+a),u=Math.min(f,u)}return l.height=`${u}px`,(r=qa.parentNode)==null||r.removeChild(qa),qa=void 0,l}const OJ=vn({id:{type:String,default:void 0},size:NT,disabled:Boolean,modelValue:{type:pt([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:pt([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:js},prefixIcon:{type:js},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:pt([Object,Array,String]),default:()=>Us({})}}),LJ={[Gc]:n=>nr(n),input:n=>nr(n),change:n=>nr(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},MJ=["role"],BJ=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],FJ=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],VJ=tt({name:"ElInput",inheritAttrs:!1}),zJ=tt({...VJ,props:OJ,emits:LJ,setup(n,{expose:e,emit:t}){const r=n,i=w9(),a=mg(),o=_e(()=>{const se={};return r.containerRole==="combobox"&&(se["aria-haspopup"]=i["aria-haspopup"],se["aria-owns"]=i["aria-owns"],se["aria-expanded"]=i["aria-expanded"]),se}),s=rJ({excludeKeys:_e(()=>Object.keys(o.value))}),{form:u,formItem:l}=X3(),{inputId:c}=lJ(r,{formItemContext:l}),f=L1(),h=OT(),d=Rt("input"),p=Rt("textarea"),g=Ny(),m=Ny(),y=it(!1),b=it(!1),_=it(!1),w=it(!1),T=it(),E=Ny(r.inputStyle),A=_e(()=>g.value||m.value),I=_e(()=>{var se;return(se=u==null?void 0:u.statusIcon)!=null?se:!1}),$=_e(()=>(l==null?void 0:l.validateState)||""),D=_e(()=>$.value&&QQ[$.value]),N=_e(()=>w.value?HQ:fQ),z=_e(()=>[i.style,r.inputStyle]),F=_e(()=>[r.inputStyle,E.value,{resize:r.resize}]),G=_e(()=>P1(r.modelValue)?"":String(r.modelValue)),U=_e(()=>r.clearable&&!h.value&&!r.readonly&&!!G.value&&(y.value||b.value)),H=_e(()=>r.showPassword&&!h.value&&!r.readonly&&!!G.value&&(!!G.value||y.value)),X=_e(()=>r.showWordLimit&&!!s.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!h.value&&!r.readonly&&!r.showPassword),Z=_e(()=>Array.from(G.value).length),Q=_e(()=>!!X.value&&Z.value>Number(s.value.maxlength)),le=_e(()=>!!a.suffix||!!r.suffixIcon||U.value||r.showPassword||X.value||!!$.value&&I.value),[ge,be]=kJ(g);N1(m,se=>{if(!X.value||r.resize!=="both")return;const dt=se[0],{width:Dn}=dt.contentRect;T.value={right:`calc(100% - ${Dn+15+6}px)`}});const ke=()=>{const{type:se,autosize:dt}=r;if(!(!di||se!=="textarea"))if(dt){const Dn=ss(dt)?dt.minRows:void 0,Kn=ss(dt)?dt.maxRows:void 0;E.value={...XP(m.value,Dn,Kn)}}else E.value={minHeight:XP(m.value).minHeight}},Ae=()=>{const se=A.value;!se||se.value===G.value||(se.value=G.value)},de=async se=>{ge();let{value:dt}=se.target;if(r.formatter&&(dt=r.parser?r.parser(dt):dt,dt=r.formatter(dt)),!_.value){if(dt===G.value){Ae();return}t(Gc,dt),t("input",dt),await Di(),Ae(),be()}},Ce=se=>{t("change",se.target.value)},ye=se=>{t("compositionstart",se),_.value=!0},Ee=se=>{var dt;t("compositionupdate",se);const Dn=(dt=se.target)==null?void 0:dt.value,Kn=Dn[Dn.length-1]||"";_.value=!eJ(Kn)},De=se=>{t("compositionend",se),_.value&&(_.value=!1,de(se))},Me=()=>{w.value=!w.value,Ie()},Ie=async()=>{var se;await Di(),(se=A.value)==null||se.focus()},Be=()=>{var se;return(se=A.value)==null?void 0:se.blur()},et=se=>{y.value=!0,t("focus",se)},xt=se=>{var dt;y.value=!1,t("blur",se),r.validateEvent&&((dt=l==null?void 0:l.validate)==null||dt.call(l,"blur").catch(Dn=>void 0))},Vt=se=>{b.value=!1,t("mouseleave",se)},Xn=se=>{b.value=!0,t("mouseenter",se)},ir=se=>{t("keydown",se)},bi=()=>{var se;(se=A.value)==null||se.select()},xr=()=>{t(Gc,""),t("change",""),t("clear"),t("input","")};return Ot(()=>r.modelValue,()=>{var se;Di(()=>ke()),r.validateEvent&&((se=l==null?void 0:l.validate)==null||se.call(l,"change").catch(dt=>void 0))}),Ot(G,()=>Ae()),Ot(()=>r.type,async()=>{await Di(),Ae(),ke()}),ni(()=>{!r.formatter&&r.parser,Ae(),Di(ke)}),e({input:g,textarea:m,ref:A,textareaStyle:F,autosize:Jo(r,"autosize"),focus:Ie,blur:Be,select:bi,clear:xr,resizeTextarea:ke}),(se,dt)=>bl((Ne(),Ke("div",Ni(K(o),{class:[se.type==="textarea"?K(p).b():K(d).b(),K(d).m(K(f)),K(d).is("disabled",K(h)),K(d).is("exceed",K(Q)),{[K(d).b("group")]:se.$slots.prepend||se.$slots.append,[K(d).bm("group","append")]:se.$slots.append,[K(d).bm("group","prepend")]:se.$slots.prepend,[K(d).m("prefix")]:se.$slots.prefix||se.prefixIcon,[K(d).m("suffix")]:se.$slots.suffix||se.suffixIcon||se.clearable||se.showPassword,[K(d).bm("suffix","password-clear")]:K(U)&&K(H)},se.$attrs.class],style:K(z),role:se.containerRole,onMouseenter:Xn,onMouseleave:Vt}),[Nt(" input "),se.type!=="textarea"?(Ne(),Ke(Or,{key:0},[Nt(" prepend slot "),se.$slots.prepend?(Ne(),Ke("div",{key:0,class:Xe(K(d).be("group","prepend"))},[vt(se.$slots,"prepend")],2)):Nt("v-if",!0),Ct("div",{class:Xe([K(d).e("wrapper"),K(d).is("focus",y.value)])},[Nt(" prefix slot "),se.$slots.prefix||se.prefixIcon?(Ne(),Ke("span",{key:0,class:Xe(K(d).e("prefix"))},[Ct("span",{class:Xe(K(d).e("prefix-inner"))},[vt(se.$slots,"prefix"),se.prefixIcon?(Ne(),Xt(K(Zi),{key:0,class:Xe(K(d).e("icon"))},{default:Ft(()=>[(Ne(),Xt(so(se.prefixIcon)))]),_:1},8,["class"])):Nt("v-if",!0)],2)],2)):Nt("v-if",!0),Ct("input",Ni({id:K(c),ref_key:"input",ref:g,class:K(d).e("inner")},K(s),{type:se.showPassword?w.value?"text":"password":se.type,disabled:K(h),formatter:se.formatter,parser:se.parser,readonly:se.readonly,autocomplete:se.autocomplete,tabindex:se.tabindex,"aria-label":se.label,placeholder:se.placeholder,style:se.inputStyle,form:r.form,onCompositionstart:ye,onCompositionupdate:Ee,onCompositionend:De,onInput:de,onFocus:et,onBlur:xt,onChange:Ce,onKeydown:ir}),null,16,BJ),Nt(" suffix slot "),K(le)?(Ne(),Ke("span",{key:1,class:Xe(K(d).e("suffix"))},[Ct("span",{class:Xe(K(d).e("suffix-inner"))},[!K(U)||!K(H)||!K(X)?(Ne(),Ke(Or,{key:0},[vt(se.$slots,"suffix"),se.suffixIcon?(Ne(),Xt(K(Zi),{key:0,class:Xe(K(d).e("icon"))},{default:Ft(()=>[(Ne(),Xt(so(se.suffixIcon)))]),_:1},8,["class"])):Nt("v-if",!0)],64)):Nt("v-if",!0),K(U)?(Ne(),Xt(K(Zi),{key:1,class:Xe([K(d).e("icon"),K(d).e("clear")]),onMousedown:dT(K(Sv),["prevent"]),onClick:xr},{default:Ft(()=>[Zn(K(AT))]),_:1},8,["class","onMousedown"])):Nt("v-if",!0),K(H)?(Ne(),Xt(K(Zi),{key:2,class:Xe([K(d).e("icon"),K(d).e("password")]),onClick:Me},{default:Ft(()=>[(Ne(),Xt(so(K(N))))]),_:1},8,["class"])):Nt("v-if",!0),K(X)?(Ne(),Ke("span",{key:3,class:Xe(K(d).e("count"))},[Ct("span",{class:Xe(K(d).e("count-inner"))},or(K(Z))+" / "+or(K(s).maxlength),3)],2)):Nt("v-if",!0),K($)&&K(D)&&K(I)?(Ne(),Xt(K(Zi),{key:4,class:Xe([K(d).e("icon"),K(d).e("validateIcon"),K(d).is("loading",K($)==="validating")])},{default:Ft(()=>[(Ne(),Xt(so(K(D))))]),_:1},8,["class"])):Nt("v-if",!0)],2)],2)):Nt("v-if",!0)],2),Nt(" append slot "),se.$slots.append?(Ne(),Ke("div",{key:1,class:Xe(K(d).be("group","append"))},[vt(se.$slots,"append")],2)):Nt("v-if",!0)],64)):(Ne(),Ke(Or,{key:1},[Nt(" textarea "),Ct("textarea",Ni({id:K(c),ref_key:"textarea",ref:m,class:K(p).e("inner")},K(s),{tabindex:se.tabindex,disabled:K(h),readonly:se.readonly,autocomplete:se.autocomplete,style:K(F),"aria-label":se.label,placeholder:se.placeholder,form:r.form,onCompositionstart:ye,onCompositionupdate:Ee,onCompositionend:De,onInput:de,onFocus:et,onBlur:xt,onChange:Ce,onKeydown:ir}),null,16,FJ),K(X)?(Ne(),Ke("span",{key:0,style:wr(T.value),class:Xe(K(d).e("count"))},or(K(Z))+" / "+or(K(s).maxlength),7)):Nt("v-if",!0)],64))],16,MJ)),[[cf,se.type!=="hidden"]])}});var UJ=Zt(zJ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const $5e=ri(UJ),WJ={LIGHT:"light",DARK:"dark"},HJ=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],Q3=vn({role:{type:String,values:HJ,default:"tooltip"}}),GJ=tt({name:"ElPopperRoot",inheritAttrs:!1}),jJ=tt({...GJ,props:Q3,setup(n,{expose:e}){const t=n,r=it(),i=it(),a=it(),o=it(),s=_e(()=>t.role),u={triggerRef:r,popperInstanceRef:i,contentRef:a,referenceRef:o,role:s};return e(u),kr(DT,u),(l,c)=>vt(l.$slots,"default")}});var qJ=Zt(jJ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const J3=vn({arrowOffset:{type:Number,default:5}}),XJ=tt({name:"ElPopperArrow",inheritAttrs:!1}),KJ=tt({...XJ,props:J3,setup(n,{expose:e}){const t=n,r=Rt("popper"),{arrowOffset:i,arrowRef:a}=pn(G3,void 0);return Ot(()=>t.arrowOffset,o=>{i.value=o}),vo(()=>{a.value=void 0}),e({arrowRef:a}),(o,s)=>(Ne(),Ke("span",{ref_key:"arrowRef",ref:a,class:Xe(K(r).e("arrow")),"data-popper-arrow":""},null,2))}});var YJ=Zt(KJ,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const ZJ="ElOnlyChild",QJ=tt({name:ZJ,setup(n,{slots:e,attrs:t}){var r;const i=pn(Z3),a=EJ((r=i==null?void 0:i.setForwardRef)!=null?r:Sv);return()=>{var o;const s=(o=e.default)==null?void 0:o.call(e,t);if(!s||s.length>1)return null;const u=eF(s);return u?bl(S9(u,t),[[a]]):null}}});function eF(n){if(!n)return null;const e=n;for(const t of e){if(ss(t))switch(t.type){case C9:continue;case WB:case"svg":return KP(t);case Or:return eF(t.children);default:return t}return KP(t)}return null}function KP(n){const e=Rt("only-child");return Zn("span",{class:e.e("content")},[n])}const tF=vn({virtualRef:{type:pt(Object)},virtualTriggering:Boolean,onMouseenter:{type:pt(Function)},onMouseleave:{type:pt(Function)},onClick:{type:pt(Function)},onKeydown:{type:pt(Function)},onFocus:{type:pt(Function)},onBlur:{type:pt(Function)},onContextmenu:{type:pt(Function)},id:String,open:Boolean}),JJ=tt({name:"ElPopperTrigger",inheritAttrs:!1}),eee=tt({...JJ,props:tF,setup(n,{expose:e}){const t=n,{role:r,triggerRef:i}=pn(DT,void 0);TJ(i);const a=_e(()=>s.value?t.id:void 0),o=_e(()=>{if(r&&r.value==="tooltip")return t.open&&t.id?t.id:void 0}),s=_e(()=>{if(r&&r.value!=="tooltip")return r.value}),u=_e(()=>s.value?`${t.open}`:void 0);let l;return ni(()=>{Ot(()=>t.virtualRef,c=>{c&&(i.value=ju(c))},{immediate:!0}),Ot(i,(c,f)=>{l==null||l(),l=void 0,Av(c)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var d;const p=t[h];p&&(c.addEventListener(h.slice(2).toLowerCase(),p),(d=f==null?void 0:f.removeEventListener)==null||d.call(f,h.slice(2).toLowerCase(),p))}),l=Ot([a,o,s,u],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((d,p)=>{P1(h[p])?c.removeAttribute(d):c.setAttribute(d,h[p])})},{immediate:!0})),Av(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),vo(()=>{l==null||l(),l=void 0}),e({triggerRef:i}),(c,f)=>c.virtualTriggering?Nt("v-if",!0):(Ne(),Xt(K(QJ),Ni({key:0},c.$attrs,{"aria-controls":K(a),"aria-describedby":K(o),"aria-expanded":K(u),"aria-haspopup":K(s)}),{default:Ft(()=>[vt(c.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var tee=Zt(eee,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]),Li="top",La="bottom",Ma="right",Mi="left",VT="auto",yg=[Li,La,Ma,Mi],Xh="start",Iv="end",nee="clippingParents",nF="viewport",sp="popper",ree="reference",YP=yg.reduce(function(n,e){return n.concat([e+"-"+Xh,e+"-"+Iv])},[]),zT=[].concat(yg,[VT]).reduce(function(n,e){return n.concat([e,e+"-"+Xh,e+"-"+Iv])},[]),iee="beforeRead",aee="read",oee="afterRead",see="beforeMain",uee="main",lee="afterMain",cee="beforeWrite",fee="write",hee="afterWrite",dee=[iee,aee,oee,see,uee,lee,cee,fee,hee];function us(n){return n?(n.nodeName||"").toLowerCase():null}function mo(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Kh(n){var e=mo(n).Element;return n instanceof e||n instanceof Element}function Pa(n){var e=mo(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function UT(n){if(typeof ShadowRoot>"u")return!1;var e=mo(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function pee(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Pa(a)||!us(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function vee(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),s=o.reduce(function(u,l){return u[l]="",u},{});!Pa(i)||!us(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var rF={name:"applyStyles",enabled:!0,phase:"write",fn:pee,effect:vee,requires:["computeStyles"]};function es(n){return n.split("-")[0]}var Nc=Math.max,b0=Math.min,Yh=Math.round;function Zh(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Pa(n)&&e){var a=n.offsetHeight,o=n.offsetWidth;o>0&&(r=Yh(t.width)/o||1),a>0&&(i=Yh(t.height)/a||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function WT(n){var e=Zh(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function iF(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&UT(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function tu(n){return mo(n).getComputedStyle(n)}function gee(n){return["table","td","th"].indexOf(us(n))>=0}function wl(n){return((Kh(n)?n.ownerDocument:n.document)||window.document).documentElement}function M1(n){return us(n)==="html"?n:n.assignedSlot||n.parentNode||(UT(n)?n.host:null)||wl(n)}function ZP(n){return!Pa(n)||tu(n).position==="fixed"?null:n.offsetParent}function mee(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Pa(n)){var r=tu(n);if(r.position==="fixed")return null}var i=M1(n);for(UT(i)&&(i=i.host);Pa(i)&&["html","body"].indexOf(us(i))<0;){var a=tu(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function bg(n){for(var e=mo(n),t=ZP(n);t&&gee(t)&&tu(t).position==="static";)t=ZP(t);return t&&(us(t)==="html"||us(t)==="body"&&tu(t).position==="static")?e:t||mee(n)||e}function HT(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function rv(n,e,t){return Nc(n,b0(e,t))}function yee(n,e,t){var r=rv(n,e,t);return r>t?t:r}function aF(){return{top:0,right:0,bottom:0,left:0}}function oF(n){return Object.assign({},aF(),n)}function sF(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var bee=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,oF(typeof n!="number"?n:sF(n,yg))};function xee(n){var e,t=n.state,r=n.name,i=n.options,a=t.elements.arrow,o=t.modifiersData.popperOffsets,s=es(t.placement),u=HT(s),l=[Mi,Ma].indexOf(s)>=0,c=l?"height":"width";if(!(!a||!o)){var f=bee(i.padding,t),h=WT(a),d=u==="y"?Li:Mi,p=u==="y"?La:Ma,g=t.rects.reference[c]+t.rects.reference[u]-o[u]-t.rects.popper[c],m=o[u]-t.rects.reference[u],y=bg(a),b=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,_=g/2-m/2,w=f[d],T=b-h[c]-f[p],E=b/2-h[c]/2+_,A=rv(w,E,T),I=u;t.modifiersData[r]=(e={},e[I]=A,e.centerOffset=A-E,e)}}function _ee(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!iF(e.elements.popper,i)||(e.elements.arrow=i))}var wee={name:"arrow",enabled:!0,phase:"main",fn:xee,effect:_ee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qh(n){return n.split("-")[1]}var See={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cee(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:Yh(e*i)/i||0,y:Yh(t*i)/i||0}}function QP(n){var e,t=n.popper,r=n.popperRect,i=n.placement,a=n.variation,o=n.offsets,s=n.position,u=n.gpuAcceleration,l=n.adaptive,c=n.roundOffsets,f=n.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof c=="function"?c({x:d,y:g}):{x:d,y:g};d=m.x,g=m.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),_=Mi,w=Li,T=window;if(l){var E=bg(t),A="clientHeight",I="clientWidth";if(E===mo(t)&&(E=wl(t),tu(E).position!=="static"&&s==="absolute"&&(A="scrollHeight",I="scrollWidth")),E=E,i===Li||(i===Mi||i===Ma)&&a===Iv){w=La;var $=f&&E===T&&T.visualViewport?T.visualViewport.height:E[A];g-=$-r.height,g*=u?1:-1}if(i===Mi||(i===Li||i===La)&&a===Iv){_=Ma;var D=f&&E===T&&T.visualViewport?T.visualViewport.width:E[I];d-=D-r.width,d*=u?1:-1}}var N=Object.assign({position:s},l&&See),z=c===!0?Cee({x:d,y:g}):{x:d,y:g};if(d=z.x,g=z.y,u){var F;return Object.assign({},N,(F={},F[w]=b?"0":"",F[_]=y?"0":"",F.transform=(T.devicePixelRatio||1)<=1?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",F))}return Object.assign({},N,(e={},e[w]=b?g+"px":"",e[_]=y?d+"px":"",e.transform="",e))}function Tee(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,a=t.adaptive,o=a===void 0?!0:a,s=t.roundOffsets,u=s===void 0?!0:s,l={placement:es(e.placement),variation:Qh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,QP(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,QP(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var uF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tee,data:{}},fm={passive:!0};function Eee(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,u=mo(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&l.forEach(function(c){c.addEventListener("scroll",t.update,fm)}),s&&u.addEventListener("resize",t.update,fm),function(){a&&l.forEach(function(c){c.removeEventListener("scroll",t.update,fm)}),s&&u.removeEventListener("resize",t.update,fm)}}var lF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Eee,data:{}},kee={left:"right",right:"left",bottom:"top",top:"bottom"};function By(n){return n.replace(/left|right|bottom|top/g,function(e){return kee[e]})}var Aee={start:"end",end:"start"};function JP(n){return n.replace(/start|end/g,function(e){return Aee[e]})}function GT(n){var e=mo(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function jT(n){return Zh(wl(n)).left+GT(n).scrollLeft}function Ree(n){var e=mo(n),t=wl(n),r=e.visualViewport,i=t.clientWidth,a=t.clientHeight,o=0,s=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,s=r.offsetTop)),{width:i,height:a,x:o+jT(n),y:s}}function Iee(n){var e,t=wl(n),r=GT(n),i=(e=n.ownerDocument)==null?void 0:e.body,a=Nc(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Nc(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+jT(n),u=-r.scrollTop;return tu(i||t).direction==="rtl"&&(s+=Nc(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}function qT(n){var e=tu(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function cF(n){return["html","body","#document"].indexOf(us(n))>=0?n.ownerDocument.body:Pa(n)&&qT(n)?n:cF(M1(n))}function iv(n,e){var t;e===void 0&&(e=[]);var r=cF(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),a=mo(r),o=i?[a].concat(a.visualViewport||[],qT(r)?r:[]):r,s=e.concat(o);return i?s:s.concat(iv(M1(o)))}function kw(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Pee(n){var e=Zh(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function eD(n,e){return e===nF?kw(Ree(n)):Kh(e)?Pee(e):kw(Iee(wl(n)))}function Dee(n){var e=iv(M1(n)),t=["absolute","fixed"].indexOf(tu(n).position)>=0,r=t&&Pa(n)?bg(n):n;return Kh(r)?e.filter(function(i){return Kh(i)&&iF(i,r)&&us(i)!=="body"}):[]}function $ee(n,e,t){var r=e==="clippingParents"?Dee(n):[].concat(e),i=[].concat(r,[t]),a=i[0],o=i.reduce(function(s,u){var l=eD(n,u);return s.top=Nc(l.top,s.top),s.right=b0(l.right,s.right),s.bottom=b0(l.bottom,s.bottom),s.left=Nc(l.left,s.left),s},eD(n,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function fF(n){var e=n.reference,t=n.element,r=n.placement,i=r?es(r):null,a=r?Qh(r):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,u;switch(i){case Li:u={x:o,y:e.y-t.height};break;case La:u={x:o,y:e.y+e.height};break;case Ma:u={x:e.x+e.width,y:s};break;case Mi:u={x:e.x-t.width,y:s};break;default:u={x:e.x,y:e.y}}var l=i?HT(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(a){case Xh:u[l]=u[l]-(e[c]/2-t[c]/2);break;case Iv:u[l]=u[l]+(e[c]/2-t[c]/2);break}}return u}function Pv(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,a=t.boundary,o=a===void 0?nee:a,s=t.rootBoundary,u=s===void 0?nF:s,l=t.elementContext,c=l===void 0?sp:l,f=t.altBoundary,h=f===void 0?!1:f,d=t.padding,p=d===void 0?0:d,g=oF(typeof p!="number"?p:sF(p,yg)),m=c===sp?ree:sp,y=n.rects.popper,b=n.elements[h?m:c],_=$ee(Kh(b)?b:b.contextElement||wl(n.elements.popper),o,u),w=Zh(n.elements.reference),T=fF({reference:w,element:y,strategy:"absolute",placement:i}),E=kw(Object.assign({},y,T)),A=c===sp?E:w,I={top:_.top-A.top+g.top,bottom:A.bottom-_.bottom+g.bottom,left:_.left-A.left+g.left,right:A.right-_.right+g.right},$=n.modifiersData.offset;if(c===sp&&$){var D=$[i];Object.keys(I).forEach(function(N){var z=[Ma,La].indexOf(N)>=0?1:-1,F=[Li,La].indexOf(N)>=0?"y":"x";I[N]+=D[F]*z})}return I}function Nee(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,a=t.rootBoundary,o=t.padding,s=t.flipVariations,u=t.allowedAutoPlacements,l=u===void 0?zT:u,c=Qh(r),f=c?s?YP:YP.filter(function(p){return Qh(p)===c}):yg,h=f.filter(function(p){return l.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,g){return p[g]=Pv(n,{placement:g,boundary:i,rootBoundary:a,padding:o})[es(g)],p},{});return Object.keys(d).sort(function(p,g){return d[p]-d[g]})}function Oee(n){if(es(n)===VT)return[];var e=By(n);return[JP(n),e,JP(e)]}function Lee(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!0:o,u=t.fallbackPlacements,l=t.padding,c=t.boundary,f=t.rootBoundary,h=t.altBoundary,d=t.flipVariations,p=d===void 0?!0:d,g=t.allowedAutoPlacements,m=e.options.placement,y=es(m),b=y===m,_=u||(b||!p?[By(m)]:Oee(m)),w=[m].concat(_).reduce(function(Ae,de){return Ae.concat(es(de)===VT?Nee(e,{placement:de,boundary:c,rootBoundary:f,padding:l,flipVariations:p,allowedAutoPlacements:g}):de)},[]),T=e.rects.reference,E=e.rects.popper,A=new Map,I=!0,$=w[0],D=0;D<w.length;D++){var N=w[D],z=es(N),F=Qh(N)===Xh,G=[Li,La].indexOf(z)>=0,U=G?"width":"height",H=Pv(e,{placement:N,boundary:c,rootBoundary:f,altBoundary:h,padding:l}),X=G?F?Ma:Mi:F?La:Li;T[U]>E[U]&&(X=By(X));var Z=By(X),Q=[];if(a&&Q.push(H[z]<=0),s&&Q.push(H[X]<=0,H[Z]<=0),Q.every(function(Ae){return Ae})){$=N,I=!1;break}A.set(N,Q)}if(I)for(var le=p?3:1,ge=function(Ae){var de=w.find(function(Ce){var ye=A.get(Ce);if(ye)return ye.slice(0,Ae).every(function(Ee){return Ee})});if(de)return $=de,"break"},be=le;be>0;be--){var ke=ge(be);if(ke==="break")break}e.placement!==$&&(e.modifiersData[r]._skip=!0,e.placement=$,e.reset=!0)}}var Mee={name:"flip",enabled:!0,phase:"main",fn:Lee,requiresIfExists:["offset"],data:{_skip:!1}};function tD(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function nD(n){return[Li,Ma,La,Mi].some(function(e){return n[e]>=0})}function Bee(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=Pv(e,{elementContext:"reference"}),s=Pv(e,{altBoundary:!0}),u=tD(o,r),l=tD(s,i,a),c=nD(u),f=nD(l);e.modifiersData[t]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var Fee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Bee};function Vee(n,e,t){var r=es(n),i=[Mi,Li].indexOf(r)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Mi,Ma].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function zee(n){var e=n.state,t=n.options,r=n.name,i=t.offset,a=i===void 0?[0,0]:i,o=zT.reduce(function(c,f){return c[f]=Vee(f,e.rects,a),c},{}),s=o[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=o}var Uee={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zee};function Wee(n){var e=n.state,t=n.name;e.modifiersData[t]=fF({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var hF={name:"popperOffsets",enabled:!0,phase:"read",fn:Wee,data:{}};function Hee(n){return n==="x"?"y":"x"}function Gee(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,a=i===void 0?!0:i,o=t.altAxis,s=o===void 0?!1:o,u=t.boundary,l=t.rootBoundary,c=t.altBoundary,f=t.padding,h=t.tether,d=h===void 0?!0:h,p=t.tetherOffset,g=p===void 0?0:p,m=Pv(e,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),y=es(e.placement),b=Qh(e.placement),_=!b,w=HT(y),T=Hee(w),E=e.modifiersData.popperOffsets,A=e.rects.reference,I=e.rects.popper,$=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,D=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,z={x:0,y:0};if(E){if(a){var F,G=w==="y"?Li:Mi,U=w==="y"?La:Ma,H=w==="y"?"height":"width",X=E[w],Z=X+m[G],Q=X-m[U],le=d?-I[H]/2:0,ge=b===Xh?A[H]:I[H],be=b===Xh?-I[H]:-A[H],ke=e.elements.arrow,Ae=d&&ke?WT(ke):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:aF(),Ce=de[G],ye=de[U],Ee=rv(0,A[H],Ae[H]),De=_?A[H]/2-le-Ee-Ce-D.mainAxis:ge-Ee-Ce-D.mainAxis,Me=_?-A[H]/2+le+Ee+ye+D.mainAxis:be+Ee+ye+D.mainAxis,Ie=e.elements.arrow&&bg(e.elements.arrow),Be=Ie?w==="y"?Ie.clientTop||0:Ie.clientLeft||0:0,et=(F=N==null?void 0:N[w])!=null?F:0,xt=X+De-et-Be,Vt=X+Me-et,Xn=rv(d?b0(Z,xt):Z,X,d?Nc(Q,Vt):Q);E[w]=Xn,z[w]=Xn-X}if(s){var ir,bi=w==="x"?Li:Mi,xr=w==="x"?La:Ma,se=E[T],dt=T==="y"?"height":"width",Dn=se+m[bi],Kn=se-m[xr],un=[Li,Mi].indexOf(y)!==-1,xi=(ir=N==null?void 0:N[T])!=null?ir:0,Wi=un?Dn:se-A[dt]-I[dt]-xi+D.altAxis,To=un?se+A[dt]+I[dt]-xi-D.altAxis:Kn,Eo=d&&un?yee(Wi,se,To):rv(d?Wi:Dn,se,d?To:Kn);E[T]=Eo,z[T]=Eo-se}e.modifiersData[r]=z}}var jee={name:"preventOverflow",enabled:!0,phase:"main",fn:Gee,requiresIfExists:["offset"]};function qee(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Xee(n){return n===mo(n)||!Pa(n)?GT(n):qee(n)}function Kee(n){var e=n.getBoundingClientRect(),t=Yh(e.width)/n.offsetWidth||1,r=Yh(e.height)/n.offsetHeight||1;return t!==1||r!==1}function Yee(n,e,t){t===void 0&&(t=!1);var r=Pa(e),i=Pa(e)&&Kee(e),a=wl(e),o=Zh(n,i),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!t)&&((us(e)!=="body"||qT(a))&&(s=Xee(e)),Pa(e)?(u=Zh(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=jT(a))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function Zee(n){var e=new Map,t=new Set,r=[];n.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var u=e.get(s);u&&i(u)}}),r.push(a)}return n.forEach(function(a){t.has(a.name)||i(a)}),r}function Qee(n){var e=Zee(n);return dee.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function Jee(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function ete(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var rD={placement:"bottom",modifiers:[],strategy:"absolute"};function iD(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function XT(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?rD:i;return function(o,s,u){u===void 0&&(u=a);var l={placement:"bottom",orderedModifiers:[],options:Object.assign({},rD,a),modifiersData:{},elements:{reference:o,popper:s},attributes:{},styles:{}},c=[],f=!1,h={state:l,setOptions:function(g){var m=typeof g=="function"?g(l.options):g;p(),l.options=Object.assign({},a,l.options,m),l.scrollParents={reference:Kh(o)?iv(o):o.contextElement?iv(o.contextElement):[],popper:iv(s)};var y=Qee(ete([].concat(r,l.options.modifiers)));return l.orderedModifiers=y.filter(function(b){return b.enabled}),d(),h.update()},forceUpdate:function(){if(!f){var g=l.elements,m=g.reference,y=g.popper;if(iD(m,y)){l.rects={reference:Yee(m,bg(y),l.options.strategy==="fixed"),popper:WT(y)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach(function(I){return l.modifiersData[I.name]=Object.assign({},I.data)});for(var b=0;b<l.orderedModifiers.length;b++){if(l.reset===!0){l.reset=!1,b=-1;continue}var _=l.orderedModifiers[b],w=_.fn,T=_.options,E=T===void 0?{}:T,A=_.name;typeof w=="function"&&(l=w({state:l,options:E,name:A,instance:h})||l)}}}},update:Jee(function(){return new Promise(function(g){h.forceUpdate(),g(l)})}),destroy:function(){p(),f=!0}};if(!iD(o,s))return h;h.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function d(){l.orderedModifiers.forEach(function(g){var m=g.name,y=g.options,b=y===void 0?{}:y,_=g.effect;if(typeof _=="function"){var w=_({state:l,name:m,instance:h,options:b}),T=function(){};c.push(w||T)}})}function p(){c.forEach(function(g){return g()}),c=[]}return h}}XT();var tte=[lF,hF,uF,rF];XT({defaultModifiers:tte});var nte=[lF,hF,uF,rF,Uee,Mee,jee,wee,Fee],rte=XT({defaultModifiers:nte});const dx="focus-trap.focus-after-trapped",px="focus-trap.focus-after-released",ite="focus-trap.focusout-prevented",aD={cancelable:!0,bubbles:!1},ate={cancelable:!0,bubbles:!1},oD="focusAfterTrapped",sD="focusAfterReleased",ote=Symbol("elFocusTrap"),KT=it(),B1=it(0),YT=it(0);let hm=0;const dF=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},uD=(n,e)=>{for(const t of n)if(!ste(t,e))return t},ste=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},ute=n=>{const e=dF(n),t=uD(e,n),r=uD(e.reverse(),n);return[t,r]},lte=n=>n instanceof HTMLInputElement&&"select"in n,Bu=(n,e)=>{if(n&&n.focus){const t=document.activeElement;if(n.focus({preventScroll:!0}),YT.value=window.performance.now(),n!==t&&lte(n)&&e){if(n.tagName==="INPUT"){n.setSelectionRange(n.value.length,n.value.length);return}n.select()}}};function lD(n,e){const t=[...n],r=n.indexOf(e);return r!==-1&&t.splice(r,1),t}const cte=()=>{let n=[];return{push:r=>{const i=n[0];i&&r!==i&&i.pause(),n=lD(n,r),n.unshift(r)},remove:r=>{var i,a;n=lD(n,r),(a=(i=n[0])==null?void 0:i.resume)==null||a.call(i)}}},fte=(n,e=!1)=>{const t=document.activeElement;for(const r of n)if(Bu(r,e),document.activeElement!==t)return},cD=cte(),hte=()=>B1.value>YT.value,dm=()=>{KT.value="pointer",B1.value=window.performance.now()},fD=()=>{KT.value="keyboard",B1.value=window.performance.now()},dte=()=>(ni(()=>{hm===0&&(document.addEventListener("mousedown",dm),document.addEventListener("touchstart",dm),document.addEventListener("keydown",fD)),hm++}),vo(()=>{hm--,hm<=0&&(document.removeEventListener("mousedown",dm),document.removeEventListener("touchstart",dm),document.removeEventListener("keydown",fD))}),{focusReason:KT,lastUserFocusTimestamp:B1,lastAutomatedFocusTimestamp:YT}),pm=n=>new CustomEvent(ite,{...ate,detail:n}),pte=tt({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[oD,sD,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=it();let r,i;const{focusReason:a}=dte();bJ(p=>{n.trapped&&!o.paused&&e("release-requested",p)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},s=p=>{if(!n.loop&&!n.trapped||o.paused)return;const{key:g,altKey:m,ctrlKey:y,metaKey:b,currentTarget:_,shiftKey:w}=p,{loop:T}=n,E=g===hi.tab&&!m&&!y&&!b,A=document.activeElement;if(E&&A){const I=_,[$,D]=ute(I);if($&&D){if(!w&&A===D){const z=pm({focusReason:a.value});e("focusout-prevented",z),z.defaultPrevented||(p.preventDefault(),T&&Bu($,!0))}else if(w&&[$,I].includes(A)){const z=pm({focusReason:a.value});e("focusout-prevented",z),z.defaultPrevented||(p.preventDefault(),T&&Bu(D,!0))}}else if(A===I){const z=pm({focusReason:a.value});e("focusout-prevented",z),z.defaultPrevented||p.preventDefault()}}};kr(ote,{focusTrapRef:t,onKeydown:s}),Ot(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),Ot([t],([p],[g])=>{p&&(p.addEventListener("keydown",s),p.addEventListener("focusin",c),p.addEventListener("focusout",f)),g&&(g.removeEventListener("keydown",s),g.removeEventListener("focusin",c),g.removeEventListener("focusout",f))});const u=p=>{e(oD,p)},l=p=>e(sD,p),c=p=>{const g=K(t);if(!g)return;const m=p.target,y=p.relatedTarget,b=m&&g.contains(m);n.trapped||y&&g.contains(y)||(r=y),b&&e("focusin",p),!o.paused&&n.trapped&&(b?i=m:Bu(i,!0))},f=p=>{const g=K(t);if(!(o.paused||!g))if(n.trapped){const m=p.relatedTarget;!P1(m)&&!g.contains(m)&&setTimeout(()=>{if(!o.paused&&n.trapped){const y=pm({focusReason:a.value});e("focusout-prevented",y),y.defaultPrevented||Bu(i,!0)}},0)}else{const m=p.target;m&&g.contains(m)||e("focusout",p)}};async function h(){await Di();const p=K(t);if(p){cD.push(o);const g=p.contains(document.activeElement)?r:document.activeElement;if(r=g,!p.contains(g)){const y=new Event(dx,aD);p.addEventListener(dx,u),p.dispatchEvent(y),y.defaultPrevented||Di(()=>{let b=n.focusStartEl;nr(b)||(Bu(b),document.activeElement!==b&&(b="first")),b==="first"&&fte(dF(p),!0),(document.activeElement===g||b==="container")&&Bu(p)})}}}function d(){const p=K(t);if(p){p.removeEventListener(dx,u);const g=new CustomEvent(px,{...aD,detail:{focusReason:a.value}});p.addEventListener(px,l),p.dispatchEvent(g),!g.defaultPrevented&&(a.value=="keyboard"||!hte())&&Bu(r??document.body,!0),p.removeEventListener(px,u),cD.remove(o)}}return ni(()=>{n.trapped&&h(),Ot(()=>n.trapped,p=>{p?h():d()})}),vo(()=>{n.trapped&&d()}),{onKeydown:s}}});function vte(n,e,t,r,i,a){return vt(n.$slots,"default",{handleKeydown:n.onKeydown})}var gte=Zt(pte,[["render",vte],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const mte=["fixed","absolute"],yte=vn({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:pt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:zT,default:"bottom"},popperOptions:{type:pt(Object),default:()=>({})},strategy:{type:String,values:mte,default:"absolute"}}),pF=vn({...yte,id:String,style:{type:pt([String,Array,Object])},className:{type:pt([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:pt([String,Array,Object])},popperStyle:{type:pt([String,Array,Object])},referenceEl:{type:pt(Object)},triggerTargetEl:{type:pt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),bte={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},hD=(n,e)=>{const{placement:t,strategy:r,popperOptions:i}=n,a={placement:t,strategy:r,...i,modifiers:_te(n)};return wte(a,e),Ste(a,i==null?void 0:i.modifiers),a},xte=n=>{if(di)return ju(n)};function _te(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:r}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function wte(n,{arrowEl:e,arrowOffset:t}){n.modifiers.push({name:"arrow",options:{element:e,padding:t??5}})}function Ste(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const Cte=tt({name:"ElPopperContent"}),Tte=tt({...Cte,props:pF,emits:bte,setup(n,{expose:e,emit:t}){const r=n,{popperInstanceRef:i,contentRef:a,triggerRef:o,role:s}=pn(DT,void 0),u=pn(jc,void 0),{nextZIndex:l}=FT(),c=Rt("popper"),f=it(),h=it("first"),d=it(),p=it();kr(G3,{arrowRef:d,arrowOffset:p}),u&&(u.addInputId||u.removeInputId)&&kr(jc,{...u,addInputId:Sv,removeInputId:Sv});const g=it(r.zIndex||l()),m=it(!1);let y;const b=_e(()=>xte(r.referenceEl)||K(o)),_=_e(()=>[{zIndex:K(g)},r.popperStyle]),w=_e(()=>[c.b(),c.is("pure",r.pure),c.is(r.effect),r.popperClass]),T=_e(()=>s&&s.value==="dialog"?"false":void 0),E=({referenceEl:G,popperContentEl:U,arrowEl:H})=>{const X=hD(r,{arrowEl:H,arrowOffset:K(p)});return rte(G,U,X)},A=(G=!0)=>{var U;(U=K(i))==null||U.update(),G&&(g.value=r.zIndex||l())},I=()=>{var G,U;const H={name:"eventListeners",enabled:r.visible};(U=(G=K(i))==null?void 0:G.setOptions)==null||U.call(G,X=>({...X,modifiers:[...X.modifiers||[],H]})),A(!1),r.visible&&r.focusOnShow?m.value=!0:r.visible===!1&&(m.value=!1)},$=()=>{t("focus")},D=G=>{var U;((U=G.detail)==null?void 0:U.focusReason)!=="pointer"&&(h.value="first",t("blur"))},N=G=>{r.visible&&!m.value&&(G.target&&(h.value=G.target),m.value=!0)},z=G=>{r.trapping||(G.detail.focusReason==="pointer"&&G.preventDefault(),m.value=!1)},F=()=>{m.value=!1,t("close")};return ni(()=>{let G;Ot(b,U=>{var H;G==null||G();const X=K(i);if((H=X==null?void 0:X.destroy)==null||H.call(X),U){const Z=K(f);a.value=Z,i.value=E({referenceEl:U,popperContentEl:Z,arrowEl:K(d)}),G=Ot(()=>U.getBoundingClientRect(),()=>A(),{immediate:!0})}else i.value=void 0},{immediate:!0}),Ot(()=>r.triggerTargetEl,(U,H)=>{y==null||y(),y=void 0;const X=K(U||f.value),Z=K(H||f.value);Av(X)&&(y=Ot([s,()=>r.ariaLabel,T,()=>r.id],Q=>{["role","aria-label","aria-modal","id"].forEach((le,ge)=>{P1(Q[ge])?X.removeAttribute(le):X.setAttribute(le,Q[ge])})},{immediate:!0})),Z!==X&&Av(Z)&&["role","aria-label","aria-modal","id"].forEach(Q=>{Z.removeAttribute(Q)})},{immediate:!0}),Ot(()=>r.visible,I,{immediate:!0}),Ot(()=>hD(r,{arrowEl:K(d),arrowOffset:K(p)}),U=>{var H;return(H=i.value)==null?void 0:H.setOptions(U)})}),vo(()=>{y==null||y(),y=void 0}),e({popperContentRef:f,popperInstanceRef:i,updatePopper:A,contentStyle:_}),(G,U)=>(Ne(),Ke("div",{ref_key:"popperContentRef",ref:f,style:wr(K(_)),class:Xe(K(w)),tabindex:"-1",onMouseenter:U[0]||(U[0]=H=>G.$emit("mouseenter",H)),onMouseleave:U[1]||(U[1]=H=>G.$emit("mouseleave",H))},[Zn(K(gte),{trapped:m.value,"trap-on-focus-in":!0,"focus-trap-el":f.value,"focus-start-el":h.value,onFocusAfterTrapped:$,onFocusAfterReleased:D,onFocusin:N,onFocusoutPrevented:z,onReleaseRequested:F},{default:Ft(()=>[vt(G.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el"])],38))}});var Ete=Zt(Tte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const kte=ri(qJ),Ate=Rt("tooltip"),vF=vn({...SJ,...pF,appendTo:{type:pt([String,Object]),default:Y3},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:pt(Boolean),default:null},transition:{type:String,default:`${Ate.namespace.value}-fade-in-linear`},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}}),gF=vn({...tF,disabled:Boolean,trigger:{type:pt([String,Array]),default:"hover"},triggerKeys:{type:pt(Array),default:()=>[hi.enter,hi.space]}}),{useModelToggleProps:Rte,useModelToggleEmits:Ite,useModelToggle:Pte}=gJ("visible"),Dte=vn({...Q3,...Rte,...vF,...gF,...J3,showArrow:{type:Boolean,default:!0}}),$te=[...Ite,"before-show","before-hide","show","hide","open","close"],Nte=(n,e)=>Rh(n)?n.includes(e):n===e,Hf=(n,e,t)=>r=>{Nte(K(n),e)&&t(r)},Ote=tt({name:"ElTooltipTrigger"}),Lte=tt({...Ote,props:gF,setup(n,{expose:e}){const t=n,r=Rt("tooltip"),{controlled:i,id:a,open:o,onOpen:s,onClose:u,onToggle:l}=pn($T,void 0),c=it(null),f=()=>{if(K(i)||t.disabled)return!0},h=Jo(t,"trigger"),d=Fs(f,Hf(h,"hover",s)),p=Fs(f,Hf(h,"hover",u)),g=Fs(f,Hf(h,"click",w=>{w.button===0&&l(w)})),m=Fs(f,Hf(h,"focus",s)),y=Fs(f,Hf(h,"focus",u)),b=Fs(f,Hf(h,"contextmenu",w=>{w.preventDefault(),l(w)})),_=Fs(f,w=>{const{code:T}=w;t.triggerKeys.includes(T)&&(w.preventDefault(),l(w))});return e({triggerRef:c}),(w,T)=>(Ne(),Xt(K(tee),{id:K(a),"virtual-ref":w.virtualRef,open:K(o),"virtual-triggering":w.virtualTriggering,class:Xe(K(r).e("trigger")),onBlur:K(y),onClick:K(g),onContextmenu:K(b),onFocus:K(m),onMouseenter:K(d),onMouseleave:K(p),onKeydown:K(_)},{default:Ft(()=>[vt(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Mte=Zt(Lte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const Bte=tt({name:"ElTooltipContent",inheritAttrs:!1}),Fte=tt({...Bte,props:vF,setup(n,{expose:e}){const t=n,r=it(null),i=it(!1),{controlled:a,id:o,open:s,trigger:u,onClose:l,onOpen:c,onShow:f,onHide:h,onBeforeShow:d,onBeforeHide:p}=pn($T,void 0),g=_e(()=>t.persistent);vo(()=>{i.value=!0});const m=_e(()=>K(g)?!0:K(s)),y=_e(()=>t.disabled?!1:K(s)),b=_e(()=>{var F;return(F=t.style)!=null?F:{}}),_=_e(()=>!K(s)),w=()=>{h()},T=()=>{if(K(a))return!0},E=Fs(T,()=>{t.enterable&&K(u)==="hover"&&c()}),A=Fs(T,()=>{K(u)==="hover"&&l()}),I=()=>{var F,G;(G=(F=r.value)==null?void 0:F.updatePopper)==null||G.call(F),d==null||d()},$=()=>{p==null||p()},D=()=>{f(),z=oZ(_e(()=>{var F;return(F=r.value)==null?void 0:F.popperContentRef}),()=>{if(K(a))return;K(u)!=="hover"&&l()})},N=()=>{t.virtualTriggering||l()};let z;return Ot(()=>K(s),F=>{F||z==null||z()},{flush:"post"}),Ot(()=>t.content,()=>{var F,G;(G=(F=r.value)==null?void 0:F.updatePopper)==null||G.call(F)}),e({contentRef:r}),(F,G)=>(Ne(),Xt(T9,{disabled:!F.teleported,to:F.appendTo},[Zn(ff,{name:F.transition,onAfterLeave:w,onBeforeEnter:I,onAfterEnter:D,onBeforeLeave:$},{default:Ft(()=>[K(m)?bl((Ne(),Xt(K(Ete),Ni({key:0,id:K(o),ref_key:"contentRef",ref:r},F.$attrs,{"aria-label":F.ariaLabel,"aria-hidden":K(_),"boundaries-padding":F.boundariesPadding,"fallback-placements":F.fallbackPlacements,"gpu-acceleration":F.gpuAcceleration,offset:F.offset,placement:F.placement,"popper-options":F.popperOptions,strategy:F.strategy,effect:F.effect,enterable:F.enterable,pure:F.pure,"popper-class":F.popperClass,"popper-style":[F.popperStyle,K(b)],"reference-el":F.referenceEl,"trigger-target-el":F.triggerTargetEl,visible:K(y),"z-index":F.zIndex,onMouseenter:K(E),onMouseleave:K(A),onBlur:N,onClose:K(l)}),{default:Ft(()=>[Nt(" Workaround bug #6378 "),i.value?Nt("v-if",!0):vt(F.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[cf,K(y)]]):Nt("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var Vte=Zt(Fte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const zte=["innerHTML"],Ute={key:1},Wte=tt({name:"ElTooltip"}),Hte=tt({...Wte,props:Dte,emits:$te,setup(n,{expose:e,emit:t}){const r=n;wJ();const i=MT(),a=it(),o=it(),s=()=>{var y;const b=K(a);b&&((y=b.popperInstanceRef)==null||y.update())},u=it(!1),l=it(),{show:c,hide:f,hasUpdateHandler:h}=Pte({indicator:u,toggleReason:l}),{onOpen:d,onClose:p}=CJ({showAfter:Jo(r,"showAfter"),hideAfter:Jo(r,"hideAfter"),open:c,close:f}),g=_e(()=>D1(r.visible)&&!h.value);kr($T,{controlled:g,id:i,open:E9(u),trigger:Jo(r,"trigger"),onOpen:y=>{d(y)},onClose:y=>{p(y)},onToggle:y=>{K(u)?p(y):d(y)},onShow:()=>{t("show",l.value)},onHide:()=>{t("hide",l.value)},onBeforeShow:()=>{t("before-show",l.value)},onBeforeHide:()=>{t("before-hide",l.value)},updatePopper:s}),Ot(()=>r.disabled,y=>{y&&u.value&&(u.value=!1)});const m=()=>{var y,b;const _=(b=(y=o.value)==null?void 0:y.contentRef)==null?void 0:b.popperContentRef;return _&&_.contains(document.activeElement)};return k9(()=>u.value&&f()),e({popperRef:a,contentRef:o,isFocusInsideContent:m,updatePopper:s,onOpen:d,onClose:p,hide:f}),(y,b)=>(Ne(),Xt(K(kte),{ref_key:"popperRef",ref:a,role:y.role},{default:Ft(()=>[Zn(Mte,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:Ft(()=>[y.$slots.default?vt(y.$slots,"default",{key:0}):Nt("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),Zn(Vte,{ref_key:"contentRef",ref:o,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:Ft(()=>[vt(y.$slots,"content",{},()=>[y.rawContent?(Ne(),Ke("span",{key:0,innerHTML:y.content},null,8,zte)):(Ne(),Ke("span",Ute,or(y.content),1))]),y.showArrow?(Ne(),Xt(K(YJ),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):Nt("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Gte=Zt(Hte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const mF=ri(Gte),jte=vn({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),qte=["textContent"],Xte=tt({name:"ElBadge"}),Kte=tt({...Xte,props:jte,setup(n,{expose:e}){const t=n,r=Rt("badge"),i=_e(()=>t.isDot?"":eu(t.value)&&eu(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return e({content:i}),(a,o)=>(Ne(),Ke("div",{class:Xe(K(r).b())},[vt(a.$slots,"default"),Zn(ff,{name:`${K(r).namespace.value}-zoom-in-center`,persisted:""},{default:Ft(()=>[bl(Ct("sup",{class:Xe([K(r).e("content"),K(r).em("content",a.type),K(r).is("fixed",!!a.$slots.default),K(r).is("dot",a.isDot)]),textContent:or(K(i))},null,10,qte),[[cf,!a.hidden&&(K(i)||a.isDot)]])]),_:1},8,["name"])],2))}});var Yte=Zt(Kte,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const Zte=ri(Yte),Qte=(n,e)=>{q3({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},_e(()=>n.type==="text"));const t=pn(z3,void 0),r=_l("button"),{form:i}=X3(),a=L1(_e(()=>t==null?void 0:t.size)),o=OT(),s=it(),u=mg(),l=_e(()=>n.type||(t==null?void 0:t.type)||""),c=_e(()=>{var d,p,g;return(g=(p=n.autoInsertSpace)!=null?p:(d=r.value)==null?void 0:d.autoInsertSpace)!=null?g:!1}),f=_e(()=>{var d;const p=(d=u.default)==null?void 0:d.call(u);if(c.value&&(p==null?void 0:p.length)===1){const g=p[0];if((g==null?void 0:g.type)===WB){const m=g.children;return/^\p{Unified_Ideograph}{2}$/u.test(m.trim())}}return!1});return{_disabled:o,_size:a,_type:l,_ref:s,shouldAddSpace:f,handleClick:d=>{n.nativeType==="reset"&&(i==null||i.resetFields()),e("click",d)}}},Jte=["default","primary","success","warning","info","danger","text",""],ene=["button","submit","reset"],Aw=vn({size:NT,disabled:Boolean,type:{type:String,values:Jte,default:""},icon:{type:js},nativeType:{type:String,values:ene,default:"button"},loading:Boolean,loadingIcon:{type:js,default:()=>L3},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0}}),tne={click:n=>n instanceof MouseEvent};function Lr(n,e){nne(n)&&(n="100%");var t=rne(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function vm(n){return Math.min(1,Math.max(0,n))}function nne(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function rne(n){return typeof n=="string"&&n.indexOf("%")!==-1}function yF(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function gm(n){return n<=1?"".concat(Number(n)*100,"%"):n}function Tc(n){return n.length===1?"0"+n:String(n)}function ine(n,e,t){return{r:Lr(n,255)*255,g:Lr(e,255)*255,b:Lr(t,255)*255}}function dD(n,e,t){n=Lr(n,255),e=Lr(e,255),t=Lr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),a=0,o=0,s=(r+i)/2;if(r===i)o=0,a=0;else{var u=r-i;switch(o=s>.5?u/(2-r-i):u/(r+i),r){case n:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-n)/u+2;break;case t:a=(n-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function vx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function ane(n,e,t){var r,i,a;if(n=Lr(n,360),e=Lr(e,100),t=Lr(t,100),e===0)i=t,a=t,r=t;else{var o=t<.5?t*(1+e):t+e-t*e,s=2*t-o;r=vx(s,o,n+1/3),i=vx(s,o,n),a=vx(s,o,n-1/3)}return{r:r*255,g:i*255,b:a*255}}function pD(n,e,t){n=Lr(n,255),e=Lr(e,255),t=Lr(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),a=0,o=r,s=r-i,u=r===0?0:s/r;if(r===i)a=0;else{switch(r){case n:a=(e-t)/s+(e<t?6:0);break;case e:a=(t-n)/s+2;break;case t:a=(n-e)/s+4;break}a/=6}return{h:a,s:u,v:o}}function one(n,e,t){n=Lr(n,360)*6,e=Lr(e,100),t=Lr(t,100);var r=Math.floor(n),i=n-r,a=t*(1-e),o=t*(1-i*e),s=t*(1-(1-i)*e),u=r%6,l=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],f=[a,a,s,t,t,o][u];return{r:l*255,g:c*255,b:f*255}}function vD(n,e,t,r){var i=[Tc(Math.round(n).toString(16)),Tc(Math.round(e).toString(16)),Tc(Math.round(t).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function sne(n,e,t,r,i){var a=[Tc(Math.round(n).toString(16)),Tc(Math.round(e).toString(16)),Tc(Math.round(t).toString(16)),Tc(une(r))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function une(n){return Math.round(parseFloat(n)*255).toString(16)}function gD(n){return Yi(n)/255}function Yi(n){return parseInt(n,16)}function lne(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var Rw={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function cne(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,a=null,o=!1,s=!1;return typeof n=="string"&&(n=dne(n)),typeof n=="object"&&(Os(n.r)&&Os(n.g)&&Os(n.b)?(e=ine(n.r,n.g,n.b),o=!0,s=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Os(n.h)&&Os(n.s)&&Os(n.v)?(r=gm(n.s),i=gm(n.v),e=one(n.h,r,i),o=!0,s="hsv"):Os(n.h)&&Os(n.s)&&Os(n.l)&&(r=gm(n.s),a=gm(n.l),e=ane(n.h,r,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=yF(t),{ok:o,format:n.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var fne="[-\\+]?\\d+%?",hne="[-\\+]?\\d*\\.\\d+%?",qu="(?:".concat(hne,")|(?:").concat(fne,")"),gx="[\\s|\\(]+(".concat(qu,")[,|\\s]+(").concat(qu,")[,|\\s]+(").concat(qu,")\\s*\\)?"),mx="[\\s|\\(]+(".concat(qu,")[,|\\s]+(").concat(qu,")[,|\\s]+(").concat(qu,")[,|\\s]+(").concat(qu,")\\s*\\)?"),Ya={CSS_UNIT:new RegExp(qu),rgb:new RegExp("rgb"+gx),rgba:new RegExp("rgba"+mx),hsl:new RegExp("hsl"+gx),hsla:new RegExp("hsla"+mx),hsv:new RegExp("hsv"+gx),hsva:new RegExp("hsva"+mx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function dne(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(Rw[n])n=Rw[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Ya.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Ya.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ya.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Ya.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ya.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Ya.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ya.hex8.exec(n),t?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),a:gD(t[4]),format:e?"name":"hex8"}:(t=Ya.hex6.exec(n),t?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),format:e?"name":"hex"}:(t=Ya.hex4.exec(n),t?{r:Yi(t[1]+t[1]),g:Yi(t[2]+t[2]),b:Yi(t[3]+t[3]),a:gD(t[4]+t[4]),format:e?"name":"hex8"}:(t=Ya.hex3.exec(n),t?{r:Yi(t[1]+t[1]),g:Yi(t[2]+t[2]),b:Yi(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Os(n){return Boolean(Ya.CSS_UNIT.exec(String(n)))}var bF=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var r;if(e instanceof n)return e;typeof e=="number"&&(e=lne(e)),this.originalInput=e;var i=cne(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=t.format)!==null&&r!==void 0?r:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,r,i,a=e.r/255,o=e.g/255,s=e.b/255;return a<=.03928?t=a/12.92:t=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*t+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=yF(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.toHsv=function(){var e=pD(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=pD(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=dD(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=dD(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),vD(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),sne(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Lr(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Lr(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+vD(this.r,this.g,this.b,!1),t=0,r=Object.entries(Rw);t<r.length;t++){var i=r[t],a=i[0],o=i[1];if(e===o)return a}return!1},n.prototype.toString=function(e){var t=Boolean(e);e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,a=!t&&i&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=vm(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=vm(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=vm(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=vm(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var r=this.toRgb(),i=new n(e).toRgb(),a=t/100,o={r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var r=this.toHsl(),i=360/t,a=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(new n(r));return a},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),r=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(new n({h:r,s:i,v:a})),a=(a+s)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),r=new n(e).toRgb();return new n({r:r.r+(t.r-r.r)*t.a,g:r.g+(t.g-r.g)*t.a,b:r.b+(t.b-r.b)*t.a})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),r=t.h,i=[this],a=360/e,o=1;o<e;o++)i.push(new n({h:(r+o*a)%360,s:t.s,l:t.l}));return i},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function Ru(n,e=20){return n.mix("#141414",e).toString()}function pne(n){const e=OT(),t=Rt("button");return _e(()=>{let r={};const i=n.color;if(i){const a=new bF(i),o=n.dark?a.tint(20).toString():Ru(a,20);if(n.plain)r=t.cssVarBlock({"bg-color":n.dark?Ru(a,90):a.tint(90).toString(),"text-color":i,"border-color":n.dark?Ru(a,50):a.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[t.cssVarBlockName("disabled-bg-color")]=n.dark?Ru(a,90):a.tint(90).toString(),r[t.cssVarBlockName("disabled-text-color")]=n.dark?Ru(a,50):a.tint(50).toString(),r[t.cssVarBlockName("disabled-border-color")]=n.dark?Ru(a,80):a.tint(80).toString());else{const s=n.dark?Ru(a,30):a.tint(30).toString(),u=a.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(r=t.cssVarBlock({"bg-color":i,"text-color":u,"border-color":i,"hover-bg-color":s,"hover-text-color":u,"hover-border-color":s,"active-bg-color":o,"active-border-color":o}),e.value){const l=n.dark?Ru(a,50):a.tint(50).toString();r[t.cssVarBlockName("disabled-bg-color")]=l,r[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,r[t.cssVarBlockName("disabled-border-color")]=l}}}return r})}const vne=["aria-disabled","disabled","autofocus","type"],gne=tt({name:"ElButton"}),mne=tt({...gne,props:Aw,emits:tne,setup(n,{expose:e,emit:t}){const r=n,i=pne(r),a=Rt("button"),{_ref:o,_size:s,_type:u,_disabled:l,shouldAddSpace:c,handleClick:f}=Qte(r,t);return e({ref:o,size:s,type:u,disabled:l,shouldAddSpace:c}),(h,d)=>(Ne(),Ke("button",{ref_key:"_ref",ref:o,class:Xe([K(a).b(),K(a).m(K(u)),K(a).m(K(s)),K(a).is("disabled",K(l)),K(a).is("loading",h.loading),K(a).is("plain",h.plain),K(a).is("round",h.round),K(a).is("circle",h.circle),K(a).is("text",h.text),K(a).is("link",h.link),K(a).is("has-bg",h.bg)]),"aria-disabled":K(l)||h.loading,disabled:K(l)||h.loading,autofocus:h.autofocus,type:h.nativeType,style:wr(K(i)),onClick:d[0]||(d[0]=(...p)=>K(f)&&K(f)(...p))},[h.loading?(Ne(),Ke(Or,{key:0},[h.$slots.loading?vt(h.$slots,"loading",{key:0}):(Ne(),Xt(K(Zi),{key:1,class:Xe(K(a).is("loading"))},{default:Ft(()=>[(Ne(),Xt(so(h.loadingIcon)))]),_:1},8,["class"]))],64)):h.icon||h.$slots.icon?(Ne(),Xt(K(Zi),{key:1},{default:Ft(()=>[h.icon?(Ne(),Xt(so(h.icon),{key:0})):vt(h.$slots,"icon",{key:1})]),_:3})):Nt("v-if",!0),h.$slots.default?(Ne(),Ke("span",{key:2,class:Xe({[K(a).em("text","expand")]:K(c)})},[vt(h.$slots,"default")],2)):Nt("v-if",!0)],14,vne))}});var yne=Zt(mne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const bne={size:Aw.size,type:Aw.type},xne=tt({name:"ElButtonGroup"}),_ne=tt({...xne,props:bne,setup(n){const e=n;kr(z3,lu({size:Jo(e,"size"),type:Jo(e,"type")}));const t=Rt("button");return(r,i)=>(Ne(),Ke("div",{class:Xe(`${K(t).b("group")}`)},[vt(r.$slots,"default")],2))}});var xF=Zt(_ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const yx=ri(yne,{ButtonGroup:xF}),wne=go(xF);var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sne(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Cne(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var a=Function.bind.apply(e,i);return new a}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Iw={},Tne={get exports(){return Iw},set exports(n){Iw=n}};(function(n,e){(function(t,r){n.exports=r()})(Da,function(){var t=1e3,r=6e4,i=36e5,a="millisecond",o="second",s="minute",u="hour",l="day",c="week",f="month",h="quarter",d="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var G=["th","st","nd","rd"],U=F%100;return"["+F+(G[(U-20)%10]||G[U]||G[0])+"]"}},_=function(F,G,U){var H=String(F);return!H||H.length>=G?F:""+Array(G+1-H.length).join(U)+F},w={s:_,z:function(F){var G=-F.utcOffset(),U=Math.abs(G),H=Math.floor(U/60),X=U%60;return(G<=0?"+":"-")+_(H,2,"0")+":"+_(X,2,"0")},m:function F(G,U){if(G.date()<U.date())return-F(U,G);var H=12*(U.year()-G.year())+(U.month()-G.month()),X=G.clone().add(H,f),Z=U-X<0,Q=G.clone().add(H+(Z?-1:1),f);return+(-(H+(U-X)/(Z?X-Q:Q-X))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:f,y:d,w:c,d:l,D:p,h:u,m:s,s:o,ms:a,Q:h}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},T="en",E={};E[T]=b;var A=function(F){return F instanceof N},I=function F(G,U,H){var X;if(!G)return T;if(typeof G=="string"){var Z=G.toLowerCase();E[Z]&&(X=Z),U&&(E[Z]=U,X=Z);var Q=G.split("-");if(!X&&Q.length>1)return F(Q[0])}else{var le=G.name;E[le]=G,X=le}return!H&&X&&(T=X),X||!H&&T},$=function(F,G){if(A(F))return F.clone();var U=typeof G=="object"?G:{};return U.date=F,U.args=arguments,new N(U)},D=w;D.l=I,D.i=A,D.w=function(F,G){return $(F,{locale:G.$L,utc:G.$u,x:G.$x,$offset:G.$offset})};var N=function(){function F(U){this.$L=I(U.locale,null,!0),this.parse(U)}var G=F.prototype;return G.parse=function(U){this.$d=function(H){var X=H.date,Z=H.utc;if(X===null)return new Date(NaN);if(D.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var Q=X.match(m);if(Q){var le=Q[2]-1||0,ge=(Q[7]||"0").substring(0,3);return Z?new Date(Date.UTC(Q[1],le,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,ge)):new Date(Q[1],le,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,ge)}}return new Date(X)}(U),this.$x=U.x||{},this.init()},G.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},G.$utils=function(){return D},G.isValid=function(){return this.$d.toString()!==g},G.isSame=function(U,H){var X=$(U);return this.startOf(H)<=X&&X<=this.endOf(H)},G.isAfter=function(U,H){return $(U)<this.startOf(H)},G.isBefore=function(U,H){return this.endOf(H)<$(U)},G.$g=function(U,H,X){return D.u(U)?this[H]:this.set(X,U)},G.unix=function(){return Math.floor(this.valueOf()/1e3)},G.valueOf=function(){return this.$d.getTime()},G.startOf=function(U,H){var X=this,Z=!!D.u(H)||H,Q=D.p(U),le=function(Ee,De){var Me=D.w(X.$u?Date.UTC(X.$y,De,Ee):new Date(X.$y,De,Ee),X);return Z?Me:Me.endOf(l)},ge=function(Ee,De){return D.w(X.toDate()[Ee].apply(X.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(De)),X)},be=this.$W,ke=this.$M,Ae=this.$D,de="set"+(this.$u?"UTC":"");switch(Q){case d:return Z?le(1,0):le(31,11);case f:return Z?le(1,ke):le(0,ke+1);case c:var Ce=this.$locale().weekStart||0,ye=(be<Ce?be+7:be)-Ce;return le(Z?Ae-ye:Ae+(6-ye),ke);case l:case p:return ge(de+"Hours",0);case u:return ge(de+"Minutes",1);case s:return ge(de+"Seconds",2);case o:return ge(de+"Milliseconds",3);default:return this.clone()}},G.endOf=function(U){return this.startOf(U,!1)},G.$set=function(U,H){var X,Z=D.p(U),Q="set"+(this.$u?"UTC":""),le=(X={},X[l]=Q+"Date",X[p]=Q+"Date",X[f]=Q+"Month",X[d]=Q+"FullYear",X[u]=Q+"Hours",X[s]=Q+"Minutes",X[o]=Q+"Seconds",X[a]=Q+"Milliseconds",X)[Z],ge=Z===l?this.$D+(H-this.$W):H;if(Z===f||Z===d){var be=this.clone().set(p,1);be.$d[le](ge),be.init(),this.$d=be.set(p,Math.min(this.$D,be.daysInMonth())).$d}else le&&this.$d[le](ge);return this.init(),this},G.set=function(U,H){return this.clone().$set(U,H)},G.get=function(U){return this[D.p(U)]()},G.add=function(U,H){var X,Z=this;U=Number(U);var Q=D.p(H),le=function(ke){var Ae=$(Z);return D.w(Ae.date(Ae.date()+Math.round(ke*U)),Z)};if(Q===f)return this.set(f,this.$M+U);if(Q===d)return this.set(d,this.$y+U);if(Q===l)return le(1);if(Q===c)return le(7);var ge=(X={},X[s]=r,X[u]=i,X[o]=t,X)[Q]||1,be=this.$d.getTime()+U*ge;return D.w(be,this)},G.subtract=function(U,H){return this.add(-1*U,H)},G.format=function(U){var H=this,X=this.$locale();if(!this.isValid())return X.invalidDate||g;var Z=U||"YYYY-MM-DDTHH:mm:ssZ",Q=D.z(this),le=this.$H,ge=this.$m,be=this.$M,ke=X.weekdays,Ae=X.months,de=function(De,Me,Ie,Be){return De&&(De[Me]||De(H,Z))||Ie[Me].slice(0,Be)},Ce=function(De){return D.s(le%12||12,De,"0")},ye=X.meridiem||function(De,Me,Ie){var Be=De<12?"AM":"PM";return Ie?Be.toLowerCase():Be},Ee={YY:String(this.$y).slice(-2),YYYY:this.$y,M:be+1,MM:D.s(be+1,2,"0"),MMM:de(X.monthsShort,be,Ae,3),MMMM:de(Ae,be),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:de(X.weekdaysMin,this.$W,ke,2),ddd:de(X.weekdaysShort,this.$W,ke,3),dddd:ke[this.$W],H:String(le),HH:D.s(le,2,"0"),h:Ce(1),hh:Ce(2),a:ye(le,ge,!0),A:ye(le,ge,!1),m:String(ge),mm:D.s(ge,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:Q};return Z.replace(y,function(De,Me){return Me||Ee[De]||Q.replace(":","")})},G.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},G.diff=function(U,H,X){var Z,Q=D.p(H),le=$(U),ge=(le.utcOffset()-this.utcOffset())*r,be=this-le,ke=D.m(this,le);return ke=(Z={},Z[d]=ke/12,Z[f]=ke,Z[h]=ke/3,Z[c]=(be-ge)/6048e5,Z[l]=(be-ge)/864e5,Z[u]=be/i,Z[s]=be/r,Z[o]=be/t,Z)[Q]||be,X?ke:D.a(ke)},G.daysInMonth=function(){return this.endOf(f).$D},G.$locale=function(){return E[this.$L]},G.locale=function(U,H){if(!U)return this.$L;var X=this.clone(),Z=I(U,H,!0);return Z&&(X.$L=Z),X},G.clone=function(){return D.w(this.$d,this)},G.toDate=function(){return new Date(this.valueOf())},G.toJSON=function(){return this.isValid()?this.toISOString():null},G.toISOString=function(){return this.$d.toISOString()},G.toString=function(){return this.$d.toUTCString()},F}(),z=N.prototype;return $.prototype=z,[["$ms",a],["$s",o],["$m",s],["$H",u],["$W",l],["$M",f],["$y",d],["$D",p]].forEach(function(F){z[F[1]]=function(G){return this.$g(G,F[0],F[1])}}),$.extend=function(F,G){return F.$i||(F(G,N,$),F.$i=!0),$},$.locale=I,$.isDayjs=A,$.unix=function(F){return $(1e3*F)},$.en=E[T],$.Ls=E,$.p={},$})})(Tne);const Ph=Iw,Dh=n=>Array.from(Array.from({length:n}).keys()),Ene=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return Dh(e).map((r,i)=>t-(e-i-1))},kne=n=>{const e=n.daysInMonth();return Dh(e).map((t,r)=>r+1)},Ane=n=>Dh(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),Rne=vn({selectedDay:{type:pt(Object)},range:{type:pt(Array)},date:{type:pt(Object),required:!0},hideHeader:{type:Boolean}}),Ine={pick:n=>ss(n)};var Pw={},Pne={get exports(){return Pw},set exports(n){Pw=n}};(function(n,e){(function(t,r){n.exports=r()})(Da,function(){return function(t,r,i){var a=r.prototype,o=function(f){return f&&(f.indexOf?f:f.s)},s=function(f,h,d,p,g){var m=f.name?f:f.$locale(),y=o(m[h]),b=o(m[d]),_=y||b.map(function(T){return T.slice(0,p)});if(!g)return _;var w=m.weekStart;return _.map(function(T,E){return _[(E+(w||0))%7]})},u=function(){return i.Ls[i.locale()]},l=function(f,h){return f.formats[h]||function(d){return d.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,g,m){return g||m.slice(1)})}(f.formats[h.toUpperCase()])},c=function(){var f=this;return{months:function(h){return h?h.format("MMMM"):s(f,"months")},monthsShort:function(h){return h?h.format("MMM"):s(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):s(f,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):s(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):s(f,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return l(f.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return c.bind(this)()},i.localeData=function(){var f=u();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(h){return l(f,h)},meridiem:f.meridiem,ordinal:f.ordinal}},i.months=function(){return s(u(),"months")},i.monthsShort=function(){return s(u(),"monthsShort","months",3)},i.weekdays=function(f){return s(u(),"weekdays",null,null,f)},i.weekdaysShort=function(f){return s(u(),"weekdaysShort","weekdays",3,f)},i.weekdaysMin=function(f){return s(u(),"weekdaysMin","weekdays",2,f)}}})})(Pne);const Dne=Pw,$ne=(n,e)=>{Ph.extend(Dne);const t=Ph.localeData().firstDayOfWeek(),{t:r,lang:i}=BT(),a=Ph().locale(i.value),o=_e(()=>!!n.range&&!!n.range.length),s=_e(()=>{let h=[];if(o.value){const[d,p]=n.range,g=Dh(p.date()-d.date()+1).map(b=>({text:d.date()+b,type:"current"}));let m=g.length%7;m=m===0?0:7-m;const y=Dh(m).map((b,_)=>({text:_+1,type:"next"}));h=g.concat(y)}else{const d=n.date.startOf("month").day(),p=Ene(n.date,(d-t+7)%7).map(b=>({text:b,type:"prev"})),g=kne(n.date).map(b=>({text:b,type:"current"}));h=[...p,...g];const m=7-(h.length%7||7),y=Dh(m).map((b,_)=>({text:_+1,type:"next"}));h=h.concat(y)}return Ane(h)}),u=_e(()=>{const h=t;return h===0?hx.map(d=>r(`el.datepicker.weeks.${d}`)):hx.slice(h).concat(hx.slice(0,h)).map(d=>r(`el.datepicker.weeks.${d}`))}),l=(h,d)=>{switch(d){case"prev":return n.date.startOf("month").subtract(1,"month").date(h);case"next":return n.date.startOf("month").add(1,"month").date(h);case"current":return n.date.date(h)}};return{now:a,isInRange:o,rows:s,weekDays:u,getFormattedDate:l,handlePickDay:({text:h,type:d})=>{const p=l(h,d);e("pick",p)},getSlotData:({text:h,type:d})=>{const p=l(h,d);return{isSelected:p.isSame(n.selectedDay),type:`${d}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},Nne={key:0},One=["onClick"],Lne=tt({name:"DateTable"}),Mne=tt({...Lne,props:Rne,emits:Ine,setup(n,{expose:e,emit:t}){const r=n,{isInRange:i,now:a,rows:o,weekDays:s,getFormattedDate:u,handlePickDay:l,getSlotData:c}=$ne(r,t),f=Rt("calendar-table"),h=Rt("calendar-day"),d=({text:p,type:g})=>{const m=[g];if(g==="current"){const y=u(p,g);y.isSame(r.selectedDay,"day")&&m.push(h.is("selected")),y.isSame(a,"day")&&m.push(h.is("today"))}return m};return e({getFormattedDate:u}),(p,g)=>(Ne(),Ke("table",{class:Xe([K(f).b(),K(f).is("range",K(i))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?Nt("v-if",!0):(Ne(),Ke("thead",Nne,[(Ne(!0),Ke(Or,null,Ih(K(s),m=>(Ne(),Ke("th",{key:m},or(m),1))),128))])),Ct("tbody",null,[(Ne(!0),Ke(Or,null,Ih(K(o),(m,y)=>(Ne(),Ke("tr",{key:y,class:Xe({[K(f).e("row")]:!0,[K(f).em("row","hide-border")]:y===0&&p.hideHeader})},[(Ne(!0),Ke(Or,null,Ih(m,(b,_)=>(Ne(),Ke("td",{key:_,class:Xe(d(b)),onClick:w=>K(l)(b)},[Ct("div",{class:Xe(K(h).b())},[vt(p.$slots,"date-cell",{data:K(c)(b)},()=>[Ct("span",null,or(b.text),1)])],2)],10,One))),128))],2))),128))])],2))}});var mD=Zt(Mne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const Bne=(n,e)=>{const t=n.endOf("month"),r=e.startOf("month"),a=t.isSame(r,"week")?r.add(1,"week"):r;return[[n,t],[a.startOf("week"),e]]},Fne=(n,e)=>{const t=n.endOf("month"),r=n.add(1,"month").startOf("month"),i=t.isSame(r,"week")?r.add(1,"week"):r,a=i.endOf("month"),o=e.startOf("month"),s=a.isSame(o,"week")?o.add(1,"week"):o;return[[n,t],[i.startOf("week"),a],[s.startOf("week"),e]]},Vne=(n,e,t)=>{const r=mg(),{lang:i}=BT(),a=it(),o=Ph().locale(i.value),s=_e({get(){return n.modelValue?l.value:a.value},set(y){if(!y)return;a.value=y;const b=y.toDate();e(V3,b),e(Gc,b)}}),u=_e(()=>{if(!n.range)return[];const y=n.range.map(w=>Ph(w).locale(i.value)),[b,_]=y;return b.isAfter(_)?[]:b.isSame(_,"month")?p(b,_):b.add(1,"month").month()!==_.month()?[]:p(b,_)}),l=_e(()=>n.modelValue?Ph(n.modelValue).locale(i.value):s.value||(u.value.length?u.value[0][0]:o)),c=_e(()=>l.value.subtract(1,"month").date(1)),f=_e(()=>l.value.add(1,"month").date(1)),h=_e(()=>l.value.subtract(1,"year").date(1)),d=_e(()=>l.value.add(1,"year").date(1)),p=(y,b)=>{const _=y.startOf("week"),w=b.endOf("week"),T=_.get("month"),E=w.get("month");return T===E?[[_,w]]:(T+1)%12===E?Bne(_,w):T+2===E||(T+1)%11===E?Fne(_,w):[]},g=y=>{s.value=y},m=y=>{const _={"prev-month":c.value,"next-month":f.value,"prev-year":h.value,"next-year":d.value,today:o}[y];_.isSame(l.value,"day")||g(_)};return q3({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},_e(()=>!!r.dateCell)),{calculateValidatedDateRange:p,date:l,realSelectedDay:s,pickDay:g,selectDate:m,validatedRange:u}},zne=n=>Rh(n)&&n.length===2&&n.every(e=>vw(e)),Une=vn({modelValue:{type:Date},range:{type:pt(Array),validator:zne}}),Wne={[Gc]:n=>vw(n),[V3]:n=>vw(n)},Hne="ElCalendar",Gne=tt({name:Hne}),jne=tt({...Gne,props:Une,emits:Wne,setup(n,{expose:e,emit:t}){const r=n,i=Rt("calendar"),{calculateValidatedDateRange:a,date:o,pickDay:s,realSelectedDay:u,selectDate:l,validatedRange:c}=Vne(r,t),{t:f}=BT(),h=_e(()=>{const d=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${f("el.datepicker.year")} ${f(d)}`});return e({selectedDay:u,pickDay:s,selectDate:l,calculateValidatedDateRange:a}),(d,p)=>(Ne(),Ke("div",{class:Xe(K(i).b())},[Ct("div",{class:Xe(K(i).e("header"))},[vt(d.$slots,"header",{date:K(h)},()=>[Ct("div",{class:Xe(K(i).e("title"))},or(K(h)),3),K(c).length===0?(Ne(),Ke("div",{key:0,class:Xe(K(i).e("button-group"))},[Zn(K(wne),null,{default:Ft(()=>[Zn(K(yx),{size:"small",onClick:p[0]||(p[0]=g=>K(l)("prev-month"))},{default:Ft(()=>[Dc(or(K(f)("el.datepicker.prevMonth")),1)]),_:1}),Zn(K(yx),{size:"small",onClick:p[1]||(p[1]=g=>K(l)("today"))},{default:Ft(()=>[Dc(or(K(f)("el.datepicker.today")),1)]),_:1}),Zn(K(yx),{size:"small",onClick:p[2]||(p[2]=g=>K(l)("next-month"))},{default:Ft(()=>[Dc(or(K(f)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Nt("v-if",!0)])],2),K(c).length===0?(Ne(),Ke("div",{key:0,class:Xe(K(i).e("body"))},[Zn(mD,{date:K(o),"selected-day":K(u),onPick:K(s)},KI({_:2},[d.$slots["date-cell"]||d.$slots.dateCell?{name:"date-cell",fn:Ft(g=>[d.$slots["date-cell"]?vt(d.$slots,"date-cell",Lp(Ni({key:0},g))):vt(d.$slots,"dateCell",Lp(Ni({key:1},g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(Ne(),Ke("div",{key:1,class:Xe(K(i).e("body"))},[(Ne(!0),Ke(Or,null,Ih(K(c),(g,m)=>(Ne(),Xt(mD,{key:m,date:g[0],"selected-day":K(u),range:g,"hide-header":m!==0,onPick:K(s)},KI({_:2},[d.$slots["date-cell"]||d.$slots.dateCell?{name:"date-cell",fn:Ft(y=>[d.$slots["date-cell"]?vt(d.$slots,"date-cell",Lp(Ni({key:0},y))):vt(d.$slots,"dateCell",Lp(Ni({key:1},y)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var qne=Zt(jne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const N5e=ri(qne),Xne=vn({header:{type:String,default:""},bodyStyle:{type:pt([String,Object,Array]),default:""},shadow:{type:String,values:["always","hover","never"],default:"always"}}),Kne=tt({name:"ElCard"}),Yne=tt({...Kne,props:Xne,setup(n){const e=Rt("card");return(t,r)=>(Ne(),Ke("div",{class:Xe([K(e).b(),K(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(Ne(),Ke("div",{key:0,class:Xe(K(e).e("header"))},[vt(t.$slots,"header",{},()=>[Dc(or(t.header),1)])],2)):Nt("v-if",!0),Ct("div",{class:Xe(K(e).e("body")),style:wr(t.bodyStyle)},[vt(t.$slots,"default")],6)],2))}});var Zne=Zt(Yne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const O5e=ri(Zne),Qne=vn({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:pt([Number,Object]),default:()=>Us({})},sm:{type:pt([Number,Object]),default:()=>Us({})},md:{type:pt([Number,Object]),default:()=>Us({})},lg:{type:pt([Number,Object]),default:()=>Us({})},xl:{type:pt([Number,Object]),default:()=>Us({})}}),Jne=tt({name:"ElCol"}),ere=tt({...Jne,props:Qne,setup(n){const e=n,{gutter:t}=pn(H3,{gutter:_e(()=>0)}),r=Rt("col"),i=_e(()=>{const o={};return t.value&&(o.paddingLeft=o.paddingRight=`${t.value/2}px`),o}),a=_e(()=>{const o=[];return["span","offset","pull","push"].forEach(l=>{const c=e[l];eu(c)&&(l==="span"?o.push(r.b(`${e[l]}`)):c>0&&o.push(r.b(`${l}-${e[l]}`)))}),["xs","sm","md","lg","xl"].forEach(l=>{eu(e[l])?o.push(r.b(`${l}-${e[l]}`)):ss(e[l])&&Object.entries(e[l]).forEach(([c,f])=>{o.push(c!=="span"?r.b(`${l}-${c}-${f}`):r.b(`${l}-${f}`))})}),t.value&&o.push(r.is("guttered")),o});return(o,s)=>(Ne(),Xt(so(o.tag),{class:Xe([K(r).b(),K(a)]),style:wr(K(i))},{default:Ft(()=>[vt(o.$slots,"default")]),_:3},8,["class","style"]))}});var tre=Zt(ere,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const L5e=ri(tre),yD=n=>typeof eu(n),nre=vn({accordion:Boolean,modelValue:{type:pt([Array,String,Number]),default:()=>Us([])}}),rre={[Gc]:yD,[F3]:yD},ire=(n,e)=>{const t=it(kv(n.modelValue)),r=a=>{t.value=a;const o=n.accordion?t.value[0]:t.value;e(Gc,o),e(F3,o)},i=a=>{if(n.accordion)r([t.value[0]===a?"":a]);else{const o=[...t.value],s=o.indexOf(a);s>-1?o.splice(s,1):o.push(a),r(o)}};return Ot(()=>n.modelValue,()=>t.value=kv(n.modelValue),{deep:!0}),kr(U3,{activeNames:t,handleItemClick:i}),{activeNames:t,setActiveNames:r}},are=()=>{const n=Rt("collapse");return{rootKls:_e(()=>n.b())}},ore=tt({name:"ElCollapse"}),sre=tt({...ore,props:nre,emits:rre,setup(n,{expose:e,emit:t}){const r=n,{activeNames:i,setActiveNames:a}=ire(r,t),{rootKls:o}=are();return e({activeNames:i,setActiveNames:a}),(s,u)=>(Ne(),Ke("div",{class:Xe(K(o)),role:"tablist","aria-multiselectable":"true"},[vt(s.$slots,"default")],2))}});var ure=Zt(sre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const lre=tt({name:"ElCollapseTransition"}),cre=tt({...lre,setup(n){const e=Rt("collapse-transition"),t={beforeEnter(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0},enter(r){r.dataset.oldOverflow=r.style.overflow,r.scrollHeight!==0?(r.style.maxHeight=`${r.scrollHeight}px`,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom):(r.style.maxHeight=0,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom),r.style.overflow="hidden"},afterEnter(r){r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow},beforeLeave(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.dataset.oldOverflow=r.style.overflow,r.style.maxHeight=`${r.scrollHeight}px`,r.style.overflow="hidden"},leave(r){r.scrollHeight!==0&&(r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0)},afterLeave(r){r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom}};return(r,i)=>(Ne(),Xt(ff,Ni({name:K(e).b()},A9(t)),{default:Ft(()=>[vt(r.$slots,"default")]),_:3},16,["name"]))}});var Fy=Zt(cre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);Fy.install=n=>{n.component(Fy.name,Fy)};const _F=Fy,fre=vn({title:{type:String,default:""},name:{type:pt([String,Number]),default:()=>PT()},disabled:Boolean}),hre=n=>{const e=pn(U3),t=it(!1),r=it(!1),i=it(PT()),a=_e(()=>e==null?void 0:e.activeNames.value.includes(n.name));return{focusing:t,id:i,isActive:a,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:t.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(n.name),t.value=!1,r.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(n.name)}}},dre=(n,{focusing:e,isActive:t,id:r})=>{const i=Rt("collapse"),a=_e(()=>[i.b("item"),i.is("active",K(t)),i.is("disabled",n.disabled)]),o=_e(()=>[i.be("item","header"),i.is("active",K(t)),{focusing:K(e)&&!n.disabled}]),s=_e(()=>[i.be("item","arrow"),i.is("active",K(t))]),u=_e(()=>i.be("item","wrap")),l=_e(()=>i.be("item","content")),c=_e(()=>i.b(`content-${K(r)}`)),f=_e(()=>i.b(`head-${K(r)}`));return{arrowKls:s,headKls:o,rootKls:a,itemWrapperKls:u,itemContentKls:l,scopedContentId:c,scopedHeadId:f}},pre=["aria-expanded","aria-controls","aria-describedby"],vre=["id","tabindex"],gre=["id","aria-hidden","aria-labelledby"],mre=tt({name:"ElCollapseItem"}),yre=tt({...mre,props:fre,setup(n,{expose:e}){const t=n,{focusing:r,id:i,isActive:a,handleFocus:o,handleHeaderClick:s,handleEnterClick:u}=hre(t),{arrowKls:l,headKls:c,rootKls:f,itemWrapperKls:h,itemContentKls:d,scopedContentId:p,scopedHeadId:g}=dre(t,{focusing:r,isActive:a,id:i});return e({isActive:a}),(m,y)=>(Ne(),Ke("div",{class:Xe(K(f))},[Ct("div",{role:"tab","aria-expanded":K(a),"aria-controls":K(p),"aria-describedby":K(p)},[Ct("div",{id:K(g),class:Xe(K(c)),role:"button",tabindex:m.disabled?-1:0,onClick:y[0]||(y[0]=(...b)=>K(s)&&K(s)(...b)),onKeypress:y[1]||(y[1]=R9(dT((...b)=>K(u)&&K(u)(...b),["stop","prevent"]),["space","enter"])),onFocus:y[2]||(y[2]=(...b)=>K(o)&&K(o)(...b)),onBlur:y[3]||(y[3]=b=>r.value=!1)},[vt(m.$slots,"title",{},()=>[Dc(or(m.title),1)]),Zn(K(Zi),{class:Xe(K(l))},{default:Ft(()=>[Zn(K(P3))]),_:1},8,["class"])],42,vre)],8,pre),Zn(K(_F),null,{default:Ft(()=>[bl(Ct("div",{id:K(p),class:Xe(K(h)),role:"tabpanel","aria-hidden":!K(a),"aria-labelledby":K(g)},[Ct("div",{class:Xe(K(d))},[vt(m.$slots,"default")],2)],10,gre),[[cf,K(a)]])]),_:3})],2))}});var wF=Zt(yre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const M5e=ri(ure,{CollapseItem:wF}),B5e=go(wF),Dw={},bre=vn({a11y:{type:Boolean,default:!0},locale:{type:pt(Object)},size:NT,button:{type:pt(Object)},experimentalFeatures:{type:pt(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:pt(Object)},zIndex:Number,namespace:{type:String,default:"el"}});tt({name:"ElConfigProvider",props:bre,setup(n,{slots:e}){Ot(()=>n.message,r=>{Object.assign(Dw,r??{})},{immediate:!0,deep:!0});const t=iJ(n);return()=>vt(e,"default",{config:t==null?void 0:t.value})}});const xre=tt({name:"ElContainer"}),_re=tt({...xre,props:{direction:{type:String}},setup(n){const e=n,t=mg(),r=Rt("container"),i=_e(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(o=>{const s=o.type.name;return s==="ElHeader"||s==="ElFooter"}):!1);return(a,o)=>(Ne(),Ke("section",{class:Xe([K(r).b(),K(r).is("vertical",K(i))])},[vt(a.$slots,"default")],2))}});var wre=Zt(_re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const Sre=tt({name:"ElAside"}),Cre=tt({...Sre,props:{width:{type:String,default:null}},setup(n){const e=n,t=Rt("aside"),r=_e(()=>e.width?t.cssVarBlock({width:e.width}):{});return(i,a)=>(Ne(),Ke("aside",{class:Xe(K(t).b()),style:wr(K(r))},[vt(i.$slots,"default")],6))}});var SF=Zt(Cre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Tre=tt({name:"ElFooter"}),Ere=tt({...Tre,props:{height:{type:String,default:null}},setup(n){const e=n,t=Rt("footer"),r=_e(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,a)=>(Ne(),Ke("footer",{class:Xe(K(t).b()),style:wr(K(r))},[vt(i.$slots,"default")],6))}});var CF=Zt(Ere,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const kre=tt({name:"ElHeader"}),Are=tt({...kre,props:{height:{type:String,default:null}},setup(n){const e=n,t=Rt("header"),r=_e(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,a)=>(Ne(),Ke("header",{class:Xe(K(t).b()),style:wr(K(r))},[vt(i.$slots,"default")],6))}});var TF=Zt(Are,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const Rre=tt({name:"ElMain"}),Ire=tt({...Rre,setup(n){const e=Rt("main");return(t,r)=>(Ne(),Ke("main",{class:Xe(K(e).b())},[vt(t.$slots,"default")],2))}});var EF=Zt(Ire,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const F5e=ri(wre,{Aside:SF,Footer:CF,Header:TF,Main:EF});go(SF);const V5e=go(CF),z5e=go(TF),U5e=go(EF),Pre=vn({model:Object,rules:{type:pt(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:IT},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),Dre={validate:(n,e,t)=>(Rh(n)||nr(n))&&D1(e)&&nr(t)};function $re(){const n=it([]),e=_e(()=>{if(!n.value.length)return"0";const a=Math.max(...n.value);return a?`${a}px`:""});function t(a){const o=n.value.indexOf(a);return o===-1&&e.value,o}function r(a,o){if(a&&o){const s=t(o);n.value.splice(s,1,a)}else a&&n.value.push(a)}function i(a){const o=t(a);o>-1&&n.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const mm=(n,e)=>{const t=kv(e);return t.length>0?n.filter(r=>r.prop&&t.includes(r.prop)):n},Nre="ElForm",Ore=tt({name:Nre}),Lre=tt({...Ore,props:Pre,emits:Dre,setup(n,{expose:e,emit:t}){const r=n,i=[],a=L1(),o=Rt("form"),s=_e(()=>{const{labelPosition:b,inline:_}=r;return[o.b(),o.m(a.value||"default"),{[o.m(`label-${b}`)]:b,[o.m("inline")]:_}]}),u=b=>{i.push(b)},l=b=>{b.prop&&i.splice(i.indexOf(b),1)},c=(b=[])=>{r.model&&mm(i,b).forEach(_=>_.resetField())},f=(b=[])=>{mm(i,b).forEach(_=>_.clearValidate())},h=_e(()=>!!r.model),d=b=>{if(i.length===0)return[];const _=mm(i,b);return _.length?_:[]},p=async b=>m(void 0,b),g=async(b=[])=>{if(!h.value)return!1;const _=d(b);if(_.length===0)return!0;let w={};for(const T of _)try{await T.validate("")}catch(E){w={...w,...E}}return Object.keys(w).length===0?!0:Promise.reject(w)},m=async(b=[],_)=>{const w=!jo(_);try{const T=await g(b);return T===!0&&(_==null||_(T)),T}catch(T){if(T instanceof Error)throw T;const E=T;return r.scrollToError&&y(Object.keys(E)[0]),_==null||_(!1,E),w&&Promise.reject(E)}},y=b=>{var _;const w=mm(i,b)[0];w&&((_=w.$el)==null||_.scrollIntoView())};return Ot(()=>r.rules,()=>{r.validateOnRuleChange&&p().catch(b=>void 0)},{deep:!0}),kr(Cd,lu({...pT(r),emit:t,resetFields:c,clearValidate:f,validateField:m,addField:u,removeField:l,...$re()})),e({validate:p,validateField:m,resetFields:c,clearValidate:f,scrollToField:y}),(b,_)=>(Ne(),Ke("form",{class:Xe(K(s))},[vt(b.$slots,"default")],2))}});var Mre=Zt(Lre,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function Ec(){return Ec=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ec.apply(this,arguments)}function Bre(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Dv(n,e)}function $w(n){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$w(n)}function Dv(n,e){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Dv(n,e)}function Fre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vy(n,e,t){return Fre()?Vy=Reflect.construct.bind():Vy=function(i,a,o){var s=[null];s.push.apply(s,a);var u=Function.bind.apply(i,s),l=new u;return o&&Dv(l,o.prototype),l},Vy.apply(null,arguments)}function Vre(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Nw(n){var e=typeof Map=="function"?new Map:void 0;return Nw=function(r){if(r===null||!Vre(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Vy(r,arguments,$w(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Dv(i,r)},Nw(n)}var zre=/%[sdj%]/g,Ure=function(){};typeof process<"u"&&process.env;function Ow(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function Ji(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,a=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(zre,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return s}});return o}return n}function Wre(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function yr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||Wre(e)&&typeof n=="string"&&!n)}function Hre(n,e,t){var r=[],i=0,a=n.length;function o(s){r.push.apply(r,s||[]),i++,i===a&&t(r)}n.forEach(function(s){e(s,o)})}function bD(n,e,t){var r=0,i=n.length;function a(o){if(o&&o.length){t(o);return}var s=r;r=r+1,s<i?e(n[s],a):t([])}a([])}function Gre(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var xD=function(n){Bre(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(Nw(Error));function jre(n,e,t,r,i){if(e.first){var a=new Promise(function(h,d){var p=function(y){return r(y),y.length?d(new xD(y,Ow(y))):h(i)},g=Gre(n);bD(g,t,p)});return a.catch(function(h){return h}),a}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],s=Object.keys(n),u=s.length,l=0,c=[],f=new Promise(function(h,d){var p=function(m){if(c.push.apply(c,m),l++,l===u)return r(c),c.length?d(new xD(c,Ow(c))):h(i)};s.length||(r(c),h(i)),s.forEach(function(g){var m=n[g];o.indexOf(g)!==-1?bD(m,t,p):Hre(m,t,p)})});return f.catch(function(h){return h}),f}function qre(n){return!!(n&&n.message!==void 0)}function Xre(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function _D(n,e){return function(t){var r;return n.fullFields?r=Xre(e,n.fullFields):r=e[t.field||n.fullField],qre(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function wD(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=Ec({},n[t],r):n[t]=r}}return n}var kF=function(e,t,r,i,a,o){e.required&&(!r.hasOwnProperty(e.field)||yr(t,o||e.type))&&i.push(Ji(a.messages.required,e.fullField))},Kre=function(e,t,r,i,a){(/^\s+$/.test(t)||t==="")&&i.push(Ji(a.messages.whitespace,e.fullField))},ym,Yre=function(){if(ym)return ym;var n="[a-fA-F\\d:]",e=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),o=new RegExp("^"+t+"$"),s=new RegExp("^"+i+"$"),u=function(w){return w&&w.exact?a:new RegExp("(?:"+e(w)+t+e(w)+")|(?:"+e(w)+i+e(w)+")","g")};u.v4=function(_){return _&&_.exact?o:new RegExp(""+e(_)+t+e(_),"g")},u.v6=function(_){return _&&_.exact?s:new RegExp(""+e(_)+i+e(_),"g")};var l="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",f=u.v4().source,h=u.v6().source,d="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",m="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',b="(?:"+l+"|www\\.)"+c+"(?:localhost|"+f+"|"+h+"|"+d+p+g+")"+m+y;return ym=new RegExp("(?:^"+b+"$)","i"),ym},SD={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Bp={integer:function(e){return Bp.number(e)&&parseInt(e,10)===e},float:function(e){return Bp.number(e)&&!Bp.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Bp.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(SD.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Yre())},hex:function(e){return typeof e=="string"&&!!e.match(SD.hex)}},Zre=function(e,t,r,i,a){if(e.required&&t===void 0){kF(e,t,r,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?Bp[s](t)||i.push(Ji(a.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&i.push(Ji(a.messages.types[s],e.fullField,e.type))},Qre=function(e,t,r,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",u=typeof e.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,f=null,h=typeof t=="number",d=typeof t=="string",p=Array.isArray(t);if(h?f="number":d?f="string":p&&(f="array"),!f)return!1;p&&(c=t.length),d&&(c=t.replace(l,"_").length),o?c!==e.len&&i.push(Ji(a.messages[f].len,e.fullField,e.len)):s&&!u&&c<e.min?i.push(Ji(a.messages[f].min,e.fullField,e.min)):u&&!s&&c>e.max?i.push(Ji(a.messages[f].max,e.fullField,e.max)):s&&u&&(c<e.min||c>e.max)&&i.push(Ji(a.messages[f].range,e.fullField,e.min,e.max))},Gf="enum",Jre=function(e,t,r,i,a){e[Gf]=Array.isArray(e[Gf])?e[Gf]:[],e[Gf].indexOf(t)===-1&&i.push(Ji(a.messages[Gf],e.fullField,e[Gf].join(", ")))},eie=function(e,t,r,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(Ji(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||i.push(Ji(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Wt={required:kF,whitespace:Kre,type:Zre,range:Qre,enum:Jre,pattern:eie},tie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t,"string")&&!e.required)return r();Wt.required(e,t,i,o,a,"string"),yr(t,"string")||(Wt.type(e,t,i,o,a),Wt.range(e,t,i,o,a),Wt.pattern(e,t,i,o,a),e.whitespace===!0&&Wt.whitespace(e,t,i,o,a))}r(o)},nie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&Wt.type(e,t,i,o,a)}r(o)},rie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t===""&&(t=void 0),yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&(Wt.type(e,t,i,o,a),Wt.range(e,t,i,o,a))}r(o)},iie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&Wt.type(e,t,i,o,a)}r(o)},aie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),yr(t)||Wt.type(e,t,i,o,a)}r(o)},oie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&(Wt.type(e,t,i,o,a),Wt.range(e,t,i,o,a))}r(o)},sie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&(Wt.type(e,t,i,o,a),Wt.range(e,t,i,o,a))}r(o)},uie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(t==null&&!e.required)return r();Wt.required(e,t,i,o,a,"array"),t!=null&&(Wt.type(e,t,i,o,a),Wt.range(e,t,i,o,a))}r(o)},lie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&Wt.type(e,t,i,o,a)}r(o)},cie="enum",fie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a),t!==void 0&&Wt[cie](e,t,i,o,a)}r(o)},hie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t,"string")&&!e.required)return r();Wt.required(e,t,i,o,a),yr(t,"string")||Wt.pattern(e,t,i,o,a)}r(o)},die=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t,"date")&&!e.required)return r();if(Wt.required(e,t,i,o,a),!yr(t,"date")){var u;t instanceof Date?u=t:u=new Date(t),Wt.type(e,u,i,o,a),u&&Wt.range(e,u.getTime(),i,o,a)}}r(o)},pie=function(e,t,r,i,a){var o=[],s=Array.isArray(t)?"array":typeof t;Wt.required(e,t,i,o,a,s),r(o)},bx=function(e,t,r,i,a){var o=e.type,s=[],u=e.required||!e.required&&i.hasOwnProperty(e.field);if(u){if(yr(t,o)&&!e.required)return r();Wt.required(e,t,i,s,a,o),yr(t,o)||Wt.type(e,t,i,s,a)}r(s)},vie=function(e,t,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(yr(t)&&!e.required)return r();Wt.required(e,t,i,o,a)}r(o)},av={string:tie,method:nie,number:rie,boolean:iie,regexp:aie,integer:oie,float:sie,array:uie,object:lie,enum:fie,pattern:hie,date:die,url:bx,hex:bx,email:bx,required:pie,any:vie};function Lw(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Mw=Lw(),xg=function(){function n(t){this.rules=null,this._messages=Mw,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var o=r[a];i.rules[a]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=wD(Lw(),r)),this._messages},e.validate=function(r,i,a){var o=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var s=r,u=i,l=a;if(typeof u=="function"&&(l=u,u={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,s),Promise.resolve(s);function c(g){var m=[],y={};function b(w){if(Array.isArray(w)){var T;m=(T=m).concat.apply(T,w)}else m.push(w)}for(var _=0;_<g.length;_++)b(g[_]);m.length?(y=Ow(m),l(m,y)):l(null,s)}if(u.messages){var f=this.messages();f===Mw&&(f=Lw()),wD(f,u.messages),u.messages=f}else u.messages=this.messages();var h={},d=u.keys||Object.keys(this.rules);d.forEach(function(g){var m=o.rules[g],y=s[g];m.forEach(function(b){var _=b;typeof _.transform=="function"&&(s===r&&(s=Ec({},s)),y=s[g]=_.transform(y)),typeof _=="function"?_={validator:_}:_=Ec({},_),_.validator=o.getValidationMethod(_),_.validator&&(_.field=g,_.fullField=_.fullField||g,_.type=o.getType(_),h[g]=h[g]||[],h[g].push({rule:_,value:y,source:s,field:g}))})});var p={};return jre(h,u,function(g,m){var y=g.rule,b=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");b=b&&(y.required||!y.required&&g.value),y.field=g.field;function _(E,A){return Ec({},A,{fullField:y.fullField+"."+E,fullFields:y.fullFields?[].concat(y.fullFields,[E]):[E]})}function w(E){E===void 0&&(E=[]);var A=Array.isArray(E)?E:[E];!u.suppressWarning&&A.length&&n.warning("async-validator:",A),A.length&&y.message!==void 0&&(A=[].concat(y.message));var I=A.map(_D(y,s));if(u.first&&I.length)return p[y.field]=1,m(I);if(!b)m(I);else{if(y.required&&!g.value)return y.message!==void 0?I=[].concat(y.message).map(_D(y,s)):u.error&&(I=[u.error(y,Ji(u.messages.required,y.field))]),m(I);var $={};y.defaultField&&Object.keys(g.value).map(function(z){$[z]=y.defaultField}),$=Ec({},$,g.rule.fields);var D={};Object.keys($).forEach(function(z){var F=$[z],G=Array.isArray(F)?F:[F];D[z]=G.map(_.bind(null,z))});var N=new n(D);N.messages(u.messages),g.rule.options&&(g.rule.options.messages=u.messages,g.rule.options.error=u.error),N.validate(g.value,g.rule.options||u,function(z){var F=[];I&&I.length&&F.push.apply(F,I),z&&z.length&&F.push.apply(F,z),m(F.length?F:null)})}}var T;if(y.asyncValidator)T=y.asyncValidator(y,g.value,w,g.source,u);else if(y.validator){try{T=y.validator(y,g.value,w,g.source,u)}catch(E){console.error==null||console.error(E),u.suppressValidatorError||setTimeout(function(){throw E},0),w(E.message)}T===!0?w():T===!1?w(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):T instanceof Array?w(T):T instanceof Error&&w(T.message)}T&&T.then&&T.then(function(){return w()},function(E){return w(E)})},function(g){c(g)},s)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!av.hasOwnProperty(r.type))throw new Error(Ji("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?av.required:av[this.getType(r)]||void 0},n}();xg.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");av[e]=t};xg.warning=Ure;xg.messages=Mw;xg.validators=av;const gie=["","error","validating","success"],mie=vn({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:pt([String,Array])},required:{type:Boolean,default:void 0},rules:{type:pt([Object,Array])},error:String,validateStatus:{type:String,values:gie},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:IT}}),CD="ElLabelWrap";var yie=tt({name:CD,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=pn(Cd,void 0),r=pn(jc);r||Rv(CD,"usage: <el-form-item><label-wrap /></el-form-item>");const i=Rt("form"),a=it(),o=it(0),s=()=>{var c;if((c=a.value)!=null&&c.firstElementChild){const f=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},u=(c="update")=>{Di(()=>{e.default&&n.isAutoWidth&&(c==="update"?o.value=s():c==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},l=()=>u("update");return ni(()=>{l()}),vo(()=>{u("remove")}),I9(()=>l()),Ot(o,(c,f)=>{n.updateAll&&(t==null||t.registerLabelWidth(c,f))}),N1(_e(()=>{var c,f;return(f=(c=a.value)==null?void 0:c.firstElementChild)!=null?f:null}),l),()=>{var c,f;if(!e)return null;const{isAutoWidth:h}=n;if(h){const d=t==null?void 0:t.autoLabelWidth,p=r==null?void 0:r.hasLabel,g={};if(p&&d&&d!=="auto"){const m=Math.max(0,Number.parseInt(d,10)-o.value),y=t.labelPosition==="left"?"marginRight":"marginLeft";m&&(g[y]=`${m}px`)}return Zn("div",{ref:a,class:[i.be("item","label-wrap")],style:g},[(c=e.default)==null?void 0:c.call(e)])}else return Zn(Or,{ref:a},[(f=e.default)==null?void 0:f.call(e)])}}});const bie=["role","aria-labelledby"],xie=tt({name:"ElFormItem"}),_ie=tt({...xie,props:mie,setup(n,{expose:e}){const t=n,r=mg(),i=pn(Cd,void 0),a=pn(jc,void 0),o=L1(void 0,{formItem:!1}),s=Rt("form-item"),u=MT().value,l=it([]),c=it(""),f=iZ(c,100),h=it(""),d=it();let p,g=!1;const m=_e(()=>{if((i==null?void 0:i.labelPosition)==="top")return{};const ye=Ew(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return ye?{width:ye}:{}}),y=_e(()=>{if((i==null?void 0:i.labelPosition)==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&$)return{};const ye=Ew(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!r.label?{marginLeft:ye}:{}}),b=_e(()=>[s.b(),s.m(o.value),s.is("error",c.value==="error"),s.is("validating",c.value==="validating"),s.is("success",c.value==="success"),s.is("required",G.value||t.required),s.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[s.m("feedback")]:i==null?void 0:i.statusIcon}]),_=_e(()=>D1(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),w=_e(()=>[s.e("error"),{[s.em("error","inline")]:_.value}]),T=_e(()=>t.prop?nr(t.prop)?t.prop:t.prop.join("."):""),E=_e(()=>!!(t.label||r.label)),A=_e(()=>t.for||l.value.length===1?l.value[0]:void 0),I=_e(()=>!A.value&&E.value),$=!!a,D=_e(()=>{const ye=i==null?void 0:i.model;if(!(!ye||!t.prop))return fx(ye,t.prop).value}),N=_e(()=>{const{required:ye}=t,Ee=[];t.rules&&Ee.push(...kv(t.rules));const De=i==null?void 0:i.rules;if(De&&t.prop){const Me=fx(De,t.prop).value;Me&&Ee.push(...kv(Me))}if(ye!==void 0){const Me=Ee.map((Ie,Be)=>[Ie,Be]).filter(([Ie])=>Object.keys(Ie).includes("required"));if(Me.length>0)for(const[Ie,Be]of Me)Ie.required!==ye&&(Ee[Be]={...Ie,required:ye});else Ee.push({required:ye})}return Ee}),z=_e(()=>N.value.length>0),F=ye=>N.value.filter(De=>!De.trigger||!ye?!0:Array.isArray(De.trigger)?De.trigger.includes(ye):De.trigger===ye).map(({trigger:De,...Me})=>Me),G=_e(()=>N.value.some(ye=>ye.required)),U=_e(()=>{var ye;return f.value==="error"&&t.showMessage&&((ye=i==null?void 0:i.showMessage)!=null?ye:!0)}),H=_e(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),X=ye=>{c.value=ye},Z=ye=>{var Ee,De;const{errors:Me,fields:Ie}=ye;(!Me||!Ie)&&console.error(ye),X("error"),h.value=Me?(De=(Ee=Me==null?void 0:Me[0])==null?void 0:Ee.message)!=null?De:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,h.value)},Q=()=>{X("success"),i==null||i.emit("validate",t.prop,!0,"")},le=async ye=>{const Ee=T.value;return new xg({[Ee]:ye}).validate({[Ee]:D.value},{firstFields:!0}).then(()=>(Q(),!0)).catch(Me=>(Z(Me),Promise.reject(Me)))},ge=async(ye,Ee)=>{if(g||!t.prop)return!1;const De=jo(Ee);if(!z.value)return Ee==null||Ee(!1),!1;const Me=F(ye);return Me.length===0?(Ee==null||Ee(!0),!0):(X("validating"),le(Me).then(()=>(Ee==null||Ee(!0),!0)).catch(Ie=>{const{fields:Be}=Ie;return Ee==null||Ee(!1,Be),De?!1:Promise.reject(Be)}))},be=()=>{X(""),h.value="",g=!1},ke=async()=>{const ye=i==null?void 0:i.model;if(!ye||!t.prop)return;const Ee=fx(ye,t.prop);g=!0,Ee.value=MP(p),await Di(),be(),g=!1},Ae=ye=>{l.value.includes(ye)||l.value.push(ye)},de=ye=>{l.value=l.value.filter(Ee=>Ee!==ye)};Ot(()=>t.error,ye=>{h.value=ye||"",X(ye?"error":"")},{immediate:!0}),Ot(()=>t.validateStatus,ye=>X(ye||""));const Ce=lu({...pT(t),$el:d,size:o,validateState:c,labelId:u,inputIds:l,isGroup:I,hasLabel:E,addInputId:Ae,removeInputId:de,resetField:ke,clearValidate:be,validate:ge});return kr(jc,Ce),ni(()=>{t.prop&&(i==null||i.addField(Ce),p=MP(D.value))}),vo(()=>{i==null||i.removeField(Ce)}),e({size:o,validateMessage:h,validateState:c,validate:ge,clearValidate:be,resetField:ke}),(ye,Ee)=>{var De;return Ne(),Ke("div",{ref_key:"formItemRef",ref:d,class:Xe(K(b)),role:K(I)?"group":void 0,"aria-labelledby":K(I)?K(u):void 0},[Zn(K(yie),{"is-auto-width":K(m).width==="auto","update-all":((De=K(i))==null?void 0:De.labelWidth)==="auto"},{default:Ft(()=>[K(E)?(Ne(),Xt(so(K(A)?"label":"div"),{key:0,id:K(u),for:K(A),class:Xe(K(s).e("label")),style:wr(K(m))},{default:Ft(()=>[vt(ye.$slots,"label",{label:K(H)},()=>[Dc(or(K(H)),1)])]),_:3},8,["id","for","class","style"])):Nt("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Ct("div",{class:Xe(K(s).e("content")),style:wr(K(y))},[vt(ye.$slots,"default"),Zn(ff,{name:`${K(s).namespace.value}-zoom-in-top`},{default:Ft(()=>[K(U)?vt(ye.$slots,"error",{key:0,error:h.value},()=>[Ct("div",{class:Xe(K(w))},or(h.value),3)]):Nt("v-if",!0)]),_:3},8,["name"])],6)],10,bie)}}});var AF=Zt(_ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const W5e=ri(Mre,{FormItem:AF}),H5e=go(AF);let wie=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",r=>{let i=!1;switch(r.code){case hi.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case hi.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case hi.tab:{Ly(e,"mouseleave");break}case hi.enter:case hi.space:{i=!0,r.currentTarget.click();break}}return i&&(r.preventDefault(),r.stopPropagation()),!1})})}},Sie=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new wie(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case hi.down:{Ly(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case hi.up:{Ly(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case hi.tab:{Ly(e.currentTarget,"mouseleave");break}case hi.enter:case hi.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},Cie=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(r=>{r.nodeType===1&&new Sie(r,e)})}};const Tie=tt({name:"ElMenuCollapseTransition",setup(){const n=Rt("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,r){xh(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",r()},onAfterEnter(t){$c(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),bZ(t,n.m("collapse"))?($c(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),xh(t,n.m("collapse"))):(xh(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),$c(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){xh(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function Eie(n,e,t,r,i,a){return Ne(),Xt(ff,Ni({mode:"out-in"},n.listeners),{default:Ft(()=>[vt(n.$slots,"default")]),_:3},16)}var kie=Zt(Tie,[["render",Eie],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function RF(n,e){const t=_e(()=>{let i=n.parent;const a=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a});return{parentMenu:_e(()=>{let i=n.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:t}}function Aie(n){return _e(()=>{const t=n.backgroundColor;return t?new bF(t).shade(20).toString():""})}const IF=(n,e)=>{const t=Rt("menu");return _e(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":Aie(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},Rie=vn({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:js},expandOpenIcon:{type:js},collapseCloseIcon:{type:js},collapseOpenIcon:{type:js}}),xx="ElSubMenu";var ZT=tt({name:xx,props:Rie,setup(n,{slots:e,expose:t}){const r=cu(),{indexPath:i,parentMenu:a}=RF(r,_e(()=>n.index)),o=Rt("menu"),s=Rt("sub-menu"),u=pn("rootMenu");u||Rv(xx,"can not inject root menu");const l=pn(`subMenu:${a.value.uid}`);l||Rv(xx,"can not inject sub menu");const c=it({}),f=it({});let h;const d=it(!1),p=it(),g=it(null),m=_e(()=>N.value==="horizontal"&&b.value?"bottom-start":"right-start"),y=_e(()=>N.value==="horizontal"&&b.value||N.value==="vertical"&&!u.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?E.value?n.expandOpenIcon:n.expandCloseIcon:TZ:n.collapseCloseIcon&&n.collapseOpenIcon?E.value?n.collapseOpenIcon:n.collapseCloseIcon:P3),b=_e(()=>l.level===0),_=_e(()=>n.popperAppendToBody===void 0?b.value:Boolean(n.popperAppendToBody)),w=_e(()=>u.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),T=_e(()=>N.value==="horizontal"&&b.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),E=_e(()=>u.openedMenus.includes(n.index)),A=_e(()=>{let Q=!1;return Object.values(c.value).forEach(le=>{le.active&&(Q=!0)}),Object.values(f.value).forEach(le=>{le.active&&(Q=!0)}),Q}),I=_e(()=>u.props.backgroundColor||""),$=_e(()=>u.props.activeTextColor||""),D=_e(()=>u.props.textColor||""),N=_e(()=>u.props.mode),z=lu({index:n.index,indexPath:i,active:A}),F=_e(()=>N.value!=="horizontal"?{color:D.value}:{borderBottomColor:A.value?u.props.activeTextColor?$.value:"":"transparent",color:A.value?$.value:D.value}),G=()=>{var Q,le,ge;return(ge=(le=(Q=g.value)==null?void 0:Q.popperRef)==null?void 0:le.popperInstanceRef)==null?void 0:ge.destroy()},U=Q=>{Q||G()},H=()=>{u.props.menuTrigger==="hover"&&u.props.mode==="horizontal"||u.props.collapse&&u.props.mode==="vertical"||n.disabled||u.handleSubMenuClick({index:n.index,indexPath:i.value,active:A.value})},X=(Q,le=n.showTimeout)=>{var ge;Q.type!=="focus"&&(u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"||n.disabled||(l.mouseInChild.value=!0,h==null||h(),{stop:h}=Sw(()=>{u.openMenu(n.index,i.value)},le),_.value&&((ge=a.value.vnode.el)==null||ge.dispatchEvent(new MouseEvent("mouseenter")))))},Z=(Q=!1)=>{var le,ge;u.props.menuTrigger==="click"&&u.props.mode==="horizontal"||!u.props.collapse&&u.props.mode==="vertical"||(h==null||h(),l.mouseInChild.value=!1,{stop:h}=Sw(()=>!d.value&&u.closeMenu(n.index,i.value),n.hideTimeout),_.value&&Q&&((le=r.parent)==null?void 0:le.type.name)==="ElSubMenu"&&((ge=l.handleMouseleave)==null||ge.call(l,!0)))};Ot(()=>u.props.collapse,Q=>U(Boolean(Q)));{const Q=ge=>{f.value[ge.index]=ge},le=ge=>{delete f.value[ge.index]};kr(`subMenu:${r.uid}`,{addSubMenu:Q,removeSubMenu:le,handleMouseleave:Z,mouseInChild:d,level:l.level+1})}return t({opened:E}),ni(()=>{u.addSubMenu(z),l.addSubMenu(z)}),vo(()=>{l.removeSubMenu(z),u.removeSubMenu(z)}),()=>{var Q;const le=[(Q=e.title)==null?void 0:Q.call(e),Gn(Zi,{class:s.e("icon-arrow"),style:{transform:E.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&u.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>nr(y.value)?Gn(r.appContext.components[y.value]):Gn(y.value)})],ge=IF(u.props,l.level+1),be=u.isMenuPopup?Gn(mF,{ref:g,visible:E.value,effect:"light",pure:!0,offset:n.popperOffset,showArrow:!1,persistent:!0,popperClass:n.popperClass,placement:m.value,teleported:_.value,fallbackPlacements:T.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var ke;return Gn("div",{class:[o.m(N.value),o.m("popup-container"),n.popperClass],onMouseenter:Ae=>X(Ae,100),onMouseleave:()=>Z(!0),onFocus:Ae=>X(Ae,100)},[Gn("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${m.value}`)],style:ge.value},[(ke=e.default)==null?void 0:ke.call(e)])])},default:()=>Gn("div",{class:s.e("title"),style:[F.value,{backgroundColor:I.value}],onClick:H},le)}):Gn(Or,{},[Gn("div",{class:s.e("title"),style:[F.value,{backgroundColor:I.value}],ref:p,onClick:H},le),Gn(_F,{},{default:()=>{var ke;return bl(Gn("ul",{role:"menu",class:[o.b(),o.m("inline")],style:ge.value},[(ke=e.default)==null?void 0:ke.call(e)]),[[cf,E.value]])}})]);return Gn("li",{class:[s.b(),s.is("active",A.value),s.is("opened",E.value),s.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:E.value,onMouseenter:X,onMouseleave:()=>Z(!0),onFocus:X},[be])}}});const Iie=vn({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:pt(Array),default:()=>Us([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),_x=n=>Array.isArray(n)&&n.every(e=>nr(e)),Pie={close:(n,e)=>nr(n)&&_x(e),open:(n,e)=>nr(n)&&_x(e),select:(n,e,t,r)=>nr(n)&&_x(e)&&ss(t)&&(r===void 0||r instanceof Promise)};var Die=tt({name:"ElMenu",props:Iie,emits:Pie,setup(n,{emit:e,slots:t,expose:r}){const i=cu(),a=i.appContext.config.globalProperties.$router,o=it(),s=Rt("menu"),u=Rt("sub-menu"),l=it(-1),c=it(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),f=it(n.defaultActive),h=it({}),d=it({}),p=_e(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),g=()=>{const D=f.value&&h.value[f.value];if(!D||n.mode==="horizontal"||n.collapse)return;D.indexPath.forEach(z=>{const F=d.value[z];F&&m(z,F.indexPath)})},m=(D,N)=>{c.value.includes(D)||(n.uniqueOpened&&(c.value=c.value.filter(z=>N.includes(z))),c.value.push(D),e("open",D,N))},y=(D,N)=>{const z=c.value.indexOf(D);z!==-1&&c.value.splice(z,1),e("close",D,N)},b=({index:D,indexPath:N})=>{c.value.includes(D)?y(D,N):m(D,N)},_=D=>{(n.mode==="horizontal"||n.collapse)&&(c.value=[]);const{index:N,indexPath:z}=D;if(!(N===void 0||z===void 0))if(n.router&&a){const F=D.route||N,G=a.push(F).then(U=>(U||(f.value=N),U));e("select",N,z,{index:N,indexPath:z,route:F},G)}else f.value=N,e("select",N,z,{index:N,indexPath:z})},w=D=>{const N=h.value,z=N[D]||f.value&&N[f.value]||N[n.defaultActive];z?f.value=z.index:f.value=D},T=()=>{var D,N;if(!o.value)return-1;const z=Array.from((N=(D=o.value)==null?void 0:D.childNodes)!=null?N:[]).filter(Q=>Q.nodeName!=="#text"||Q.nodeValue),F=64,G=Number.parseInt(getComputedStyle(o.value).paddingLeft,10),U=Number.parseInt(getComputedStyle(o.value).paddingRight,10),H=o.value.clientWidth-G-U;let X=0,Z=0;return z.forEach((Q,le)=>{X+=Q.offsetWidth||0,X<=H-F&&(Z=le+1)}),Z===z.length?-1:Z},E=(D,N=33.34)=>{let z;return()=>{z&&clearTimeout(z),z=setTimeout(()=>{D()},N)}};let A=!0;const I=()=>{const D=()=>{l.value=-1,Di(()=>{l.value=T()})};A?D():E(D)(),A=!1};Ot(()=>n.defaultActive,D=>{h.value[D]||(f.value=""),w(D)}),Ot(()=>n.collapse,D=>{D&&(c.value=[])}),Ot(h.value,g);let $;P9(()=>{n.mode==="horizontal"&&n.ellipsis?$=N1(o,I).stop:$==null||$()});{const D=G=>{d.value[G.index]=G},N=G=>{delete d.value[G.index]};kr("rootMenu",lu({props:n,openedMenus:c,items:h,subMenus:d,activeIndex:f,isMenuPopup:p,addMenuItem:G=>{h.value[G.index]=G},removeMenuItem:G=>{delete h.value[G.index]},addSubMenu:D,removeSubMenu:N,openMenu:m,closeMenu:y,handleMenuItemClick:_,handleSubMenuClick:b})),kr(`subMenu:${i.uid}`,{addSubMenu:D,removeSubMenu:N,mouseInChild:it(!1),level:0})}return ni(()=>{n.mode==="horizontal"&&new Cie(i.vnode.el,s.namespace.value)}),r({open:N=>{const{indexPath:z}=d.value[N];z.forEach(F=>m(F,z))},close:y,handleResize:I}),()=>{var D,N;let z=(N=(D=t.default)==null?void 0:D.call(t))!=null?N:[];const F=[];if(n.mode==="horizontal"&&o.value){const H=My(z),X=l.value===-1?H:H.slice(0,l.value),Z=l.value===-1?[]:H.slice(l.value);Z!=null&&Z.length&&n.ellipsis&&(z=X,F.push(Gn(ZT,{index:"sub-menu-more",class:u.e("hide-arrow")},{title:()=>Gn(Zi,{class:u.e("icon-more")},{default:()=>Gn(kQ)}),default:()=>Z})))}const G=IF(n,0),U=Gn("ul",{key:String(n.collapse),role:"menubar",ref:o,style:G.value,class:{[s.b()]:!0,[s.m(n.mode)]:!0,[s.m("collapse")]:n.collapse}},[...z,...F]);return n.collapseTransition&&n.mode==="vertical"?Gn(kie,()=>U):U}}});const $ie=vn({index:{type:pt([String,null]),default:null},route:{type:pt([String,Object])},disabled:Boolean}),Nie={click:n=>nr(n.index)&&Array.isArray(n.indexPath)},Sx="ElMenuItem",Oie=tt({name:Sx,components:{ElTooltip:mF},props:$ie,emits:Nie,setup(n,{emit:e}){const t=cu(),r=pn("rootMenu"),i=Rt("menu"),a=Rt("menu-item");r||Rv(Sx,"can not inject root menu");const{parentMenu:o,indexPath:s}=RF(t,Jo(n,"index")),u=pn(`subMenu:${o.value.uid}`);u||Rv(Sx,"can not inject sub menu");const l=_e(()=>n.index===r.activeIndex),c=lu({index:n.index,indexPath:s,active:l}),f=()=>{n.disabled||(r.handleMenuItemClick({index:n.index,indexPath:s.value,route:n.route}),e("click",c))};return ni(()=>{u.addSubMenu(c),r.addMenuItem(c)}),vo(()=>{u.removeSubMenu(c),r.removeMenuItem(c)}),{Effect:WJ,parentMenu:o,rootMenu:r,active:l,nsMenu:i,nsMenuItem:a,handleClick:f}}});function Lie(n,e,t,r,i,a){const o=D9("el-tooltip");return Ne(),Ke("li",{class:Xe([n.nsMenuItem.b(),n.nsMenuItem.is("active",n.active),n.nsMenuItem.is("disabled",n.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...s)=>n.handleClick&&n.handleClick(...s))},[n.parentMenu.type.name==="ElMenu"&&n.rootMenu.props.collapse&&n.$slots.title?(Ne(),Xt(o,{key:0,effect:n.Effect.DARK,placement:"right","fallback-placements":["left"],persistent:""},{content:Ft(()=>[vt(n.$slots,"title")]),default:Ft(()=>[Ct("div",{class:Xe(n.nsMenu.be("tooltip","trigger"))},[vt(n.$slots,"default")],2)]),_:3},8,["effect"])):(Ne(),Ke(Or,{key:1},[vt(n.$slots,"default"),vt(n.$slots,"title")],64))],2)}var PF=Zt(Oie,[["render",Lie],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const Mie={title:String},Bie="ElMenuItemGroup",Fie=tt({name:Bie,props:Mie,setup(){return{ns:Rt("menu-item-group")}}});function Vie(n,e,t,r,i,a){return Ne(),Ke("li",{class:Xe(n.ns.b())},[Ct("div",{class:Xe(n.ns.e("title"))},[n.$slots.title?vt(n.$slots,"title",{key:1}):(Ne(),Ke(Or,{key:0},[Dc(or(n.title),1)],64))],2),Ct("ul",null,[vt(n.$slots,"default")])],2)}var DF=Zt(Fie,[["render",Vie],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const X5e=ri(Die,{MenuItem:PF,MenuItemGroup:DF,SubMenu:ZT}),K5e=go(PF);go(DF);const Y5e=go(ZT),zie=vn({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:pt(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:pt([String,Array,Function]),default:""},format:{type:pt(Function),default:n=>`${n}%`}}),Uie=["aria-valuenow"],Wie={viewBox:"0 0 100 100"},Hie=["d","stroke","stroke-width"],Gie=["d","stroke","opacity","stroke-linecap","stroke-width"],jie={key:0},qie=tt({name:"ElProgress"}),Xie=tt({...qie,props:zie,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=Rt("progress"),i=_e(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:b(e.percentage)})),a=_e(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=_e(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),s=_e(()=>{const _=o.value,w=e.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${w?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${w?"":"-"}${_*2}
          `}),u=_e(()=>2*Math.PI*o.value),l=_e(()=>e.type==="dashboard"?.75:1),c=_e(()=>`${-1*u.value*(1-l.value)/2}px`),f=_e(()=>({strokeDasharray:`${u.value*l.value}px, ${u.value}px`,strokeDashoffset:c.value})),h=_e(()=>({strokeDasharray:`${u.value*l.value*(e.percentage/100)}px, ${u.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),d=_e(()=>{let _;return e.color?_=b(e.percentage):_=t[e.status]||t.default,_}),p=_e(()=>e.status==="warning"?RT:e.type==="line"?e.status==="success"?D3:AT:e.status==="success"?LZ:N3),g=_e(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),m=_e(()=>e.format(e.percentage));function y(_){const w=100/_.length;return _.map((E,A)=>nr(E)?{color:E,percentage:(A+1)*w}:E).sort((E,A)=>E.percentage-A.percentage)}const b=_=>{var w;const{color:T}=e;if(jo(T))return T(_);if(nr(T))return T;{const E=y(T);for(const A of E)if(A.percentage>_)return A.color;return(w=E[E.length-1])==null?void 0:w.color}};return(_,w)=>(Ne(),Ke("div",{class:Xe([K(r).b(),K(r).m(_.type),K(r).is(_.status),{[K(r).m("without-text")]:!_.showText,[K(r).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(Ne(),Ke("div",{key:0,class:Xe(K(r).b("bar"))},[Ct("div",{class:Xe(K(r).be("bar","outer")),style:wr({height:`${_.strokeWidth}px`})},[Ct("div",{class:Xe([K(r).be("bar","inner"),{[K(r).bem("bar","inner","indeterminate")]:_.indeterminate}]),style:wr(K(i))},[(_.showText||_.$slots.default)&&_.textInside?(Ne(),Ke("div",{key:0,class:Xe(K(r).be("bar","innerText"))},[vt(_.$slots,"default",{percentage:_.percentage},()=>[Ct("span",null,or(K(m)),1)])],2)):Nt("v-if",!0)],6)],6)],2)):(Ne(),Ke("div",{key:1,class:Xe(K(r).b("circle")),style:wr({height:`${_.width}px`,width:`${_.width}px`})},[(Ne(),Ke("svg",Wie,[Ct("path",{class:Xe(K(r).be("circle","track")),d:K(s),stroke:`var(${K(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":K(a),fill:"none",style:wr(K(f))},null,14,Hie),Ct("path",{class:Xe(K(r).be("circle","path")),d:K(s),stroke:K(d),fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":K(a),style:wr(K(h))},null,14,Gie)]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(Ne(),Ke("div",{key:2,class:Xe(K(r).e("text")),style:wr({fontSize:`${K(g)}px`})},[vt(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(Ne(),Xt(K(Zi),{key:1},{default:Ft(()=>[(Ne(),Xt(so(K(p))))]),_:1})):(Ne(),Ke("span",jie,or(K(m)),1))])],6)):Nt("v-if",!0)],10,Uie))}});var Kie=Zt(Xie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Z5e=ri(Kie),Yie=["start","center","end","space-around","space-between","space-evenly"],Zie=["top","middle","bottom"],Qie=vn({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Yie,default:"start"},align:{type:String,values:Zie,default:"top"}}),Jie=tt({name:"ElRow"}),eae=tt({...Jie,props:Qie,setup(n){const e=n,t=Rt("row"),r=_e(()=>e.gutter);kr(H3,{gutter:r});const i=_e(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a});return(a,o)=>(Ne(),Xt(so(a.tag),{class:Xe([K(t).b(),K(t).is(`justify-${e.justify}`,a.justify!=="start"),K(t).is(`align-${e.align}`,a.align!=="top")]),style:wr(K(i))},{default:Ft(()=>[vt(a.$slots,"default")]),_:3},8,["class","style"]))}});var tae=Zt(eae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const Q5e=ri(tae),nae=vn({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),rae=vn({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),iae=tt({name:"ElSkeletonItem"}),aae=tt({...iae,props:rae,setup(n){const e=Rt("skeleton");return(t,r)=>(Ne(),Ke("div",{class:Xe([K(e).e("item"),K(e).e(t.variant)])},[t.variant==="image"?(Ne(),Xt(K($Q),{key:0})):Nt("v-if",!0)],2))}});var x0=Zt(aae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const oae=tt({name:"ElSkeleton"}),sae=tt({...oae,props:nae,setup(n,{expose:e}){const t=n,r=Rt("skeleton"),i=mJ(Jo(t,"loading"),t.throttle);return e({uiLoading:i}),(a,o)=>K(i)?(Ne(),Ke("div",Ni({key:0,class:[K(r).b(),K(r).is("animated",a.animated)]},a.$attrs),[(Ne(!0),Ke(Or,null,Ih(a.count,s=>(Ne(),Ke(Or,{key:s},[a.loading?vt(a.$slots,"template",{key:s},()=>[Zn(x0,{class:Xe(K(r).is("first")),variant:"p"},null,8,["class"]),(Ne(!0),Ke(Or,null,Ih(a.rows,u=>(Ne(),Xt(x0,{key:u,class:Xe([K(r).e("paragraph"),K(r).is("last",u===a.rows&&a.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Nt("v-if",!0)],64))),128))],16)):vt(a.$slots,"default",Lp(Ni({key:1},a.$attrs)))}});var uae=Zt(sae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const J5e=ri(uae,{SkeletonItem:x0}),eVe=go(x0);function lae(n){let e;const t=Rt("loading"),r=it(!1),i=lu({...n,originalPosition:"",originalOverflow:"",visible:!1});function a(d){i.text=d}function o(){const d=i.parent;if(!d.vLoadingAddClassList){let p=d.getAttribute("loading-number");p=Number.parseInt(p)-1,p?d.setAttribute("loading-number",p.toString()):($c(d,t.bm("parent","relative")),d.removeAttribute("loading-number")),$c(d,t.bm("parent","hidden"))}s(),f.unmount()}function s(){var d,p;(p=(d=h.$el)==null?void 0:d.parentNode)==null||p.removeChild(h.$el)}function u(){var d;n.beforeClose&&!n.beforeClose()||(r.value=!0,clearTimeout(e),e=window.setTimeout(l,400),i.visible=!1,(d=n.closed)==null||d.call(n))}function l(){if(!r.value)return;const d=i.parent;r.value=!1,d.vLoadingAddClassList=void 0,o()}const f=$9({name:"ElLoading",setup(){return()=>{const d=i.spinner||i.svg,p=Gn("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...d?{innerHTML:d}:{}},[Gn("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),g=i.text?Gn("p",{class:t.b("text")},[i.text]):void 0;return Gn(ff,{name:t.b("fade"),onAfterLeave:l},{default:Ft(()=>[bl(Zn("div",{style:{backgroundColor:i.background||""},class:[t.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[Gn("div",{class:t.b("spinner")},[p,g])]),[[cf,i.visible]])])})}}}),h=f.mount(document.createElement("div"));return{...pT(i),setText:a,removeElLoadingChild:s,close:u,handleAfterLeave:l,vm:h,get $el(){return h.$el}}}let bm;const cae=function(n={}){if(!di)return;const e=fae(n);if(e.fullscreen&&bm)return bm;const t=lae({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(bm=void 0)}});hae(e,e.parent,t),TD(e,e.parent,t),e.parent.vLoadingAddClassList=()=>TD(e,e.parent,t);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(t.$el),Di(()=>t.visible.value=e.visible),e.fullscreen&&(bm=t),t},fae=n=>{var e,t,r,i;let a;return nr(n.target)?a=(e=document.querySelector(n.target))!=null?e:document.body:a=n.target||document.body,{parent:a===document.body||n.body?document.body:a,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:a===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(r=n.lock)!=null?r:!1,customClass:n.customClass||"",visible:(i=n.visible)!=null?i:!0,target:a}},hae=async(n,e,t)=>{const{nextZIndex:r}=FT(),i={};if(n.fullscreen)t.originalPosition.value=op(document.body,"position"),t.originalOverflow.value=op(document.body,"overflow"),i.zIndex=r();else if(n.parent===document.body){t.originalPosition.value=op(document.body,"position"),await Di();for(const a of["top","left"]){const o=a==="top"?"scrollTop":"scrollLeft";i[a]=`${n.target.getBoundingClientRect()[a]+document.body[o]+document.documentElement[o]-Number.parseInt(op(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])i[a]=`${n.target.getBoundingClientRect()[a]}px`}else t.originalPosition.value=op(e,"position");for(const[a,o]of Object.entries(i))t.$el.style[a]=o},TD=(n,e,t)=>{const r=Rt("loading");["absolute","fixed","sticky"].includes(t.originalPosition.value)?$c(e,r.bm("parent","relative")):xh(e,r.bm("parent","relative")),n.fullscreen&&n.lock?xh(e,r.bm("parent","hidden")):$c(e,r.bm("parent","hidden"))},Bw=Symbol("ElLoading"),ED=(n,e)=>{var t,r,i,a;const o=e.instance,s=h=>ss(e.value)?e.value[h]:void 0,u=h=>{const d=nr(h)&&(o==null?void 0:o[h])||h;return d&&it(d)},l=h=>u(s(h)||n.getAttribute(`element-loading-${N9(h)}`)),c=(t=s("fullscreen"))!=null?t:e.modifiers.fullscreen,f={text:l("text"),svg:l("svg"),svgViewBox:l("svgViewBox"),spinner:l("spinner"),background:l("background"),customClass:l("customClass"),fullscreen:c,target:(r=s("target"))!=null?r:c?void 0:n,body:(i=s("body"))!=null?i:e.modifiers.body,lock:(a=s("lock"))!=null?a:e.modifiers.lock};n[Bw]={options:f,instance:cae(f)}},dae=(n,e)=>{for(const t of Object.keys(e))UB(e[t])&&(e[t].value=n[t])},tVe={mounted(n,e){e.value&&ED(n,e)},updated(n,e){const t=n[Bw];e.oldValue!==e.value&&(e.value&&!e.oldValue?ED(n,e):e.value&&e.oldValue?ss(e.value)&&dae(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[Bw])==null||e.instance.close()}},$F=["success","info","warning","error"],Ei=Us({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:di?document.body:void 0}),pae=vn({customClass:{type:String,default:Ei.customClass},center:{type:Boolean,default:Ei.center},dangerouslyUseHTMLString:{type:Boolean,default:Ei.dangerouslyUseHTMLString},duration:{type:Number,default:Ei.duration},icon:{type:js,default:Ei.icon},id:{type:String,default:Ei.id},message:{type:pt([String,Object,Function]),default:Ei.message},onClose:{type:pt(Function),required:!1},showClose:{type:Boolean,default:Ei.showClose},type:{type:String,values:$F,default:Ei.type},offset:{type:Number,default:Ei.offset},zIndex:{type:Number,default:Ei.zIndex},grouping:{type:Boolean,default:Ei.grouping},repeatNum:{type:Number,default:Ei.repeatNum}}),vae={destroy:()=>!0},qo=O9([]),gae=n=>{const e=qo.findIndex(i=>i.id===n),t=qo[e];let r;return e>0&&(r=qo[e-1]),{current:t,prev:r}},mae=n=>{const{prev:e}=gae(n);return e?e.vm.exposed.bottom.value:0},yae=["id"],bae=["innerHTML"],xae=tt({name:"ElMessage"}),_ae=tt({...xae,props:pae,emits:vae,setup(n,{expose:e}){const t=n,{Close:r}=ZQ,i=Rt("message"),a=it(),o=it(!1),s=it(0);let u;const l=_e(()=>t.type?t.type==="error"?"danger":t.type:"info"),c=_e(()=>{const w=t.type;return{[i.bm("icon",w)]:w&&HP[w]}}),f=_e(()=>t.icon||HP[t.type]||""),h=_e(()=>mae(t.id)),d=_e(()=>t.offset+h.value),p=_e(()=>s.value+d.value),g=_e(()=>({top:`${d.value}px`,zIndex:t.zIndex}));function m(){t.duration!==0&&({stop:u}=Sw(()=>{b()},t.duration))}function y(){u==null||u()}function b(){o.value=!1}function _({code:w}){w===hi.esc&&b()}return ni(()=>{m(),o.value=!0}),Ot(()=>t.repeatNum,()=>{y(),m()}),Mp(document,"keydown",_),N1(a,()=>{s.value=a.value.getBoundingClientRect().height}),e({visible:o,bottom:p,close:b}),(w,T)=>(Ne(),Xt(ff,{name:K(i).b("fade"),onBeforeLeave:w.onClose,onAfterLeave:T[0]||(T[0]=E=>w.$emit("destroy")),persisted:""},{default:Ft(()=>[bl(Ct("div",{id:w.id,ref_key:"messageRef",ref:a,class:Xe([K(i).b(),{[K(i).m(w.type)]:w.type&&!w.icon},K(i).is("center",w.center),K(i).is("closable",w.showClose),w.customClass]),style:wr(K(g)),role:"alert",onMouseenter:y,onMouseleave:m},[w.repeatNum>1?(Ne(),Xt(K(Zte),{key:0,value:w.repeatNum,type:K(l),class:Xe(K(i).e("badge"))},null,8,["value","type","class"])):Nt("v-if",!0),K(f)?(Ne(),Xt(K(Zi),{key:1,class:Xe([K(i).e("icon"),K(c)])},{default:Ft(()=>[(Ne(),Xt(so(K(f))))]),_:1},8,["class"])):Nt("v-if",!0),vt(w.$slots,"default",{},()=>[w.dangerouslyUseHTMLString?(Ne(),Ke(Or,{key:1},[Nt(" Caution here, message could've been compromised, never use user's input as message "),Ct("p",{class:Xe(K(i).e("content")),innerHTML:w.message},null,10,bae)],2112)):(Ne(),Ke("p",{key:0,class:Xe(K(i).e("content"))},or(w.message),3))]),w.showClose?(Ne(),Xt(K(Zi),{key:2,class:Xe(K(i).e("closeBtn")),onClick:dT(b,["stop"])},{default:Ft(()=>[Zn(K(r))]),_:1},8,["class","onClick"])):Nt("v-if",!0)],46,yae),[[cf,o.value]])]),_:3},8,["name","onBeforeLeave"]))}});var wae=Zt(_ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let Sae=1;const NF=n=>{const e=!n||nr(n)||v0(n)||jo(n)?{message:n}:n,t={...Ei,...e};if(!t.appendTo)t.appendTo=document.body;else if(nr(t.appendTo)){let r=document.querySelector(t.appendTo);Av(r)||(r=document.body),t.appendTo=r}return t},Cae=n=>{const e=qo.indexOf(n);if(e===-1)return;qo.splice(e,1);const{handler:t}=n;t.close()},Tae=({appendTo:n,...e},t)=>{const{nextZIndex:r}=FT(),i=`message_${Sae++}`,a=e.onClose,o=document.createElement("div"),s={...e,zIndex:r()+e.zIndex,id:i,onClose:()=>{a==null||a(),Cae(f)},onDestroy:()=>{YI(null,o)}},u=Zn(wae,s,jo(s.message)||v0(s.message)?{default:jo(s.message)?s.message:()=>s.message}:null);u.appContext=t||Jh._context,YI(u,o),n.appendChild(o.firstElementChild);const l=u.component,f={id:i,vnode:u,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:u.component.props};return f},Jh=(n={},e)=>{if(!di)return{close:()=>{}};if(eu(Dw.max)&&qo.length>=Dw.max)return{close:()=>{}};const t=NF(n);if(t.grouping&&qo.length){const i=qo.find(({vnode:a})=>{var o;return((o=a.props)==null?void 0:o.message)===t.message});if(i)return i.props.repeatNum+=1,i.props.type=t.type,i.handler}const r=Tae(t,e);return qo.push(r),r.handler};$F.forEach(n=>{Jh[n]=(e={},t)=>{const r=NF(e);return Jh({...r,type:n},t)}});function Eae(n){for(const e of qo)(!n||n===e.props.type)&&e.handler.close()}Jh.closeAll=Eae;Jh._context=null;const nVe=JQ(Jh,"$message");let OF=!0,LF=!0;function zy(n,e,t){const r=n.match(e);return r&&r.length>=t&&parseInt(r[t],10)}function vf(n,e,t){if(!n.RTCPeerConnection)return;const r=n.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,s){if(o!==e)return i.apply(this,arguments);const u=l=>{const c=t(l);c&&(s.handleEvent?s.handleEvent(c):s(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(s,u),i.apply(this,[o,u])};const a=r.removeEventListener;r.removeEventListener=function(o,s){if(o!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(s))return a.apply(this,arguments);const u=this._eventMap[e].get(s);return this._eventMap[e].delete(s),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,u])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function kae(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(OF=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function Aae(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(LF=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function MF(){if(typeof window=="object"){if(OF)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function QT(n,e){LF&&console.warn(n+" is deprecated, please use "+e+" instead.")}function Rae(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator)return e.browser="Not a browser.",e;const{navigator:t}=n;if(t.mozGetUserMedia)e.browser="firefox",e.version=zy(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)e.browser="chrome",e.version=zy(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=zy(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function kD(n){return Object.prototype.toString.call(n)==="[object Object]"}function BF(n){return kD(n)?Object.keys(n).reduce(function(e,t){const r=kD(n[t]),i=r?BF(n[t]):n[t],a=r&&!Object.keys(i).length;return i===void 0||a?e:Object.assign(e,{[t]:i})},{}):n}function Fw(n,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Fw(n,n.get(e[r]),t):r.endsWith("Ids")&&e[r].forEach(i=>{Fw(n,n.get(i),t)})}))}function AD(n,e,t){const r=t?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const a=[];return n.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&a.push(o)}),a.forEach(o=>{n.forEach(s=>{s.type===r&&s.trackId===o.id&&Fw(n,s,i)})}),i}const RD=MF;function FF(n,e){const t=n&&n.navigator;if(!t.mediaDevices)return;const r=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const u={};return Object.keys(s).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const c=typeof s[l]=="object"?s[l]:{ideal:s[l]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const f=function(h,d){return h?h+d.charAt(0).toUpperCase()+d.slice(1):d==="deviceId"?"sourceId":d};if(c.ideal!==void 0){u.optional=u.optional||[];let h={};typeof c.ideal=="number"?(h[f("min",l)]=c.ideal,u.optional.push(h),h={},h[f("max",l)]=c.ideal,u.optional.push(h)):(h[f("",l)]=c.ideal,u.optional.push(h))}c.exact!==void 0&&typeof c.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[f("",l)]=c.exact):["min","max"].forEach(h=>{c[h]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[f(h,l)]=c[h])})}),s.advanced&&(u.optional=(u.optional||[]).concat(s.advanced)),u},i=function(s,u){if(e.version>=61)return u(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const l=function(c,f,h){f in c&&!(h in c)&&(c[h]=c[f],delete c[f])};s=JSON.parse(JSON.stringify(s)),l(s.audio,"autoGainControl","googAutoGainControl"),l(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=r(s.audio)}if(s&&typeof s.video=="object"){let l=s.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const c=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete s.video.facingMode;let f;if(l.exact==="environment"||l.ideal==="environment"?f=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(f=["front"]),f)return t.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let d=h.find(p=>f.some(g=>p.label.toLowerCase().includes(g)));return!d&&h.length&&f.includes("back")&&(d=h[h.length-1]),d&&(s.video.deviceId=l.exact?{exact:d.deviceId}:{ideal:d.deviceId}),s.video=r(s.video),RD("chrome: "+JSON.stringify(s)),u(s)})}s.video=r(s.video)}return RD("chrome: "+JSON.stringify(s)),u(s)},a=function(s){return e.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(s,u,l){i(s,c=>{t.webkitGetUserMedia(c,u,f=>{l&&l(a(f))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(u){return i(u,l=>s(l).then(c=>{if(l.audio&&!c.getAudioTracks().length||l.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(a(c))))}}}function Iae(n,e){if(!(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices)&&n.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}n.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const a=r.video&&r.video.width,o=r.video&&r.video.height,s=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:s||3}},a&&(r.video.mandatory.maxWidth=a),o&&(r.video.mandatory.maxHeight=o),n.navigator.mediaDevices.getUserMedia(r)})}}}function VF(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function zF(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let a;n.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(s=>s.track&&s.track.id===i.track.id):a={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let a;n.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(s=>s.track&&s.track.id===i.id):a={track:i};const o=new Event("track");o.track=i,o.receiver=a,o.transceiver={receiver:a},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else vf(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function UF(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(i,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=i.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:i}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(s,u){let l=i.apply(this,arguments);return l||(l=e(this,s),this._senders.push(l)),l};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(s){a.apply(this,arguments);const u=this._senders.indexOf(s);u!==-1&&this._senders.splice(u,1)}}const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],t.apply(this,[a]),a.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(o=>{const s=this._senders.find(u=>u.track===o);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function WF(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[r,i,a]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const o=function(u){const l={};return u.result().forEach(f=>{const h={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(d=>{h[d]=f.stat(d)}),l[h.id]=h}),l},s=function(u){return new Map(Object.keys(u).map(l=>[l,u[l]]))};if(arguments.length>=2){const u=function(l){i(s(o(l)))};return e.apply(this,[u,r])}return new Promise((u,l)=>{e.apply(this,[function(c){u(s(o(c)))},l])}).then(i,a)}}function HF(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>AD(o,a.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const i=t.apply(this,[]);return i.forEach(a=>a._pc=this),i}),vf(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(a=>AD(a,i.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const r=arguments[0];let i,a,o;return this.getSenders().forEach(s=>{s.track===r&&(i?o=!0:i=s)}),this.getReceivers().forEach(s=>(s.track===r&&(a?o=!0:a=s),s.track===r)),o||i&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function GF(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(o,s){if(!s)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(u)===-1&&this._shimmedLocalStreams[s.id].push(u):this._shimmedLocalStreams[s.id]=[s,u],u};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(f=>f.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();t.apply(this,arguments);const u=this.getSenders().filter(l=>s.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(u)};const r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const u=this._shimmedLocalStreams[s].indexOf(o);u!==-1&&this._shimmedLocalStreams[s].splice(u,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),i.apply(this,arguments)}}function jF(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return GF(n);const t=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const c=t.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(f=>this._reverseStreams[f.id])};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(d=>d.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const f=new n.MediaStream(c.getTracks());this._streams[c.id]=f,this._reverseStreams[f.id]=c,c=f}r.apply(this,[c])};const i=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},n.RTCPeerConnection.prototype.addTrack=function(c,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(g=>g===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[f.id];if(p)p.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new n.MediaStream([c]);this._streams[f.id]=g,this._reverseStreams[g.id]=f,this.addStream(g)}return this.getSenders().find(g=>g.track===c)};function a(l,c){let f=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const d=l._reverseStreams[h],p=l._streams[d.id];f=f.replace(new RegExp(p.id,"g"),d.id)}),new RTCSessionDescription({type:c.type,sdp:f})}function o(l,c){let f=c.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const d=l._reverseStreams[h],p=l._streams[d.id];f=f.replace(new RegExp(d.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:f})}["createOffer","createAnswer"].forEach(function(l){const c=n.RTCPeerConnection.prototype[l],f={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[p=>{const g=a(this,p);h[0].apply(null,[g])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):c.apply(this,arguments).then(p=>a(this,p))}};n.RTCPeerConnection.prototype[l]=f[l]});const s=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=o(this,arguments[0]),s.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const l=u.get.apply(this);return l.type===""?l:a(this,l)}}),n.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(c._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(d=>{this._streams[d].getTracks().find(g=>c.track===g)&&(h=this._streams[d])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Vw(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const r=n.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};n.RTCPeerConnection.prototype[t]=i[t]})}function qF(n,e){vf(n,"negotiationneeded",t=>{const r=t.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return t})}const ID=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:qF,shimAddTrackRemoveTrack:jF,shimAddTrackRemoveTrackWithNative:GF,shimGetDisplayMedia:Iae,shimGetSendersWithDtmf:UF,shimGetStats:WF,shimGetUserMedia:FF,shimMediaStream:VF,shimOnTrack:zF,shimPeerConnection:Vw,shimSenderReceiverGetStats:HF},Symbol.toStringTag,{value:"Module"}));function XF(n,e){const t=n&&n.navigator,r=n&&n.MediaStreamTrack;if(t.getUserMedia=function(i,a,o){QT("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(i).then(a,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const i=function(o,s,u){s in o&&!(u in o)&&(o[u]=o[s],delete o[s])},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const s=o.apply(this,arguments);return i(s,"mozAutoGainControl","autoGainControl"),i(s,"mozNoiseSuppression","noiseSuppression"),s}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s,"autoGainControl","mozAutoGainControl"),i(s,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[s])}}}}function Pae(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(r)})}function KF(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zw(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[a,o,s]=arguments;return r.apply(this,[a||null]).then(u=>{if(e.version<53&&!o)try{u.forEach(l=>{l.type=t[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;u.forEach((c,f)=>{u.set(f,Object.assign({},c,{type:t[c.type]||c.type}))})}return u}).then(o,s)}}function YF(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const i=t.apply(this,arguments);return i._pc=this,i}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ZF(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),vf(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function QF(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){QT("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&t.getTracks().includes(r.track)&&this.removeTrack(r)})})}function JF(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function e4(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(i){const{sender:o}=a,s=o.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(s).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return a})}function t4(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function n4(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function r4(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const PD=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:e4,shimCreateAnswer:r4,shimCreateOffer:n4,shimGetDisplayMedia:Pae,shimGetParameters:t4,shimGetUserMedia:XF,shimOnTrack:KF,shimPeerConnection:zw,shimRTCDataChannel:JF,shimReceiverGetStats:ZF,shimRemoveStream:QF,shimSenderGetStats:YF},Symbol.toStringTag,{value:"Module"}));function i4(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},n.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(t);if(r===-1)return;this._localStreams.splice(r,1);const i=t.getTracks();this.getSenders().forEach(a=>{i.includes(a.track)&&this.removeTrack(a)})})}}function a4(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const a=new Event("addstream");a.stream=i,this.dispatchEvent(a)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function o4(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,t=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,a=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,c){const f=arguments.length>=2?arguments[2]:arguments[0],h=t.apply(this,[f]);return c?(h.then(l,c),Promise.resolve()):h},e.createAnswer=function(l,c){const f=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[f]);return c?(h.then(l,c),Promise.resolve()):h};let s=function(u,l,c){const f=i.apply(this,[u]);return c?(f.then(l,c),Promise.resolve()):f};e.setLocalDescription=s,s=function(u,l,c){const f=a.apply(this,[u]);return c?(f.then(l,c),Promise.resolve()):f},e.setRemoteDescription=s,s=function(u,l,c){const f=o.apply(this,[u]);return c?(f.then(l,c),Promise.resolve()):f},e.addIceCandidate=s}function s4(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,r=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=i=>r(u4(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,a){e.mediaDevices.getUserMedia(r).then(i,a)}.bind(e))}function u4(n){return n&&n.video!==void 0?Object.assign({},n,{video:BF(n.video)}):n}function l4(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const a=[];for(let o=0;o<r.iceServers.length;o++){let s=r.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(QT("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,a.push(s)):a.push(r.iceServers[o])}r.iceServers=a}return new e(r,i)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function c4(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function f4(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function h4(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const DD=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:h4,shimCallbacksAPI:o4,shimConstraints:u4,shimCreateOfferLegacy:f4,shimGetUserMedia:s4,shimLocalStreamsAPI:i4,shimRTCIceServerUrls:l4,shimRemoteStreamsAPI:a4,shimTrackEventTransceiver:c4},Symbol.toStringTag,{value:"Module"}));var _0={},Dae={get exports(){return _0},set exports(n){_0=n}};(function(n){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(t){return t.split(`
m=`).map((i,a)=>(a>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(t){const r=e.splitSections(t);return r&&r[0]},e.getMediaSections=function(t){const r=e.splitSections(t);return r.shift(),r},e.matchPrefix=function(t,r){return e.splitLines(t).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(t){let r;t.indexOf("a=candidate:")===0?r=t.substring(12).split(" "):r=t.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":i.relatedAddress=r[a+1];break;case"rport":i.relatedPort=parseInt(r[a+1],10);break;case"tcptype":i.tcpType=r[a+1];break;case"ufrag":i.ufrag=r[a+1],i.usernameFragment=r[a+1];break;default:i[r[a]]===void 0&&(i[r[a]]=r[a+1]);break}return i},e.writeCandidate=function(t){const r=[];r.push(t.foundation);const i=t.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(t.protocol.toUpperCase()),r.push(t.priority),r.push(t.address||t.ip),r.push(t.port);const a=t.type;return r.push("typ"),r.push(a),a!=="host"&&t.relatedAddress&&t.relatedPort&&(r.push("raddr"),r.push(t.relatedAddress),r.push("rport"),r.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(r.push("ufrag"),r.push(t.usernameFragment||t.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(t){return t.substr(14).split(" ")},e.parseRtpMap=function(t){let r=t.substr(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(t){let r=t.payloadType;t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType);const i=t.channels||t.numChannels||1;return"a=rtpmap:"+r+" "+t.name+"/"+t.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(t){const r=t.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+`\r
`},e.parseFmtp=function(t){const r={};let i;const a=t.substr(t.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)i=a[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(t){let r="",i=t.payloadType;if(t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const a=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?a.push(o+"="+t.parameters[o]):a.push(o)}),r+="a=fmtp:"+i+" "+a.join(";")+`\r
`}return r},e.parseRtcpFb=function(t){const r=t.substr(t.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(t){let r="",i=t.payloadType;return t.preferredPayloadType!==void 0&&(i=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+i+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(t){const r=t.indexOf(" "),i={ssrc:parseInt(t.substr(7,r-7),10)},a=t.indexOf(":",r);return a>-1?(i.attribute=t.substr(r+1,a-r-1),i.value=t.substr(a+1)):i.attribute=t.substr(r+1),i},e.parseSsrcGroup=function(t){const r=t.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(t){const r=e.matchPrefix(t,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(t){const r=t.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(t,r){return{role:"auto",fingerprints:e.matchPrefix(t+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,r){let i="a=setup:"+r+`\r
`;return t.fingerprints.forEach(a=>{i+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),i},e.parseCryptoLine=function(t){const r=t.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const r=t.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,r){return e.matchPrefix(t+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,r){const i=e.matchPrefix(t+r,"a=ice-ufrag:")[0],a=e.matchPrefix(t+r,"a=ice-pwd:")[0];return i&&a?{usernameFragment:i.substr(12),password:a.substr(10)}:null},e.writeIceParameters=function(t){let r="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(t){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(t)[0].split(" ");for(let o=3;o<a.length;o++){const s=a[o],u=e.matchPrefix(t,"a=rtpmap:"+s+" ")[0];if(u){const l=e.parseRtpMap(u),c=e.matchPrefix(t,"a=fmtp:"+s+" ");switch(l.parameters=c.length?e.parseFmtp(c[0]):{},l.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+s+" ").map(e.parseRtcpFb),r.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(l.name.toUpperCase());break}}}return e.matchPrefix(t,"a=extmap:").forEach(o=>{r.headerExtensions.push(e.parseExtmap(o))}),r},e.writeRtpDescription=function(t,r){let i="";i+="m="+t+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let a=0;return r.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(i+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(t){const r=[],i=e.parseRtpParameters(t),a=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,s=e.matchPrefix(t,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),u=s.length>0&&s[0].ssrc;let l;const c=e.matchPrefix(t,"a=ssrc-group:FID").map(h=>h.substr(17).split(" ").map(p=>parseInt(p,10)));c.length>0&&c[0].length>1&&c[0][0]===u&&(l=c[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let d={ssrc:u,codecPayloadType:parseInt(h.parameters.apt,10)};u&&l&&(d.rtx={ssrc:l}),r.push(d),a&&(d=JSON.parse(JSON.stringify(d)),d.fec={ssrc:u,mechanism:o?"red+ulpfec":"red"},r.push(d))}}),r.length===0&&u&&r.push({ssrc:u});let f=e.matchPrefix(t,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substr(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substr(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(h=>{h.maxBitrate=f})),r},e.parseRtcpParameters=function(t){const r={},i=e.matchPrefix(t,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const a=e.matchPrefix(t,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(t){let r="";return t.reducedSize&&(r+=`a=rtcp-rsize\r
`),t.mux&&(r+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(r+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),r},e.parseMsid=function(t){let r;const i=e.matchPrefix(t,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};const a=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(t){const r=e.parseMLine(t),i=e.matchPrefix(t,"a=max-message-size:");let a;i.length>0&&(a=parseInt(i[0].substr(19),10)),isNaN(a)&&(a=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:a};const s=e.matchPrefix(t,"a=sctpmap:");if(s.length>0){const u=s[0].substr(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:a}}},e.writeSctpDescription=function(t,r){let i=[];return t.protocol!=="DTLS/SCTP"?i=["m="+t.kind+" 9 "+t.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+t.kind+" 9 "+t.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(t,r,i){let a;const o=r!==void 0?r:2;return t?a=t:a=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,r){const i=e.splitLines(t);for(let a=0;a<i.length;a++)switch(i[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[a].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substr(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const i=e.splitLines(t)[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(t){const i=e.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const r=e.splitLines(t);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},n.exports=e})(Dae);const $h=_0,$ae=HB({__proto__:null,default:$h},[_0]);function Uy(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),a=$h.parseCandidate(r.candidate),o=Object.assign(i,a);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(r)},n.RTCIceCandidate.prototype=e.prototype,vf(n,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Uw(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||vf(n,"icecandidate",e=>{if(e.candidate){const t=$h.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Wy(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(s){if(!s||!s.sdp)return!1;const u=$h.splitSections(s.sdp);return u.shift(),u.some(l=>{const c=$h.parseMLine(l);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},r=function(s){const u=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const l=parseInt(u[1],10);return l!==l?-1:l},i=function(s){let u=65536;return e.browser==="firefox"&&(e.version<57?s===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},a=function(s,u){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const c=$h.matchPrefix(s.sdp,"a=max-message-size:");return c.length>0?l=parseInt(c[0].substr(19),10):e.browser==="firefox"&&u!==-1&&(l=2147483637),l},o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const u=r(arguments[0]),l=i(u),c=a(arguments[0],u);let f;l===0&&c===0?f=Number.POSITIVE_INFINITY:l===0||c===0?f=Math.max(l,c):f=Math.min(l,c);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return f}}),this._sctp=h}return o.apply(this,arguments)}}function Hy(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(r,i){const a=r.send;r.send=function(){const s=arguments[0],u=s.length||s.size||s.byteLength;if(r.readyState==="open"&&i.sctp&&u>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const t=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const i=t.apply(this,arguments);return e(i,this),i},vf(n,"datachannel",r=>(e(r.channel,r.target),r))}function Ww(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const r=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const a=i.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const o=new Event("connectionstatechange",i);a.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Hw(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&i instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:i.type,sdp:a}):i.sdp=a}return t.apply(this,arguments)}}function Gy(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function jy(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const t=n.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(n.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return t.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?t.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}const Nae=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Hw,shimAddIceCandidateNullOrEmpty:Gy,shimConnectionState:Ww,shimMaxMessageSize:Wy,shimParameterlessSetLocalDescription:jy,shimRTCIceCandidate:Uy,shimRTCIceCandidateRelayProtocol:Uw,shimSendThrowTypeError:Hy},Symbol.toStringTag,{value:"Module"}));function Oae({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=MF,r=Rae(n),i={browserDetails:r,commonShim:Nae,extractVersion:zy,disableLog:kae,disableWarnings:Aae,sdp:$ae};switch(r.browser){case"chrome":if(!ID||!Vw||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),i;if(r.version===null)return t("Chrome shim can not determine version, not shimming."),i;t("adapter.js shimming chrome."),i.browserShim=ID,Gy(n,r),jy(n),FF(n,r),VF(n),Vw(n,r),zF(n),jF(n,r),UF(n),WF(n),HF(n),qF(n,r),Uy(n),Uw(n),Ww(n),Wy(n,r),Hy(n),Hw(n,r);break;case"firefox":if(!PD||!zw||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),i;t("adapter.js shimming firefox."),i.browserShim=PD,Gy(n,r),jy(n),XF(n,r),zw(n,r),KF(n),QF(n),YF(n),ZF(n),JF(n),e4(n),t4(n),n4(n),r4(n),Uy(n),Ww(n),Wy(n,r),Hy(n);break;case"safari":if(!DD||!e.shimSafari)return t("Safari shim is not included in this adapter release."),i;t("adapter.js shimming safari."),i.browserShim=DD,Gy(n,r),jy(n),l4(n),f4(n),o4(n),i4(n),a4(n),c4(n),s4(n),h4(n),Uy(n),Uw(n),Wy(n,r),Hy(n),Hw(n,r);break;default:t("Unsupported browser!");break}return i}Oae({window:typeof window>"u"?void 0:window});const ls=Object.create(null);ls.open="0";ls.close="1";ls.ping="2";ls.pong="3";ls.message="4";ls.upgrade="5";ls.noop="6";const qy=Object.create(null);Object.keys(ls).forEach(n=>{qy[ls[n]]=n});const Lae={type:"error",data:"parser error"},Mae=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bae=typeof ArrayBuffer=="function",Fae=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,d4=({type:n,data:e},t,r)=>Mae&&e instanceof Blob?t?r(e):$D(e,r):Bae&&(e instanceof ArrayBuffer||Fae(e))?t?r(e):$D(new Blob([e]),r):r(ls[n]+(e||"")),$D=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+r)},t.readAsDataURL(n)},ND="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<ND.length;n++)Fp[ND.charCodeAt(n)]=n;const Vae=n=>{let e=n.length*.75,t=n.length,r,i=0,a,o,s,u;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),c=new Uint8Array(l);for(r=0;r<t;r+=4)a=Fp[n.charCodeAt(r)],o=Fp[n.charCodeAt(r+1)],s=Fp[n.charCodeAt(r+2)],u=Fp[n.charCodeAt(r+3)],c[i++]=a<<2|o>>4,c[i++]=(o&15)<<4|s>>2,c[i++]=(s&3)<<6|u&63;return l},zae=typeof ArrayBuffer=="function",p4=(n,e)=>{if(typeof n!="string")return{type:"message",data:v4(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Uae(n.substring(1),e)}:qy[t]?n.length>1?{type:qy[t],data:n.substring(1)}:{type:qy[t]}:Lae},Uae=(n,e)=>{if(zae){const t=Vae(n);return v4(t,e)}else return{base64:!0,data:n}},v4=(n,e)=>{switch(e){case"blob":return n instanceof ArrayBuffer?new Blob([n]):n;case"arraybuffer":default:return n}},g4=String.fromCharCode(30),Wae=(n,e)=>{const t=n.length,r=new Array(t);let i=0;n.forEach((a,o)=>{d4(a,!1,s=>{r[o]=s,++i===t&&e(r.join(g4))})})},Hae=(n,e)=>{const t=n.split(g4),r=[];for(let i=0;i<t.length;i++){const a=p4(t[i],e);if(r.push(a),a.type==="error")break}return r},m4=4;function sr(n){if(n)return Gae(n)}function Gae(n){for(var e in sr.prototype)n[e]=sr.prototype[e];return n}sr.prototype.on=sr.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};sr.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};sr.prototype.off=sr.prototype.removeListener=sr.prototype.removeAllListeners=sr.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,i=0;i<t.length;i++)if(r=t[i],r===e||r.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};sr.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,i=t.length;r<i;++r)t[r].apply(this,e)}return this};sr.prototype.emitReserved=sr.prototype.emit;sr.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};sr.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Xu=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function y4(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const jae=setTimeout,qae=clearTimeout;function F1(n,e){e.useNativeTimers?(n.setTimeoutFn=jae.bind(Xu),n.clearTimeoutFn=qae.bind(Xu)):(n.setTimeoutFn=setTimeout.bind(Xu),n.clearTimeoutFn=clearTimeout.bind(Xu))}const Xae=1.33;function Kae(n){return typeof n=="string"?Yae(n):Math.ceil((n.byteLength||n.size)*Xae)}function Yae(n){let e=0,t=0;for(let r=0,i=n.length;r<i;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}class Zae extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class b4 extends sr{constructor(e){super(),this.writable=!1,F1(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new Zae(e,t,r)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=p4(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const x4="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Gw=64,Qae={};let OD=0,xm=0,LD;function MD(n){let e="";do e=x4[n%Gw]+e,n=Math.floor(n/Gw);while(n>0);return e}function _4(){const n=MD(+new Date);return n!==LD?(OD=0,LD=n):n+"."+MD(OD++)}for(;xm<Gw;xm++)Qae[x4[xm]]=xm;function w4(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function Jae(n){let e={},t=n.split("&");for(let r=0,i=t.length;r<i;r++){let a=t[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}let S4=!1;try{S4=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const eoe=S4;function C4(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||eoe))return new XMLHttpRequest}catch{}if(!e)try{return new Xu[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function toe(){}const noe=function(){return new C4({xdomain:!1}).responseType!=null}();class roe extends b4{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port,this.xs=e.secure!==r}const t=e&&e.forceBase64;this.supportsBinary=noe&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Hae(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Wae(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=_4()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const i=w4(e),a=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new ts(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class ts extends sr{constructor(e,t){super(),F1(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=y4(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new C4(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=ts.requestsCount++,ts.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=toe,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ts.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ts.requestsCount=0;ts.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",BD);else if(typeof addEventListener=="function"){const n="onpagehide"in Xu?"pagehide":"unload";addEventListener(n,BD,!1)}}function BD(){for(let n in ts.requests)ts.requests.hasOwnProperty(n)&&ts.requests[n].abort()}const T4=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),_m=Xu.WebSocket||Xu.MozWebSocket,FD=!0,ioe="arraybuffer",VD=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class aoe extends b4{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=VD?{}:y4(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=FD&&!VD?t?new _m(e,t):new _m(e):new _m(e,t,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||ioe,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],i=t===e.length-1;d4(r,this.supportsBinary,a=>{const o={};try{FD&&this.ws.send(a)}catch{}i&&T4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=_4()),this.supportsBinary||(e.b64=1);const i=w4(e),a=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(a?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(i.length?"?"+i:"")}check(){return!!_m}}const ooe={websocket:aoe,polling:roe},soe=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,uoe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jw(n){const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let i=soe.exec(n||""),a={},o=14;for(;o--;)a[uoe[o]]=i[o]||"";return t!=-1&&r!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=loe(a,a.path),a.queryKey=coe(a,a.query),a}function loe(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function coe(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,a){i&&(t[i]=a)}),t}let _c=class extends sr{constructor(e,t={}){super(),e&&typeof e=="object"&&(t=e,e=null),e?(e=jw(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=jw(t.host).host),F1(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Jae(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=m4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new ooe[e](r)}open(){let e;if(this.opts.rememberUpgrade&&_c.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),r=!1;_c.priorWebsocketSuccess=!1;const i=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;_c.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=t.name,this.emitReserved("upgradeError",h)}}))};function a(){r||(r=!0,c(),t.close(),t=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=t.name,a(),this.emitReserved("upgradeError",h)};function s(){o("transport closed")}function u(){o("socket closed")}function l(f){t&&f.name!==t.name&&a()}const c=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",u),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",u),this.once("upgrading",l),t.open()}onOpen(){if(this.readyState="open",_c.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(t+=Kae(i)),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,i){if(typeof t=="function"&&(i=t,t=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){_c.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}};_c.protocol=m4;function foe(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=jw(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+e,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}const hoe=typeof ArrayBuffer=="function",doe=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,E4=Object.prototype.toString,poe=typeof Blob=="function"||typeof Blob<"u"&&E4.call(Blob)==="[object BlobConstructor]",voe=typeof File=="function"||typeof File<"u"&&E4.call(File)==="[object FileConstructor]";function JT(n){return hoe&&(n instanceof ArrayBuffer||doe(n))||poe&&n instanceof Blob||voe&&n instanceof File}function Xy(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(Xy(n[t]))return!0;return!1}if(JT(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Xy(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Xy(n[t]))return!0;return!1}function goe(n){const e=[],t=n.data,r=n;return r.data=qw(t,e),r.attachments=e.length,{packet:r,buffers:e}}function qw(n,e){if(!n)return n;if(JT(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=qw(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=qw(n[r],e));return t}return n}function moe(n,e){return n.data=Xw(n.data,e),n.attachments=void 0,n}function Xw(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=Xw(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=Xw(n[t],e));return n}const yoe=5;var Jt;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(Jt||(Jt={}));class boe{constructor(e){this.replacer=e}encode(e){return(e.type===Jt.EVENT||e.type===Jt.ACK)&&Xy(e)?(e.type=e.type===Jt.EVENT?Jt.BINARY_EVENT:Jt.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Jt.BINARY_EVENT||e.type===Jt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=goe(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}class e2 extends sr{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===Jt.BINARY_EVENT||t.type===Jt.BINARY_ACK?(this.reconstructor=new xoe(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(JT(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(Jt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Jt.BINARY_EVENT||r.type===Jt.BINARY_ACK){const a=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(a,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(t+1)==="/"){const a=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(a,t)}else r.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const a=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}r.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(e2.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Jt.CONNECT:return typeof t=="object";case Jt.DISCONNECT:return t===void 0;case Jt.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case Jt.EVENT:case Jt.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Jt.ACK:case Jt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class xoe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=moe(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const _oe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:e2,Encoder:boe,get PacketType(){return Jt},protocol:yoe},Symbol.toStringTag,{value:"Module"}));function no(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const woe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class k4 extends sr{constructor(e,t,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[no(e,"open",this.onopen.bind(this)),no(e,"packet",this.onpacket.bind(this)),no(e,"error",this.onerror.bind(this)),no(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(woe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');t.unshift(e);const r={type:Jt.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const o=this.ids++,s=t.pop();this._registerAckCallback(o,s),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){const r=this.flags.timeout;if(r===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,[null,...a])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:Jt.CONNECT,data:e})}):this.packet({type:Jt.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Jt.CONNECT:if(e.data&&e.data.sid){const i=e.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Jt.EVENT:case Jt.BINARY_EVENT:this.onevent(e);break;case Jt.ACK:case Jt.BINARY_ACK:this.onack(e);break;case Jt.DISCONNECT:this.ondisconnect();break;case Jt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(...i){r||(r=!0,t.packet({type:Jt.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Jt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function Td(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Td.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};Td.prototype.reset=function(){this.attempts=0};Td.prototype.setMin=function(n){this.ms=n};Td.prototype.setMax=function(n){this.max=n};Td.prototype.setJitter=function(n){this.jitter=n};class Kw extends sr{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,F1(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Td({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||_oe;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new _c(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=no(t,"open",function(){r.onopen(),e&&e()}),a=no(t,"error",o=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",o),e?e(o):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&i();const s=this.setTimeoutFn(()=>{i(),t.close(),t.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(no(e,"ping",this.onping.bind(this)),no(e,"data",this.ondata.bind(this)),no(e,"error",this.onerror.bind(this)),no(e,"close",this.onclose.bind(this)),no(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){T4(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new k4(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const up={};function Cx(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=foe(n,e.path||"/socket.io"),r=t.source,i=t.id,a=t.path,o=up[i]&&a in up[i].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let u;return s?u=new Kw(r,e):(up[i]||(up[i]=new Kw(r,e)),u=up[i]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(Cx,{Manager:Kw,Socket:k4,io:Cx,connect:Cx});function Soe(n){if(n&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}}function _h(n,e){var t=n.__state.conversionName.toString(),r=Math.round(n.r),i=Math.round(n.g),a=Math.round(n.b),o=n.a,s=Math.round(n.h),u=n.s.toFixed(1),l=n.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var c=n.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}else{if(t==="CSS_RGB")return"rgb("+r+","+i+","+a+")";if(t==="CSS_RGBA")return"rgba("+r+","+i+","+a+","+o+")";if(t==="HEX")return"0x"+n.hex.toString(16);if(t==="RGB_ARRAY")return"["+r+","+i+","+a+"]";if(t==="RGBA_ARRAY")return"["+r+","+i+","+a+","+o+"]";if(t==="RGB_OBJ")return"{r:"+r+",g:"+i+",b:"+a+"}";if(t==="RGBA_OBJ")return"{r:"+r+",g:"+i+",b:"+a+",a:"+o+"}";if(t==="HSV_OBJ")return"{h:"+s+",s:"+u+",v:"+l+"}";if(t==="HSVA_OBJ")return"{h:"+s+",s:"+u+",v:"+l+",a:"+o+"}"}return"unknown format"}var zD=Array.prototype.forEach,lp=Array.prototype.slice,Le={BREAK:{},extend:function(e){return this.each(lp.call(arguments,1),function(t){var r=this.isObject(t)?Object.keys(t):[];r.forEach(function(i){this.isUndefined(t[i])||(e[i]=t[i])}.bind(this))},this),e},defaults:function(e){return this.each(lp.call(arguments,1),function(t){var r=this.isObject(t)?Object.keys(t):[];r.forEach(function(i){this.isUndefined(e[i])&&(e[i]=t[i])}.bind(this))},this),e},compose:function(){var e=lp.call(arguments);return function(){for(var t=lp.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,r){if(e){if(zD&&e.forEach&&e.forEach===zD)e.forEach(t,r);else if(e.length===e.length+0){var i=void 0,a=void 0;for(i=0,a=e.length;i<a;i++)if(i in e&&t.call(r,e[i],i)===this.BREAK)return}else for(var o in e)if(t.call(r,e[o],o)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,r){var i=void 0;return function(){var a=this,o=arguments;function s(){i=null,r||e.apply(a,o)}var u=r||!i;clearTimeout(i),i=setTimeout(s,t),u&&e.apply(a,o)}},toArray:function(e){return e.toArray?e.toArray():lp.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},Coe=[{litmus:Le.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:_h},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:_h},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:_h},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:_h}}},{litmus:Le.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Le.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Le.isObject,conversions:{RGBA_OBJ:{read:function(e){return Le.isNumber(e.r)&&Le.isNumber(e.g)&&Le.isNumber(e.b)&&Le.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return Le.isNumber(e.r)&&Le.isNumber(e.g)&&Le.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return Le.isNumber(e.h)&&Le.isNumber(e.s)&&Le.isNumber(e.v)&&Le.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return Le.isNumber(e.h)&&Le.isNumber(e.s)&&Le.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],cp=void 0,wm=void 0,Yw=function(){wm=!1;var e=arguments.length>1?Le.toArray(arguments):arguments[0];return Le.each(Coe,function(t){if(t.litmus(e))return Le.each(t.conversions,function(r,i){if(cp=r.read(e),wm===!1&&cp!==!1)return wm=cp,cp.conversionName=i,cp.conversion=r,Le.BREAK}),Le.BREAK}),wm},UD=void 0,w0={hsv_to_rgb:function(e,t,r){var i=Math.floor(e/60)%6,a=e/60-Math.floor(e/60),o=r*(1-t),s=r*(1-a*t),u=r*(1-(1-a)*t),l=[[r,u,o],[s,r,o],[o,r,u],[o,s,r],[u,o,r],[r,o,s]][i];return{r:l[0]*255,g:l[1]*255,b:l[2]*255}},rgb_to_hsv:function(e,t,r){var i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i,s=void 0,u=void 0;if(a!==0)u=o/a;else return{h:NaN,s:0,v:0};return e===a?s=(t-r)/o:t===a?s=2+(r-e)/o:s=4+(e-t)/o,s/=6,s<0&&(s+=1),{h:s*360,s:u,v:a/255}},rgb_to_hex:function(e,t,r){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,r),i},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,r){return r<<(UD=t*8)|e&~(255<<UD)}},Toe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yo=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},bo=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),ol=function n(e,t,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:n(a,t,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},Sl=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},Cl=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},Ar=function(){function n(){if(yo(this,n),this.__state=Yw.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return bo(n,[{key:"toString",value:function(){return _h(this)}},{key:"toHexString",value:function(){return _h(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function t2(n,e,t){Object.defineProperty(n,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(Ar.recalculateRGB(this,e,t),this.__state[e])},set:function(i){this.__state.space!=="RGB"&&(Ar.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=i}})}function n2(n,e){Object.defineProperty(n,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(Ar.recalculateHSV(this),this.__state[e])},set:function(r){this.__state.space!=="HSV"&&(Ar.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=r}})}Ar.recalculateRGB=function(n,e,t){if(n.__state.space==="HEX")n.__state[e]=w0.component_from_hex(n.__state.hex,t);else if(n.__state.space==="HSV")Le.extend(n.__state,w0.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v));else throw new Error("Corrupted color state")};Ar.recalculateHSV=function(n){var e=w0.rgb_to_hsv(n.r,n.g,n.b);Le.extend(n.__state,{s:e.s,v:e.v}),Le.isNaN(e.h)?Le.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=e.h};Ar.COMPONENTS=["r","g","b","h","s","v","hex","a"];t2(Ar.prototype,"r",2);t2(Ar.prototype,"g",1);t2(Ar.prototype,"b",0);n2(Ar.prototype,"h");n2(Ar.prototype,"s");n2(Ar.prototype,"v");Object.defineProperty(Ar.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(Ar.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=w0.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var gf=function(){function n(e,t){yo(this,n),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return bo(n,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),Eoe={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},A4={};Le.each(Eoe,function(n,e){Le.each(n,function(t){A4[t]=e})});var koe=/(\d+(\.\d+)?)px/;function Mo(n){if(n==="0"||Le.isUndefined(n))return 0;var e=n.match(koe);return Le.isNull(e)?0:parseFloat(e[1])}var Te={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,r){var i=r,a=t;Le.isUndefined(a)&&(a=!0),Le.isUndefined(i)&&(i=!0),e.style.position="absolute",a&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,r,i){var a=r||{},o=A4[t];if(!o)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":{var u=a.x||a.clientX||0,l=a.y||a.clientY||0;s.initMouseEvent(t,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var c=s.initKeyboardEvent||s.initKeyEvent;Le.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break}default:{s.initEvent(t,a.bubbles||!1,a.cancelable||!0);break}}Le.defaults(s,i),e.dispatchEvent(s)},bind:function(e,t,r,i){var a=i||!1;return e.addEventListener?e.addEventListener(t,r,a):e.attachEvent&&e.attachEvent("on"+t,r),Te},unbind:function(e,t,r,i){var a=i||!1;return e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent&&e.detachEvent("on"+t,r),Te},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var r=e.className.split(/ +/);r.indexOf(t)===-1&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Te},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var r=e.className.split(/ +/),i=r.indexOf(t);i!==-1&&(r.splice(i,1),e.className=r.join(" "))}else e.className=void 0;return Te},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return Mo(t["border-left-width"])+Mo(t["border-right-width"])+Mo(t["padding-left"])+Mo(t["padding-right"])+Mo(t.width)},getHeight:function(e){var t=getComputedStyle(e);return Mo(t["border-top-width"])+Mo(t["border-bottom-width"])+Mo(t["padding-top"])+Mo(t["padding-bottom"])+Mo(t.height)},getOffset:function(e){var t=e,r={left:0,top:0};if(t.offsetParent)do r.left+=t.offsetLeft,r.top+=t.offsetTop,t=t.offsetParent;while(t);return r},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},R4=function(n){Sl(e,n);function e(t,r){yo(this,e);var i=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),a=i;i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox");function o(){a.setValue(!a.__prev)}return Te.bind(i.__checkbox,"change",o,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return bo(e,[{key:"setValue",value:function(r){var i=ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(gf),Aoe=function(n){Sl(e,n);function e(t,r,i){yo(this,e);var a=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),o=i,s=a;if(a.__select=document.createElement("select"),Le.isArray(o)){var u={};Le.each(o,function(l){u[l]=l}),o=u}return Le.each(o,function(l,c){var f=document.createElement("option");f.innerHTML=c,f.setAttribute("value",l),s.__select.appendChild(f)}),a.updateDisplay(),Te.bind(a.__select,"change",function(){var l=this.options[this.selectedIndex].value;s.setValue(l)}),a.domElement.appendChild(a.__select),a}return bo(e,[{key:"setValue",value:function(r){var i=ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return Te.isActive(this.__select)?this:(this.__select.value=this.getValue(),ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(gf),Roe=function(n){Sl(e,n);function e(t,r){yo(this,e);var i=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),a=i;function o(){a.setValue(a.__input.value)}function s(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),Te.bind(i.__input,"keyup",o),Te.bind(i.__input,"change",o),Te.bind(i.__input,"blur",s),Te.bind(i.__input,"keydown",function(u){u.keyCode===13&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return bo(e,[{key:"updateDisplay",value:function(){return Te.isActive(this.__input)||(this.__input.value=this.getValue()),ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(gf);function WD(n){var e=n.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var I4=function(n){Sl(e,n);function e(t,r,i){yo(this,e);var a=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),o=i||{};return a.__min=o.min,a.__max=o.max,a.__step=o.step,Le.isUndefined(a.__step)?a.initialValue===0?a.__impliedStep=1:a.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(a.initialValue))/Math.LN10))/10:a.__impliedStep=a.__step,a.__precision=WD(a.__impliedStep),a}return bo(e,[{key:"setValue",value:function(r){var i=r;return this.__min!==void 0&&i<this.__min?i=this.__min:this.__max!==void 0&&i>this.__max&&(i=this.__max),this.__step!==void 0&&i%this.__step!==0&&(i=Math.round(i/this.__step)*this.__step),ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(r){return this.__min=r,this}},{key:"max",value:function(r){return this.__max=r,this}},{key:"step",value:function(r){return this.__step=r,this.__impliedStep=r,this.__precision=WD(r),this}}]),e}(gf);function Ioe(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}var S0=function(n){Sl(e,n);function e(t,r,i){yo(this,e);var a=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,i));a.__truncationSuspended=!1;var o=a,s=void 0;function u(){var p=parseFloat(o.__input.value);Le.isNaN(p)||o.setValue(p)}function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function c(){l()}function f(p){var g=s-p.clientY;o.setValue(o.getValue()+g*o.__impliedStep),s=p.clientY}function h(){Te.unbind(window,"mousemove",f),Te.unbind(window,"mouseup",h),l()}function d(p){Te.bind(window,"mousemove",f),Te.bind(window,"mouseup",h),s=p.clientY}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),Te.bind(a.__input,"change",u),Te.bind(a.__input,"blur",c),Te.bind(a.__input,"mousedown",d),Te.bind(a.__input,"keydown",function(p){p.keyCode===13&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return bo(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Ioe(this.getValue(),this.__precision),ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(I4);function HD(n,e,t,r,i){return r+(i-r)*((n-e)/(t-e))}var Zw=function(n){Sl(e,n);function e(t,r,i,a,o){yo(this,e);var s=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r,{min:i,max:a,step:o})),u=s;s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),Te.bind(s.__background,"mousedown",l),Te.bind(s.__background,"touchstart",h),Te.addClass(s.__background,"slider"),Te.addClass(s.__foreground,"slider-fg");function l(g){document.activeElement.blur(),Te.bind(window,"mousemove",c),Te.bind(window,"mouseup",f),c(g)}function c(g){g.preventDefault();var m=u.__background.getBoundingClientRect();return u.setValue(HD(g.clientX,m.left,m.right,u.__min,u.__max)),!1}function f(){Te.unbind(window,"mousemove",c),Te.unbind(window,"mouseup",f),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function h(g){g.touches.length===1&&(Te.bind(window,"touchmove",d),Te.bind(window,"touchend",p),d(g))}function d(g){var m=g.touches[0].clientX,y=u.__background.getBoundingClientRect();u.setValue(HD(m,y.left,y.right,u.__min,u.__max))}function p(){Te.unbind(window,"touchmove",d),Te.unbind(window,"touchend",p),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}return s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return bo(e,[{key:"updateDisplay",value:function(){var r=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=r*100+"%",ol(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(I4),P4=function(n){Sl(e,n);function e(t,r,i){yo(this,e);var a=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r)),o=a;return a.__button=document.createElement("div"),a.__button.innerHTML=i===void 0?"Fire":i,Te.bind(a.__button,"click",function(s){return s.preventDefault(),o.fire(),!1}),Te.addClass(a.__button,"button"),a.domElement.appendChild(a.__button),a}return bo(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(gf),Qw=function(n){Sl(e,n);function e(t,r){yo(this,e);var i=Cl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));i.__color=new Ar(i.getValue()),i.__temp=new Ar(0);var a=i;i.domElement=document.createElement("div"),Te.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",Te.bind(i.__input,"keydown",function(g){g.keyCode===13&&f.call(this)}),Te.bind(i.__input,"blur",f),Te.bind(i.__selector,"mousedown",function(){Te.addClass(this,"drag").bind(window,"mouseup",function(){Te.removeClass(a.__selector,"drag")})}),Te.bind(i.__selector,"touchstart",function(){Te.addClass(this,"drag").bind(window,"touchend",function(){Te.removeClass(a.__selector,"drag")})});var o=document.createElement("div");Le.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Le.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Le.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Le.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Le.extend(o.style,{width:"100%",height:"100%",background:"none"}),GD(o,"top","rgba(0,0,0,0)","#000"),Le.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Doe(i.__hue_field),Le.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),Te.bind(i.__saturation_field,"mousedown",s),Te.bind(i.__saturation_field,"touchstart",s),Te.bind(i.__field_knob,"mousedown",s),Te.bind(i.__field_knob,"touchstart",s),Te.bind(i.__hue_field,"mousedown",u),Te.bind(i.__hue_field,"touchstart",u);function s(g){d(g),Te.bind(window,"mousemove",d),Te.bind(window,"touchmove",d),Te.bind(window,"mouseup",l),Te.bind(window,"touchend",l)}function u(g){p(g),Te.bind(window,"mousemove",p),Te.bind(window,"touchmove",p),Te.bind(window,"mouseup",c),Te.bind(window,"touchend",c)}function l(){Te.unbind(window,"mousemove",d),Te.unbind(window,"touchmove",d),Te.unbind(window,"mouseup",l),Te.unbind(window,"touchend",l),h()}function c(){Te.unbind(window,"mousemove",p),Te.unbind(window,"touchmove",p),Te.unbind(window,"mouseup",c),Te.unbind(window,"touchend",c),h()}function f(){var g=Yw(this.value);g!==!1?(a.__color.__state=g,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function h(){a.__onFinishChange&&a.__onFinishChange.call(a,a.__color.toOriginal())}i.__saturation_field.appendChild(o),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay();function d(g){g.type.indexOf("touch")===-1&&g.preventDefault();var m=a.__saturation_field.getBoundingClientRect(),y=g.touches&&g.touches[0]||g,b=y.clientX,_=y.clientY,w=(b-m.left)/(m.right-m.left),T=1-(_-m.top)/(m.bottom-m.top);return T>1?T=1:T<0&&(T=0),w>1?w=1:w<0&&(w=0),a.__color.v=T,a.__color.s=w,a.setValue(a.__color.toOriginal()),!1}function p(g){g.type.indexOf("touch")===-1&&g.preventDefault();var m=a.__hue_field.getBoundingClientRect(),y=g.touches&&g.touches[0]||g,b=y.clientY,_=1-(b-m.top)/(m.bottom-m.top);return _>1?_=1:_<0&&(_=0),a.__color.h=_*360,a.setValue(a.__color.toOriginal()),!1}return i}return bo(e,[{key:"updateDisplay",value:function(){var r=Yw(this.getValue());if(r!==!1){var i=!1;Le.each(Ar.COMPONENTS,function(s){if(!Le.isUndefined(r[s])&&!Le.isUndefined(this.__color.__state[s])&&r[s]!==this.__color.__state[s])return i=!0,{}},this),i&&Le.extend(this.__color.__state,r)}Le.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,o=255-a;Le.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,GD(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Le.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(gf),Poe=["-moz-","-o-","-webkit-","-ms-",""];function GD(n,e,t,r){n.style.background="",Le.each(Poe,function(i){n.style.cssText+="background: "+i+"linear-gradient("+e+", "+t+" 0%, "+r+" 100%); "})}function Doe(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var $oe={load:function(e,t){var r=t||document,i=r.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,r.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){var r=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var a=r.getElementsByTagName("head")[0];try{a.appendChild(i)}catch{}}},Noe=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Ooe=function(e,t){var r=e[t];return Le.isArray(arguments[2])||Le.isObject(arguments[2])?new Aoe(e,t,arguments[2]):Le.isNumber(r)?Le.isNumber(arguments[2])&&Le.isNumber(arguments[3])?Le.isNumber(arguments[4])?new Zw(e,t,arguments[2],arguments[3],arguments[4]):new Zw(e,t,arguments[2],arguments[3]):Le.isNumber(arguments[4])?new S0(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new S0(e,t,{min:arguments[2],max:arguments[3]}):Le.isString(r)?new Roe(e,t):Le.isFunction(r)?new P4(e,t,""):Le.isBoolean(r)?new R4(e,t):null};function Loe(n){setTimeout(n,1e3/60)}var Moe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Loe,Boe=function(){function n(){yo(this,n),this.backgroundElement=document.createElement("div"),Le.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Te.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Le.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;Te.bind(this.backgroundElement,"click",function(){e.hide()})}return bo(n,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Le.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,r=function i(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Te.unbind(t.domElement,"webkitTransitionEnd",i),Te.unbind(t.domElement,"transitionend",i),Te.unbind(t.domElement,"oTransitionEnd",i)};Te.bind(this.domElement,"webkitTransitionEnd",r),Te.bind(this.domElement,"transitionend",r),Te.bind(this.domElement,"oTransitionEnd",r),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Te.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Te.getHeight(this.domElement)/2+"px"}}]),n}(),Foe=Soe(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);$oe.inject(Foe);var jD="dg",qD=72,XD=20,$v="Default",Vp=function(){try{return!!window.localStorage}catch{return!1}}(),ov=void 0,KD=!0,dh=void 0,Tx=!1,D4=[],Ln=function n(e){var t=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Te.addClass(this.domElement,jD),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=Le.defaults(r,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),r=Le.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),Le.isUndefined(r.load)?r.load={preset:$v}:r.preset&&(r.load.preset=r.preset),Le.isUndefined(r.parent)&&r.hideable&&D4.push(this),r.resizable=Le.isUndefined(r.parent)&&r.resizable,r.autoPlace&&Le.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=Vp&&localStorage.getItem(ph(this,"isLocal"))==="true",a=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:r.load.preset},set:function(h){t.parent?t.getRoot().preset=h:r.load.preset=h,Woe(this),t.revert()}},width:{get:function(){return r.width},set:function(h){r.width=h,tS(t,h)}},name:{get:function(){return r.name},set:function(h){r.name=h,o&&(o.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(h){r.closed=h,r.closed?Te.addClass(t.__ul,n.CLASS_CLOSED):Te.removeClass(t.__ul,n.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=h?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(h){Vp&&(i=h,h?Te.bind(window,"unload",a):Te.unbind(window,"unload",a),localStorage.setItem(ph(t,"isLocal"),h))}}}),Le.isUndefined(r.parent)){if(this.closed=r.closed||!1,Te.addClass(this.domElement,n.CLASS_MAIN),Te.makeSelectable(this.domElement,!1),Vp&&i){t.useLocalStorage=!0;var s=localStorage.getItem(ph(this,"gui"));s&&(r.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,Te.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),r.closeOnTop?(Te.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Te.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Te.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{r.closed===void 0&&(r.closed=!0);var u=document.createTextNode(r.name);Te.addClass(u,"controller-name"),o=r2(t,u);var l=function(h){return h.preventDefault(),t.closed=!t.closed,!1};Te.addClass(this.__ul,n.CLASS_CLOSED),Te.addClass(o,"title"),Te.bind(o,"click",l),r.closed||(this.closed=!1)}r.autoPlace&&(Le.isUndefined(r.parent)&&(KD&&(dh=document.createElement("div"),Te.addClass(dh,jD),Te.addClass(dh,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(dh),KD=!1),dh.appendChild(this.domElement),Te.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||tS(t,r.width)),this.__resizeHandler=function(){t.onResizeDebounced()},Te.bind(window,"resize",this.__resizeHandler),Te.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Te.bind(this.__ul,"transitionend",this.__resizeHandler),Te.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&Uoe(this),a=function(){Vp&&localStorage.getItem(ph(t,"isLocal"))==="true"&&localStorage.setItem(ph(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=a;function c(){var f=t.getRoot();f.width+=1,Le.defer(function(){f.width-=1})}r.parent||c()};Ln.toggleHide=function(){Tx=!Tx,Le.each(D4,function(n){n.domElement.style.display=Tx?"none":""})};Ln.CLASS_AUTO_PLACE="a";Ln.CLASS_AUTO_PLACE_CONTAINER="ac";Ln.CLASS_MAIN="main";Ln.CLASS_CONTROLLER_ROW="cr";Ln.CLASS_TOO_TALL="taller-than-window";Ln.CLASS_CLOSED="closed";Ln.CLASS_CLOSE_BUTTON="close-button";Ln.CLASS_CLOSE_TOP="close-top";Ln.CLASS_CLOSE_BOTTOM="close-bottom";Ln.CLASS_DRAG="drag";Ln.DEFAULT_WIDTH=245;Ln.TEXT_CLOSED="Close Controls";Ln.TEXT_OPEN="Open Controls";Ln._keydownHandler=function(n){document.activeElement.type!=="text"&&(n.which===qD||n.keyCode===qD)&&Ln.toggleHide()};Te.bind(window,"keydown",Ln._keydownHandler,!1);Le.extend(Ln.prototype,{add:function(e,t){return sv(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return sv(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Le.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&dh.removeChild(this.domElement);var e=this;Le.each(this.__folders,function(t){e.removeFolder(t)}),Te.unbind(window,"keydown",Ln._keydownHandler,!1),YD(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var r=new Ln(t);this.__folders[e]=r;var i=r2(this,r.domElement);return Te.addClass(i,"folder"),r},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],YD(e);var t=this;Le.each(e.__folders,function(r){e.removeFolder(r)}),Le.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Te.getOffset(e.__ul).top,r=0;Le.each(e.__ul.childNodes,function(i){e.autoPlace&&i===e.__save_row||(r+=Te.getHeight(i))}),window.innerHeight-t-XD<r?(Te.addClass(e.domElement,Ln.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-XD+"px"):(Te.removeClass(e.domElement,Ln.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Le.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Le.debounce(function(){this.onResize()},50),remember:function(){if(Le.isUndefined(ov)&&(ov=new Boe,ov.domElement.innerHTML=Noe),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Le.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&zoe(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&tS(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Sm(this)),e.folders={},Le.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Sm(this),Jw(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[$v]=Sm(this,!0)),this.load.remembered[e]=Sm(this),this.preset=e,eS(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Le.each(this.__controllers,function(t){this.getRoot().load.remembered?$4(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),Le.each(this.__folders,function(t){t.revert(t)}),e||Jw(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&N4(this.__listening)},updateDisplay:function(){Le.each(this.__controllers,function(e){e.updateDisplay()}),Le.each(this.__folders,function(e){e.updateDisplay()})}});function r2(n,e,t){var r=document.createElement("li");return e&&r.appendChild(e),t?n.__ul.insertBefore(r,t):n.__ul.appendChild(r),n.onResize(),r}function YD(n){Te.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&Te.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function Jw(n,e){var t=n.__preset_select[n.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function Voe(n,e,t){if(t.__li=e,t.__gui=n,Le.extend(t,{options:function(o){if(arguments.length>1){var s=t.__li.nextElementSibling;return t.remove(),sv(n,t.object,t.property,{before:s,factoryArgs:[Le.toArray(arguments)]})}if(Le.isArray(o)||Le.isObject(o)){var u=t.__li.nextElementSibling;return t.remove(),sv(n,t.object,t.property,{before:u,factoryArgs:[o]})}},name:function(o){return t.__li.firstElementChild.firstElementChild.innerHTML=o,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof Zw){var r=new S0(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});Le.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(a){var o=t[a],s=r[a];t[a]=r[a]=function(){var u=Array.prototype.slice.call(arguments);return s.apply(r,u),o.apply(t,u)}}),Te.addClass(e,"has-slider"),t.domElement.insertBefore(r.domElement,t.domElement.firstElementChild)}else if(t instanceof S0){var i=function(o){if(Le.isNumber(t.__min)&&Le.isNumber(t.__max)){var s=t.__li.firstElementChild.firstElementChild.innerHTML,u=t.__gui.__listening.indexOf(t)>-1;t.remove();var l=sv(n,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return l.name(s),u&&l.listen(),l}return o};t.min=Le.compose(i,t.min),t.max=Le.compose(i,t.max)}else t instanceof R4?(Te.bind(e,"click",function(){Te.fakeEvent(t.__checkbox,"click")}),Te.bind(t.__checkbox,"click",function(a){a.stopPropagation()})):t instanceof P4?(Te.bind(e,"click",function(){Te.fakeEvent(t.__button,"click")}),Te.bind(e,"mouseover",function(){Te.addClass(t.__button,"hover")}),Te.bind(e,"mouseout",function(){Te.removeClass(t.__button,"hover")})):t instanceof Qw&&(Te.addClass(e,"color"),t.updateDisplay=Le.compose(function(a){return e.style.borderLeftColor=t.__color.toString(),a},t.updateDisplay),t.updateDisplay());t.setValue=Le.compose(function(a){return n.getRoot().__preset_select&&t.isModified()&&Jw(n.getRoot(),!0),a},t.setValue)}function $4(n,e){var t=n.getRoot(),r=t.__rememberedObjects.indexOf(e.object);if(r!==-1){var i=t.__rememberedObjectIndecesToControllers[r];if(i===void 0&&(i={},t.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,t.load&&t.load.remembered){var a=t.load.remembered,o=void 0;if(a[n.preset])o=a[n.preset];else if(a[$v])o=a[$v];else return;if(o[r]&&o[r][e.property]!==void 0){var s=o[r][e.property];e.initialValue=s,e.setValue(s)}}}}function sv(n,e,t,r){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var i=void 0;if(r.color)i=new Qw(e,t);else{var a=[e,t].concat(r.factoryArgs);i=Ooe.apply(n,a)}r.before instanceof gf&&(r.before=r.before.__li),$4(n,i),Te.addClass(i.domElement,"c");var o=document.createElement("span");Te.addClass(o,"property-name"),o.innerHTML=i.property;var s=document.createElement("div");s.appendChild(o),s.appendChild(i.domElement);var u=r2(n,s,r.before);return Te.addClass(u,Ln.CLASS_CONTROLLER_ROW),i instanceof Qw?Te.addClass(u,"color"):Te.addClass(u,Toe(i.getValue())),Voe(n,u,i),n.__controllers.push(i),i}function ph(n,e){return document.location.href+"."+e}function eS(n,e,t){var r=document.createElement("option");r.innerHTML=e,r.value=e,n.__preset_select.appendChild(r),t&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function ZD(n,e){e.style.display=n.useLocalStorage?"block":"none"}function zoe(n){var e=n.__save_row=document.createElement("li");Te.addClass(n.domElement,"has-save"),n.__ul.insertBefore(e,n.__ul.firstChild),Te.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",Te.addClass(t,"button gears");var r=document.createElement("span");r.innerHTML="Save",Te.addClass(r,"button"),Te.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",Te.addClass(i,"button"),Te.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",Te.addClass(a,"button"),Te.addClass(a,"revert");var o=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?Le.each(n.load.remembered,function(f,h){eS(n,h,h===n.preset)}):eS(n,$v,!1),Te.bind(o,"change",function(){for(var f=0;f<n.__preset_select.length;f++)n.__preset_select[f].innerHTML=n.__preset_select[f].value;n.preset=this.value}),e.appendChild(o),e.appendChild(t),e.appendChild(r),e.appendChild(i),e.appendChild(a),Vp){var s=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage"),l=document.getElementById("dg-save-locally");l.style.display="block",localStorage.getItem(ph(n,"isLocal"))==="true"&&u.setAttribute("checked","checked"),ZD(n,s),Te.bind(u,"change",function(){n.useLocalStorage=!n.useLocalStorage,ZD(n,s)})}var c=document.getElementById("dg-new-constructor");Te.bind(c,"keydown",function(f){f.metaKey&&(f.which===67||f.keyCode===67)&&ov.hide()}),Te.bind(t,"click",function(){c.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),ov.show(),c.focus(),c.select()}),Te.bind(r,"click",function(){n.save()}),Te.bind(i,"click",function(){var f=prompt("Enter a new preset name.");f&&n.saveAs(f)}),Te.bind(a,"click",function(){n.revert()})}function Uoe(n){var e=void 0;n.__resize_handle=document.createElement("div"),Le.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(a){return a.preventDefault(),n.width+=e-a.clientX,n.onResize(),e=a.clientX,!1}function r(){Te.removeClass(n.__closeButton,Ln.CLASS_DRAG),Te.unbind(window,"mousemove",t),Te.unbind(window,"mouseup",r)}function i(a){return a.preventDefault(),e=a.clientX,Te.addClass(n.__closeButton,Ln.CLASS_DRAG),Te.bind(window,"mousemove",t),Te.bind(window,"mouseup",r),!1}Te.bind(n.__resize_handle,"mousedown",i),Te.bind(n.__closeButton,"mousedown",i),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}function tS(n,e){n.domElement.style.width=e+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=e+"px"),n.__closeButton&&(n.__closeButton.style.width=e+"px")}function Sm(n,e){var t={};return Le.each(n.__rememberedObjects,function(r,i){var a={},o=n.__rememberedObjectIndecesToControllers[i];Le.each(o,function(s,u){a[u]=e?s.initialValue:s.getValue()}),t[i]=a}),t}function Woe(n){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].value===n.preset&&(n.__preset_select.selectedIndex=e)}function N4(n){n.length!==0&&Moe.call(window,function(){N4(n)}),Le.each(n,function(e){e.updateDisplay()})}var iVe=Ln;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nS=function(n,e){return nS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},nS(n,e)};function rt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hoe=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),Goe=function(){function n(){this.browser=new Hoe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),yc=new Goe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(yc.wxa=!0,yc.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?yc.worker=!0:typeof navigator>"u"?(yc.node=!0,yc.svgSupported=!0):joe(navigator.userAgent,yc);function joe(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),o&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var s=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in s||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}const Lt=yc;var i2=12,qoe="sans-serif",qc=i2+"px "+qoe,Xoe=20,Koe=100,Yoe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Zoe(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-Xoe)/Koe;e[r]=i}return e}var Qoe=Zoe(Yoe),mf={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=mf.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||qc),n.measureText(t);t=t||"",r=r||qc;var a=/(\d+)px/.exec(r),o=a&&+a[1]||i2,s=0;if(r.indexOf("mono")>=0)s=o*t.length;else for(var u=0;u<t.length;u++){var l=Qoe[t[u]];s+=l==null?o:l*o}return{width:s}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},O4=sl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),L4=sl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),Ed=Object.prototype.toString,V1=Array.prototype,Joe=V1.forEach,ese=V1.filter,a2=V1.slice,tse=V1.map,QD=function(){}.constructor,Cm=QD?QD.prototype:null,o2="__proto__",nse=2311;function M4(){return nse++}function s2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Pt(n){if(n==null||typeof n!="object")return n;var e=n,t=Ed.call(n);if(t==="[object Array]"){if(!lv(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Pt(n[r])}}else if(L4[t]){if(!lv(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!O4[t]&&!lv(n)&&!Nv(n)){e={};for(var o in n)n.hasOwnProperty(o)&&o!==o2&&(e[o]=Pt(n[o]))}return e}function Mt(n,e,t){if(!ht(e)||!ht(n))return t?Pt(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==o2){var i=n[r],a=e[r];ht(a)&&ht(i)&&!Ze(a)&&!Ze(i)&&!Nv(a)&&!Nv(i)&&!JD(a)&&!JD(i)&&!lv(a)&&!lv(i)?Mt(i,a,t):(t||!(r in n))&&(n[r]=Pt(e[r]))}return n}function Ue(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==o2&&(n[t]=e[t]);return n}function St(n,e,t){for(var r=zn(e),i=0;i<r.length;i++){var a=r[i];(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}return n}mf.createCanvas;function Ht(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function rse(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function xo(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else St(n,e,t)}function gi(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function ne(n,e,t){if(n&&e)if(n.forEach&&n.forEach===Joe)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function nt(n,e,t){if(!n)return[];if(!e)return u2(n);if(n.map&&n.map===tse)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function sl(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function Jn(n,e,t){if(!n)return[];if(!e)return u2(n);if(n.filter&&n.filter===ese)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function zn(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function ise(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(a2.call(arguments)))}}var Tn=Cm&&Et(Cm.bind)?Cm.call.bind(Cm.bind):ise;function rn(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(a2.call(arguments)))}}function Ze(n){return Array.isArray?Array.isArray(n):Ed.call(n)==="[object Array]"}function Et(n){return typeof n=="function"}function lt(n){return typeof n=="string"}function rS(n){return Ed.call(n)==="[object String]"}function dn(n){return typeof n=="number"}function ht(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function JD(n){return!!O4[Ed.call(n)]}function na(n){return!!L4[Ed.call(n)]}function Nv(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function z1(n){return n.colorStops!=null}function ase(n){return n.image!=null}function ose(n){return Ed.call(n)==="[object RegExp]"}function C0(n){return n!==n}function Ov(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function Gt(n,e){return n??e}function uv(n,e,t){return n??e??t}function u2(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return a2.apply(n,e)}function B4(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function cs(n,e){if(!n)throw new Error(e)}function Xo(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var F4="__ec_primitive__";function T0(n){n[F4]=!0}function lv(n){return n[F4]}var sse=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return zn(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),V4=typeof Map=="function";function use(){return V4?new Map:new sse}var lse=function(){function n(e){var t=Ze(e);this.data=use();var r=this;e instanceof n?e.each(i):e&&ne(e,i);function i(a,o){t?r.set(a,o):r.set(o,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return V4?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function Tt(n){return new lse(n)}function cse(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function U1(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&Ue(t,e),t}function z4(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function nu(n,e){return n.hasOwnProperty(e)}function pi(){}var fse=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var iS=function(n,e){return iS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},iS(n,e)};function kn(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function kd(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function hse(n){return[n[0],n[1]]}function e$(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function dse(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function pse(n){return Math.sqrt(vse(n))}function vse(n){return n[0]*n[0]+n[1]*n[1]}function Ex(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function gse(n,e){var t=pse(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function aS(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var oS=aS;function mse(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var Nh=mse;function Ky(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function $a(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function wh(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Sh(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var jf=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),yse=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new jf(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,t.drift(a,o,e),this.handler.dispatchToElement(new jf(t,e),"drag",e.event);var s=this.handler.findHover(r,i,t).target,u=this._dropTarget;this._dropTarget=s,t!==s&&(u&&s!==u&&this.handler.dispatchToElement(new jf(u,e),"dragleave",e.event),s&&s!==u&&this.handler.dispatchToElement(new jf(s,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new jf(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new jf(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}();const bse=yse;var xse=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var o=this._$eventProcessor;t!=null&&o&&o.normalizeQuery&&(t=o.normalizeQuery(t)),a[e]||(a[e]=[]);for(var s=0;s<a[e].length;s++)if(a[e][s].h===r)return this;var u={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},l=a[e].length-1,c=a[e][l];return c&&c.callAtLast?a[e].splice(l,0,u):a[e].push(u),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,o=r[e].length;a<o;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=i.length,u=0;u<s;u++){var l=i[u];if(!(a&&a.filter&&l.query!=null&&!a.filter(e,l.query)))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,t[0]);break;case 2:l.h.call(l.ctx,t[0],t[1]);break;default:l.h.apply(l.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var o=t.length,s=t[o-1],u=i.length,l=0;l<u;l++){var c=i[l];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,t[0]);break;case 2:c.h.call(s,t[0],t[1]);break;default:c.h.apply(s,t.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}();const _o=xse;var _se=Math.log(2);function sS(n,e,t,r,i,a){var o=r+"-"+i,s=n.length;if(a.hasOwnProperty(o))return a[o];if(e===1){var u=Math.round(Math.log((1<<s)-1&~i)/_se);return n[t][u]}for(var l=r|1<<t,c=t+1;r&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*n[t][h]*sS(n,e-1,c,l,i|p,a),d++)}return a[o]=f,f}function t$(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=sS(t,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*sS(t,7,o===0?1:0,1<<o,1<<s,r)/i*e[o];return function(u,l,c){var f=l*a[6]+c*a[7]+1;u[0]=(l*a[0]+c*a[1]+a[2])/f,u[1]=(l*a[3]+c*a[4]+a[5])/f}}}var n$="___zrEVENTSAVED",kx=[];function wse(n,e,t,r,i){return uS(kx,e,r,i,!0)&&uS(n,t,kx[0],kx[1])}function uS(n,e,t,r,i){if(e.getBoundingClientRect&&Lt.domSupported&&!U4(e)){var a=e[n$]||(e[n$]={}),o=Sse(e,a),s=Cse(o,a,i);if(s)return s(n,t,r),!0}return!1}function Sse(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,u=a%2,l=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[u]+":0",i[l]+":0",r[1-u]+":auto",i[1-l]+":auto",""].join("!important;"),n.appendChild(o),t.push(o)}return t}function Cse(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,o=[],s=[],u=!0,l=0;l<4;l++){var c=n[l].getBoundingClientRect(),f=2*l,h=c.left,d=c.top;o.push(h,d),u=u&&a&&h===a[f]&&d===a[f+1],s.push(n[l].offsetLeft,n[l].offsetTop)}return u&&i?i:(e.srcCoords=o,e[r]=t?t$(s,o):t$(o,s))}function U4(n){return n.nodeName.toUpperCase()==="CANVAS"}var Tse=/([&<>"'])/g,Ese={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _a(n){return n==null?"":(n+"").replace(Tse,function(e,t){return Ese[t]})}var kse=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ax=[],Ase=Lt.browser.firefox&&+Lt.browser.version.split(".")[0]<39;function lS(n,e,t,r){return t=t||{},r?r$(n,e,t):Ase&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):r$(n,e,t),t}function r$(n,e,t){if(Lt.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(U4(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(uS(Ax,n,r,i)){t.zrX=Ax[0],t.zrY=Ax[1];return}}t.zrX=t.zrY=0}function l2(n){return n||window.event}function ga(n,e,t){if(e=l2(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];o&&lS(n,o,e,t)}else{lS(n,e,e,t);var a=Rse(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var s=e.button;return e.which==null&&s!==void 0&&kse.test(e.type)&&(e.which=s&1?1:s&2?3:s&4?2:0),e}function Rse(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function cS(n,e,t,r){n.addEventListener(e,t,r)}function Ise(n,e,t,r){n.removeEventListener(e,t,r)}var W4=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},Pse=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},o=0,s=i.length;o<s;o++){var u=i[o],l=lS(r,u,{});a.points.push([l.zrX,l.zrY]),a.touches.push(u)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in Rx)if(Rx.hasOwnProperty(t)){var r=Rx[t](this._track,e);if(r)return r}},n}();function i$(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function Dse(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var Rx={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=i$(r)/i$(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=Dse(r);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:n[0].target,event:e}}}}};function ed(){return[1,0,0,1,0,0]}function c2(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function $se(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Oh(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],o=e[1]*t[2]+e[3]*t[3],s=e[0]*t[4]+e[2]*t[5]+e[4],u=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=o,n[4]=s,n[5]=u,n}function E0(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function W1(n,e,t){var r=e[0],i=e[2],a=e[4],o=e[1],s=e[3],u=e[5],l=Math.sin(t),c=Math.cos(t);return n[0]=r*c+o*l,n[1]=-r*l+o*c,n[2]=i*c+s*l,n[3]=-i*l+c*s,n[4]=c*a+l*u,n[5]=c*u-l*a,n}function Nse(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function H1(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=t*o-a*r;return u?(u=1/u,n[0]=o*u,n[1]=-a*u,n[2]=-r*u,n[3]=t*u,n[4]=(r*s-o*i)*u,n[5]=(a*i-t*s)*u,n):null}var Ose=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}();const bt=Ose;var Tm=Math.min,Em=Math.max,Gl=new bt,jl=new bt,ql=new bt,Xl=new bt,fp=new bt,hp=new bt,Lse=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=Tm(e.x,this.x),r=Tm(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Em(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Em(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=ed();return E0(a,a,[-t.x,-t.y]),Nse(a,a,[r,i]),E0(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,u=e.x,l=e.x+e.width,c=e.y,f=e.y+e.height,h=!(a<u||l<i||s<c||f<o);if(t){var d=1/0,p=0,g=Math.abs(a-u),m=Math.abs(l-i),y=Math.abs(s-c),b=Math.abs(f-o),_=Math.min(g,m),w=Math.min(y,b);a<u||l<i?_>p&&(p=_,g<m?bt.set(hp,-g,0):bt.set(hp,m,0)):_<d&&(d=_,g<m?bt.set(fp,g,0):bt.set(fp,-m,0)),s<c||f<o?w>p&&(p=w,y<b?bt.set(hp,0,-y):bt.set(hp,0,b)):_<d&&(d=_,y<b?bt.set(fp,0,y):bt.set(fp,0,-b))}return t&&bt.copy(t,h?fp:hp),h},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];e.x=t.x*i+o,e.y=t.y*a+s,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Gl.x=ql.x=t.x,Gl.y=Xl.y=t.y,jl.x=Xl.x=t.x+t.width,jl.y=ql.y=t.y+t.height,Gl.transform(r),Xl.transform(r),jl.transform(r),ql.transform(r),e.x=Tm(Gl.x,jl.x,ql.x,Xl.x),e.y=Tm(Gl.y,jl.y,ql.y,Xl.y);var u=Em(Gl.x,jl.x,ql.x,Xl.x),l=Em(Gl.y,jl.y,ql.y,Xl.y);e.width=u-e.x,e.height=l-e.y},n}();const Kt=Lse;var H4="silent";function Mse(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:Bse}}function Bse(){W4(this.event)}var Fse=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(_o),dp=function(){function n(e,t){this.x=e,this.y=t}return n}(),Vse=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Ix=new Kt(0,0,0,0),G4=function(n){kn(e,n);function e(t,r,i,a,o){var s=n.call(this)||this;return s._hovered=new dp(0,0),s.storage=t,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new Fse,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new bse(s),s}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(ne(Vse,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=j4(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var u=this._hovered=a?new dp(r,i):this.findHover(r,i),l=u.target,c=this.proxy;c.setCursor&&c.setCursor(l?l.cursor:"default"),s&&l!==s&&this.dispatchToElement(o,"mouseout",t),this.dispatchToElement(u,"mousemove",t),l&&l!==s&&this.dispatchToElement(u,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new dp(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var o="on"+r,s=Mse(r,t,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(u){typeof u[o]=="function"&&u[o].call(u,s),u.trigger&&u.trigger(r,s)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),o=new dp(t,r);if(a$(a,o,t,r,i),this._pointerSize&&!o.target){for(var s=[],u=this._pointerSize,l=u/2,c=new Kt(t-l,r-l,u,u),f=a.length-1;f>=0;f--){var h=a[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Ix.copy(h.getBoundingRect()),h.transform&&Ix.applyTransform(h.transform),Ix.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,g=Math.PI*2,m=0;m<l;m+=d)for(var y=0;y<g;y+=p){var b=t+m*Math.cos(y),_=r+m*Math.sin(y);if(a$(s,o,b,_,i),o.target)return o}}return o},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new Pse);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;t.gestureEvent=o;var s=new dp;s.target=a.target,this.dispatchToElement(s,o,a.event)}},e}(_o);ne(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){G4.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=j4(this,t,r),a,o;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),o=a.target),n==="mousedown")this._downEl=o,this._downPoint=[e.zrX,e.zrY],this._upEl=o;else if(n==="mouseup")this._upEl=o;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||oS(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function zse(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(e,t))return!1;r.silent&&(i=!0)}var s=r.__hostTarget;r=s||r.parent}return i?H4:!0}return!1}function a$(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var o=n[a],s=void 0;if(o!==i&&!o.ignore&&(s=zse(o,t,r))&&(!e.topTarget&&(e.topTarget=o),s!==H4)){e.target=o;break}}}function j4(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}const Use=G4;var q4=32,pp=7;function Wse(n){for(var e=0;n>=q4;)e|=n&1,n>>=1;return n+e}function o$(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;Hse(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function Hse(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function s$(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],o=e,s=r,u;o<s;)u=o+s>>>1,i(a,n[u])<0?s=u:o=u+1;var l=r-o;switch(l){case 3:n[o+3]=n[o+2];case 2:n[o+2]=n[o+1];case 1:n[o+1]=n[o];break;default:for(;l>0;)n[o+l]=n[o+l-1],l--}n[o]=a}}function Px(n,e,t,r,i,a){var o=0,s=0,u=1;if(a(n,e[t+i])>0){for(s=r-i;u<s&&a(n,e[t+i+u])>0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}else{for(s=i+1;u<s&&a(n,e[t+i-u])<=0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}for(o++;o<u;){var c=o+(u-o>>>1);a(n,e[t+c])>0?o=c+1:u=c}return u}function Dx(n,e,t,r,i,a){var o=0,s=0,u=1;if(a(n,e[t+i])<0){for(s=i+1;u<s&&a(n,e[t+i-u])<0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}else{for(s=r-i;u<s&&a(n,e[t+i+u])>=0;)o=u,u=(u<<1)+1,u<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}for(o++;o<u;){var c=o+(u-o>>>1);a(n,e[t+c])<0?u=c:o=c+1}return u}function Gse(n,e){var t=pp,r,i,a=0;n.length;var o=[];r=[],i=[];function s(d,p){r[a]=d,i[a]=p,a+=1}function u(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function l(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=r[d],g=i[d],m=r[d+1],y=i[d+1];i[d]=g+y,d===a-3&&(r[d+1]=r[d+2],i[d+1]=i[d+2]),a--;var b=Dx(n[m],n,p,g,0,e);p+=b,g-=b,g!==0&&(y=Px(n[p+g-1],n,m,y,y-1,e),y!==0&&(g<=y?f(p,g,m,y):h(p,g,m,y)))}function f(d,p,g,m){var y=0;for(y=0;y<p;y++)o[y]=n[d+y];var b=0,_=g,w=d;if(n[w++]=n[_++],--m===0){for(y=0;y<p;y++)n[w+y]=o[b+y];return}if(p===1){for(y=0;y<m;y++)n[w+y]=n[_+y];n[w+m]=o[b];return}for(var T=t,E,A,I;;){E=0,A=0,I=!1;do if(e(n[_],o[b])<0){if(n[w++]=n[_++],A++,E=0,--m===0){I=!0;break}}else if(n[w++]=o[b++],E++,A=0,--p===1){I=!0;break}while((E|A)<T);if(I)break;do{if(E=Dx(n[_],o,b,p,0,e),E!==0){for(y=0;y<E;y++)n[w+y]=o[b+y];if(w+=E,b+=E,p-=E,p<=1){I=!0;break}}if(n[w++]=n[_++],--m===0){I=!0;break}if(A=Px(o[b],n,_,m,0,e),A!==0){for(y=0;y<A;y++)n[w+y]=n[_+y];if(w+=A,_+=A,m-=A,m===0){I=!0;break}}if(n[w++]=o[b++],--p===1){I=!0;break}T--}while(E>=pp||A>=pp);if(I)break;T<0&&(T=0),T+=2}if(t=T,t<1&&(t=1),p===1){for(y=0;y<m;y++)n[w+y]=n[_+y];n[w+m]=o[b]}else{if(p===0)throw new Error;for(y=0;y<p;y++)n[w+y]=o[b+y]}}function h(d,p,g,m){var y=0;for(y=0;y<m;y++)o[y]=n[g+y];var b=d+p-1,_=m-1,w=g+m-1,T=0,E=0;if(n[w--]=n[b--],--p===0){for(T=w-(m-1),y=0;y<m;y++)n[T+y]=o[y];return}if(m===1){for(w-=p,b-=p,E=w+1,T=b+1,y=p-1;y>=0;y--)n[E+y]=n[T+y];n[w]=o[_];return}for(var A=t;;){var I=0,$=0,D=!1;do if(e(o[_],n[b])<0){if(n[w--]=n[b--],I++,$=0,--p===0){D=!0;break}}else if(n[w--]=o[_--],$++,I=0,--m===1){D=!0;break}while((I|$)<A);if(D)break;do{if(I=p-Dx(o[_],n,d,p,p-1,e),I!==0){for(w-=I,b-=I,p-=I,E=w+1,T=b+1,y=I-1;y>=0;y--)n[E+y]=n[T+y];if(p===0){D=!0;break}}if(n[w--]=o[_--],--m===1){D=!0;break}if($=m-Px(n[b],o,0,m,m-1,e),$!==0){for(w-=$,_-=$,m-=$,E=w+1,T=_+1,y=0;y<$;y++)n[E+y]=o[T+y];if(m<=1){D=!0;break}}if(n[w--]=n[b--],--p===0){D=!0;break}A--}while(I>=pp||$>=pp);if(D)break;A<0&&(A=0),A+=2}if(t=A,t<1&&(t=1),m===1){for(w-=p,b-=p,E=w+1,T=b+1,y=p-1;y>=0;y--)n[E+y]=n[T+y];n[w]=o[_]}else{if(m===0)throw new Error;for(T=w-(m-1),y=0;y<m;y++)n[T+y]=o[y]}}return{mergeRuns:u,forceMergeRuns:l,pushRun:s}}function Yy(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<q4){a=o$(n,t,r,e),s$(n,t,r,t+a,e);return}var o=Gse(n,e),s=Wse(i);do{if(a=o$(n,t,r,e),a<s){var u=i;u>s&&(u=s),s$(n,t,t+u,t+a,e),a=u}o.pushRun(t,a),o.mergeRuns(),i-=a,t+=a}while(i!==0);o.forceMergeRuns()}}var Qi=1,zp=2,vh=4,u$=!1;function $x(){u$||(u$=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function l$(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var jse=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=l$}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,Yy(r,l$)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,o=e;a;)a.parent=o,a.updateTransform(),t.push(a),o=a,a=a.getClipPath()}if(e.childrenRef){for(var s=e.childrenRef(),u=0;u<s.length;u++){var l=s[u];e.__dirty&&(l.__dirty|=Qi),this._updateAndAddDisplayable(l,t,r)}e.__dirty=0}else{var c=e;t&&t.length?c.__clipPaths=t:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&($x(),c.z=0),isNaN(c.z2)&&($x(),c.z2=0),isNaN(c.zlevel)&&($x(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=e.getDecalElement&&e.getDecalElement();f&&this._updateAndAddDisplayable(f,t,r);var h=e.getTextGuideLine();h&&this._updateAndAddDisplayable(h,t,r);var d=e.getTextContent();d&&this._updateAndAddDisplayable(d,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=Ht(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const qse=jse;var X4;X4=Lt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const fS=X4;var Zy={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-Zy.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?Zy.bounceIn(n*2)*.5:Zy.bounceOut(n*2-1)*.5+.5}};const K4=Zy;var km=Math.pow,tl=Math.sqrt,k0=1e-8,Y4=1e-4,c$=tl(3),Am=1/3,Ho=kd(),wa=kd(),Lh=kd();function Ku(n){return n>-k0&&n<k0}function Z4(n){return n>k0||n<-k0}function vr(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function f$(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function A0(n,e,t,r,i,a){var o=r+3*(e-t)-n,s=3*(t-e*2+n),u=3*(e-n),l=n-i,c=s*s-3*o*u,f=s*u-9*o*l,h=u*u-3*s*l,d=0;if(Ku(c)&&Ku(f))if(Ku(s))a[0]=0;else{var p=-u/s;p>=0&&p<=1&&(a[d++]=p)}else{var g=f*f-4*c*h;if(Ku(g)){var m=f/c,p=-s/o+m,y=-m/2;p>=0&&p<=1&&(a[d++]=p),y>=0&&y<=1&&(a[d++]=y)}else if(g>0){var b=tl(g),_=c*s+1.5*o*(-f+b),w=c*s+1.5*o*(-f-b);_<0?_=-km(-_,Am):_=km(_,Am),w<0?w=-km(-w,Am):w=km(w,Am);var p=(-s-(_+w))/(3*o);p>=0&&p<=1&&(a[d++]=p)}else{var T=(2*c*s-3*o*f)/(2*tl(c*c*c)),E=Math.acos(T)/3,A=tl(c),I=Math.cos(E),p=(-s-2*A*I)/(3*o),y=(-s+A*(I+c$*Math.sin(E)))/(3*o),$=(-s+A*(I-c$*Math.sin(E)))/(3*o);p>=0&&p<=1&&(a[d++]=p),y>=0&&y<=1&&(a[d++]=y),$>=0&&$<=1&&(a[d++]=$)}}return d}function Q4(n,e,t,r,i){var a=6*t-12*e+6*n,o=9*e+3*r-3*n-9*t,s=3*e-3*n,u=0;if(Ku(o)){if(Z4(a)){var l=-s/a;l>=0&&l<=1&&(i[u++]=l)}}else{var c=a*a-4*o*s;if(Ku(c))i[0]=-a/(2*o);else if(c>0){var f=tl(c),l=(-a+f)/(2*o),h=(-a-f)/(2*o);l>=0&&l<=1&&(i[u++]=l),h>=0&&h<=1&&(i[u++]=h)}}return u}function ul(n,e,t,r,i,a){var o=(e-n)*i+n,s=(t-e)*i+e,u=(r-t)*i+t,l=(s-o)*i+o,c=(u-s)*i+s,f=(c-l)*i+l;a[0]=n,a[1]=o,a[2]=l,a[3]=f,a[4]=f,a[5]=c,a[6]=u,a[7]=r}function J4(n,e,t,r,i,a,o,s,u,l,c){var f,h=.005,d=1/0,p,g,m,y;Ho[0]=u,Ho[1]=l;for(var b=0;b<1;b+=.05)wa[0]=vr(n,t,i,o,b),wa[1]=vr(e,r,a,s,b),m=Nh(Ho,wa),m<d&&(f=b,d=m);d=1/0;for(var _=0;_<32&&!(h<Y4);_++)p=f-h,g=f+h,wa[0]=vr(n,t,i,o,p),wa[1]=vr(e,r,a,s,p),m=Nh(wa,Ho),p>=0&&m<d?(f=p,d=m):(Lh[0]=vr(n,t,i,o,g),Lh[1]=vr(e,r,a,s,g),y=Nh(Lh,Ho),g<=1&&y<d?(f=g,d=y):h*=.5);return c&&(c[0]=vr(n,t,i,o,f),c[1]=vr(e,r,a,s,f)),tl(d)}function Xse(n,e,t,r,i,a,o,s,u){for(var l=n,c=e,f=0,h=1/u,d=1;d<=u;d++){var p=d*h,g=vr(n,t,i,o,p),m=vr(e,r,a,s,p),y=g-l,b=m-c;f+=Math.sqrt(y*y+b*b),l=g,c=m}return f}function jr(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function h$(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function Kse(n,e,t,r,i){var a=n-2*e+t,o=2*(e-n),s=n-r,u=0;if(Ku(a)){if(Z4(o)){var l=-s/o;l>=0&&l<=1&&(i[u++]=l)}}else{var c=o*o-4*a*s;if(Ku(c)){var l=-o/(2*a);l>=0&&l<=1&&(i[u++]=l)}else if(c>0){var f=tl(c),l=(-o+f)/(2*a),h=(-o-f)/(2*a);l>=0&&l<=1&&(i[u++]=l),h>=0&&h<=1&&(i[u++]=h)}}return u}function e5(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function R0(n,e,t,r,i){var a=(e-n)*r+n,o=(t-e)*r+e,s=(o-a)*r+a;i[0]=n,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=t}function t5(n,e,t,r,i,a,o,s,u){var l,c=.005,f=1/0;Ho[0]=o,Ho[1]=s;for(var h=0;h<1;h+=.05){wa[0]=jr(n,t,i,h),wa[1]=jr(e,r,a,h);var d=Nh(Ho,wa);d<f&&(l=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<Y4);p++){var g=l-c,m=l+c;wa[0]=jr(n,t,i,g),wa[1]=jr(e,r,a,g);var d=Nh(wa,Ho);if(g>=0&&d<f)l=g,f=d;else{Lh[0]=jr(n,t,i,m),Lh[1]=jr(e,r,a,m);var y=Nh(Lh,Ho);m<=1&&y<f?(l=m,f=y):c*=.5}}return u&&(u[0]=jr(n,t,i,l),u[1]=jr(e,r,a,l)),tl(f)}function Yse(n,e,t,r,i,a,o){for(var s=n,u=e,l=0,c=1/o,f=1;f<=o;f++){var h=f*c,d=jr(n,t,i,h),p=jr(e,r,a,h),g=d-s,m=p-u;l+=Math.sqrt(g*g+m*m),s=d,u=p}return l}var Zse=/cubic-bezier\(([0-9,\.e ]+)\)/;function n5(n){var e=n&&Zse.exec(n);if(e){var t=e[1].split(","),r=+Xo(t[0]),i=+Xo(t[1]),a=+Xo(t[2]),o=+Xo(t[3]);if(isNaN(r+i+a+o))return;var s=[];return function(u){return u<=0?0:u>=1?1:A0(0,r,a,1,u,s)&&vr(0,i,o,1,s[0])}}}var Qse=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||pi,this.ondestroy=e.ondestroy||pi,this.onrestart=e.onrestart||pi,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var u=i%r;this._startTime=e-u,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Et(e)?e:K4[e]||n5(e)},n}();const Jse=Qse;var r5=function(){function n(e){this.value=e}return n}(),eue=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new r5(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),tue=function(){function n(e){this._list=new eue,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var u=r.head;r.remove(u),delete i[u.key],a=u.value,this._lastRemovedEntry=u}s?s.value=t:s=new r5(t),s.key=e,r.insertEntry(s),i[e]=s}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const _g=tue;var d$={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function nl(n){return n=Math.round(n),n<0?0:n>255?255:n}function hS(n){return n<0?0:n>1?1:n}function Nx(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?nl(parseFloat(e)/100*255):nl(parseInt(e,10))}function cv(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?hS(parseFloat(e)/100):hS(parseFloat(e))}function Ox(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Rm(n,e,t){return n+(e-n)*t}function pa(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function dS(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var i5=new _g(20),Im=null;function qf(n,e){Im&&dS(Im,e),Im=i5.put(n,Im||e.slice())}function Zs(n,e){if(n){e=e||[];var t=i5.get(n);if(t)return dS(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in d$)return dS(e,d$[r]),qf(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){pa(e,0,0,0,1);return}return pa(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),qf(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){pa(e,0,0,0,1);return}return pa(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),qf(n,e),e}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var u=r.substr(0,o),l=r.substr(o+1,s-(o+1)).split(","),c=1;switch(u){case"rgba":if(l.length!==4)return l.length===3?pa(e,+l[0],+l[1],+l[2],1):pa(e,0,0,0,1);c=cv(l.pop());case"rgb":if(l.length>=3)return pa(e,Nx(l[0]),Nx(l[1]),Nx(l[2]),l.length===3?c:cv(l[3])),qf(n,e),e;pa(e,0,0,0,1);return;case"hsla":if(l.length!==4){pa(e,0,0,0,1);return}return l[3]=cv(l[3]),p$(l,e),qf(n,e),e;case"hsl":if(l.length!==3){pa(e,0,0,0,1);return}return p$(l,e),qf(n,e),e;default:return}}pa(e,0,0,0,1)}}function p$(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=cv(n[1]),i=cv(n[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return e=e||[],pa(e,nl(Ox(o,a,t+1/3)*255),nl(Ox(o,a,t)*255),nl(Ox(o,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function v$(n,e){var t=Zs(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return G1(t,t.length===4?"rgba":"rgb")}}function nue(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Zs(e[i]),s=Zs(e[a]),u=r-i,l=G1([nl(Rm(o[0],s[0],u)),nl(Rm(o[1],s[1],u)),nl(Rm(o[2],s[2],u)),hS(Rm(o[3],s[3],u))],"rgba");return t?{color:l,leftIndex:i,rightIndex:a,value:r}:l}}function G1(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function I0(n,e){var t=Zs(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}function rue(n){return n.type==="linear"}function iue(n){return n.type==="radial"}(function(){return Lt.hasGlobalWindow&&Et(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var pS=Array.prototype.slice;function Vs(n,e,t){return(e-n)*t+n}function Lx(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=Vs(e[a],t[a],r);return n}function aue(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=Vs(e[o][s],t[o][s],r)}return n}function Pm(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function g$(n,e,t,r){for(var i=e.length,a=i&&e[0].length,o=0;o<i;o++){n[o]||(n[o]=[]);for(var s=0;s<a;s++)n[o][s]=e[o][s]+t[o][s]*r}return n}function oue(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(t,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function sue(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var u=a;u<o;u++)r.push(t===1?i[u]:pS.call(i[u]))}for(var l=r[0]&&r[0].length,u=0;u<r.length;u++)if(t===1)isNaN(r[u])&&(r[u]=i[u]);else for(var c=0;c<l;c++)isNaN(r[u][c])&&(r[u][c]=i[u][c])}}function Qy(n){if(gi(n)){var e=n.length;if(gi(n[0])){for(var t=[],r=0;r<e;r++)t.push(pS.call(n[r]));return t}return pS.call(n)}return n}function Jy(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function uue(n){return gi(n&&n[0])?2:1}var Dm=0,e0=1,a5=2,Up=3,vS=4,gS=5,m$=6;function y$(n){return n===vS||n===gS}function $m(n){return n===e0||n===a5}var vp=[0,0,0,0],lue=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=m$,u=t;if(gi(t)){var l=uue(t);s=l,(l===1&&!dn(t[0])||l===2&&!dn(t[0][0]))&&(o=!0)}else if(dn(t)&&!C0(t))s=Dm;else if(lt(t))if(!isNaN(+t))s=Dm;else{var c=Zs(t);c&&(u=c,s=Up)}else if(z1(t)){var f=Ue({},u);f.colorStops=nt(t.colorStops,function(d){return{offset:d.offset,color:Zs(d.color)}}),rue(t)?s=vS:iue(t)&&(s=gS),u=f}a===0?this.valType=s:(s!==this.valType||s===m$)&&(o=!0),this.discrete=this.discrete||o;var h={time:e,value:u,rawValue:t,percent:0};return r&&(h.easing=r,h.easingFunc=Et(r)?r:K4[r]||n5(r)),i.push(h),h},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(g,m){return g.time-m.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,u=$m(i),l=y$(i),c=0;c<a;c++){var f=r[c],h=f.value,d=o.value;f.percent=f.time/e,s||(u&&c!==a-1?sue(h,d,i):l&&oue(h.colorStops,d.colorStops))}if(!s&&i!==gS&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var p=r[0].value,c=0;c<a;c++)i===Dm?r[c].additiveValue=r[c].value-p:i===Up?r[c].additiveValue=Pm([],r[c].value,p,-1):$m(i)&&(r[c].additiveValue=i===e0?Pm([],r[c].value,p,-1):g$([],r[c].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,u=this.propName,l=a===Up,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=o[0];else{if(t<0)c=0;else if(t<this._lastFrP){var g=h(f+1,s-1);for(c=g;c>=0&&!(o[c].percent<=t);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(o[c].percent>t);c++);c=h(c-1,s-2)}p=o[c+1],d=o[c]}if(d&&p){this._lastFr=c,this._lastFrP=t;var m=p.percent-d.percent,y=m===0?1:h((t-d.percent)/m,1);p.easingFunc&&(y=p.easingFunc(y));var b=r?this._additiveValue:l?vp:e[u];if(($m(a)||l)&&!b&&(b=this._additiveValue=[]),this.discrete)e[u]=y<1?d.rawValue:p.rawValue;else if($m(a))a===e0?Lx(b,d[i],p[i],y):aue(b,d[i],p[i],y);else if(y$(a)){var _=d[i],w=p[i],T=a===vS;e[u]={type:T?"linear":"radial",x:Vs(_.x,w.x,y),y:Vs(_.y,w.y,y),colorStops:nt(_.colorStops,function(A,I){var $=w.colorStops[I];return{offset:Vs(A.offset,$.offset,y),color:Jy(Lx([],A.color,$.color,y))}}),global:w.global},T?(e[u].x2=Vs(_.x2,w.x2,y),e[u].y2=Vs(_.y2,w.y2,y)):e[u].r=Vs(_.r,w.r,y)}else if(l)Lx(b,d[i],p[i],y),r||(e[u]=Jy(b));else{var E=Vs(d[i],p[i],y);r?this._additiveValue=E:e[u]=E}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===Dm?e[r]=e[r]+i:t===Up?(Zs(e[r],vp),Pm(vp,vp,i,1),e[r]=Jy(vp)):t===e0?Pm(e[r],e[r],i,1):t===a5&&g$(e[r],e[r],i,1)},n}(),cue=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){s2("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,zn(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],u=a[s];if(!u){u=a[s]=new lue(s);var l=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];l=h&&h.value,c.valType===Up&&l&&(l=Jy(l))}else l=this._target[s];if(l==null)continue;e>0&&u.addKeyframe(0,Qy(l),i),this._trackKeys.push(s)}u.addKeyframe(e,Qy(t[s]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],u=this._getAdditiveTrack(o),l=s.keyframes,c=l.length;if(s.prepare(i,u),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=l[c-1];f&&(t._target[s.propName]=f.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var h=new Jse({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){t._started=2;var p=t._additiveAnimators;if(p){for(var g=!1,m=0;m<p.length;m++)if(p[m]._clip){g=!0;break}g||(t._additiveAnimators=null)}for(var m=0;m<r.length;m++)r[m].step(t._target,d);var y=t._onframeCbs;if(y)for(var m=0;m<y.length;m++)y[m](t._target,d)},ondestroy:function(){t._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),e&&h.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return nt(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var o=r[e[a]];o&&!o.isFinished()&&(t?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,u=s[r?0:s.length-1];u&&(e[a]=Qy(u.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||zn(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();const f2=cue;function Ch(){return new Date().getTime()}var fue=function(n){kn(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=Ch()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(fS(r),!t._paused&&t.update())}fS(r)},e.prototype.start=function(){this._running||(this._time=Ch(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Ch(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Ch()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new f2(t,r.loop);return this.addAnimator(i),i},e}(_o);const hue=fue;var due=300,Mx=Lt.domSupported,Bx=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=nt(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),b$={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},x$=!1;function mS(n){var e=n.pointerType;return e==="pen"||e==="touch"}function pue(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function Fx(n){n&&(n.zrByTouch=!0)}function vue(n,e){return ga(n.dom,new gue(n,e),!0)}function o5(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var gue=function(){function n(e,t){this.stopPropagation=pi,this.stopImmediatePropagation=pi,this.preventDefault=pi,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),Qa={mousedown:function(n){n=ga(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=ga(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=ga(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=ga(this.dom,n);var e=n.toElement||n.relatedTarget;o5(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){x$=!0,n=ga(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){x$||(n=ga(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=ga(this.dom,n),Fx(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Qa.mousemove.call(this,n),Qa.mousedown.call(this,n)},touchmove:function(n){n=ga(this.dom,n),Fx(n),this.handler.processGesture(n,"change"),Qa.mousemove.call(this,n)},touchend:function(n){n=ga(this.dom,n),Fx(n),this.handler.processGesture(n,"end"),Qa.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<due&&Qa.click.call(this,n)},pointerdown:function(n){Qa.mousedown.call(this,n)},pointermove:function(n){mS(n)||Qa.mousemove.call(this,n)},pointerup:function(n){Qa.mouseup.call(this,n)},pointerout:function(n){mS(n)||Qa.mouseout.call(this,n)}};ne(["click","dblclick","contextmenu"],function(n){Qa[n]=function(e){e=ga(this.dom,e),this.trigger(n,e)}});var yS={pointermove:function(n){mS(n)||yS.mousemove.call(this,n)},pointerup:function(n){yS.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function mue(n,e){var t=e.domHandlers;Lt.pointerEventsSupported?ne(Bx.pointer,function(r){t0(e,r,function(i){t[r].call(n,i)})}):(Lt.touchEventsSupported&&ne(Bx.touch,function(r){t0(e,r,function(i){t[r].call(n,i),pue(e)})}),ne(Bx.mouse,function(r){t0(e,r,function(i){i=l2(i),e.touching||t[r].call(n,i)})}))}function yue(n,e){Lt.pointerEventsSupported?ne(b$.pointer,t):Lt.touchEventsSupported||ne(b$.mouse,t);function t(r){function i(a){a=l2(a),o5(n,a.target)||(a=vue(n,a),e.domHandlers[r].call(n,a))}t0(e,r,i,{capture:!0})}}function t0(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,cS(n.domTarget,e,t,r)}function Vx(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&Ise(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var _$=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),bue=function(n){kn(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new _$(t,Qa),Mx&&(i._globalHandlerScope=new _$(document,yS)),mue(i,i._localHandlerScope),i}return e.prototype.dispose=function(){Vx(this._localHandlerScope),Mx&&Vx(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,Mx&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?yue(this,r):Vx(r)}},e}(_o);const xue=bue;var s5=1;Lt.hasGlobalWindow&&(s5=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var P0=s5,bS=.4,xS="#333",_S="#ccc",_ue="#eee",w$=c2,S$=5e-5;function Kl(n){return n>S$||n<-S$}var Yl=[],Xf=[],zx=ed(),Ux=Math.abs,wue=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return Kl(this.rotation)||Kl(this.x)||Kl(this.y)||Kl(this.scaleX-1)||Kl(this.scaleY-1)||Kl(this.skewX)||Kl(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&w$(r);return}r=r||ed(),t?this.getLocalTransform(r):w$(r),e&&(t?Oh(r,e,r):$se(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Yl);var r=Yl[0]<0?-1:1,i=Yl[1]<0?-1:1,a=((Yl[0]-r)*t+r)/Yl[0]||0,o=((Yl[1]-i)*t+i)/Yl[1]||0;e[0]*=a,e[1]*=a,e[2]*=o,e[3]*=o}this.invTransform=this.invTransform||ed(),H1(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(Oh(Xf,e.invTransform,t),t=Xf);var r=this.originX,i=this.originY;(r||i)&&(zx[4]=r,zx[5]=i,Oh(Xf,t,zx),Xf[4]-=r,Xf[5]-=i,t=Xf),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&$a(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&$a(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&Ux(e[0]-1)>1e-10&&Ux(e[3]-1)>1e-10?Math.sqrt(Ux(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){Sue(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,o=e.scaleY,s=e.anchorX,u=e.anchorY,l=e.rotation||0,c=e.x,f=e.y,h=e.skewX?Math.tan(e.skewX):0,d=e.skewY?Math.tan(-e.skewY):0;if(r||i||s||u){var p=r+s,g=i+u;t[4]=-p*a-h*g*o,t[5]=-g*o-d*p*a}else t[4]=t[5]=0;return t[0]=a,t[3]=o,t[1]=d*a,t[2]=h*o,l&&W1(t,t,l),t[4]+=r+c,t[5]+=i+f,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),Lv=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function Sue(n,e){for(var t=0;t<Lv.length;t++){var r=Lv[t];n[r]=e[r]}}const wg=wue;var C$={};function ta(n,e){e=e||qc;var t=C$[e];t||(t=C$[e]=new _g(500));var r=t.get(n);return r==null&&(r=mf.measureText(n,e).width,t.put(n,r)),r}function T$(n,e,t,r){var i=ta(n,e),a=h2(e),o=Wp(0,i,t),s=gh(0,a,r),u=new Kt(o,s,i,a);return u}function Sg(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return T$(i[0],e,t,r);for(var o=new Kt(0,0,0,0),s=0;s<i.length;s++){var u=T$(i[s],e,t,r);s===0?o.copy(u):o.union(u)}return o}function Wp(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function gh(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function h2(n){return ta("",n)}function ll(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function D0(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,o=t.width,s=a/2,u=t.x,l=t.y,c="left",f="top";if(r instanceof Array)u+=ll(r[0],t.width),l+=ll(r[1],t.height),c=null,f=null;else switch(r){case"left":u-=i,l+=s,c="right",f="middle";break;case"right":u+=i+o,l+=s,f="middle";break;case"top":u+=o/2,l-=i,c="center",f="bottom";break;case"bottom":u+=o/2,l+=a+i,c="center";break;case"inside":u+=o/2,l+=s,c="center",f="middle";break;case"insideLeft":u+=i,l+=s,f="middle";break;case"insideRight":u+=o-i,l+=s,c="right",f="middle";break;case"insideTop":u+=o/2,l+=i,c="center";break;case"insideBottom":u+=o/2,l+=a-i,c="center",f="bottom";break;case"insideTopLeft":u+=i,l+=i;break;case"insideTopRight":u+=o-i,l+=i,c="right";break;case"insideBottomLeft":u+=i,l+=a-i,f="bottom";break;case"insideBottomRight":u+=o-i,l+=a-i,c="right",f="bottom";break}return n=n||{},n.x=u,n.y=l,n.align=c,n.verticalAlign=f,n}var Wx="__zr_normal__",Hx=Lv.concat(["ignore"]),Cue=sl(Lv,function(n,e){return n[e]=!0,n},{ignore:!1}),Kf={},Tue=new Kt(0,0,0,0),d2=function(){function n(e){this.id=M4(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,o=void 0,s=void 0,u=!1;a.parent=i?this:null;var l=!1;if(a.copyTransform(t),r.position!=null){var c=Tue;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Kf,r,c):D0(Kf,r,c),a.x=Kf.x,a.y=Kf.y,o=Kf.align,s=Kf.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ll(f[0],c.width),d=ll(f[1],c.height)),l=!0,a.originX=-a.x+h+(i?0:c.x),a.originY=-a.y+d+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],l||(a.originX=-p[0],a.originY=-p[1]));var g=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),y=void 0,b=void 0,_=void 0;g&&this.canBeInsideText()?(y=r.insideFill,b=r.insideStroke,(y==null||y==="auto")&&(y=this.getInsideTextFill()),(b==null||b==="auto")&&(b=this.getInsideTextStroke(y),_=!0)):(y=r.outsideFill,b=r.outsideStroke,(y==null||y==="auto")&&(y=this.getOutsideFill()),(b==null||b==="auto")&&(b=this.getOutsideStroke(y),_=!0)),y=y||"#000",(y!==m.fill||b!==m.stroke||_!==m.autoStroke||o!==m.align||s!==m.verticalAlign)&&(u=!0,m.fill=y,m.stroke=b,m.autoStroke=_,m.align=o,m.verticalAlign=s,t.setDefaultTextStyle(m)),t.__dirty|=Qi,u&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?_S:xS},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Zs(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,G1(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Ue(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(ht(e))for(var r=e,i=zn(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,e[o])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Wx)){var o=i.targetName,s=o?t[o]:t;i.saveTo(s)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,Hx)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(Wx,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===Wx,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,u=this.stateTransition;if(!(Ht(s,e)>=0&&(t||s.length===1))){var l;if(this.stateProxy&&!a&&(l=this.stateProxy(e)),l||(l=this.states&&this.states[e]),!l&&!a){s2("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(l);var c=!!(l&&l.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,l,this._normalState,t,!r&&!this.__inHover&&u&&u.duration>0,u);var f=this._textContent,h=this._textGuide;return f&&f.useState(e,t,r,c),h&&h.useState(e,t,r,c),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Qi),l}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,o=e.length,s=o===a.length;if(s){for(var u=0;u<o;u++)if(e[u]!==a[u]){s=!1;break}}if(s)return;for(var u=0;u<o;u++){var l=e[u],c=void 0;this.stateProxy&&(c=this.stateProxy(l,e)),c||(c=this.states[l]),c&&i.push(c)}var f=i[o-1],h=!!(f&&f.hoverLayer||r);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(e.join(","),d,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var g=this._textContent,m=this._textGuide;g&&g.useStates(e,t,h),m&&m.useStates(e,t,h),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Qi)}},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=Ht(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=Ht(i,e),o=Ht(i,t)>=0;a>=0?o?i.splice(a,1):i[a]=t:r&&!o&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];Ue(t,a),a.textConfig&&(r=r||{},Ue(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,o){var s=!(t&&i);t&&t.textConfig?(this.textConfig=Ue({},i?this.textConfig:r.textConfig),Ue(this.textConfig,t.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var u={},l=!1,c=0;c<Hx.length;c++){var f=Hx[c],h=a&&Cue[f];t&&t[f]!=null?h?(l=!0,u[f]=t[f]):this[f]=t[f]:s&&r[f]!=null&&(h?(l=!0,u[f]=r[f]):this[f]=r[f])}if(!a)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(t||r)[p]:t||r)}l&&this._transitionState(e,u,o)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new wg,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Ue(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Qi;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new f2(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,o=Ht(a,e);o>=0&&a.splice(o,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!e||e===s.scope?s.stop(t):a.push(s)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){Gx(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){Gx(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=Gx(this,t,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Qi;function t(r,i,a,o){Object.defineProperty(e,r,{get:function(){if(!this[i]){var u=this[i]=[];s(this,u)}return this[i]},set:function(u){this[a]=u[0],this[o]=u[1],this[i]=u,s(this,u)}});function s(u,l){Object.defineProperty(l,0,{get:function(){return u[a]},set:function(c){u[a]=c}}),Object.defineProperty(l,1,{get:function(){return u[o]},set:function(c){u[o]=c}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();xo(d2,_o);xo(d2,wg);function Gx(n,e,t,r,i){t=t||{};var a=[];u5(n,"",n,e,t,r,a,i);var o=a.length,s=!1,u=t.done,l=t.aborted,c=function(){s=!0,o--,o<=0&&(s?u&&u():l&&l())},f=function(){o--,o<=0&&(s?u&&u():l&&l())};o||u&&u(),a.length>0&&t.during&&a[0].during(function(p,g){t.during(g)});for(var h=0;h<a.length;h++){var d=a[h];c&&d.done(c),f&&d.aborted(f),t.force&&d.duration(t.duration),d.start(t.easing)}return a}function jx(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function Eue(n){return gi(n[0])}function kue(n,e,t){if(gi(e[t]))if(gi(n[t])||(n[t]=[]),na(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),jx(n[t],e[t],r))}else{var i=e[t],a=n[t],o=i.length;if(Eue(i))for(var s=i[0].length,u=0;u<o;u++)a[u]?jx(a[u],i[u],s):a[u]=Array.prototype.slice.call(i[u]);else jx(a,i,o);a.length=i.length}else n[t]=e[t]}function Aue(n,e){return n===e||gi(n)&&gi(e)&&Rue(n,e)}function Rue(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function u5(n,e,t,r,i,a,o,s){for(var u=zn(r),l=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!ht(a),p=n.animators,g=[],m=0;m<u.length;m++){var y=u[m],b=r[y];if(b!=null&&t[y]!=null&&(d||a[y]))if(ht(b)&&!gi(b)&&!z1(b)){if(e){s||(t[y]=b,n.updateDuringAnimation(e));continue}u5(n,y,t[y],b,i,a&&a[y],o,s)}else g.push(y);else s||(t[y]=b,n.updateDuringAnimation(e),g.push(y))}var _=g.length;if(!f&&_)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===e){var E=T.stopTracks(g);if(E){var A=Ht(p,T);p.splice(A,1)}}}if(i.force||(g=Jn(g,function(N){return!Aue(r[N],t[N])}),_=g.length),_>0||i.force&&!o.length){var I=void 0,$=void 0,D=void 0;if(s){$={},h&&(I={});for(var w=0;w<_;w++){var y=g[w];$[y]=t[y],h?I[y]=r[y]:t[y]=r[y]}}else if(h){D={};for(var w=0;w<_;w++){var y=g[w];D[y]=Qy(t[y]),kue(t,r,y)}}var T=new f2(t,!1,!1,f?Jn(p,function(z){return z.targetName===e}):null);T.targetName=e,i.scope&&(T.scope=i.scope),h&&I&&T.whenWithKeys(0,I,g),D&&T.whenWithKeys(0,D,g),T.whenWithKeys(l??500,s?$:r,g).delay(c||0),n.addAnimator(T,e),o.push(T)}}const l5=d2;var c5=function(n){kn(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=Ht(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=Ht(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];t.call(r,o,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=t.call(r,a);a.isGroup&&!o&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new Kt(0,0,0,0),i=t||this._children,a=[],o=null,s=0;s<i.length;s++){var u=i[s];if(!(u.ignore||u.invisible)){var l=u.getBoundingRect(),c=u.getLocalTransform(a);c?(Kt.applyTransform(r,l,c),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}}return o||r},e}(l5);c5.prototype.type="group";const lr=c5;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var n0={},f5={};function Iue(n){delete f5[n]}function Pue(n){if(!n)return!1;if(typeof n=="string")return I0(n,1)<bS;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=I0(e[i].color,1);return t/=r,t<bS}return!1}var Due=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new qse,o=r.renderer||"canvas";n0[o]||(o=zn(n0)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new n0[o](t,a,r,e),u=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var l=!Lt.node&&!Lt.worker&&!u?new xue(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,f=c==null||c==="auto"?Lt.touchEventsSupported:!!c,h=44,d;f&&(d=Gt(r.pointerSize,h)),this.handler=new Use(a,s,l,s.root,d),this.animation=new hue({stage:{update:u?null:function(){return i._flush(!0)}}}),u||this.animation.start()}return n.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},n.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=Pue(e)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(e){var t,r=Ch();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=Ch();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this.handler.off(e,t)},n.prototype.trigger=function(e,t){this.handler.trigger(e,t)},n.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof lr&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,Iue(this.id)},n}();function E$(n,e){var t=new Due(M4(),n,e);return f5[t.id]=t,t}function $ue(n,e){n0[n]=e}var k$=1e-4,h5=20;function Nue(n){return n.replace(/^\s+|\s+$/g,"")}function Hu(n,e,t,r){var i=e[0],a=e[1],o=t[0],s=t[1],u=a-i,l=s-o;if(u===0)return l===0?o:(o+s)/2;if(r)if(u>0){if(n<=i)return o;if(n>=a)return s}else{if(n>=i)return o;if(n<=a)return s}else{if(n===i)return o;if(n===a)return s}return(n-i)/u*l+o}function tn(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return lt(n)?Nue(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function ur(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),h5),n=(+n).toFixed(e),t?n:+n}function Oue(n){return n.sort(function(e,t){return e-t}),n}function qs(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return Lue(n)}function Lue(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function d5(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function Mue(n,e){var t=sl(n,function(d,p){return d+(isNaN(p)?0:p)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=nt(n,function(d){return(isNaN(d)?0:d)/t*r*100}),a=r*100,o=nt(i,function(d){return Math.floor(d)}),s=sl(o,function(d,p){return d+p},0),u=nt(i,function(d,p){return d-o[p]});s<a;){for(var l=Number.NEGATIVE_INFINITY,c=null,f=0,h=u.length;f<h;++f)u[f]>l&&(l=u[f],c=f);++o[c],u[c]=0,++s}return nt(o,function(d){return d/r})}function Bue(n,e){var t=Math.max(qs(n),qs(e)),r=n+e;return t>h5?r:ur(r,t)}function p5(n){var e=Math.PI*2;return(n%e+e)%e}function $0(n){return n>-k$&&n<k$}var Fue=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ru(n){if(n instanceof Date)return n;if(lt(n)){var e=Fue.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function Vue(n){return Math.pow(10,p2(n))}function p2(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function v5(n,e){var t=p2(n),r=Math.pow(10,t),i=n/r,a;return e?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function cl(n){var e=parseFloat(n);return e==n&&(e!==0||!lt(n)||n.indexOf("x")<=0)?e:NaN}function zue(n){return!isNaN(cl(n))}function g5(){return Math.round(Math.random()*9)}function m5(n,e){return e===0?n:m5(e,n%e)}function A$(n,e){return n==null?e:e==null?n:n*e/m5(n,e)}function en(n){throw new Error(n)}function R$(n,e,t){return(e-n)*t+n}var y5="series\0",b5="\0_ec_\0";function rr(n){return n instanceof Array?n:n==null?[]:[n]}function wS(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var I$=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Cg(n){return ht(n)&&!Ze(n)&&!(n instanceof Date)?n.value:n}function Uue(n){return ht(n)&&!(n instanceof Array)}function Wue(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var o=Tt();ne(e,function(u,l){if(!ht(u)){e[l]=null;return}});var s=Hue(n,o,t);return(r||i)&&Gue(s,n,o,e),r&&jue(s,e),r||i?que(s,e,i):a&&Xue(s,e),Kue(s),s}function Hue(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||Mv(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function Gue(n,e,t,r){ne(r,function(i,a){if(!(!i||i.id==null)){var o=fv(i.id),s=t.get(o);if(s!=null){var u=n[s];cs(!u.newOption,'Duplicated option on id "'+o+'".'),u.newOption=i,u.existing=e[s],r[a]=null}}})}function jue(n,e){ne(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!Mv(t)&&!Mv(a)&&x5("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function que(n,e,t){ne(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||Mv(i.existing)||i.existing&&r.id!=null&&!x5("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function Xue(n,e){ne(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function Kue(n){var e=Tt();ne(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),ne(n,function(t){var r=t.newOption;cs(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),ne(n,function(t,r){var i=t.existing,a=t.newOption,o=t.keyInfo;if(ht(a)){if(o.name=a.name!=null?fv(a.name):i?i.name:y5+r,i)o.id=fv(i.id);else if(a.id!=null)o.id=fv(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(e.get(o.id))}e.set(o.id,t)}})}function x5(n,e,t){var r=ns(e[n],null),i=ns(t[n],null);return r!=null&&i!=null&&r===i}function fv(n){return ns(n,"")}function ns(n,e){return n==null?e:lt(n)?n:dn(n)||rS(n)?n+"":e}function v2(n){var e=n.name;return!!(e&&e.indexOf(y5))}function Mv(n){return n&&n.id!=null&&fv(n.id).indexOf(b5)===0}function Yue(n){return b5+n}function Zue(n,e,t){ne(n,function(r){var i=r.newOption;ht(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=Que(e,i,r.existing,t))})}function Que(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function Xc(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Ze(e.dataIndex)?nt(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Ze(e.name)?nt(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Fn(){var n="__ec_inner_"+Jue++;return function(e){return e[n]||(e[n]={})}}var Jue=g5();function hv(n,e,t){var r=g2(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,u=t?t.defaultMainType:null;return!i&&u&&a.set(u,{}),a.each(function(l,c){var f=Tg(n,c,l,{useDefault:u===c,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function g2(n,e){var t;if(lt(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=Tt(),a={},o=!1;return ne(t,function(s,u){if(u==="dataIndex"||u==="dataIndexInside"){a[u]=s;return}var l=u.match(/^(\w+)(Index|Id|Name)$/)||[],c=l[1],f=(l[2]||"").toLowerCase();if(!(!c||!f||e&&e.includeMainTypes&&Ht(e.includeMainTypes,c)<0)){o=o||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var Nr={useDefault:!0,enableAll:!1,enableNone:!1},ele={useDefault:!1,enableAll:!0,enableNone:!0};function Tg(n,e,t,r){r=r||Nr;var i=t.index,a=t.id,o=t.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var u=void 0;return s.models=r.useDefault&&(u=n.getComponent(e))?[u]:[],s}return i==="none"||i===!1?(cs(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(cs(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=n.queryComponents({mainType:e,index:i,id:a,name:o}),s)}function _5(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function tle(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function nle(n){return n==="auto"?Lt.domSupported?"html":"richText":n||"html"}function w5(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(dn(r)){var o=R$(t||0,r,i);return ur(o,a?Math.max(qs(t||0),qs(r)):e)}else{if(lt(r))return i<1?t:r;for(var s=[],u=t,l=r,c=Math.max(u?u.length:0,l.length),f=0;f<c;++f){var h=n.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&u?u:l)[f];else{var d=u&&u[f]?u[f]:0,p=l[f],o=R$(d,p,i);s[f]=ur(o,a?Math.max(qs(d),qs(p)):e)}}return s}}var rle=".",Zl="___EC__COMPONENT__CONTAINER___",S5="___EC__EXTENDED_CLASS___";function Ko(n){var e={main:"",sub:""};if(n){var t=n.split(rle);e.main=t[0]||"",e.sub=t[1]||""}return e}function ile(n){cs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function ale(n){return!!(n&&n[S5])}function m2(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return ole(r)?i=function(a){rt(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},rse(i,this)),Ue(i.prototype,t),i[S5]=!0,i.extend=this.extend,i.superCall=lle,i.superApply=cle,i.superClass=r,i}}function ole(n){return Et(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function C5(n,e){n.extend=e.extend}var sle=Math.round(Math.random()*10);function ule(n){var e=["__\0is_clz",sle++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function lle(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function cle(n,e,t){return this.superClass.prototype[e].apply(n,t)}function j1(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){ile(i),r.prototype.type=i;var a=Ko(i);if(!a.sub)e[a.main]=r;else if(a.sub!==Zl){var o=t(a);o[a.sub]=r}}return r},n.getClass=function(r,i,a){var o=e[r];if(o&&o[Zl]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},n.getClassesByMainType=function(r){var i=Ko(r),a=[],o=e[i.main];return o&&o[Zl]?ne(o,function(s,u){u!==Zl&&a.push(s)}):a.push(o),a},n.hasClass=function(r){var i=Ko(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return ne(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=Ko(r),a=e[i.main];return a&&a[Zl]};function t(r){var i=e[r.main];return(!i||!i[Zl])&&(i=e[r.main]={},i[Zl]=!0),i}}function Bv(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var o={},s=0;s<n.length;s++){var u=n[s][1];if(!(i&&Ht(i,u)>=0||a&&Ht(a,u)<0)){var l=r.getShallow(u,e);l!=null&&(o[n[s][0]]=l)}}return o}}var fle=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],hle=Bv(fle),dle=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return hle(this,e,t)},n}(),SS=new _g(50);function ple(n){if(typeof n=="string"){var e=SS.get(n);return e&&e.image}else return n}function T5(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=SS.get(n),o={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!q1(e)&&a.pending.push(o)):(e=mf.loadImage(n,P$,P$),e.__zrImageSrc=n,SS.put(n,e.__cachedImgObj={image:e,pending:[o]})),e}else return n;else return e}function P$(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function q1(n){return n&&n.width&&n.height}var qx=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function vle(n,e,t,r,i){if(!e)return"";var a=(n+"").split(`
`);i=E5(e,t,r,i);for(var o=0,s=a.length;o<s;o++)a[o]=k5(a[o],i);return a.join(`
`)}function E5(n,e,t,r){r=r||{};var i=Ue({},r);i.font=e,t=Gt(t,"..."),i.maxIterations=Gt(r.maxIterations,2);var a=i.minChar=Gt(r.minChar,0);i.cnCharWidth=ta("",e);var o=i.ascCharWidth=ta("a",e);i.placeholder=Gt(r.placeholder,"");for(var s=n=Math.max(0,n-1),u=0;u<a&&s>=o;u++)s-=o;var l=ta(t,e);return l>s&&(t="",l=0),s=n-l,i.ellipsis=t,i.ellipsisWidth=l,i.contentWidth=s,i.containerWidth=n,i}function k5(n,e){var t=e.containerWidth,r=e.font,i=e.contentWidth;if(!t)return"";var a=ta(n,r);if(a<=t)return n;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){n+=e.ellipsis;break}var s=o===0?gle(n,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(n.length*i/a):0;n=n.substr(0,s),a=ta(n,r)}return n===""&&(n=e.placeholder),n}function gle(n,e,t,r){for(var i=0,a=0,o=n.length;a<o&&i<e;a++){var s=n.charCodeAt(a);i+=0<=s&&s<=127?t:r}return a}function mle(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",o=h2(i),s=Gt(e.lineHeight,o),u=!!e.backgroundColor,l=e.lineOverflow==="truncate",c=e.width,f;c!=null&&(t==="break"||t==="breakAll")?f=n?A5(n,e.font,c,t==="breakAll",0).lines:[]:f=n?n.split(`
`):[];var h=f.length*s,d=Gt(e.height,h);if(h>d&&l){var p=Math.floor(d/s);f=f.slice(0,p)}if(n&&a&&c!=null)for(var g=E5(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),m=0;m<f.length;m++)f[m]=k5(f[m],g);for(var y=d,b=0,m=0;m<f.length;m++)b=Math.max(ta(f[m],i),b);c==null&&(c=b);var _=b;return r&&(y+=r[0]+r[2],_+=r[1]+r[3],c+=r[1]+r[3]),u&&(_=c),{lines:f,height:d,outerWidth:_,outerHeight:y,lineHeight:s,calculatedLineHeight:o,contentWidth:b,contentHeight:h,width:c}}var yle=function(){function n(){}return n}(),D$=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),ble=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function xle(n,e){var t=new ble;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=qx.lastIndex=0,u;(u=qx.exec(n))!=null;){var l=u.index;l>s&&Xx(t,n.substring(s,l),e,o),Xx(t,u[2],e,o,u[1]),s=qx.lastIndex}s<n.length&&Xx(t,n.substring(s,n.length),e,o);var c=[],f=0,h=0,d=e.padding,p=a==="truncate",g=e.lineOverflow==="truncate";function m(Z,Q,le){Z.width=Q,Z.lineHeight=le,f+=le,h=Math.max(h,Q)}e:for(var y=0;y<t.lines.length;y++){for(var b=t.lines[y],_=0,w=0,T=0;T<b.tokens.length;T++){var E=b.tokens[T],A=E.styleName&&e.rich[E.styleName]||{},I=E.textPadding=A.padding,$=I?I[1]+I[3]:0,D=E.font=A.font||e.font;E.contentHeight=h2(D);var N=Gt(A.height,E.contentHeight);if(E.innerHeight=N,I&&(N+=I[0]+I[2]),E.height=N,E.lineHeight=uv(A.lineHeight,e.lineHeight,N),E.align=A&&A.align||e.align,E.verticalAlign=A&&A.verticalAlign||"middle",g&&i!=null&&f+E.lineHeight>i){T>0?(b.tokens=b.tokens.slice(0,T),m(b,w,_),t.lines=t.lines.slice(0,y+1)):t.lines=t.lines.slice(0,y);break e}var z=A.width,F=z==null||z==="auto";if(typeof z=="string"&&z.charAt(z.length-1)==="%")E.percentWidth=z,c.push(E),E.contentWidth=ta(E.text,D);else{if(F){var G=A.backgroundColor,U=G&&G.image;U&&(U=ple(U),q1(U)&&(E.width=Math.max(E.width,U.width*N/U.height)))}var H=p&&r!=null?r-w:null;H!=null&&H<E.width?!F||H<$?(E.text="",E.width=E.contentWidth=0):(E.text=vle(E.text,H-$,D,e.ellipsis,{minChar:e.truncateMinChar}),E.width=E.contentWidth=ta(E.text,D)):E.contentWidth=ta(E.text,D)}E.width+=$,w+=E.width,A&&(_=Math.max(_,E.lineHeight))}m(b,w,_)}t.outerWidth=t.width=Gt(r,h),t.outerHeight=t.height=Gt(i,f),t.contentHeight=f,t.contentWidth=h,d&&(t.outerWidth+=d[1]+d[3],t.outerHeight+=d[0]+d[2]);for(var y=0;y<c.length;y++){var E=c[y],X=E.percentWidth;E.width=parseInt(X,10)/100*t.width}return t}function Xx(n,e,t,r,i){var a=e==="",o=i&&t.rich[i]||{},s=n.lines,u=o.font||t.font,l=!1,c,f;if(r){var h=o.padding,d=h?h[1]+h[3]:0;if(o.width!=null&&o.width!=="auto"){var p=ll(o.width,r.width)+d;s.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),l=!0),r.accumWidth=p}else{var g=A5(e,u,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+d,f=g.linesWidths,c=g.lines}}else c=e.split(`
`);for(var m=0;m<c.length;m++){var y=c[m],b=new yle;if(b.styleName=i,b.text=y,b.isLineHolder=!y&&!a,typeof o.width=="number"?b.width=o.width:b.width=f?f[m]:ta(y,u),!m&&!l){var _=(s[s.length-1]||(s[0]=new D$)).tokens,w=_.length;w===1&&_[0].isLineHolder?_[0]=b:(y||!w||a)&&_.push(b)}else s.push(new D$([b]))}}function _le(n){var e=n.charCodeAt(0);return e>=33&&e<=383}var wle=sl(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function Sle(n){return _le(n)?!!wle[n]:!0}function A5(n,e,t,r,i){for(var a=[],o=[],s="",u="",l=0,c=0,f=0;f<n.length;f++){var h=n.charAt(f);if(h===`
`){u&&(s+=u,c+=l),a.push(s),o.push(c),s="",u="",l=0,c=0;continue}var d=ta(h,e),p=r?!1:!Sle(h);if(a.length?c+d>t:i+c+d>t){c?(s||u)&&(p?(s||(s=u,u="",l=0,c=l),a.push(s),o.push(c-l),u+=h,l+=d,s="",c=l):(u&&(s+=u,u="",l=0),a.push(s),o.push(c),s=h,c=d)):p?(a.push(u),o.push(l),u=h,l=d):(a.push(h),o.push(d));continue}c+=d,p?(u+=h,l+=d):(u&&(s+=u,u="",l=0),s+=h)}return!a.length&&!s&&(s=n,u="",l=0),u&&(s+=u),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var CS="__zr_style_"+Math.round(Math.random()*10),Oc={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},X1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Oc[CS]=!0;var $$=["z","z2","invisible"],Cle=["invisible"],Tle=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=zn(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Ele(this,t,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var u=this.parent;u;){if(u.ignore)return!1;u=u.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,u=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Kt(0,0,0,0)),r?Kt.applyTransform(t,i,r):t.copy(i),(o||s||u)&&(t.width+=o*2+Math.abs(s),t.height+=o*2+Math.abs(u),t.x=Math.min(t.x,t.x+s-o),t.y=Math.min(t.y,t.y+u-o));var l=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-l),t.y=Math.floor(t.y-l),t.width=Math.ceil(t.width+1+l*2),t.height=Math.ceil(t.height+1+l*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Kt(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Ue(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=zp,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&zp)},e.prototype.styleUpdated=function(){this.__dirty&=~zp},e.prototype.createStyle=function(t){return U1(Oc,t)},e.prototype.useStyle=function(t){t[CS]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[CS]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,$$)},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var u=!(r&&a),l;if(r&&r.style?o?a?l=r.style:(l=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(l,r.style)):(l=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(l,r.style)):u&&(l=i.style),l)if(o){var c=this.style;if(this.style=this.createStyle(u?{}:c),u)for(var f=zn(c),h=0;h<f.length;h++){var d=f[h];d in l&&(l[d]=l[d],this.style[d]=c[d])}for(var p=zn(l),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(t,{style:l},s,this.getAnimationStyleProps())}else this.useStyle(l);for(var g=this.__inHover?Cle:$$,h=0;h<g.length;h++){var d=g[h];r&&r[d]!=null?this[d]=r[d]:u&&i[d]!=null&&(this[d]=i[d])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return Ue(t,r),t},e.prototype.getAnimationStyleProps=function(){return X1},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Qi|zp}(),e}(l5),Kx=new Kt(0,0,0,0),Yx=new Kt(0,0,0,0);function Ele(n,e,t){return Kx.copy(n.getBoundingRect()),n.transform&&Kx.applyTransform(n.transform),Yx.width=e,Yx.height=t,!Kx.intersect(Yx)}const Ad=Tle;var Ri=Math.min,Ii=Math.max,Zx=Math.sin,Qx=Math.cos,Ql=Math.PI*2,Nm=kd(),Om=kd(),Lm=kd();function R5(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],o=r[1],s=r[1],u=1;u<n.length;u++)r=n[u],i=Ri(i,r[0]),a=Ii(a,r[0]),o=Ri(o,r[1]),s=Ii(s,r[1]);e[0]=i,e[1]=o,t[0]=a,t[1]=s}}function N$(n,e,t,r,i,a){i[0]=Ri(n,t),i[1]=Ri(e,r),a[0]=Ii(n,t),a[1]=Ii(e,r)}var O$=[],L$=[];function kle(n,e,t,r,i,a,o,s,u,l){var c=Q4,f=vr,h=c(n,t,i,o,O$);u[0]=1/0,u[1]=1/0,l[0]=-1/0,l[1]=-1/0;for(var d=0;d<h;d++){var p=f(n,t,i,o,O$[d]);u[0]=Ri(p,u[0]),l[0]=Ii(p,l[0])}h=c(e,r,a,s,L$);for(var d=0;d<h;d++){var g=f(e,r,a,s,L$[d]);u[1]=Ri(g,u[1]),l[1]=Ii(g,l[1])}u[0]=Ri(n,u[0]),l[0]=Ii(n,l[0]),u[0]=Ri(o,u[0]),l[0]=Ii(o,l[0]),u[1]=Ri(e,u[1]),l[1]=Ii(e,l[1]),u[1]=Ri(s,u[1]),l[1]=Ii(s,l[1])}function Ale(n,e,t,r,i,a,o,s){var u=e5,l=jr,c=Ii(Ri(u(n,t,i),1),0),f=Ii(Ri(u(e,r,a),1),0),h=l(n,t,i,c),d=l(e,r,a,f);o[0]=Ri(n,i,h),o[1]=Ri(e,a,d),s[0]=Ii(n,i,h),s[1]=Ii(e,a,d)}function Rle(n,e,t,r,i,a,o,s,u){var l=wh,c=Sh,f=Math.abs(i-a);if(f%Ql<1e-4&&f>1e-4){s[0]=n-t,s[1]=e-r,u[0]=n+t,u[1]=e+r;return}if(Nm[0]=Qx(i)*t+n,Nm[1]=Zx(i)*r+e,Om[0]=Qx(a)*t+n,Om[1]=Zx(a)*r+e,l(s,Nm,Om),c(u,Nm,Om),i=i%Ql,i<0&&(i=i+Ql),a=a%Ql,a<0&&(a=a+Ql),i>a&&!o?a+=Ql:i<a&&o&&(i+=Ql),o){var h=a;a=i,i=h}for(var d=0;d<a;d+=Math.PI/2)d>i&&(Lm[0]=Qx(d)*t+n,Lm[1]=Zx(d)*r+e,l(s,Lm,s),c(u,Lm,u))}var ln={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Jl=[],ec=[],Bo=[],Iu=[],Fo=[],Vo=[],Jx=Math.min,e_=Math.max,tc=Math.cos,nc=Math.sin,Ls=Math.abs,TS=Math.PI,Fu=TS*2,t_=typeof Float32Array<"u",gp=[];function n_(n){var e=Math.round(n/TS*1e8)/1e8;return e%2*TS}function Ile(n,e){var t=n_(n[0]);t<0&&(t+=Fu);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Fu?i=t+Fu:e&&t-i>=Fu?i=t-Fu:!e&&t>i?i=t+(Fu-n_(t-i)):e&&t<i&&(i=t-(Fu-n_(i-t))),n[0]=t,n[1]=i}var Ple=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Ls(r/P0/e)||0,this._uy=Ls(r/P0/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(ln.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Ls(e-this._xi),i=Ls(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(ln.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=o)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,o){return this._drawPendingPt(),this.addData(ln.C,e,t,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,o),this._xi=a,this._yi=o,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(ln.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,o){this._drawPendingPt(),gp[0]=i,gp[1]=a,Ile(gp,o),i=gp[0],a=gp[1];var s=a-i;return this.addData(ln.A,e,t,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,o),this._xi=tc(a)*r+e,this._yi=nc(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(ln.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(ln.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&t_&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();t_&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var o=e[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},n.prototype.addData=function(e,t,r,i,a,o,s,u,l){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,t_&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Bo[0]=Bo[1]=Fo[0]=Fo[1]=Number.MAX_VALUE,Iu[0]=Iu[1]=Vo[0]=Vo[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=e[o++],u=o===1;switch(u&&(t=e[o],r=e[o+1],i=t,a=r),s){case ln.M:t=i=e[o++],r=a=e[o++],Fo[0]=i,Fo[1]=a,Vo[0]=i,Vo[1]=a;break;case ln.L:N$(t,r,e[o],e[o+1],Fo,Vo),t=e[o++],r=e[o++];break;case ln.C:kle(t,r,e[o++],e[o++],e[o++],e[o++],e[o],e[o+1],Fo,Vo),t=e[o++],r=e[o++];break;case ln.Q:Ale(t,r,e[o++],e[o++],e[o],e[o+1],Fo,Vo),t=e[o++],r=e[o++];break;case ln.A:var l=e[o++],c=e[o++],f=e[o++],h=e[o++],d=e[o++],p=e[o++]+d;o+=1;var g=!e[o++];u&&(i=tc(d)*f+l,a=nc(d)*h+c),Rle(l,c,f,h,d,p,g,Fo,Vo),t=tc(p)*f+l,r=nc(p)*h+c;break;case ln.R:i=t=e[o++],a=r=e[o++];var m=e[o++],y=e[o++];N$(i,a,i+m,a+y,Fo,Vo);break;case ln.Z:t=i,r=a;break}wh(Bo,Bo,Fo),Sh(Iu,Iu,Vo)}return o===0&&(Bo[0]=Bo[1]=Iu[0]=Iu[1]=0),new Kt(Bo[0],Bo[1],Iu[0]-Bo[0],Iu[1]-Bo[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,u=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,c=0,f=0,h=0;h<t;){var d=e[h++],p=h===1;p&&(a=e[h],o=e[h+1],s=a,u=o);var g=-1;switch(d){case ln.M:a=s=e[h++],o=u=e[h++];break;case ln.L:{var m=e[h++],y=e[h++],b=m-a,_=y-o;(Ls(b)>r||Ls(_)>i||h===t-1)&&(g=Math.sqrt(b*b+_*_),a=m,o=y);break}case ln.C:{var w=e[h++],T=e[h++],m=e[h++],y=e[h++],E=e[h++],A=e[h++];g=Xse(a,o,w,T,m,y,E,A,10),a=E,o=A;break}case ln.Q:{var w=e[h++],T=e[h++],m=e[h++],y=e[h++];g=Yse(a,o,w,T,m,y,10),a=m,o=y;break}case ln.A:var I=e[h++],$=e[h++],D=e[h++],N=e[h++],z=e[h++],F=e[h++],G=F+z;h+=1,e[h++],p&&(s=tc(z)*D+I,u=nc(z)*N+$),g=e_(D,N)*Jx(Fu,Math.abs(F)),a=tc(G)*D+I,o=nc(G)*N+$;break;case ln.R:{s=a=e[h++],u=o=e[h++];var U=e[h++],H=e[h++];g=U*2+H*2;break}case ln.Z:{var b=s-a,_=u-o;g=Math.sqrt(b*b+_*_),a=s,o=u;break}}g>=0&&(l[f++]=g,c+=g)}return this._pathLen=c,c},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,u,l,c,f,h,d=t<1,p,g,m=0,y=0,b,_=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,g=this._pathLen,b=t*g,!b))return;e:for(var E=0;E<o;){var A=r[E++],I=E===1;switch(I&&(l=r[E],c=r[E+1],s=l,u=c),A!==ln.L&&_>0&&(e.lineTo(w,T),_=0),A){case ln.M:s=l=r[E++],u=c=r[E++],e.moveTo(l,c);break;case ln.L:{f=r[E++],h=r[E++];var $=Ls(f-l),D=Ls(h-c);if($>i||D>a){if(d){var N=p[y++];if(m+N>b){var z=(b-m)/N;e.lineTo(l*(1-z)+f*z,c*(1-z)+h*z);break e}m+=N}e.lineTo(f,h),l=f,c=h,_=0}else{var F=$*$+D*D;F>_&&(w=f,T=h,_=F)}break}case ln.C:{var G=r[E++],U=r[E++],H=r[E++],X=r[E++],Z=r[E++],Q=r[E++];if(d){var N=p[y++];if(m+N>b){var z=(b-m)/N;ul(l,G,H,Z,z,Jl),ul(c,U,X,Q,z,ec),e.bezierCurveTo(Jl[1],ec[1],Jl[2],ec[2],Jl[3],ec[3]);break e}m+=N}e.bezierCurveTo(G,U,H,X,Z,Q),l=Z,c=Q;break}case ln.Q:{var G=r[E++],U=r[E++],H=r[E++],X=r[E++];if(d){var N=p[y++];if(m+N>b){var z=(b-m)/N;R0(l,G,H,z,Jl),R0(c,U,X,z,ec),e.quadraticCurveTo(Jl[1],ec[1],Jl[2],ec[2]);break e}m+=N}e.quadraticCurveTo(G,U,H,X),l=H,c=X;break}case ln.A:var le=r[E++],ge=r[E++],be=r[E++],ke=r[E++],Ae=r[E++],de=r[E++],Ce=r[E++],ye=!r[E++],Ee=be>ke?be:ke,De=Ls(be-ke)>.001,Me=Ae+de,Ie=!1;if(d){var N=p[y++];m+N>b&&(Me=Ae+de*(b-m)/N,Ie=!0),m+=N}if(De&&e.ellipse?e.ellipse(le,ge,be,ke,Ce,Ae,Me,ye):e.arc(le,ge,Ee,Ae,Me,ye),Ie)break e;I&&(s=tc(Ae)*be+le,u=nc(Ae)*ke+ge),l=tc(Me)*be+le,c=nc(Me)*ke+ge;break;case ln.R:s=l=r[E],u=c=r[E+1],f=r[E++],h=r[E++];var Be=r[E++],et=r[E++];if(d){var N=p[y++];if(m+N>b){var xt=b-m;e.moveTo(f,h),e.lineTo(f+Jx(xt,Be),h),xt-=Be,xt>0&&e.lineTo(f+Be,h+Jx(xt,et)),xt-=et,xt>0&&e.lineTo(f+e_(Be-xt,0),h+et),xt-=Be,xt>0&&e.lineTo(f,h+e_(et-xt,0));break e}m+=N}e.rect(f,h,Be,et);break;case ln.Z:if(d){var N=p[y++];if(m+N>b){var z=(b-m)/N;e.lineTo(l*(1-z)+s*z,c*(1-z)+u*z);break e}m+=N}e.closePath(),l=s,c=u}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=ln,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();const iu=Ple;function Yf(n,e,t,r,i,a,o){if(i===0)return!1;var s=i,u=0,l=n;if(o>e+s&&o>r+s||o<e-s&&o<r-s||a>n+s&&a>t+s||a<n-s&&a<t-s)return!1;if(n!==t)u=(e-r)/(n-t),l=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=s/2;var c=u*a-o+l,f=c*c/(u*u+1);return f<=s/2*s/2}function Dle(n,e,t,r,i,a,o,s,u,l,c){if(u===0)return!1;var f=u;if(c>e+f&&c>r+f&&c>a+f&&c>s+f||c<e-f&&c<r-f&&c<a-f&&c<s-f||l>n+f&&l>t+f&&l>i+f&&l>o+f||l<n-f&&l<t-f&&l<i-f&&l<o-f)return!1;var h=J4(n,e,t,r,i,a,o,s,l,c,null);return h<=f/2}function $le(n,e,t,r,i,a,o,s,u){if(o===0)return!1;var l=o;if(u>e+l&&u>r+l&&u>a+l||u<e-l&&u<r-l&&u<a-l||s>n+l&&s>t+l&&s>i+l||s<n-l&&s<t-l&&s<i-l)return!1;var c=t5(n,e,t,r,i,a,s,u,null);return c<=l/2}var M$=Math.PI*2;function Yu(n){return n%=M$,n<0&&(n+=M$),n}var mp=Math.PI*2;function Nle(n,e,t,r,i,a,o,s,u){if(o===0)return!1;var l=o;s-=n,u-=e;var c=Math.sqrt(s*s+u*u);if(c-l>t||c+l<t)return!1;if(Math.abs(r-i)%mp<1e-4)return!0;if(a){var f=r;r=Yu(i),i=Yu(f)}else r=Yu(r),i=Yu(i);r>i&&(i+=mp);var h=Math.atan2(u,s);return h<0&&(h+=mp),h>=r&&h<=i||h+mp>=r&&h+mp<=i}function rc(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var o=(a-e)/(r-e),s=r<e?1:-1;(o===1||o===0)&&(s=r<e?.5:-.5);var u=o*(t-n)+n;return u===i?1/0:u>i?s:0}var Pu=iu.CMD,ic=Math.PI*2,Ole=1e-4;function Lle(n,e){return Math.abs(n-e)<Ole}var ci=[-1,-1,-1],ya=[-1,-1];function Mle(){var n=ya[0];ya[0]=ya[1],ya[1]=n}function Ble(n,e,t,r,i,a,o,s,u,l){if(l>e&&l>r&&l>a&&l>s||l<e&&l<r&&l<a&&l<s)return 0;var c=A0(e,r,a,s,l,ci);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,g=0;g<c;g++){var m=ci[g],y=m===0||m===1?.5:1,b=vr(n,t,i,o,m);b<u||(h<0&&(h=Q4(e,r,a,s,ya),ya[1]<ya[0]&&h>1&&Mle(),d=vr(e,r,a,s,ya[0]),h>1&&(p=vr(e,r,a,s,ya[1]))),h===2?m<ya[0]?f+=d<e?y:-y:m<ya[1]?f+=p<d?y:-y:f+=s<p?y:-y:m<ya[0]?f+=d<e?y:-y:f+=s<d?y:-y)}return f}function Fle(n,e,t,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var u=Kse(e,r,a,s,ci);if(u===0)return 0;var l=e5(e,r,a);if(l>=0&&l<=1){for(var c=0,f=jr(e,r,a,l),h=0;h<u;h++){var d=ci[h]===0||ci[h]===1?.5:1,p=jr(n,t,i,ci[h]);p<o||(ci[h]<l?c+=f<e?d:-d:c+=a<f?d:-d)}return c}else{var d=ci[0]===0||ci[0]===1?.5:1,p=jr(n,t,i,ci[0]);return p<o?0:a<e?d:-d}}function Vle(n,e,t,r,i,a,o,s){if(s-=e,s>t||s<-t)return 0;var u=Math.sqrt(t*t-s*s);ci[0]=-u,ci[1]=u;var l=Math.abs(r-i);if(l<1e-4)return 0;if(l>=ic-1e-4){r=0,i=ic;var c=a?1:-1;return o>=ci[0]+n&&o<=ci[1]+n?c:0}if(r>i){var f=r;r=i,i=f}r<0&&(r+=ic,i+=ic);for(var h=0,d=0;d<2;d++){var p=ci[d];if(p+n>o){var g=Math.atan2(s,p),c=a?1:-1;g<0&&(g=ic+g),(g>=r&&g<=i||g+ic>=r&&g+ic<=i)&&(g>Math.PI/2&&g<Math.PI*1.5&&(c=-c),h+=c)}}return h}function I5(n,e,t,r,i){for(var a=n.data,o=n.len(),s=0,u=0,l=0,c=0,f=0,h,d,p=0;p<o;){var g=a[p++],m=p===1;switch(g===Pu.M&&p>1&&(t||(s+=rc(u,l,c,f,r,i))),m&&(u=a[p],l=a[p+1],c=u,f=l),g){case Pu.M:c=a[p++],f=a[p++],u=c,l=f;break;case Pu.L:if(t){if(Yf(u,l,a[p],a[p+1],e,r,i))return!0}else s+=rc(u,l,a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case Pu.C:if(t){if(Dle(u,l,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=Ble(u,l,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case Pu.Q:if(t){if($le(u,l,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else s+=Fle(u,l,a[p++],a[p++],a[p],a[p+1],r,i)||0;u=a[p++],l=a[p++];break;case Pu.A:var y=a[p++],b=a[p++],_=a[p++],w=a[p++],T=a[p++],E=a[p++];p+=1;var A=!!(1-a[p++]);h=Math.cos(T)*_+y,d=Math.sin(T)*w+b,m?(c=h,f=d):s+=rc(u,l,h,d,r,i);var I=(r-y)*w/_+y;if(t){if(Nle(y,b,w,T,T+E,A,e,I,i))return!0}else s+=Vle(y,b,w,T,T+E,A,I,i);u=Math.cos(T+E)*_+y,l=Math.sin(T+E)*w+b;break;case Pu.R:c=u=a[p++],f=l=a[p++];var $=a[p++],D=a[p++];if(h=c+$,d=f+D,t){if(Yf(c,f,h,f,e,r,i)||Yf(h,f,h,d,e,r,i)||Yf(h,d,c,d,e,r,i)||Yf(c,d,c,f,e,r,i))return!0}else s+=rc(h,f,h,d,r,i),s+=rc(c,d,c,f,r,i);break;case Pu.Z:if(t){if(Yf(u,l,c,f,e,r,i))return!0}else s+=rc(u,l,c,f,r,i);u=c,l=f;break}}return!t&&!Lle(l,f)&&(s+=rc(u,l,c,f,r,i)||0),s!==0}function zle(n,e,t){return I5(n,0,!1,e,t)}function Ule(n,e,t,r){return I5(n,e,!0,t,r)}var P5=St({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Oc),Wle={style:St({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},X1.style)},r_=Lv.concat(["invisible","culling","z","z2","zlevel","parent"]),Hle=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(u){t.buildPath(u,t.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<r_.length;++s)i[r_[s]]=this[r_[s]];i.__dirty|=Qi}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=zn(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=t[o];o==="style"?this.style?Ue(this.style,s):this.useStyle(s):o==="shape"?Ue(this.shape,s):n.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(lt(t)){var r=I0(t,0);return r>.5?xS:r>.2?_ue:_S}else if(t)return _S}return xS},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(lt(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=I0(t,0)<bS;if(a===o)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~vh},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new iu(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&vh)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),t=o.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){s.copy(t);var u=r.strokeNoScale?this.getLineScale():1,l=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;l=Math.max(l,c??4)}u>1e-10&&(s.width+=l/u,s.height+=l/u,s.x-=l/u/2,s.y-=l/u/2)}return s}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),o=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var s=this.path;if(this.hasStroke()){var u=o.lineWidth,l=o.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(this.hasFill()||(u=Math.max(u,this.strokeContainThreshold)),Ule(s,u/l,t,r)))return!0}if(this.hasFill())return zle(s,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=vh,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:Ue(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&vh)},e.prototype.createStyle=function(t){return U1(P5,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Ue({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,o,s){n.prototype._applyStateObj.call(this,t,r,i,a,o,s);var u=!(r&&a),l;if(r&&r.shape?o?a?l=r.shape:(l=Ue({},i.shape),Ue(l,r.shape)):(l=Ue({},a?this.shape:i.shape),Ue(l,r.shape)):u&&(l=i.shape),l)if(o){this.shape=Ue({},this.shape);for(var c={},f=zn(l),h=0;h<f.length;h++){var d=f[h];typeof l[d]=="object"?this.shape[d]=l[d]:c[d]=l[d]}this._transitionState(t,{shape:c},s)}else this.shape=l,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var o=t[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return Wle},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){kn(o,a);function o(s){var u=a.call(this,s)||this;return t.init&&t.init.call(u,s),u}return o.prototype.getDefaultStyle=function(){return Pt(t.style)},o.prototype.getDefaultShape=function(){return Pt(t.shape)},o}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Qi|zp|vh}(),e}(Ad);const jt=Hle;var Gle=St({strokeFirst:!0,font:qc,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},P5),D5=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return U1(Gle,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=Sg(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(Ad);D5.prototype.type="tspan";const ES=D5;var jle=St({x:0,y:0},Oc),qle={style:St({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},X1.style)};function Xle(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var $5=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return U1(jle,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=Xle(r.image)?r.image:this.__image;if(!a)return 0;var o=t==="width"?"height":"width",s=r[o];return s==null?a[t]:a[t]/a[o]*s},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return qle},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Kt(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(Ad);$5.prototype.type="image";const yf=$5;function Kle(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,o=e.r,s,u,l,c;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=u=l=c=o:o instanceof Array?o.length===1?s=u=l=c=o[0]:o.length===2?(s=l=o[0],u=c=o[1]):o.length===3?(s=o[0],u=c=o[1],l=o[2]):(s=o[0],u=o[1],l=o[2],c=o[3]):s=u=l=c=0;var f;s+u>i&&(f=s+u,s*=i/f,u*=i/f),l+c>i&&(f=l+c,l*=i/f,c*=i/f),u+l>a&&(f=u+l,u*=a/f,l*=a/f),s+c>a&&(f=s+c,s*=a/f,c*=a/f),n.moveTo(t+s,r),n.lineTo(t+i-u,r),u!==0&&n.arc(t+i-u,r+u,u,-Math.PI/2,0),n.lineTo(t+i,r+a-l),l!==0&&n.arc(t+i-l,r+a-l,l,0,Math.PI/2),n.lineTo(t+c,r+a),c!==0&&n.arc(t+c,r+a-c,c,Math.PI/2,Math.PI),n.lineTo(t,r+s),s!==0&&n.arc(t+s,r+s,s,Math.PI,Math.PI*1.5)}var Th=Math.round;function N5(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,o=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=o;var s=t&&t.lineWidth;return s&&(Th(r*2)===Th(i*2)&&(n.x1=n.x2=kc(r,s,!0)),Th(a*2)===Th(o*2)&&(n.y1=n.y2=kc(a,s,!0))),n}}function O5(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,o=e.height;n.x=r,n.y=i,n.width=a,n.height=o;var s=t&&t.lineWidth;return s&&(n.x=kc(r,s,!0),n.y=kc(i,s,!0),n.width=Math.max(kc(r+a,s,!1)-n.x,a===0?0:1),n.height=Math.max(kc(i+o,s,!1)-n.y,o===0?0:1)),n}}function kc(n,e,t){if(!e)return n;var r=Th(n*2);return(r+Th(e))%2===0?r/2:(r+(t?1:-1))/2}var Yle=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),Zle={},L5=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Yle},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var u=O5(Zle,r,this.style);i=u.x,a=u.y,o=u.width,s=u.height,u.r=r.r,r=u}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?Kle(t,r):t.rect(i,a,o,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(jt);L5.prototype.type="rect";const er=L5;var B$={fill:"#000"},F$=2,Qle={style:St({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},X1.style)},M5=function(n){kn(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=B$,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,rce(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Kt(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],u=s.getBoundingRect(),l=s.getLocalTransform(i);l?(t.copy(u),t.applyTransform(l),a=a||t.clone(),a.union(t)):(a=a||u.clone(),a.union(u))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||B$},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return Ue(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=zn(r),a=0;a<i.length;a++){var o=i[a];t[o]=t[o]||{},Ue(t[o],r[o])}},e.prototype.getAnimationStyleProps=function(){return Qle},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||qc,i=t.padding,a=j$(t),o=mle(a,t),s=i_(t),u=!!t.backgroundColor,l=o.outerHeight,c=o.outerWidth,f=o.contentWidth,h=o.lines,d=o.lineHeight,p=this._defaultStyle,g=t.x||0,m=t.y||0,y=t.align||p.align||"left",b=t.verticalAlign||p.verticalAlign||"top",_=g,w=gh(m,o.contentHeight,b);if(s||i){var T=Wp(g,c,y),E=gh(m,l,b);s&&this._renderBackground(t,t,T,E,c,l)}w+=d/2,i&&(_=G$(g,y,i),b==="top"?w+=i[0]:b==="bottom"&&(w-=i[2]));for(var A=0,I=!1,$=H$("fill"in t?t.fill:(I=!0,p.fill)),D=W$("stroke"in t?t.stroke:!u&&(!p.autoStroke||I)?(A=F$,p.stroke):null),N=t.textShadowBlur>0,z=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),F=o.calculatedLineHeight,G=0;G<h.length;G++){var U=this._getOrCreateChild(ES),H=U.createStyle();U.useStyle(H),H.text=h[G],H.x=_,H.y=w,y&&(H.textAlign=y),H.textBaseline="middle",H.opacity=t.opacity,H.strokeFirst=!0,N&&(H.shadowBlur=t.textShadowBlur||0,H.shadowColor=t.textShadowColor||"transparent",H.shadowOffsetX=t.textShadowOffsetX||0,H.shadowOffsetY=t.textShadowOffsetY||0),H.stroke=D,H.fill=$,D&&(H.lineWidth=t.lineWidth||A,H.lineDash=t.lineDash,H.lineDashOffset=t.lineDashOffset||0),H.font=r,z$(H,t),w+=d,z&&U.setBoundingRect(new Kt(Wp(H.x,t.width,H.textAlign),gh(H.y,F,H.textBaseline),f,F))}},e.prototype._updateRichTexts=function(){var t=this.style,r=j$(t),i=xle(r,t),a=i.width,o=i.outerWidth,s=i.outerHeight,u=t.padding,l=t.x||0,c=t.y||0,f=this._defaultStyle,h=t.align||f.align,d=t.verticalAlign||f.verticalAlign,p=Wp(l,o,h),g=gh(c,s,d),m=p,y=g;u&&(m+=u[3],y+=u[0]);var b=m+a;i_(t)&&this._renderBackground(t,t,p,g,o,s);for(var _=!!t.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],E=T.tokens,A=E.length,I=T.lineHeight,$=T.width,D=0,N=m,z=b,F=A-1,G=void 0;D<A&&(G=E[D],!G.align||G.align==="left");)this._placeToken(G,t,I,y,N,"left",_),$-=G.width,N+=G.width,D++;for(;F>=0&&(G=E[F],G.align==="right");)this._placeToken(G,t,I,y,z,"right",_),$-=G.width,z-=G.width,F--;for(N+=(a-(N-m)-(b-z)-$)/2;D<=F;)G=E[D],this._placeToken(G,t,I,y,N+G.width/2,"center",_),N+=G.width,D++;y+=I}},e.prototype._placeToken=function(t,r,i,a,o,s,u){var l=r.rich[t.styleName]||{};l.text=t.text;var c=t.verticalAlign,f=a+i/2;c==="top"?f=a+t.height/2:c==="bottom"&&(f=a+i-t.height/2);var h=!t.isLineHolder&&i_(l);h&&this._renderBackground(l,r,s==="right"?o-t.width:s==="center"?o-t.width/2:o,f-t.height/2,t.width,t.height);var d=!!l.backgroundColor,p=t.textPadding;p&&(o=G$(o,s,p),f-=t.height/2-p[0]-t.innerHeight/2);var g=this._getOrCreateChild(ES),m=g.createStyle();g.useStyle(m);var y=this._defaultStyle,b=!1,_=0,w=H$("fill"in l?l.fill:"fill"in r?r.fill:(b=!0,y.fill)),T=W$("stroke"in l?l.stroke:"stroke"in r?r.stroke:!d&&!u&&(!y.autoStroke||b)?(_=F$,y.stroke):null),E=l.textShadowBlur>0||r.textShadowBlur>0;m.text=t.text,m.x=o,m.y=f,E&&(m.shadowBlur=l.textShadowBlur||r.textShadowBlur||0,m.shadowColor=l.textShadowColor||r.textShadowColor||"transparent",m.shadowOffsetX=l.textShadowOffsetX||r.textShadowOffsetX||0,m.shadowOffsetY=l.textShadowOffsetY||r.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=t.font||qc,m.opacity=uv(l.opacity,r.opacity,1),z$(m,l),T&&(m.lineWidth=uv(l.lineWidth,r.lineWidth,_),m.lineDash=Gt(l.lineDash,r.lineDash),m.lineDashOffset=r.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var A=t.contentWidth,I=t.contentHeight;g.setBoundingRect(new Kt(Wp(m.x,A,m.textAlign),gh(m.y,I,m.textBaseline),A,I))},e.prototype._renderBackground=function(t,r,i,a,o,s){var u=t.backgroundColor,l=t.borderWidth,c=t.borderColor,f=u&&u.image,h=u&&!f,d=t.borderRadius,p=this,g,m;if(h||t.lineHeight||l&&c){g=this._getOrCreateChild(er),g.useStyle(g.createStyle()),g.style.fill=null;var y=g.shape;y.x=i,y.y=a,y.width=o,y.height=s,y.r=d,g.dirtyShape()}if(h){var b=g.style;b.fill=u||null,b.fillOpacity=Gt(t.fillOpacity,1)}else if(f){m=this._getOrCreateChild(yf),m.onload=function(){p.dirtyStyle()};var _=m.style;_.image=u.image,_.x=i,_.y=a,_.width=o,_.height=s}if(l&&c){var b=g.style;b.lineWidth=l,b.stroke=c,b.strokeOpacity=Gt(t.strokeOpacity,1),b.lineDash=t.borderDash,b.lineDashOffset=t.borderDashOffset||0,g.strokeContainThreshold=0,g.hasFill()&&g.hasStroke()&&(b.strokeFirst=!0,b.lineWidth*=2)}var w=(g||m).style;w.shadowBlur=t.shadowBlur||0,w.shadowColor=t.shadowColor||"transparent",w.shadowOffsetX=t.shadowOffsetX||0,w.shadowOffsetY=t.shadowOffsetY||0,w.opacity=uv(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return nce(t)&&(r=[t.fontStyle,t.fontWeight,tce(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Xo(r)||t.textFont||t.font},e}(Ad),Jle={left:!0,right:1,center:1},ece={top:1,bottom:1,middle:1},V$=["fontStyle","fontWeight","fontSize","fontFamily"];function tce(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?i2+"px":n+"px"}function z$(n,e){for(var t=0;t<V$.length;t++){var r=V$[t],i=e[r];i!=null&&(n[r]=i)}}function nce(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function rce(n){return U$(n),ne(n.rich,U$),n}function U$(n){if(n){n.font=M5.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||Jle[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||ece[t]?t:"top";var r=n.padding;r&&(n.padding=B4(n.padding))}}function W$(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function H$(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function G$(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function j$(n){var e=n.text;return e!=null&&(e+=""),e}function i_(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const br=M5;var an=Fn(),ice=function(n,e,t,r){if(r){var i=an(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,r.type==="group"&&r.traverse(function(a){var o=an(a);o.seriesIndex=n,o.dataIndex=t,o.dataType=e})}},q$=1,X$={},B5=Fn(),y2=Fn(),b2=0,K1=1,Y1=2,Ba=["emphasis","blur","select"],N0=["normal","emphasis","blur","select"],ace=10,oce=9,Lc="highlight",r0="downplay",dv="select",i0="unselect",pv="toggleSelect";function Zf(n){return n!=null&&n!=="none"}var K$=new _g(100);function Y$(n){if(lt(n)){var e=K$.get(n);return e||(e=v$(n,-.1),K$.put(n,e)),e}else if(z1(n)){var t=Ue({},n);return t.colorStops=nt(n.colorStops,function(r){return{offset:r.offset,color:v$(r.color,-.1)}}),t}return n}function Z1(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function F5(n){Z1(n,"emphasis",Y1)}function V5(n){n.hoverState===Y1&&Z1(n,"normal",b2)}function x2(n){Z1(n,"blur",K1)}function z5(n){n.hoverState===K1&&Z1(n,"normal",b2)}function sce(n){n.selected=!0}function uce(n){n.selected=!1}function Z$(n,e,t){e(n,t)}function hu(n,e,t){Z$(n,e,t),n.isGroup&&n.traverse(function(r){Z$(r,e,t)})}function Q$(n,e){switch(e){case"emphasis":n.hoverState=Y1;break;case"normal":n.hoverState=b2;break;case"blur":n.hoverState=K1;break;case"select":n.selected=!0}}function lce(n,e,t,r){for(var i=n.style,a={},o=0;o<e.length;o++){var s=e[o],u=i[s];a[s]=u??(r&&r[s])}for(var o=0;o<n.animators.length;o++){var l=n.animators[o];l.__fromStateTransition&&l.__fromStateTransition.indexOf(t)<0&&l.targetName==="style"&&l.saveTo(a,e)}return a}function cce(n,e,t,r){var i=t&&Ht(t,"select")>=0,a=!1;if(n instanceof jt){var o=B5(n),s=i&&o.selectFill||o.normalFill,u=i&&o.selectStroke||o.normalStroke;if(Zf(s)||Zf(u)){r=r||{};var l=r.style||{};l.fill==="inherit"?(a=!0,r=Ue({},r),l=Ue({},l),l.fill=s):!Zf(l.fill)&&Zf(s)?(a=!0,r=Ue({},r),l=Ue({},l),l.fill=Y$(s)):!Zf(l.stroke)&&Zf(u)&&(a||(r=Ue({},r),l=Ue({},l)),l.stroke=Y$(u)),r.style=l}}if(r&&r.z2==null){a||(r=Ue({},r));var c=n.z2EmphasisLift;r.z2=n.z2+(c??ace)}return r}function fce(n,e,t){if(t&&t.z2==null){t=Ue({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??oce)}return t}function hce(n,e,t){var r=Ht(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:lce(n,["opacity"],e,{opacity:1});t=t||{};var o=t.style||{};return o.opacity==null&&(t=Ue({},t),o=Ue({opacity:r?i:a.opacity*.1},o),t.style=o),t}function a_(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return cce(this,n,e,t);if(n==="blur")return hce(this,n,t);if(n==="select")return fce(this,n,t)}return t}function dce(n){n.stateProxy=a_;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=a_),t&&(t.stateProxy=a_)}function J$(n,e){!G5(n,e)&&!n.__highByOuter&&hu(n,F5)}function eN(n,e){!G5(n,e)&&!n.__highByOuter&&hu(n,V5)}function td(n,e){n.__highByOuter|=1<<(e||0),hu(n,F5)}function nd(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&hu(n,V5)}function pce(n){hu(n,x2)}function U5(n){hu(n,z5)}function W5(n){hu(n,sce)}function H5(n){hu(n,uce)}function G5(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function j5(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var o=y2(a),s=i==="series",u=s?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!s&&r.push(u),o.isBlured&&(u.group.traverse(function(l){z5(l)}),s&&t.push(a)),o.isBlured=!1}),ne(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function kS(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(l,c){for(var f=0;f<c.length;f++){var h=l.getItemGraphicEl(c[f]);h&&U5(h)}}if(n!=null&&!(!e||e==="none")){var o=i.getSeriesByIndex(n),s=o.coordinateSystem;s&&s.master&&(s=s.master);var u=[];i.eachSeries(function(l){var c=o===l,f=l.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(t==="series"&&!c||t==="coordinateSystem"&&!h||e==="series"&&c)){var d=r.getViewOfSeriesModel(l);if(d.group.traverse(function(m){x2(m)}),gi(e))a(l.getData(),e);else if(ht(e))for(var p=zn(e),g=0;g<p.length;g++)a(l.getData(p[g]),e[p[g]]);u.push(l),y2(l).isBlured=!0}}),i.eachComponent(function(l,c){if(l!=="series"){var f=r.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(u,!0,i)}})}}function AS(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){y2(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){x2(a)})}}}function vce(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=Xc(i,e);a=(Ze(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),u=0;!o&&u<s;)o=i.getItemGraphicEl(u++);if(o){var l=an(o);kS(r,l.focus,l.blurScope,t)}else{var c=n.get(["emphasis","focus"]),f=n.get(["emphasis","blurScope"]);c!=null&&kS(r,c,f,t)}}}function _2(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(t),u,l=0;l<s.length;l++)if(an(s[l]).focus==="self"){u=!0;break}return{focusSelf:u,dispatchers:s}}function gce(n,e,t){var r=an(n),i=_2(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,o=i.focusSelf;a?(o&&AS(r.componentMainType,r.componentIndex,t),ne(a,function(s){return J$(s,e)})):(kS(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&AS(r.componentMainType,r.componentIndex,t),J$(n,e))}function mce(n,e,t){j5(t);var r=an(n),i=_2(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?ne(i,function(a){return eN(a,e)}):eN(n,e)}function yce(n,e,t){if(PS(e)){var r=e.dataType,i=n.getData(r),a=Xc(i,e);Ze(a)||(a=[a]),n[e.type===pv?"toggleSelect":e.type===dv?"select":"unselect"](a,r)}}function tN(n){var e=n.getAllData();ne(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,o){n.isSelected(o,i)?W5(a):H5(a)})})}function bce(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();ne(r,function(i){i.data;var a=i.type,o=t.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:t.seriesIndex};a!=null&&(s.dataType=a),e.push(s)}})}),e}function RS(n,e,t){q5(n,!0),hu(n,dce),_ce(n,e,t)}function xce(n){q5(n,!1)}function Fv(n,e,t,r){r?xce(n):RS(n,e,t)}function _ce(n,e,t){var r=an(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var nN=["emphasis","blur","select"],wce={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function O0(n,e,t,r){t=t||"itemStyle";for(var i=0;i<nN.length;i++){var a=nN[i],o=e.getModel([a,t]),s=n.ensureState(a);s.style=r?r(o):o[wce[t]]()}}function q5(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function IS(n){return!!(n&&n.__highDownDispatcher)}function Sce(n){var e=X$[n];return e==null&&q$<=32&&(e=X$[n]=q$++),e}function PS(n){var e=n.type;return e===dv||e===i0||e===pv}function rN(n){var e=n.type;return e===Lc||e===r0}function Cce(n){var e=B5(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Qf=iu.CMD,Tce=[[],[],[]],iN=Math.sqrt,Ece=Math.atan2;function X5(n,e){if(e){var t=n.data,r=n.len(),i,a,o,s,u,l,c=Qf.M,f=Qf.C,h=Qf.L,d=Qf.R,p=Qf.A,g=Qf.Q;for(o=0,s=0;o<r;){switch(i=t[o++],s=o,a=0,i){case c:a=1;break;case h:a=1;break;case f:a=3;break;case g:a=2;break;case p:var m=e[4],y=e[5],b=iN(e[0]*e[0]+e[1]*e[1]),_=iN(e[2]*e[2]+e[3]*e[3]),w=Ece(-e[1]/_,e[0]/b);t[o]*=b,t[o++]+=m,t[o]*=_,t[o++]+=y,t[o++]*=b,t[o++]*=_,t[o++]+=w,t[o++]+=w,o+=2,s=o;break;case d:l[0]=t[o++],l[1]=t[o++],$a(l,l,e),t[s++]=l[0],t[s++]=l[1],l[0]+=t[o++],l[1]+=t[o++],$a(l,l,e),t[s++]=l[0],t[s++]=l[1]}for(u=0;u<a;u++){var T=Tce[u];T[0]=t[o++],T[1]=t[o++],$a(T,T,e),t[s++]=T[0],t[s++]=T[1]}}n.increaseVersion()}}var o_=Math.sqrt,Mm=Math.sin,Bm=Math.cos,yp=Math.PI;function aN(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function DS(n,e){return(n[0]*e[0]+n[1]*e[1])/(aN(n)*aN(e))}function oN(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(DS(n,e))}function sN(n,e,t,r,i,a,o,s,u,l,c){var f=u*(yp/180),h=Bm(f)*(n-t)/2+Mm(f)*(e-r)/2,d=-1*Mm(f)*(n-t)/2+Bm(f)*(e-r)/2,p=h*h/(o*o)+d*d/(s*s);p>1&&(o*=o_(p),s*=o_(p));var g=(i===a?-1:1)*o_((o*o*(s*s)-o*o*(d*d)-s*s*(h*h))/(o*o*(d*d)+s*s*(h*h)))||0,m=g*o*d/s,y=g*-s*h/o,b=(n+t)/2+Bm(f)*m-Mm(f)*y,_=(e+r)/2+Mm(f)*m+Bm(f)*y,w=oN([1,0],[(h-m)/o,(d-y)/s]),T=[(h-m)/o,(d-y)/s],E=[(-1*h-m)/o,(-1*d-y)/s],A=oN(T,E);if(DS(T,E)<=-1&&(A=yp),DS(T,E)>=1&&(A=0),A<0){var I=Math.round(A/yp*1e6)/1e6;A=yp*2+I%2*yp}c.addData(l,b,_,o,s,w,A,f,a)}var kce=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Ace=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Rce(n){var e=new iu;if(!n)return e;var t=0,r=0,i=t,a=r,o,s=iu.CMD,u=n.match(kce);if(!u)return e;for(var l=0;l<u.length;l++){for(var c=u[l],f=c.charAt(0),h=void 0,d=c.match(Ace)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var m=0;m<p;){var y=void 0,b=void 0,_=void 0,w=void 0,T=void 0,E=void 0,A=void 0,I=t,$=r,D=void 0,N=void 0;switch(f){case"l":t+=d[m++],r+=d[m++],h=s.L,e.addData(h,t,r);break;case"L":t=d[m++],r=d[m++],h=s.L,e.addData(h,t,r);break;case"m":t+=d[m++],r+=d[m++],h=s.M,e.addData(h,t,r),i=t,a=r,f="l";break;case"M":t=d[m++],r=d[m++],h=s.M,e.addData(h,t,r),i=t,a=r,f="L";break;case"h":t+=d[m++],h=s.L,e.addData(h,t,r);break;case"H":t=d[m++],h=s.L,e.addData(h,t,r);break;case"v":r+=d[m++],h=s.L,e.addData(h,t,r);break;case"V":r=d[m++],h=s.L,e.addData(h,t,r);break;case"C":h=s.C,e.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),t=d[m-2],r=d[m-1];break;case"c":h=s.C,e.addData(h,d[m++]+t,d[m++]+r,d[m++]+t,d[m++]+r,d[m++]+t,d[m++]+r),t+=d[m-2],r+=d[m-1];break;case"S":y=t,b=r,D=e.len(),N=e.data,o===s.C&&(y+=t-N[D-4],b+=r-N[D-3]),h=s.C,I=d[m++],$=d[m++],t=d[m++],r=d[m++],e.addData(h,y,b,I,$,t,r);break;case"s":y=t,b=r,D=e.len(),N=e.data,o===s.C&&(y+=t-N[D-4],b+=r-N[D-3]),h=s.C,I=t+d[m++],$=r+d[m++],t+=d[m++],r+=d[m++],e.addData(h,y,b,I,$,t,r);break;case"Q":I=d[m++],$=d[m++],t=d[m++],r=d[m++],h=s.Q,e.addData(h,I,$,t,r);break;case"q":I=d[m++]+t,$=d[m++]+r,t+=d[m++],r+=d[m++],h=s.Q,e.addData(h,I,$,t,r);break;case"T":y=t,b=r,D=e.len(),N=e.data,o===s.Q&&(y+=t-N[D-4],b+=r-N[D-3]),t=d[m++],r=d[m++],h=s.Q,e.addData(h,y,b,t,r);break;case"t":y=t,b=r,D=e.len(),N=e.data,o===s.Q&&(y+=t-N[D-4],b+=r-N[D-3]),t+=d[m++],r+=d[m++],h=s.Q,e.addData(h,y,b,t,r);break;case"A":_=d[m++],w=d[m++],T=d[m++],E=d[m++],A=d[m++],I=t,$=r,t=d[m++],r=d[m++],h=s.A,sN(I,$,t,r,E,A,_,w,T,h,e);break;case"a":_=d[m++],w=d[m++],T=d[m++],E=d[m++],A=d[m++],I=t,$=r,t+=d[m++],r+=d[m++],h=s.A,sN(I,$,t,r,E,A,_,w,T,h,e);break}}(f==="z"||f==="Z")&&(h=s.Z,e.addData(h),t=i,r=a),o=h}return e.toStatic(),e}var K5=function(n){kn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(jt);function Y5(n){return n.setData!=null}function Z5(n,e){var t=Rce(n),r=Ue({},e);return r.buildPath=function(i){if(Y5(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){X5(t,i),this.dirtyShape()},r}function Ice(n,e){return new K5(Z5(n,e))}function Pce(n,e){var t=Z5(n,e),r=function(i){kn(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=t.applyTransform,s.buildPath=t.buildPath,s}return a}(K5);return r}function Dce(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var o=new jt(e);return o.createPathProxy(),o.buildPath=function(s){if(Y5(s)){s.appendPath(t);var u=s.getContext();u&&s.rebuildPath(u,1)}},o}function w2(n,e){e=e||{};var t=new jt;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?X5(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var $ce=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Q5=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new $ce},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(jt);Q5.prototype.type="circle";const rd=Q5;var Nce=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),J5=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Nce},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,u=r.ry,l=s*i,c=u*i;t.moveTo(a-s,o),t.bezierCurveTo(a-s,o-c,a-l,o-u,a,o-u),t.bezierCurveTo(a+l,o-u,a+s,o-c,a+s,o),t.bezierCurveTo(a+s,o+c,a+l,o+u,a,o+u),t.bezierCurveTo(a-l,o+u,a-s,o+c,a-s,o),t.closePath()},e}(jt);J5.prototype.type="ellipse";const eV=J5;var tV=Math.PI,s_=tV*2,ac=Math.sin,Jf=Math.cos,Oce=Math.acos,Hr=Math.atan2,uN=Math.abs,vv=Math.sqrt,Hp=Math.max,zo=Math.min,Za=1e-4;function Lce(n,e,t,r,i,a,o,s){var u=t-n,l=r-e,c=o-i,f=s-a,h=f*u-c*l;if(!(h*h<Za))return h=(c*(e-a)-f*(n-i))/h,[n+h*u,e+h*l]}function Fm(n,e,t,r,i,a,o){var s=n-t,u=e-r,l=(o?a:-a)/vv(s*s+u*u),c=l*u,f=-l*s,h=n+c,d=e+f,p=t+c,g=r+f,m=(h+p)/2,y=(d+g)/2,b=p-h,_=g-d,w=b*b+_*_,T=i-a,E=h*g-p*d,A=(_<0?-1:1)*vv(Hp(0,T*T*w-E*E)),I=(E*_-b*A)/w,$=(-E*b-_*A)/w,D=(E*_+b*A)/w,N=(-E*b+_*A)/w,z=I-m,F=$-y,G=D-m,U=N-y;return z*z+F*F>G*G+U*U&&(I=D,$=N),{cx:I,cy:$,x0:-c,y0:-f,x1:I*(i/T-1),y1:$*(i/T-1)}}function Mce(n){var e;if(Ze(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function Bce(n,e){var t,r=Hp(e.r,0),i=Hp(e.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var u=e.startAngle,l=e.endAngle;if(!(isNaN(u)||isNaN(l))){var c=e.cx,f=e.cy,h=!!e.clockwise,d=uN(l-u),p=d>s_&&d%s_;if(p>Za&&(d=p),!(r>Za))n.moveTo(c,f);else if(d>s_-Za)n.moveTo(c+r*Jf(u),f+r*ac(u)),n.arc(c,f,r,u,l,!h),i>Za&&(n.moveTo(c+i*Jf(l),f+i*ac(l)),n.arc(c,f,i,l,u,h));else{var g=void 0,m=void 0,y=void 0,b=void 0,_=void 0,w=void 0,T=void 0,E=void 0,A=void 0,I=void 0,$=void 0,D=void 0,N=void 0,z=void 0,F=void 0,G=void 0,U=r*Jf(u),H=r*ac(u),X=i*Jf(l),Z=i*ac(l),Q=d>Za;if(Q){var le=e.cornerRadius;le&&(t=Mce(le),g=t[0],m=t[1],y=t[2],b=t[3]);var ge=uN(r-i)/2;if(_=zo(ge,y),w=zo(ge,b),T=zo(ge,g),E=zo(ge,m),$=A=Hp(_,w),D=I=Hp(T,E),(A>Za||I>Za)&&(N=r*Jf(l),z=r*ac(l),F=i*Jf(u),G=i*ac(u),d<tV)){var be=Lce(U,H,F,G,N,z,X,Z);if(be){var ke=U-be[0],Ae=H-be[1],de=N-be[0],Ce=z-be[1],ye=1/ac(Oce((ke*de+Ae*Ce)/(vv(ke*ke+Ae*Ae)*vv(de*de+Ce*Ce)))/2),Ee=vv(be[0]*be[0]+be[1]*be[1]);$=zo(A,(r-Ee)/(ye+1)),D=zo(I,(i-Ee)/(ye-1))}}}if(!Q)n.moveTo(c+U,f+H);else if($>Za){var De=zo(y,$),Me=zo(b,$),Ie=Fm(F,G,U,H,r,De,h),Be=Fm(N,z,X,Z,r,Me,h);n.moveTo(c+Ie.cx+Ie.x0,f+Ie.cy+Ie.y0),$<A&&De===Me?n.arc(c+Ie.cx,f+Ie.cy,$,Hr(Ie.y0,Ie.x0),Hr(Be.y0,Be.x0),!h):(De>0&&n.arc(c+Ie.cx,f+Ie.cy,De,Hr(Ie.y0,Ie.x0),Hr(Ie.y1,Ie.x1),!h),n.arc(c,f,r,Hr(Ie.cy+Ie.y1,Ie.cx+Ie.x1),Hr(Be.cy+Be.y1,Be.cx+Be.x1),!h),Me>0&&n.arc(c+Be.cx,f+Be.cy,Me,Hr(Be.y1,Be.x1),Hr(Be.y0,Be.x0),!h))}else n.moveTo(c+U,f+H),n.arc(c,f,r,u,l,!h);if(!(i>Za)||!Q)n.lineTo(c+X,f+Z);else if(D>Za){var De=zo(g,D),Me=zo(m,D),Ie=Fm(X,Z,N,z,i,-Me,h),Be=Fm(U,H,F,G,i,-De,h);n.lineTo(c+Ie.cx+Ie.x0,f+Ie.cy+Ie.y0),D<I&&De===Me?n.arc(c+Ie.cx,f+Ie.cy,D,Hr(Ie.y0,Ie.x0),Hr(Be.y0,Be.x0),!h):(Me>0&&n.arc(c+Ie.cx,f+Ie.cy,Me,Hr(Ie.y0,Ie.x0),Hr(Ie.y1,Ie.x1),!h),n.arc(c,f,i,Hr(Ie.cy+Ie.y1,Ie.cx+Ie.x1),Hr(Be.cy+Be.y1,Be.cx+Be.x1),h),De>0&&n.arc(c+Be.cx,f+Be.cy,De,Hr(Be.y1,Be.x1),Hr(Be.y0,Be.x0),!h))}else n.lineTo(c+X,f+Z),n.arc(c,f,i,l,u,h)}n.closePath()}}}var Fce=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),nV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Fce},e.prototype.buildPath=function(t,r){Bce(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(jt);nV.prototype.type="sector";const fo=nV;var Vce=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),rV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Vce},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,o,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,o,!0)},e}(jt);rV.prototype.type="ring";const S2=rV;function zce(n,e,t,r){var i=[],a=[],o=[],s=[],u,l,c,f;if(r){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=n.length;h<d;h++)wh(c,c,n[h]),Sh(f,f,n[h]);wh(c,c,r[0]),Sh(f,f,r[1])}for(var h=0,d=n.length;h<d;h++){var p=n[h];if(t)u=n[h?h-1:d-1],l=n[(h+1)%d];else if(h===0||h===d-1){i.push(hse(n[h]));continue}else u=n[h-1],l=n[h+1];dse(a,l,u),Ex(a,a,e);var g=aS(p,u),m=aS(p,l),y=g+m;y!==0&&(g/=y,m/=y),Ex(o,a,-g),Ex(s,a,m);var b=e$([],p,o),_=e$([],p,s);r&&(Sh(b,b,c),wh(b,b,f),Sh(_,_,c),wh(_,_,f)),i.push(b),i.push(_)}return t&&i.push(i.shift()),i}function iV(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=zce(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(t?o:o-1);s++){var u=a[s*2],l=a[s*2+1],c=i[(s+1)%o];n.bezierCurveTo(u[0],u[1],l[0],l[1],c[0],c[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)n.lineTo(i[s][0],i[s][1])}t&&n.closePath()}}var Uce=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),aV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Uce},e.prototype.buildPath=function(t,r){iV(t,r,!0)},e}(jt);aV.prototype.type="polygon";const Q1=aV;var Wce=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),oV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Wce},e.prototype.buildPath=function(t,r){iV(t,r,!1)},e}(jt);oV.prototype.type="polyline";const Eg=oV;var Hce={},Gce=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),sV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Gce},e.prototype.buildPath=function(t,r){var i,a,o,s;if(this.subPixelOptimize){var u=N5(Hce,r,this.style);i=u.x1,a=u.y1,o=u.x2,s=u.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var l=r.percent;l!==0&&(t.moveTo(i,a),l<1&&(o=i*(1-l)+o*l,s=a*(1-l)+s*l),t.lineTo(o,s))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(jt);sV.prototype.type="line";const uo=sV;var Si=[],jce=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function lN(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?f$:vr)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?f$:vr)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?h$:jr)(n.x1,n.cpx1,n.x2,e),(t?h$:jr)(n.y1,n.cpy1,n.y2,e)]}var uV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new jce},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.cpx1,l=r.cpy1,c=r.cpx2,f=r.cpy2,h=r.percent;h!==0&&(t.moveTo(i,a),c==null||f==null?(h<1&&(R0(i,u,o,h,Si),u=Si[1],o=Si[2],R0(a,l,s,h,Si),l=Si[1],s=Si[2]),t.quadraticCurveTo(u,l,o,s)):(h<1&&(ul(i,u,c,o,h,Si),u=Si[1],c=Si[2],o=Si[3],ul(a,l,f,s,h,Si),l=Si[1],f=Si[2],s=Si[3]),t.bezierCurveTo(u,l,c,f,o,s)))},e.prototype.pointAt=function(t){return lN(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=lN(this.shape,t,!0);return gse(r,r)},e}(jt);uV.prototype.type="bezier-curve";const lV=uV;var qce=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),cV=function(n){kn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new qce},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,u=r.endAngle,l=r.clockwise,c=Math.cos(s),f=Math.sin(s);t.moveTo(c*o+i,f*o+a),t.arc(i,a,o,s,u,!l)},e}(jt);cV.prototype.type="arc";const C2=cV;var Xce=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),jt.prototype.getBoundingRect.call(this)},e}(jt);const Kce=Xce;var Yce=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}();const fV=Yce;var Zce=function(n){kn(e,n);function e(t,r,i,a,o,s){var u=n.call(this,o)||this;return u.x=t??0,u.y=r??0,u.x2=i??1,u.y2=a??0,u.type="linear",u.global=s||!1,u}return e}(fV);const hV=Zce;var Qce=function(n){kn(e,n);function e(t,r,i,a,o){var s=n.call(this,a)||this;return s.x=t??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return e}(fV);const Jce=Qce;var oc=[0,0],sc=[0,0],Vm=new bt,zm=new bt,efe=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new bt;for(var r=0;r<2;r++)this._axes[r]=new bt;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,o=e.y,s=a+e.width,u=o+e.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,u),r[3].set(a,u),t)for(var l=0;l<4;l++)r[l].transform(t);bt.sub(i[0],r[1],r[0]),bt.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var l=0;l<2;l++)this._origin[l]=i[l].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return Vm.set(1/0,1/0),zm.set(0,0),!this._intersectCheckOneSide(this,e,Vm,zm,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,Vm,zm,i,-1)&&(r=!1,i)||i||bt.copy(t,r?Vm:zm),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,o){for(var s=!0,u=0;u<2;u++){var l=this._axes[u];if(this._getProjMinMaxOnAxis(u,e._corners,oc),this._getProjMinMaxOnAxis(u,t._corners,sc),oc[1]<sc[0]||oc[0]>sc[1]){if(s=!1,a)return s;var c=Math.abs(sc[0]-oc[1]),f=Math.abs(oc[0]-sc[1]);Math.min(c,f)>i.len()&&(c<f?bt.scale(i,l,-c*o):bt.scale(i,l,f*o))}else if(r){var c=Math.abs(sc[0]-oc[1]),f=Math.abs(oc[0]-sc[1]);Math.min(c,f)<r.len()&&(c<f?bt.scale(r,l,c*o):bt.scale(r,l,-f*o))}}return s},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,o=t[0].dot(i)+a[e],s=o,u=o,l=1;l<t.length;l++){var c=t[l].dot(i)+a[e];s=Math.min(c,s),u=Math.max(c,u)}r[0]=s,r[1]=u},n}();const L0=efe;var tfe=[],nfe=function(n){kn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Kt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(tfe)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(t,r))return!0}return!1},e}(Ad);const rfe=nfe;var dV=Fn();function J1(n,e,t,r,i){var a;if(e&&e.ecModel){var o=e.ecModel.getUpdatePayload();a=o&&o.animation}var s=e&&e.isAnimationEnabled(),u=n==="update";if(s){var l=void 0,c=void 0,f=void 0;r?(l=Gt(r.duration,200),c=Gt(r.easing,"cubicOut"),f=0):(l=e.getShallow(u?"animationDurationUpdate":"animationDuration"),c=e.getShallow(u?"animationEasingUpdate":"animationEasing"),f=e.getShallow(u?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(l=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(f=a.delay)),Et(f)&&(f=f(t,i)),Et(l)&&(l=l(t));var h={duration:l||0,delay:f,easing:c};return h}else return null}function T2(n,e,t,r,i,a,o){var s=!1,u;Et(i)?(o=a,a=i,i=null):ht(i)&&(a=i.cb,o=i.during,s=i.isFrom,u=i.removeOpt,i=i.dataIndex);var l=n==="leave";l||e.stopAnimation("leave");var c=J1(n,r,i,l?u||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:a,force:!!a||!!o,setToFinal:!l,scope:n,during:o};s?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!s&&e.attr(t),o&&o(1),a&&a()}function Rr(n,e,t,r,i,a){T2("update",n,e,t,r,i,a)}function ei(n,e,t,r,i,a){T2("enter",n,e,t,r,i,a)}function Mh(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function M0(n,e,t,r,i,a){Mh(n)||T2("leave",n,e,t,r,i,a)}function cN(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),M0(n,{style:{opacity:0}},e,t,r)}function B0(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||cN(i,e,t,r)}):cN(n,e,t,r)}function E2(n){dV(n).oldStyle=n.style}function ife(n){return dV(n).oldStyle}var F0=Math.max,V0=Math.min,$S={};function afe(n){return jt.extend(n)}var ofe=Pce;function sfe(n,e){return ofe(n,e)}function wo(n,e){$S[n]=e}function ufe(n){if($S.hasOwnProperty(n))return $S[n]}function k2(n,e,t,r){var i=Ice(n,e);return t&&(r==="center"&&(t=vV(t,i.getBoundingRect())),gV(i,t)),i}function pV(n,e,t){var r=new yf({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(vV(e,a))}}});return r}function vV(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,o=n.y+n.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Ws=Dce;function gV(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function Vv(n,e){return N5(n,n,{lineWidth:e}),n}function lfe(n){return O5(n.shape,n.shape,n.style),n}var cfe=kc;function A2(n,e){for(var t=c2([]);n&&n!==e;)Oh(t,n.getLocalTransform(),t),n=n.parent;return t}function eb(n,e,t){return e&&!gi(e)&&(e=wg.getLocalTransform(e)),t&&(e=H1([],e)),$a([],n,e)}function mV(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=eb(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function fN(n){return!n.isGroup}function ffe(n){return n.shape!=null}function R2(n,e,t){if(!n||!e)return;function r(o){var s={};return o.traverse(function(u){fN(u)&&u.anid&&(s[u.anid]=u)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return ffe(o)&&(s.shape=Ue({},o.shape)),s}var a=r(n);e.traverse(function(o){if(fN(o)&&o.anid){var s=a[o.anid];if(s){var u=i(o);o.attr(i(s)),Rr(o,u,t,an(o).dataIndex)}}})}function yV(n,e){return nt(n,function(t){var r=t[0];r=F0(r,e.x),r=V0(r,e.x+e.width);var i=t[1];return i=F0(i,e.y),i=V0(i,e.y+e.height),[r,i]})}function hfe(n,e){var t=F0(n.x,e.x),r=V0(n.x+n.width,e.x+e.width),i=F0(n.y,e.y),a=V0(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function tb(n,e,t){var r=Ue({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),St(i,t),new yf(r)):k2(n.replace("path://",""),r,t,"center")}function dfe(n,e,t,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(bV(n,e,t,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function bV(n,e,t,r,i,a,o,s){var u=t-n,l=r-e,c=o-i,f=s-a,h=u_(c,f,u,l);if(pfe(h))return!1;var d=n-i,p=e-a,g=u_(d,p,u,l)/h;if(g<0||g>1)return!1;var m=u_(d,p,c,f)/h;return!(m<0||m>1)}function u_(n,e,t,r){return n*r-t*e}function pfe(n){return n<=1e-6&&n>=-1e-6}function nb(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=lt(e)?{formatter:e}:e,a=t.mainType,o=t.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var u=n.formatterParamsExtra;u&&ne(zn(u),function(c){nu(s,c)||(s[c]=u[c],s.$vars.push(c))});var l=an(n.el);l.componentMainType=a,l.componentIndex=o,l.tooltipConfig={name:r,option:St({content:r,formatterParams:s},i)}}function hN(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function rb(n,e){if(n)if(Ze(n))for(var t=0;t<n.length;t++)hN(n[t],e);else hN(n,e)}wo("circle",rd);wo("ellipse",eV);wo("sector",fo);wo("ring",S2);wo("polygon",Q1);wo("polyline",Eg);wo("rect",er);wo("line",uo);wo("bezierCurve",lV);wo("arc",C2);const vfe=Object.freeze(Object.defineProperty({__proto__:null,Arc:C2,BezierCurve:lV,BoundingRect:Kt,Circle:rd,CompoundPath:Kce,Ellipse:eV,Group:lr,Image:yf,IncrementalDisplayable:rfe,Line:uo,LinearGradient:hV,OrientedBoundingRect:L0,Path:jt,Point:bt,Polygon:Q1,Polyline:Eg,RadialGradient:Jce,Rect:er,Ring:S2,Sector:fo,Text:br,applyTransform:eb,clipPointsByRect:yV,clipRectByRect:hfe,createIcon:tb,extendPath:sfe,extendShape:afe,getShapeClass:ufe,getTransform:A2,groupTransition:R2,initProps:ei,isElementRemoved:Mh,lineLineIntersect:bV,linePolygonIntersect:dfe,makeImage:pV,makePath:k2,mergePath:Ws,registerShape:wo,removeElement:M0,removeElementWithFadeOut:B0,resizePath:gV,setTooltipConfig:nb,subPixelOptimize:cfe,subPixelOptimizeLine:Vv,subPixelOptimizeRect:lfe,transformDirection:mV,traverseElements:rb,updateProps:Rr},Symbol.toStringTag,{value:"Module"}));var ib={};function xV(n,e){for(var t=0;t<Ba.length;t++){var r=Ba[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var o=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(o,!0)}function NS(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,o=e.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),t!=null?{interpolatedValue:t}:null)),s==null&&(s=Et(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var u={normal:s},l=0;l<Ba.length;l++){var c=Ba[l],f=e[c];u[c]=Gt(r?r.getFormattedLabel(i,c,null,a,f&&f.get("formatter")):null,s)}return u}function kg(n,e,t,r){t=t||ib;for(var i=n instanceof br,a=!1,o=0;o<N0.length;o++){var s=e[N0[o]];if(s&&s.getShallow("show")){a=!0;break}}var u=i?n:n.getTextContent();if(a){i||(u||(u=new br,n.setTextContent(u)),n.stateProxy&&(u.stateProxy=n.stateProxy));var l=NS(t,e),c=e.normal,f=!!c.getShallow("show"),h=au(c,r&&r.normal,t,!1,!i);h.text=l.normal,i||n.setTextConfig(dN(c,t,!1));for(var o=0;o<Ba.length;o++){var d=Ba[o],s=e[d];if(s){var p=u.ensureState(d),g=!!Gt(s.getShallow("show"),f);if(g!==f&&(p.ignore=!g),p.style=au(s,r&&r[d],t,!0,!i),p.style.text=l[d],!i){var m=n.ensureState(d);m.textConfig=dN(s,t,!0)}}}u.silent=!!c.getShallow("silent"),u.style.x!=null&&(h.x=u.style.x),u.style.y!=null&&(h.y=u.style.y),u.ignore=!f,u.useStyle(h),u.dirty(),t.enableTextSetter&&(Rd(u).setLabelText=function(y){var b=NS(t,e,y);xV(u,b)})}else u&&(u.ignore=!0);n.dirty()}function Ag(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<Ba.length;r++){var i=Ba[r];t[i]=n.getModel([i,e])}return t}function au(n,e,t,r,i){var a={};return gfe(a,n,t,r,i),e&&Ue(a,e),a}function dN(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),o=Gt(n.getShallow("distance"),t?null:5),s=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function gfe(n,e,t,r,i){t=t||ib;var a=e.ecModel,o=a&&a.option.textStyle,s=mfe(e),u;if(s){u={};for(var l in s)if(s.hasOwnProperty(l)){var c=e.getModel(["rich",l]);mN(u[l]={},c,o,t,r,i,!1,!0)}}u&&(n.rich=u);var f=e.get("overflow");f&&(n.overflow=f);var h=e.get("minMargin");h!=null&&(n.margin=h),mN(n,e,o,t,r,i,!0,!1)}function mfe(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||ib).rich;if(t){e=e||{};for(var r=zn(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var pN=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],vN=["align","lineHeight","width","height","tag","verticalAlign"],gN=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function mN(n,e,t,r,i,a,o,s){t=!i&&t||ib;var u=r&&r.inheritColor,l=e.getShallow("color"),c=e.getShallow("textBorderColor"),f=Gt(e.getShallow("opacity"),t.opacity);(l==="inherit"||l==="auto")&&(u?l=u:l=null),(c==="inherit"||c==="auto")&&(u?c=u:c=null),a||(l=l||t.color,c=c||t.textBorderColor),l!=null&&(n.fill=l),c!=null&&(n.stroke=c);var h=Gt(e.getShallow("textBorderWidth"),t.textBorderWidth);h!=null&&(n.lineWidth=h);var d=Gt(e.getShallow("textBorderType"),t.textBorderType);d!=null&&(n.lineDash=d);var p=Gt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!i&&f==null&&!s&&(f=r&&r.defaultOpacity),f!=null&&(n.opacity=f),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var g=0;g<pN.length;g++){var m=pN[g],y=Gt(e.getShallow(m),t[m]);y!=null&&(n[m]=y)}for(var g=0;g<vN.length;g++){var m=vN[g],y=e.getShallow(m);y!=null&&(n[m]=y)}if(n.verticalAlign==null){var b=e.getShallow("baseline");b!=null&&(n.verticalAlign=b)}if(!o||!r.disableBox){for(var g=0;g<gN.length;g++){var m=gN[g],y=e.getShallow(m);y!=null&&(n[m]=y)}var _=e.getShallow("borderType");_!=null&&(n.borderDash=_),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&u&&(n.backgroundColor=u),(n.borderColor==="auto"||n.borderColor==="inherit")&&u&&(n.borderColor=u)}}function yfe(n,e){var t=e&&e.getModel("textStyle");return Xo([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var Rd=Fn();function bfe(n,e,t,r){if(n){var i=Rd(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function xfe(n,e,t,r,i){var a=Rd(n);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=Gt(a.interpolatedValue,a.prevValue),u=a.value;function l(c){var f=w5(t,a.precision,s,u,c);a.interpolatedValue=c===1?null:f;var h=NS({labelDataIndex:e,labelFetcher:i,defaultText:o?o(f):f+""},a.statesModels,f);xV(n,h)}n.percent=0,(a.prevValue==null?ei:Rr)(n,{percent:1},r,e,null,l)}var _fe=["textStyle","color"],l_=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],c_=new br,wfe=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(_fe):null)},n.prototype.getFont=function(){return yfe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<l_.length;r++)t[l_[r]]=this.getShallow(l_[r]);return c_.useStyle(t),c_.update(),c_.getBoundingRect()},n}();const Sfe=wfe;var _V=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Cfe=Bv(_V),Tfe=function(){function n(){}return n.prototype.getLineStyle=function(e){return Cfe(this,e)},n}(),wV=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Efe=Bv(wV),kfe=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return Efe(this,e,t)},n}(),bf=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){Mt(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Pt(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Lt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();m2(bf);ule(bf);xo(bf,Tfe);xo(bf,kfe);xo(bf,dle);xo(bf,Sfe);const Tr=bf;var Afe=Math.round(Math.random()*10);function Rg(n){return[n||"",Afe++].join("_")}function Rfe(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=Ko(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=Ko(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function Ife(n,e){n.topologicalTravel=function(a,o,s,u){if(!a.length)return;var l=t(o),c=l.graph,f=l.noEntryList,h={};for(ne(a,function(b){h[b]=!0});f.length;){var d=f.pop(),p=c[d],g=!!h[d];g&&(s.call(u,d,p.originalDeps.slice()),delete h[d]),ne(p.successor,g?y:m)}ne(h,function(){var b="";throw new Error(b)});function m(b){c[b].entryCount--,c[b].entryCount===0&&f.push(b)}function y(b){h[b]=!0,m(b)}};function t(a){var o={},s=[];return ne(a,function(u){var l=r(o,u),c=l.originalDeps=e(u),f=i(c,a);l.entryCount=f.length,l.entryCount===0&&s.push(u),ne(f,function(h){Ht(l.predecessor,h)<0&&l.predecessor.push(h);var d=r(o,h);Ht(d.successor,h)<0&&d.successor.push(u)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return ne(a,function(u){Ht(o,u)>=0&&s.push(u)}),s}}function SV(n,e){return Mt(Mt({},n,!0),e,!0)}const Pfe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Dfe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var z0="ZH",I2="EN",zv=I2,a0={},P2={},CV=Lt.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(z0)>-1?z0:zv}():zv;function TV(n,e){n=n.toUpperCase(),P2[n]=new Tr(e),a0[n]=e}function $fe(n){if(lt(n)){var e=a0[n.toUpperCase()]||{};return n===z0||n===I2?Pt(e):Mt(Pt(e),Pt(a0[zv]),!1)}else return Mt(Pt(n),Pt(a0[zv]),!1)}function Nfe(n){return P2[n]}function Ofe(){return P2[zv]}TV(I2,Pfe);TV(z0,Dfe);var D2=1e3,$2=D2*60,gv=$2*60,Sa=gv*24,yN=Sa*365,Gp={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Um="{yyyy}-{MM}-{dd}",bN={year:"{yyyy}",month:"{yyyy}-{MM}",day:Um,hour:Um+" "+Gp.hour,minute:Um+" "+Gp.minute,second:Um+" "+Gp.second,millisecond:Gp.none},f_=["year","month","day","hour","minute","second","millisecond"],EV=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function uc(n,e){return n+="","0000".substr(0,e-n.length)+n}function Bh(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function Lfe(n){return n===Bh(n)}function Mfe(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function ab(n,e,t,r){var i=ru(n),a=i[N2(t)](),o=i[Fh(t)]()+1,s=Math.floor((o-1)/3)+1,u=i[ob(t)](),l=i["get"+(t?"UTC":"")+"Day"](),c=i[Uv(t)](),f=(c-1)%12+1,h=i[sb(t)](),d=i[ub(t)](),p=i[lb(t)](),g=r instanceof Tr?r:Nfe(r||CV)||Ofe(),m=g.getModel("time"),y=m.get("month"),b=m.get("monthAbbr"),_=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,y[o-1]).replace(/{MMM}/g,b[o-1]).replace(/{MM}/g,uc(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,uc(u,2)).replace(/{d}/g,u+"").replace(/{eeee}/g,_[l]).replace(/{ee}/g,w[l]).replace(/{e}/g,l+"").replace(/{HH}/g,uc(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,uc(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,uc(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,uc(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,uc(p,3)).replace(/{S}/g,p+"")}function Bfe(n,e,t,r,i){var a=null;if(lt(t))a=t;else if(Et(t))a=t(n.value,e,{level:n.level});else{var o=Ue({},Gp);if(n.level>0)for(var s=0;s<f_.length;++s)o[f_[s]]="{primary|"+o[f_[s]]+"}";var u=t?t.inherit===!1?t:St(t,o):o,l=kV(n.value,i);if(u[l])a=u[l];else if(u.inherit){for(var c=EV.indexOf(l),s=c-1;s>=0;--s)if(u[l]){a=u[l];break}a=a||o.none}if(Ze(a)){var f=n.level==null?0:n.level>=0?n.level:a.length+n.level;f=Math.min(f,a.length-1),a=a[f]}}return ab(new Date(n.value),a,i,r)}function kV(n,e){var t=ru(n),r=t[Fh(e)]()+1,i=t[ob(e)](),a=t[Uv(e)](),o=t[sb(e)](),s=t[ub(e)](),u=t[lb(e)](),l=u===0,c=l&&s===0,f=c&&o===0,h=f&&a===0,d=h&&i===1,p=d&&r===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":l?"second":"millisecond"}function xN(n,e,t){var r=dn(n)?ru(n):n;switch(e=e||kV(n,t),e){case"year":return r[N2(t)]();case"half-year":return r[Fh(t)]()>=6?1:0;case"quarter":return Math.floor((r[Fh(t)]()+1)/4);case"month":return r[Fh(t)]();case"day":return r[ob(t)]();case"half-day":return r[Uv(t)]()/24;case"hour":return r[Uv(t)]();case"minute":return r[sb(t)]();case"second":return r[ub(t)]();case"millisecond":return r[lb(t)]()}}function N2(n){return n?"getUTCFullYear":"getFullYear"}function Fh(n){return n?"getUTCMonth":"getMonth"}function ob(n){return n?"getUTCDate":"getDate"}function Uv(n){return n?"getUTCHours":"getHours"}function sb(n){return n?"getUTCMinutes":"getMinutes"}function ub(n){return n?"getUTCSeconds":"getSeconds"}function lb(n){return n?"getUTCMilliseconds":"getMilliseconds"}function Ffe(n){return n?"setUTCFullYear":"setFullYear"}function AV(n){return n?"setUTCMonth":"setMonth"}function RV(n){return n?"setUTCDate":"setDate"}function IV(n){return n?"setUTCHours":"setHours"}function PV(n){return n?"setUTCMinutes":"setMinutes"}function DV(n){return n?"setUTCSeconds":"setSeconds"}function $V(n){return n?"setUTCMilliseconds":"setMilliseconds"}function NV(n){if(!zue(n))return lt(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function OV(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var cb=B4;function OS(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Xo(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=e==="time",s=n instanceof Date;if(o||s){var u=o?ru(n):n;if(isNaN(+u)){if(s)return"-"}else return ab(u,r,t)}if(e==="ordinal")return rS(n)?i(n):dn(n)&&a(n)?n+"":"-";var l=cl(n);return a(l)?NV(l):rS(n)?i(n):typeof n=="boolean"?n+"":"-"}var _N=["a","b","c","d","e","f","g"],h_=function(n,e){return"{"+n+(e??"")+"}"};function LV(n,e,t){Ze(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=_N[a];n=n.replace(h_(o),h_(o,0))}for(var s=0;s<r;s++)for(var u=0;u<i.length;u++){var l=e[s][i[u]];n=n.replace(h_(_N[u],s),t?_a(l):l)}return n}function Vfe(n,e){var t=lt(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+_a(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+_a(r)+";"+(e||"")+'"></span>';var o=t.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Kc(n,e){return e=e||"transparent",lt(n)?n:ht(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function wN(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var o0=ne,zfe=["left","right","top","bottom","width","height"],Wm=[["width","left","right"],["height","top","bottom"]];function O2(n,e,t,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;e.eachChild(function(u,l){var c=u.getBoundingRect(),f=e.childAt(l+1),h=f&&f.getBoundingRect(),d,p;if(n==="horizontal"){var g=c.width+(h?-h.x+c.x:0);d=a+g,d>r||u.newline?(a=0,d=g,o+=s+t,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=o+m,p>i||u.newline?(a+=s+t,o=0,p=m,s=c.width):s=Math.max(s,c.width)}u.newline||(u.x=a,u.y=o,u.markRedraw(),n==="horizontal"?a=d+t:o=p+t)})}var Vh=O2;rn(O2,"vertical");rn(O2,"horizontal");function fl(n,e,t){t=cb(t||0);var r=e.width,i=e.height,a=tn(n.left,r),o=tn(n.top,i),s=tn(n.right,r),u=tn(n.bottom,i),l=tn(n.width,r),c=tn(n.height,i),f=t[2]+t[0],h=t[1]+t[3],d=n.aspect;switch(isNaN(l)&&(l=r-s-h-a),isNaN(c)&&(c=i-u-f-o),d!=null&&(isNaN(l)&&isNaN(c)&&(d>r/i?l=r*.8:c=i*.8),isNaN(l)&&(l=d*c),isNaN(c)&&(c=l/d)),isNaN(a)&&(a=r-s-l-h),isNaN(o)&&(o=i-u-c-f),n.left||n.right){case"center":a=r/2-l/2-t[3];break;case"right":a=r-l-h;break}switch(n.top||n.bottom){case"middle":case"center":o=i/2-c/2-t[0];break;case"bottom":o=i-c-f;break}a=a||0,o=o||0,isNaN(l)&&(l=r-h-a-(s||0)),isNaN(c)&&(c=i-f-o-(u||0));var p=new Kt(a+t[3],o+t[0],l,c);return p.margin=t,p}function Ufe(n,e,t,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],u=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!o&&!s)return!1;var l;if(u==="raw")l=n.type==="group"?new Kt(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(l=n.getBoundingRect(),n.needLocalTransform()){var c=n.getLocalTransform();l=l.clone(),l.applyTransform(c)}var f=fl(St({width:l.width,height:l.height},e),t,r),h=o?f.x-l.x:0,d=s?f.y-l.y:0;return u==="raw"?(a.x=h,a.y=d):(a.x+=h,a.y+=d),a===n&&n.markRedraw(),!0}function Wv(n){var e=n.layoutMode||n.constructor.layoutMode;return ht(e)?e:e?{type:e}:null}function id(n,e,t){var r=t&&t.ignoreSize;!Ze(r)&&(r=[r,r]);var i=o(Wm[0],0),a=o(Wm[1],1);l(Wm[0],n,i),l(Wm[1],n,a);function o(c,f){var h={},d=0,p={},g=0,m=2;if(o0(c,function(_){p[_]=n[_]}),o0(c,function(_){s(e,_)&&(h[_]=p[_]=e[_]),u(h,_)&&d++,u(p,_)&&g++}),r[f])return u(e,c[1])?p[c[2]]=null:u(e,c[2])&&(p[c[1]]=null),p;if(g===m||!d)return p;if(d>=m)return h;for(var y=0;y<c.length;y++){var b=c[y];if(!s(h,b)&&s(n,b)){h[b]=n[b];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function u(c,f){return c[f]!=null&&c[f]!=="auto"}function l(c,f,h){o0(c,function(d){f[d]=h[d]})}}function fb(n){return Wfe({},n)}function Wfe(n,e){return e&&n&&o0(zfe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var Hfe=Fn(),Id=function(n){rt(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=Rg("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=Wv(this),a=i?fb(t):{},o=r.getTheme();Mt(t,o.get(this.mainType)),Mt(t,this.getDefaultOption()),i&&id(t,a,i)},e.prototype.mergeOption=function(t,r){Mt(this.option,t,!0);var i=Wv(this);i&&id(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!ale(t))return t.defaultOption;var r=Hfe(this);if(!r.defaultOption){for(var i=[],a=t;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},u=i.length-1;u>=0;u--)s=Mt(s,i[u],!0);r.defaultOption=s}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return Tg(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Tr);C5(Id,Tr);j1(Id);Rfe(Id);Ife(Id,Gfe);function Gfe(n){var e=[];return ne(Id.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=nt(e,function(t){return Ko(t).main}),n!=="dataset"&&Ht(e,"dataset")<=0&&e.unshift("dataset"),e}const bn=Id;var MV="";typeof navigator<"u"&&(MV=navigator.platform||"");var eh="rgba(0, 0, 0, 0.2)";const jfe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:eh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:eh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:eh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:eh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:eh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:eh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:MV.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var BV=Tt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Fa="original",mi="arrayRows",Va="objectRows",ys="keyedColumns",rl="typedArray",FV="unknown",rs="column",Pd="row",$r={Must:1,Might:2,Not:3},VV=Fn();function qfe(n){VV(n).datasetMap=Tt()}function Xfe(n,e,t){var r={},i=L2(e);if(!i||!n)return r;var a=[],o=[],s=e.ecModel,u=VV(s).datasetMap,l=i.uid+"_"+t.seriesLayoutBy,c,f;n=n.slice(),ne(n,function(g,m){var y=ht(g)?g:n[m]={name:g};y.type==="ordinal"&&c==null&&(c=m,f=p(y)),r[y.name]=[]});var h=u.get(l)||u.set(l,{categoryWayDim:f,valueWayDim:0});ne(n,function(g,m){var y=g.name,b=p(g);if(c==null){var _=h.valueWayDim;d(r[y],_,b),d(o,_,b),h.valueWayDim+=b}else if(c===m)d(r[y],0,b),d(a,0,b);else{var _=h.categoryWayDim;d(r[y],_,b),d(o,_,b),h.categoryWayDim+=b}});function d(g,m,y){for(var b=0;b<y;b++)g.push(m+b)}function p(g){var m=g.dimsDef;return m?m.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function Kfe(n,e,t){var r={},i=L2(n);if(!i)return r;var a=e.sourceFormat,o=e.dimensionsDefine,s;(a===Va||a===ys)&&ne(o,function(c,f){(ht(c)?c.name:c)==="name"&&(s=f)});var u=function(){for(var c={},f={},h=[],d=0,p=Math.min(5,t);d<p;d++){var g=UV(e.data,a,e.seriesLayoutBy,o,e.startIndex,d);h.push(g);var m=g===$r.Not;if(m&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!m&&h[c.n]===$r.Not)&&(c.n=d),y(c)&&h[c.n]!==$r.Not)return c;m||(g===$r.Might&&f.v==null&&d!==s&&(f.v=d),(f.n==null||f.n===f.v)&&(f.n=d))}function y(b){return b.v!=null&&b.n!=null}return y(c)?c:y(f)?f:null}();if(u){r.value=[u.v];var l=s??u.n;r.itemName=[l],r.seriesName=[l]}return r}function L2(n){var e=n.get("data",!0);if(!e)return Tg(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},Nr).models[0]}function Yfe(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:Tg(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},Nr).models}function zV(n,e){return UV(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function UV(n,e,t,r,i,a){var o,s=5;if(na(n))return $r.Not;var u,l;if(r){var c=r[a];ht(c)?(u=c.name,l=c.type):lt(c)&&(u=c)}if(l!=null)return l==="ordinal"?$r.Must:$r.Not;if(e===mi){var f=n;if(t===Pd){for(var h=f[a],d=0;d<(h||[]).length&&d<s;d++)if((o=w(h[i+d]))!=null)return o}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(o=w(p[a]))!=null)return o}}else if(e===Va){var g=n;if(!u)return $r.Not;for(var d=0;d<g.length&&d<s;d++){var m=g[d];if(m&&(o=w(m[u]))!=null)return o}}else if(e===ys){var y=n;if(!u)return $r.Not;var h=y[u];if(!h||na(h))return $r.Not;for(var d=0;d<h.length&&d<s;d++)if((o=w(h[d]))!=null)return o}else if(e===Fa)for(var b=n,d=0;d<b.length&&d<s;d++){var m=b[d],_=Cg(m);if(!Ze(_))return $r.Not;if((o=w(_[a]))!=null)return o}function w(T){var E=lt(T);if(T!=null&&isFinite(T)&&T!=="")return E?$r.Might:$r.Not;if(E&&T!=="-")return $r.Must}return $r.Not}var LS=Tt();function Zfe(n,e){cs(LS.get(n)==null&&e),LS.set(n,e)}function Qfe(n,e,t){var r=LS.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var SN=Fn();Fn();var M2=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=rr(this.get("color",!0)),a=this.get("colorLayer",!0);return ehe(this,SN,i,a,e,t,r)},n.prototype.clearColorPalette=function(){the(this,SN)},n}();function Jfe(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function ehe(n,e,t,r,i,a,o){a=a||n;var s=e(a),u=s.paletteIdx||0,l=s.paletteNameMap=s.paletteNameMap||{};if(l.hasOwnProperty(i))return l[i];var c=o==null||!r?t:Jfe(r,o);if(c=c||t,!(!c||!c.length)){var f=c[u];return i&&(l[i]=f),s.paletteIdx=(u+1)%c.length,f}}function the(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var Hm,bp,CN,TN="\0_ec_inner",nhe=1,WV=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,o,s){a=a||{},this.option=null,this._theme=new Tr(a),this._locale=new Tr(o),this._optionManager=s},e.prototype.setOption=function(t,r,i){var a=AN(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,AN(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var o=a.mountOption(t==="recreate");!this.option||t==="recreate"?CN(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!t||t==="recreate"||t==="media"){var u=a.getMediaOption(this);u.length&&ne(u,function(l){i=!0,this._mergeOption(l,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],u=Tt(),l=r&&r.replaceMergeMainTypeMap;qfe(this),ne(t,function(f,h){f!=null&&(bn.hasClass(h)?h&&(s.push(h),u.set(h,!0)):i[h]=i[h]==null?Pt(f):Mt(i[h],f,!0))}),l&&l.each(function(f,h){bn.hasClass(h)&&!u.get(h)&&(s.push(h),u.set(h,!0))}),bn.topologicalTravel(s,bn.getAllClassMainTypes(),c,this);function c(f){var h=Qfe(this,f,rr(t[f])),d=a.get(f),p=d?l&&l.get(f)?"replaceMerge":"normalMerge":"replaceAll",g=Wue(d,h,p);Zue(g,f,bn),i[f]=null,a.set(f,null),o.set(f,0);var m=[],y=[],b=0,_;ne(g,function(w,T){var E=w.existing,A=w.newOption;if(!A)E&&(E.mergeOption({},this),E.optionUpdated({},!1));else{var I=f==="series",$=bn.getClass(f,w.keyInfo.subType,!I);if(!$)return;if(f==="tooltip"){if(_)return;_=!0}if(E&&E.constructor===$)E.name=w.keyInfo.name,E.mergeOption(A,this),E.optionUpdated(A,!1);else{var D=Ue({componentIndex:T},w.keyInfo);E=new $(A,this,this,D),Ue(E,D),w.brandNew&&(E.__requireNewView=!0),E.init(A,this,this),E.optionUpdated(null,!0)}}E?(m.push(E.option),y.push(E),b++):(m.push(void 0),y.push(void 0))},this),i[f]=m,a.set(f,y),o.set(f,b),f==="series"&&Hm(this)}this._seriesIndices||Hm(this)},e.prototype.getOption=function(){var t=Pt(this.option);return ne(t,function(r,i){if(bn.hasClass(i)){for(var a=rr(r),o=a.length,s=!1,u=o-1;u>=0;u--)a[u]&&!Mv(a[u])?s=!0:(a[u]=null,!s&&o--);a.length=o,t[i]=a}}),delete t[TN],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,o=t.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var u;return i!=null?(u=[],ne(rr(i),function(l){s[l]&&u.push(s[l])})):a!=null?u=EN("id",a,s):o!=null?u=EN("name",o,s):u=Jn(s,function(l){return!!l}),kN(u,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=s(r),o=a?this.queryComponents(a):Jn(this._componentsMap.get(i),function(l){return!!l});return u(kN(o,t));function s(l){var c=i+"Index",f=i+"Id",h=i+"Name";return l&&(l[c]!=null||l[f]!=null||l[h]!=null)?{mainType:i,index:l[c],id:l[f],name:l[h]}:null}function u(l){return t.filter?Jn(l,t.filter):l}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(Et(t)){var o=r,s=t;a.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(o,h,p,p.componentIndex)}})}else for(var u=lt(t)?a.get(t):ht(t)?this.findComponents(t):null,l=0;u&&l<u.length;l++){var c=u[l];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=ns(t,null);return Jn(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Jn(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return Jn(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){bp(this),ne(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){ne(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){bp(this),ne(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===t&&r.call(i,o,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return ne(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return bp(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){bp(this);var i=[];ne(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];t.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Tt(i)},e.prototype.restoreData=function(t){Hm(this);var r=this._componentsMap,i=[];r.each(function(a,o){bn.hasClass(o)&&i.push(o)}),bn.topologicalTravel(i,bn.getAllClassMainTypes(),function(a){ne(r.get(a),function(o){o&&(a!=="series"||!rhe(o,t))&&o.restoreData()})})},e.internalField=function(){Hm=function(t){var r=t._seriesIndices=[];ne(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=Tt(r)},bp=function(t){},CN=function(t,r){t.option={},t.option[TN]=nhe,t._componentsMap=Tt({series:[]}),t._componentsCount=Tt();var i=r.aria;ht(i)&&i.enabled==null&&(i.enabled=!0),ihe(r,t._theme.option),Mt(r,jfe,!1),t._mergeOption(r,null)}}(),e}(Tr);function rhe(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function ihe(n,e){var t=n.color&&!n.colorLayer;ne(e,function(r,i){i==="colorLayer"&&t||bn.hasClass(i)||(typeof r=="object"?n[i]=n[i]?Mt(n[i],r,!1):Pt(r):n[i]==null&&(n[i]=r))})}function EN(n,e,t){if(Ze(e)){var r=Tt();return ne(e,function(a){if(a!=null){var o=ns(a,null);o!=null&&r.set(a,!0)}}),Jn(t,function(a){return a&&r.get(a[n])})}else{var i=ns(e,null);return Jn(t,function(a){return a&&i!=null&&a[n]===i})}}function kN(n,e){return e.hasOwnProperty("subType")?Jn(n,function(t){return t&&t.subType===e.subType}):n}function AN(n){var e=Tt();return n&&ne(rr(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}xo(WV,M2);const HV=WV;var ahe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ohe=function(){function n(e){ne(ahe,function(t){this[t]=Tn(e[t],e)},this)}return n}();const GV=ohe;var d_={},she=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];ne(d_,function(i,a){var o=i.create(e,t);r=r.concat(o||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){ne(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){d_[e]=t},n.get=function(e){return d_[e]},n}();const B2=she;var uhe=/^(min|max)?(.+)$/,lhe=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(ne(rr(e.series),function(o){o&&o.data&&na(o.data)&&T0(o.data)}),ne(rr(e.dataset),function(o){o&&o.source&&na(o.source)&&T0(o.source)})),e=Pt(e);var i=this._optionBackup,a=che(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Pt(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Pt(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var u=0,l=i.length;u<l;u++)fhe(i[u].query,t,r)&&o.push(u);return!o.length&&a&&(o=[-1]),o.length&&!dhe(o,this._currentMediaIndices)&&(s=nt(o,function(c){return Pt(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},n}();function che(n,e,t){var r=[],i,a,o=n.baseOption,s=n.timeline,u=n.options,l=n.media,c=!!n.media,f=!!(u||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((f||c)&&(n.options=n.media=null),a=n),c&&Ze(l)&&ne(l,function(d){d&&d.option&&(d.query?r.push(d):i||(i=d))}),h(a),ne(u,function(d){return h(d)}),ne(r,function(d){return h(d.option)});function h(d){ne(e,function(p){p(d,t)})}return{baseOption:a,timelineOptions:u||[],mediaDefault:i,mediaList:r}}function fhe(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return ne(n,function(a,o){var s=o.match(uhe);if(!(!s||!s[1]||!s[2])){var u=s[1],l=s[2].toLowerCase();hhe(r[l],a,u)||(i=!1)}}),i}function hhe(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function dhe(n,e){return n.join(",")===e.join(",")}const phe=lhe;var Xa=ne,Hv=ht,RN=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function p_(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=RN.length;t<r;t++){var i=RN[t],a=e.normal,o=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?Mt(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),o&&o[i]&&(n[i]=n[i]||{},n[i].emphasis?Mt(n[i].emphasis,o[i]):n[i].emphasis=o[i],o[i]=null)}}function qr(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,St(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function jp(n){qr(n,"itemStyle"),qr(n,"lineStyle"),qr(n,"areaStyle"),qr(n,"label"),qr(n,"labelLine"),qr(n,"upperLabel"),qr(n,"edgeLabel")}function tr(n,e){var t=Hv(n)&&n[e],r=Hv(t)&&t.textStyle;if(r)for(var i=0,a=I$.length;i<a;i++){var o=I$[i];r.hasOwnProperty(o)&&(t[o]=r[o])}}function ma(n){n&&(jp(n),tr(n,"label"),n.emphasis&&tr(n.emphasis,"label"))}function vhe(n){if(Hv(n)){p_(n),jp(n),tr(n,"label"),tr(n,"upperLabel"),tr(n,"edgeLabel"),n.emphasis&&(tr(n.emphasis,"label"),tr(n.emphasis,"upperLabel"),tr(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(p_(e),ma(e));var t=n.markLine;t&&(p_(t),ma(t));var r=n.markArea;r&&ma(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!na(a))for(var o=0;o<a.length;o++)ma(a[o]);ne(n.categories,function(l){jp(l)})}if(i&&!na(i))for(var o=0;o<i.length;o++)ma(i[o]);if(e=n.markPoint,e&&e.data)for(var s=e.data,o=0;o<s.length;o++)ma(s[o]);if(t=n.markLine,t&&t.data)for(var u=t.data,o=0;o<u.length;o++)Ze(u[o])?(ma(u[o][0]),ma(u[o][1])):ma(u[o]);n.type==="gauge"?(tr(n,"axisLabel"),tr(n,"title"),tr(n,"detail")):n.type==="treemap"?(qr(n.breadcrumb,"itemStyle"),ne(n.levels,function(l){jp(l)})):n.type==="tree"&&jp(n.leaves)}}function Ms(n){return Ze(n)?n:n?[n]:[]}function IN(n){return(Ze(n)?n[0]:n)||{}}function ghe(n,e){Xa(Ms(n.series),function(r){Hv(r)&&vhe(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Xa(t,function(r){Xa(Ms(n[r]),function(i){i&&(tr(i,"axisLabel"),tr(i.axisPointer,"label"))})}),Xa(Ms(n.parallel),function(r){var i=r&&r.parallelAxisDefault;tr(i,"axisLabel"),tr(i&&i.axisPointer,"label")}),Xa(Ms(n.calendar),function(r){qr(r,"itemStyle"),tr(r,"dayLabel"),tr(r,"monthLabel"),tr(r,"yearLabel")}),Xa(Ms(n.radar),function(r){tr(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Xa(Ms(n.geo),function(r){Hv(r)&&(ma(r),Xa(Ms(r.regions),function(i){ma(i)}))}),Xa(Ms(n.timeline),function(r){ma(r),qr(r,"label"),qr(r,"itemStyle"),qr(r,"controlStyle",!0);var i=r.data;Ze(i)&&ne(i,function(a){ht(a)&&(qr(a,"label"),qr(a,"itemStyle"))})}),Xa(Ms(n.toolbox),function(r){qr(r,"iconStyle"),Xa(r.feature,function(i){qr(i,"iconStyle")})}),tr(IN(n.axisPointer),"label"),tr(IN(n.tooltip).axisPointer,"label")}function mhe(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function yhe(n,e,t,r){for(var i=e.split(","),a=n,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];(r||a[i[s]]==null)&&(a[i[s]]=t)}function PN(n){n&&ne(bhe,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var bhe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],xhe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],v_=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function xp(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<v_.length;t++){var r=v_[t][1],i=v_[t][0];e[r]!=null&&(e[i]=e[r])}}function DN(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function $N(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function _he(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function jV(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&jV(n[t].children,e)}function qV(n,e){ghe(n,e),n.series=rr(n.series),ne(n.series,function(t){if(ht(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),DN(t.label);var i=t.data;if(i&&!na(i))for(var a=0;a<i.length;a++)DN(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var o=mhe(t,"pointer.color");o!=null&&yhe(t,"itemStyle.color",o)}else if(r==="bar"){xp(t),xp(t.backgroundStyle),xp(t.emphasis);var i=t.data;if(i&&!na(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(xp(i[a]),xp(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=t.highlightPolicy;s&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=s)),$N(t),jV(t.data,$N)}else r==="graph"||r==="sankey"?_he(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&St(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),PN(t)}}),n.dataRange&&(n.visualMap=n.dataRange),ne(xhe,function(t){var r=n[t];r&&(Ze(r)||(r=[r]),ne(r,function(i){PN(i)}))})}function whe(n){var e=Tt();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(She)}function She(n){ne(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,u=e.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(l,c,f){var h=o.get(e.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=o.getRawIndex(f):d=o.get(e.stackedByDimension,f);for(var g=NaN,m=t-1;m>=0;m--){var y=n[m];if(s||(p=y.data.rawIndexOf(y.stackedByDimension,d)),p>=0){var b=y.data.getByRawIndex(y.stackResultDimension,p);if(u==="all"||u==="positive"&&b>0||u==="negative"&&b<0||u==="samesign"&&h>=0&&b>0||u==="samesign"&&h<=0&&b<0){h=Bue(h,b),g=b;break}}}return r[0]=h,r[1]=g,r})})}var hb=function(){function n(e){this.data=e.data||(e.sourceFormat===ys?{}:[]),this.sourceFormat=e.sourceFormat||FV,this.seriesLayoutBy=e.seriesLayoutBy||rs,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&zV(this,r)===$r.Must&&(i.type="ordinal")}}return n}();function F2(n){return n instanceof hb}function MS(n,e,t){t=t||XV(n);var r=e.seriesLayoutBy,i=The(n,t,r,e.sourceHeader,e.dimensions),a=new hb({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Pt(e)});return a}function V2(n){return new hb({data:n,sourceFormat:na(n)?rl:Fa})}function Che(n){return new hb({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Pt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function XV(n){var e=FV;if(na(n))e=rl;else if(Ze(n)){n.length===0&&(e=mi);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(Ze(i)){e=mi;break}else if(ht(i)){e=Va;break}}}}else if(ht(n)){for(var a in n)if(nu(n,a)&&gi(n[a])){e=ys;break}}return e}function The(n,e,t,r,i){var a,o;if(!n)return{dimensionsDefine:NN(i),startIndex:o,dimensionsDetectedCount:a};if(e===mi){var s=n;r==="auto"||r==null?ON(function(l){l!=null&&l!=="-"&&(lt(l)?o==null&&(o=1):o=0)},t,s,10):o=dn(r)?r:r?1:0,!i&&o===1&&(i=[],ON(function(l,c){i[c]=l!=null?l+"":""},t,s,1/0)),a=i?i.length:t===Pd?s.length:s[0]?s[0].length:null}else if(e===Va)i||(i=Ehe(n));else if(e===ys)i||(i=[],ne(n,function(l,c){i.push(c)}));else if(e===Fa){var u=Cg(n[0]);a=Ze(u)&&u.length||1}return{startIndex:o,dimensionsDefine:NN(i),dimensionsDetectedCount:a}}function Ehe(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t){var r=[];return ne(t,function(i,a){r.push(a)}),r}}function NN(n){if(n){var e=Tt();return nt(n,function(t,r){t=ht(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function ON(n,e,t,r){if(e===Pd)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function KV(n){var e=n.sourceFormat;return e===Va||e===ys}var lc,cc,fc,LN,MN,YV=function(){function n(e,t){var r=F2(e)?e:V2(e);this._source=r;var i=this._data=r.data;r.sourceFormat===rl&&(this._offset=0,this._dimSize=t,this._data=i),MN(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;MN=function(o,s,u){var l=u.sourceFormat,c=u.seriesLayoutBy,f=u.startIndex,h=u.dimensionsDefine,d=LN[z2(l,c)];if(Ue(o,d),l===rl)o.getItem=t,o.count=i,o.fillStorage=r;else{var p=ZV(l,c);o.getItem=Tn(p,null,s,f,h);var g=QV(l,c);o.count=Tn(g,null,s,f,h)}};var t=function(o,s){o=o-this._offset,s=s||[];for(var u=this._data,l=this._dimSize,c=l*o,f=0;f<l;f++)s[f]=u[c+f];return s},r=function(o,s,u,l){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=l[h],p=d[0]==null?1/0:d[0],g=d[1]==null?-1/0:d[1],m=s-o,y=u[h],b=0;b<m;b++){var _=c[b*f+h];y[o+b]=_,_<p&&(p=_),_>g&&(g=_)}d[0]=p,d[1]=g}},i=function(){return this._data?this._data.length/this._dimSize:0};LN=(e={},e[mi+"_"+rs]={pure:!0,appendData:a},e[mi+"_"+Pd]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Va]={pure:!0,appendData:a},e[ys]={pure:!0,appendData:function(o){var s=this._data;ne(o,function(u,l){for(var c=s[l]||(s[l]=[]),f=0;f<(u||[]).length;f++)c.push(u[f])})}},e[Fa]={appendData:a},e[rl]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),n}(),BN=function(n,e,t,r){return n[r]},khe=(lc={},lc[mi+"_"+rs]=function(n,e,t,r){return n[r+e]},lc[mi+"_"+Pd]=function(n,e,t,r,i){r+=e;for(var a=i||[],o=n,s=0;s<o.length;s++){var u=o[s];a[s]=u?u[r]:null}return a},lc[Va]=BN,lc[ys]=function(n,e,t,r,i){for(var a=i||[],o=0;o<t.length;o++){var s=t[o].name,u=n[s];a[o]=u?u[r]:null}return a},lc[Fa]=BN,lc);function ZV(n,e){var t=khe[z2(n,e)];return t}var FN=function(n,e,t){return n.length},Ahe=(cc={},cc[mi+"_"+rs]=function(n,e,t){return Math.max(0,n.length-e)},cc[mi+"_"+Pd]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},cc[Va]=FN,cc[ys]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},cc[Fa]=FN,cc);function QV(n,e){var t=Ahe[z2(n,e)];return t}var g_=function(n,e,t){return n[e]},Rhe=(fc={},fc[mi]=g_,fc[Va]=function(n,e,t){return n[t]},fc[ys]=g_,fc[Fa]=function(n,e,t){var r=Cg(n);return r instanceof Array?r[e]:r},fc[rl]=g_,fc);function JV(n){var e=Rhe[n];return e}function z2(n,e){return n===mi?n+"_"+e:n}function ad(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var o=n.getDimensionIndex(t),s=i.getDimensionProperty(o);return JV(a)(r,o,s)}else{var u=r;return a===Fa&&(u=Cg(r)),u}}}}var Ihe=/\{@(.+?)\}/g,Phe=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),o=r.getName(e),s=r.getRawDataItem(e),u=r.getItemVisual(e,"style"),l=u&&u[r.getItemVisual(e,"drawType")||"fill"],c=u&&u.stroke,f=this.mainType,h=f==="series",d=r.userOutput&&r.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:a,data:s,dataType:t,value:i,color:l,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,o){t=t||"normal";var s=this.getData(r),u=this.getDataParams(e,r);if(o&&(u.value=o.interpolatedValue),i!=null&&Ze(u.value)&&(u.value=u.value[i]),!a){var l=s.getItemModel(e);a=l.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Et(a))return u.status=t,u.dimensionIndex=i,a(u);if(lt(a)){var c=LV(a,u);return c.replace(Ihe,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var g=ad(s,e,p);if(o&&Ze(o.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(g=o.interpolatedValue[m])}return g!=null?g+"":""})}},n.prototype.getRawValue=function(e,t){return ad(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function VN(n){var e,t;return ht(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function mv(n){return new Dhe(n)}var Dhe=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,u=c(e&&e.modBy),l=e&&e.modDataCount||0;(o!==u||s!==l)&&(a="reset");function c(b){return!(b>=1)&&(b=1),b}var f;(this._dirty||a==="reset")&&(this._dirty=!1,f=this._doReset(r)),this._modBy=u,this._modDataCount=l;var h=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(f||d<p)){var g=this._progress;if(Ze(g))for(var m=0;m<g.length;m++)this._doProgress(g[m],d,p,u,l);else this._doProgress(g,d,p,u,l)}this._dueIndex=p;var y=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=y}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){zN.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:zN.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Ze(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),zN=function(){var n,e,t,r,i,a={reset:function(u,l,c,f){e=u,n=l,t=c,r=f,i=Math.ceil(r/t),a.next=t>1&&r>0?s:o}};return a;function o(){return e<n?e++:null}function s(){var u=e%i*t+Math.ceil(e/i),l=e>=n?null:u<r?u:e;return e++,l}}();function s0(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!dn(n)&&n!=null&&n!=="-"&&(n=+ru(n)),n==null||n===""?NaN:+n)}var $he=Tt({number:function(n){return parseFloat(n)},time:function(n){return+ru(n)},trim:function(n){return lt(n)?Xo(n):n}});function e6(n){return $he.get(n)}var t6={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},Nhe=function(){function n(e,t){if(!dn(t)){var r="";en(r)}this._opFn=t6[e],this._rvalFloat=cl(t)}return n.prototype.evaluate=function(e){return dn(e)?this._opFn(e,this._rvalFloat):this._opFn(cl(e),this._rvalFloat)},n}(),n6=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=dn(e)?e:cl(e),i=dn(t)?t:cl(t),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=lt(e),u=lt(t);s&&(r=u?e:0),u&&(i=s?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),Ohe=function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=cl(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=cl(e)===this._rvalFloat)}return this._isEQ?t:!t},n}();function Lhe(n,e){return n==="eq"||n==="ne"?new Ohe(n==="eq",e):nu(t6,n)?new Nhe(n,e):null}var Mhe=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return s0(e,t)},n}();function Bhe(n,e){var t=new Mhe,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,o="";n.seriesLayoutBy!==rs&&en(o);var s=[],u={},l=n.dimensionsDefine;if(l)ne(l,function(g,m){var y=g.name,b={index:m,name:y,displayName:g.displayName};if(s.push(b),y!=null){var _="";nu(u,y)&&en(_),u[y]=b}});else for(var c=0;c<n.dimensionsDetectedCount;c++)s.push({index:c});var f=ZV(i,rs);e.__isBuiltIn&&(t.getRawDataItem=function(g){return f(r,a,s,g)},t.getRawData=Tn(Fhe,null,n)),t.cloneRawData=Tn(Vhe,null,n);var h=QV(i,rs);t.count=Tn(h,null,r,a,s);var d=JV(i);t.retrieveValue=function(g,m){var y=f(r,a,s,g);return p(y,m)};var p=t.retrieveValueFromItem=function(g,m){if(g!=null){var y=s[m];if(y)return d(g,m,y.name)}};return t.getDimensionInfo=Tn(zhe,null,s,u),t.cloneAllDimensionInfo=Tn(Uhe,null,s),t}function Fhe(n){var e=n.sourceFormat;if(!U2(e)){var t="";en(t)}return n.data}function Vhe(n){var e=n.sourceFormat,t=n.data;if(!U2(e)){var r="";en(r)}if(e===mi){for(var i=[],a=0,o=t.length;a<o;a++)i.push(t[a].slice());return i}else if(e===Va){for(var i=[],a=0,o=t.length;a<o;a++)i.push(Ue({},t[a]));return i}}function zhe(n,e,t){if(t!=null){if(dn(t)||!isNaN(t)&&!nu(e,t))return n[t];if(nu(e,t))return e[t]}}function Uhe(n){return Pt(n)}var r6=Tt();function Whe(n){n=Pt(n);var e=n.type,t="";e||en(t);var r=e.split(":");r.length!==2&&en(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,r6.set(e,n)}function Hhe(n,e,t){var r=rr(n),i=r.length,a="";i||en(a);for(var o=0,s=i;o<s;o++){var u=r[o];e=Ghe(u,e),o!==s-1&&(e.length=Math.max(e.length,1))}return e}function Ghe(n,e,t,r){var i="";e.length||en(i),ht(n)||en(i);var a=n.type,o=r6.get(a);o||en(i);var s=nt(e,function(l){return Bhe(l,o)}),u=rr(o.transform({upstream:s[0],upstreamList:s,config:Pt(n.config)}));return nt(u,function(l,c){var f="";ht(l)||en(f),l.data||en(f);var h=XV(l.data);U2(h)||en(f);var d,p=e[0];if(p&&c===0&&!l.dimensions){var g=p.startIndex;g&&(l.data=p.data.slice(0,g).concat(l.data)),d={seriesLayoutBy:rs,sourceHeader:g,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:rs,sourceHeader:0,dimensions:l.dimensions};return MS(l.data,d,null)})}function U2(n){return n===mi||n===Va}var db="undefined",jhe=typeof Uint32Array===db?Array:Uint32Array,qhe=typeof Uint16Array===db?Array:Uint16Array,i6=typeof Int32Array===db?Array:Int32Array,UN=typeof Float64Array===db?Array:Float64Array,a6={float:UN,int:i6,ordinal:Array,number:Array,time:UN},m_;function _p(n){return n>65535?jhe:qhe}function th(){return[1/0,-1/0]}function Xhe(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function WN(n,e,t,r,i){var a=a6[t||"float"];if(i){var o=n[e],s=o&&o.length;if(s!==r){for(var u=new a(r),l=0;l<s;l++)u[l]=o[l];n[e]=u}}else n[e]=new a(r)}var BS=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Tt()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=m_[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],KV(i),this._dimensions=nt(t,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new a6[t||"float"](this._rawCount),this._rawExtent[a]=th(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[e]=th());for(var u=a[e],l=o;l<s;l++){var c=r[l]=t.parseAndCollect(r[l]);isNaN(c)||(u[0]=Math.min(c,u[0]),u[1]=Math.max(c,u[1]))}i.ordinalMeta=t,i.ordinalOffset=s,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),u=s+Math.max(e.length,t||0),l=0;l<a;l++){var c=i[l];WN(r,l,c.type,u,!0)}for(var f=[],h=s;h<u;h++)for(var d=h-s,p=0;p<a;p++){var c=i[p],g=m_.arrayRows.call(this,e[d]||f,c.property,d,p);r[p][h]=g;var m=o[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}return this._rawCount=this._count=u,{start:s,end:u}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,u=this._rawExtent,l=nt(o,function(b){return b.property}),c=0;c<s;c++){var f=o[c];u[c]||(u[c]=th()),WN(a,c,f.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,u);else for(var h=[],d=e;d<t;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var g=a[p],m=this._dimValueGetter(h,l[p],d,p);g[d]=m;var y=u[p];m<y[0]&&(y[0]=m),m>y[1]&&(y[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var o=this.get(e,i);isNaN(o)||(r+=o)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(t[o]<e)i=o+1;else if(t[o]>e)a=o-1;else return o}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,u=-1,l=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=t-a[h],p=Math.abs(d);p<=r&&((p<s||p===s&&d>=0&&u<0)&&(s=p,u=d,l=0),d===u&&(o[l++]=c))}return o.length=l,o},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=_p(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=_p(r._rawCount),o=new a(i),s=[],u=e.length,l=0,c=e[0],f=r._chunks,h=0;h<i;h++){var d=void 0,p=r.getRawIndex(h);if(u===0)d=t(h);else if(u===1){var g=f[c][p];d=t(g,h)}else{for(var m=0;m<u;m++)s[m]=f[e[m]][p];s[m]=h,d=t.apply(null,s)}d&&(o[l++]=p)}return l<i&&(r._indices=o),r._count=l,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=zn(e),a=i.length;if(!a)return this;var o=t.count(),s=_p(t._rawCount),u=new s(o),l=0,c=i[0],f=e[c][0],h=e[c][1],d=t._chunks,p=!1;if(!t._indices){var g=0;if(a===1){for(var m=d[i[0]],y=0;y<r;y++){var b=m[y];(b>=f&&b<=h||isNaN(b))&&(u[l++]=g),g++}p=!0}else if(a===2){for(var m=d[i[0]],_=d[i[1]],w=e[i[1]][0],T=e[i[1]][1],y=0;y<r;y++){var b=m[y],E=_[y];(b>=f&&b<=h||isNaN(b))&&(E>=w&&E<=T||isNaN(E))&&(u[l++]=g),g++}p=!0}}if(!p)if(a===1)for(var y=0;y<o;y++){var A=t.getRawIndex(y),b=d[i[0]][A];(b>=f&&b<=h||isNaN(b))&&(u[l++]=A)}else for(var y=0;y<o;y++){for(var I=!0,A=t.getRawIndex(y),$=0;$<a;$++){var D=i[$],b=d[D][A];(b<e[D][0]||b>e[D][1])&&(I=!1)}I&&(u[l++]=t.getRawIndex(y))}return l<o&&(t._indices=u),t._count=l,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],o=t.length,s=e.count(),u=[],l=e._rawExtent,c=0;c<t.length;c++)l[t[c]]=th();for(var f=0;f<s;f++){for(var h=e.getRawIndex(f),d=0;d<o;d++)u[d]=i[t[d]][h];u[o]=f;var p=r&&r.apply(null,u);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var g=t[c],m=p[c],y=l[g],b=i[g];b&&(b[h]=m),m<y[0]&&(y[0]=m),m>y[1]&&(y[1]=m)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],o=this.count(),s=0,u=Math.floor(1/t),l=this.getRawIndex(0),c,f,h,d=new(_p(this._rawCount))(Math.min((Math.ceil(o/u)+2)*2,o));d[s++]=l;for(var p=1;p<o-1;p+=u){for(var g=Math.min(p+u,o-1),m=Math.min(p+u*2,o),y=(m+g)/2,b=0,_=g;_<m;_++){var w=this.getRawIndex(_),T=a[w];isNaN(T)||(b+=T)}b/=m-g;var E=p,A=Math.min(p+u,o),I=p-1,$=a[l];c=-1,h=E;for(var D=-1,N=0,_=E;_<A;_++){var w=this.getRawIndex(_),T=a[w];if(isNaN(T)){N++,D<0&&(D=w);continue}f=Math.abs((I-y)*(T-$)-(I-_)*(b-$)),f>c&&(c=f,h=w)}N>0&&N<A-E&&(d[s++]=Math.min(D,h),h=Math.max(D,h)),d[s++]=h,l=h}return d[s++]=this.getRawIndex(o-1),r._count=s,r._indices=d,r.getRawIndex=this._getRawIdx,r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),o=a._chunks,s=[],u=Math.floor(1/t),l=o[e],c=this.count(),f=a._rawExtent[e]=th(),h=new(_p(this._rawCount))(Math.ceil(c/u)),d=0,p=0;p<c;p+=u){u>c-p&&(u=c-p,s.length=u);for(var g=0;g<u;g++){var m=this.getRawIndex(p+g);s[g]=l[m]}var y=r(s),b=this.getRawIndex(Math.min(p+i(s,y)||0,c-1));l[b]=y,y<f[0]&&(f[0]=y),y>f[1]&&(f[1]=y),h[d++]=b}return a._count=d,a._indices=h,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][s],a);break;case 2:t(i[e[0]][s],i[e[1]][s],a);break;default:for(var u=0,l=[];u<r;u++)l[u]=i[e[u]][s];l[u]=a,t.apply(null,l)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=th();if(!t)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[e].slice();if(o=this._extent[e],o)return o.slice();o=r;for(var s=o[0],u=o[1],l=0;l<i;l++){var c=this.getRawIndex(l),f=t[c];f<s&&(s=f),f>u&&(u=f)}return o=[s,u],this._extent[e]=o,o},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&sl(e,function(s,u){return s[u]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?Xhe(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Pt(this._extent),e._rawExtent=Pt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return s0(t[a],this._dimensions[a])}m_={arrayRows:e,objectRows:function(t,r,i,a){return s0(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var o=t&&(t.value==null?t:t.value);return s0(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),o6=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(Gm(e)){var o=e,s=void 0,u=void 0,l=void 0;if(r){var c=t[0];c.prepareSource(),l=c.getSource(),s=l.data,u=l.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),u=na(s)?rl:Fa,a=[];var f=this._getSourceMetaRawOption()||{},h=l&&l.metaRawOption||{},d=Gt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Gt(f.sourceHeader,h.sourceHeader),g=Gt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||g;i=m?[MS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:g},u)]:[]}else{var y=e;if(r){var b=this._applyTransform(t);i=b.sourceList,a=b.upstreamSignList}else{var _=y.get("source",!0);i=[MS(_,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&GN(a)}var o,s=[],u=[];return ne(e,function(l){l.prepareSource();var c=l.getSource(i||0),f="";i!=null&&!c&&GN(f),s.push(c),u.push(l._getVersionSign())}),r?o=Hhe(r,s,{datasetIndex:t.componentIndex}):i!=null&&(o=[Che(s[0])]),{sourceList:o,upstreamSignList:u}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var u=this._getUpstreamSourceManagers()[0];Gm(this._sourceHost)&&u?s=u._innerGetDataStore(e,t,r):(s=new BS,s.initData(new YV(t,e.length),e)),o[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Gm(e)){var t=L2(e);return t?[t.getSourceManager()]:[]}else return nt(Yfe(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(Gm(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function HN(n){var e=n.option.transform;e&&T0(n.option.transform)}function Gm(n){return n.mainType==="series"}function GN(n){throw new Error(n)}var s6="line-height:1";function u6(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",o=n.fontSize||14,s=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+_a(r+"")+"px;color:"+_a(t)+";font-weight:"+_a(i+""),valueStyle:"font-size:"+_a(o+"")+"px;color:"+_a(a)+";font-weight:"+_a(s+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var Khe=[0,10,20,30],Yhe=["",`
`,`

`,`


`];function Gv(n,e){return e.type=n,e}function FS(n){return n.type==="section"}function l6(n){return FS(n)?Zhe:Qhe}function c6(n){if(FS(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return ne(n.blocks,function(i){var a=c6(i);a>=e&&(e=a+ +(r&&(!a||FS(i)&&!i.noHeader)))}),e}return 0}function Zhe(n,e,t,r){var i=e.noHeader,a=Jhe(c6(e)),o=[],s=e.blocks||[];cs(!s||Ze(s)),s=s||[];var u=n.orderMode;if(e.sortBlocks&&u){s=s.slice();var l={valueAsc:"asc",valueDesc:"desc"};if(nu(l,u)){var c=new n6(l[u],null);s.sort(function(p,g){return c.evaluate(p.sortParam,g.sortParam)})}else u==="seriesDesc"&&s.reverse()}ne(s,function(p,g){var m=e.valueFormatter,y=l6(p)(m?Ue(Ue({},n),{valueFormatter:m}):n,p,g>0?a.html:0,r);y!=null&&o.push(y)});var f=n.renderMode==="richText"?o.join(a.richText):VS(o.join(""),i?t:a.html);if(i)return f;var h=OS(e.header,"ordinal",n.useUTC),d=u6(r,n.renderMode).nameStyle;return n.renderMode==="richText"?f6(n,h,d)+a.richText+f:VS('<div style="'+d+";"+s6+';">'+_a(h)+"</div>"+f,t)}function Qhe(n,e,t,r){var i=n.renderMode,a=e.noName,o=e.noValue,s=!e.markerType,u=e.name,l=n.useUTC,c=e.valueFormatter||n.valueFormatter||function(w){return w=Ze(w)?w:[w],nt(w,function(T,E){return OS(T,Ze(d)?d[E]:d,l)})};if(!(a&&o)){var f=s?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),h=a?"":OS(u,"ordinal",l),d=e.valueType,p=o?[]:c(e.value),g=!s||!a,m=!s&&a,y=u6(r,i),b=y.nameStyle,_=y.valueStyle;return i==="richText"?(s?"":f)+(a?"":f6(n,h,b))+(o?"":nde(n,p,g,m,_)):VS((s?"":f)+(a?"":ede(h,!s,b))+(o?"":tde(p,g,m,_)),t)}}function jN(n,e,t,r,i,a){if(n){var o=l6(n),s={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return o(s,n,0,a)}}function Jhe(n){return{html:Khe[n],richText:Yhe[n]}}function VS(n,e){var t='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+s6+';">'+n+t+"</div>"}function ede(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+_a(n)+"</span>"}function tde(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=Ze(n)?n:[n],'<span style="'+a+";"+r+'">'+nt(n,function(o){return _a(o)}).join("&nbsp;&nbsp;")+"</span>"}function f6(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function nde(n,e,t,r,i){var a=[i],o=r?10:20;return t&&a.push({padding:[0,0,0,o],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Ze(e)?e.join("  "):e,a)}function rde(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return Kc(r)}function h6(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var y_=function(){function n(){this.richTextStyles={},this._nextStyleNameId=g5()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=Vfe({color:t,type:e,renderMode:r,markerId:i});return lt(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};Ze(t)?ne(t,function(a){return Ue(r,a)}):Ue(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function ide(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=e.getRawValue(t),u=Ze(s),l=rde(e,t),c,f,h,d;if(o>1||u&&!o){var p=ade(s,e,t,a,l);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(o){var g=i.getDimensionInfo(a[0]);d=c=ad(i,t,a[0]),f=g.type}else d=c=u?s[0]:s;var m=v2(e),y=m&&e.name||"",b=i.getName(t),_=r?y:b;return Gv("section",{header:y,noHeader:r||!m,sortParam:d,blocks:[Gv("nameValue",{markerType:"item",markerColor:l,name:_,noName:!Xo(_),value:c,valueType:f})].concat(h||[])})}function ade(n,e,t,r,i){var a=e.getData(),o=sl(n,function(f,h,d){var p=a.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],u=[],l=[];r.length?ne(r,function(f){c(ad(a,t,f),f)}):ne(n,c);function c(f,h){var d=a.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(o?l.push(Gv("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),u.push(d.type)))}return{inlineValues:s,inlineValueTypes:u,blocks:l}}var Du=Fn();function jm(n,e){return n.getName(e)||n.getId(e)}var u0="__universalTransitionEnabled",pb=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=mv({count:sde,reset:ude}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=Du(this).sourceManager=new o6(this);a.prepareSource();var o=this.getInitialData(t,i);XN(o,this),this.dataTask.context.data=o,Du(this).dataBeforeProcessed=o,qN(this),this._initSelectedMapFromData(o)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=Wv(this),a=i?fb(t):{},o=this.subType;bn.hasClass(o)&&(o+="Series"),Mt(t,r.getTheme().get(this.subType)),Mt(t,this.getDefaultOption()),wS(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&id(t,a,i)},e.prototype.mergeOption=function(t,r){t=Mt(this.option,t,!0),this.fillDataTextStyle(t.data);var i=Wv(this);i&&id(this.option,t,i);var a=Du(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(t,r);XN(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Du(this).dataBeforeProcessed=o,qN(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!na(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&wS(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=zS(this);if(r){var i=r.context.data;return t==null?i:i.getLinkedData(t)}else return Du(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=zS(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}Du(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Tt(t)},e.prototype.getSourceManager=function(){return Du(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Du(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return ide({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Lt.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,o=M2.prototype.getColorFromPalette.call(this,t,r,i);return o||(o=a.getColorFromPalette(t,r,i)),o},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<t.length;s++){var u=t[s],l=jm(o,u);i[l]=!1,this._selectedDataIndicesMap[l]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=zn(t),i=[],a=0;a<r.length;a++){var o=t[r[a]];o>=0&&i.push(o)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[jm(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[u0])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,o=this.option,s=o.selectedMode,u=r.length;if(!(!s||!u)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){ht(o.selectedMap)||(o.selectedMap={});for(var l=o.selectedMap,c=0;c<u;c++){var f=r[c],h=jm(t,f);l[h]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(f)}}else if(s==="single"||s===!0){var d=r[u-1],h=jm(t,d);o.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(a={},a[h]=t.getRawIndex(d),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return bn.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(bn);xo(pb,Phe);xo(pb,M2);C5(pb,bn);function qN(n){var e=n.name;v2(n)||(n.name=ode(n)||e)}function ode(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return ne(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function sde(n){return n.model.getRawData().count()}function ude(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),lde}function lde(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function XN(n,e){ne(cse(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,rn(cde,e))})}function cde(n,e){var t=zS(n);return t&&t.setOutputEnd((e||this).count()),e}function zS(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}const hl=pb;var W2=function(){function n(){this.group=new lr,this.uid=Rg("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();m2(W2);j1(W2);const ra=W2;function H2(){var n=Fn();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,o=t.large=!!(r&&r.large),s=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var d6=Fn(),fde=H2(),G2=function(){function n(){this.group=new lr,this.uid=Rg("viewChart"),this.renderTask=mv({plan:hde,reset:dde}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&YN(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&YN(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){rb(this.group,e)},n.markUpdateMethod=function(e,t){d6(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function KN(n,e,t){n&&IS(n)&&(e==="emphasis"?td:nd)(n,t)}function YN(n,e,t){var r=Xc(n,e),i=e&&e.highlightKey!=null?Sce(e.highlightKey):null;r!=null?ne(rr(r),function(a){KN(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){KN(a,t,i)})}m2(G2);j1(G2);function hde(n){return fde(n.model)}function dde(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,o=n.view,s=i&&d6(i).updateMethod,u=a?"incrementalPrepareRender":s&&o[s]?s:"render";return u!=="render"&&o[u](e,t,r,i),pde[u]}var pde={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const is=G2;var U0="\0__throttleOriginMethod",ZN="\0__throttleRate",QN="\0__throttleType";function j2(n,e,t){var r,i=0,a=0,o=null,s,u,l,c;e=e||0;function f(){a=new Date().getTime(),o=null,n.apply(u,l||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];r=new Date().getTime(),u=this,l=d;var g=c||e,m=c||t;c=null,s=r-(m?i:a)-g,clearTimeout(o),m?o=setTimeout(f,g):s>=0?f():o=setTimeout(f,-s),i=r};return h.clear=function(){o&&(clearTimeout(o),o=null)},h.debounceNextCall=function(d){c=d},h}function p6(n,e,t,r){var i=n[e];if(i){var a=i[U0]||i,o=i[QN],s=i[ZN];if(s!==t||o!==r){if(t==null||!r)return n[e]=a;i=n[e]=j2(a,t,r==="debounce"),i[U0]=a,i[QN]=r,i[ZN]=t}return i}}function US(n,e){var t=n[e];t&&t[U0]&&(t.clear&&t.clear(),n[e]=t[U0])}var JN=Fn(),eO={itemStyle:Bv(wV,!0),lineStyle:Bv(_V,!0)},vde={lineStyle:"stroke",itemStyle:"fill"};function v6(n,e){var t=n.visualStyleMapper||eO[e];return t||(console.warn("Unknown style type '"+e+"'."),eO.itemStyle)}function g6(n,e){var t=n.visualDrawType||vde[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var gde={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=v6(n,r),o=a(i),s=i.getShallow("decal");s&&(t.setVisual("decal",s),s.dirty=!0);var u=g6(n,r),l=o[u],c=Et(l)?l:null,f=o.fill==="auto"||o.stroke==="auto";if(!o[u]||c||f){var h=n.getColorFromPalette(n.name,null,e.getSeriesCount());o[u]||(o[u]=h,t.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||Et(o.fill)?h:o.fill,o.stroke=o.stroke==="auto"||Et(o.stroke)?h:o.stroke}if(t.setVisual("style",o),t.setVisual("drawType",u),!e.isSeriesFiltered(n)&&c)return t.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var g=n.getDataParams(p),m=Ue({},o);m[u]=c(g),d.setItemVisual(p,"style",m)}}}},wp=new Tr,mde={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=v6(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(o,s){var u=o.getRawDataItem(s);if(u&&u[r]){wp.option=u[r];var l=i(wp),c=o.ensureUniqueItemVisual(s,"style");Ue(c,l),wp.option.decal&&(o.setItemVisual(s,"decal",wp.option.decal),wp.option.decal.dirty=!0),a in l&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},yde={performRawSeries:!0,overallReset:function(n){var e=Tt();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),JN(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),o=JN(t).scope,s=t.visualStyleAccessPath||"itemStyle",u=g6(t,s);a.each(function(l){var c=a.getRawIndex(l);i[c]=l}),r.each(function(l){var c=i[l],f=a.getItemVisual(c,"colorFromPalette");if(f){var h=a.ensureUniqueItemVisual(c,"style"),d=r.getName(l)||l+"",p=r.count();h[u]=t.getColorFromPalette(d,o,p)}})}})}},qm=Math.PI;function bde(n,e){e=e||{},St(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new lr,r=new er({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new br({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new er({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var o;return e.showSpinner&&(o=new C2({shape:{startAngle:-qm/2,endAngle:-qm/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:qm*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:qm*3/2}).delay(300).start("circularInOut"),t.add(o)),t.resize=function(){var s=i.getBoundingRect().width,u=e.showSpinner?e.spinnerRadius:0,l=(n.getWidth()-u*2-(e.showSpinner&&s?10:0)-s)/2-(e.showSpinner&&s?0:5+s/2)+(e.showSpinner?0:s/2)+(s?0:u),c=n.getHeight()/2;e.showSpinner&&o.setShape({cx:l,cy:c}),a.setShape({x:l-u,y:c-u,width:u*2,height:u*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var xde=function(){function n(e,t,r,i){this._stageTaskMap=Tt(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,u=s!=null?Math.ceil(s/o):null;return{step:o,modBy:u,modDataCount:s}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),o=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,s=e.get("large")&&a>=e.get("largeThreshold"),u=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:o,modDataCount:u,large:s}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=Tt();e.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;ne(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),o="";cs(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,o=a.context;o.model=t,o.ecModel=r,o.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,o=this;ne(e,function(u,l){if(!(i.visualType&&i.visualType!==u.visualType)){var c=o._stageTaskMap.get(u.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),o.updatePayload(h,r);var g=o.getPerformArgs(h,i.block);p.each(function(m){m.perform(g)}),h.perform(g)&&(a=!0)}else f&&f.each(function(m,y){s(i,m)&&m.dirty();var b=o.getPerformArgs(m,i.block);b.skip=!u.performRawSeries&&t.isSeriesFiltered(m.context.model),o.updatePayload(m,r),m.perform(b)&&(a=!0)})}});function s(u,l){return u.setDirty&&(!u.dirtyMap||u.dirtyMap.get(l.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,o=t.seriesTaskMap,s=t.seriesTaskMap=Tt(),u=e.seriesType,l=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):u?r.eachRawSeriesByType(u,c):l&&l(r,i).each(c);function c(f){var h=f.uid,d=s.set(h,o&&o.get(h)||mv({plan:Tde,reset:Ede,count:Ade}));d.context={model:f,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(f,d)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,o=t.overallTask=t.overallTask||mv({reset:_de});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var s=o.agentStubMap,u=o.agentStubMap=Tt(),l=e.seriesType,c=e.getTargetSeries,f=!0,h=!1,d="";cs(!e.createOnAllSeries,d),l?r.eachRawSeriesByType(l,p):c?c(r,i).each(p):(f=!1,ne(r.getSeries(),p));function p(g){var m=g.uid,y=u.set(m,s&&s.get(m)||(h=!0,mv({reset:wde,onDirty:Cde})));y.context={model:g,overallProgress:f},y.agent=o,y.__block=f,a._pipe(g,y)}h&&o.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return Et(e)&&(e={overallReset:e,seriesType:Rde(e)}),e.uid=Rg("stageHandler"),t&&(e.visualType=t),e},n}();function _de(n){n.overallReset(n.ecModel,n.api,n.payload)}function wde(n){return n.overallProgress&&Sde}function Sde(){this.agent.dirty(),this.getDownstream().dirty()}function Cde(){this.agent&&this.agent.dirty()}function Tde(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function Ede(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=rr(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?nt(e,function(t,r){return m6(r)}):kde}var kde=m6(0);function m6(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Ade(n){return n.data.count()}function Rde(n){W0=null;try{n(jv,y6)}catch{}return W0}var jv={},y6={},W0;b6(jv,HV);b6(y6,GV);jv.eachSeriesByType=jv.eachRawSeriesByType=function(n){W0=n};jv.eachComponent=function(n){n.mainType==="series"&&n.subType&&(W0=n.subType)};function b6(n,e){for(var t in e.prototype)n[t]=pi}const x6=xde;var tO=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Ide={color:tO,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],tO]};var li="#B9B8CE",nO="#100C2A",Xm=function(){return{axisLine:{lineStyle:{color:li}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},rO=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],_6={darkMode:!0,color:rO,backgroundColor:nO,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:li}},textStyle:{color:li},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:li}},dataZoom:{borderColor:"#71708A",textStyle:{color:li},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:li}},timeline:{lineStyle:{color:li},label:{color:li},controlStyle:{color:li,borderColor:li}},calendar:{itemStyle:{color:nO},dayLabel:{color:li},monthLabel:{color:li},yearLabel:{color:li}},timeAxis:Xm(),logAxis:Xm(),valueAxis:Xm(),categoryAxis:Xm(),line:{symbol:"circle"},graph:{color:rO},gauge:{title:{color:li},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:li},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};_6.categoryAxis.splitLine.show=!1;const Pde=_6;var Dde=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(lt(e)){var a=Ko(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};ne(e,function(u,l){for(var c=!1,f=0;f<o.length;f++){var h=o[f],d=l.lastIndexOf(h);if(d>0&&d===l.length-h.length){var p=l.slice(0,d);p!=="data"&&(t.mainType=p,t[h.toLowerCase()]=u,c=!0)}}s.hasOwnProperty(l)&&(r[l]=u,c=!0),c||(i[l]=u)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var u=t.cptQuery,l=t.dataQuery;return c(u,o,"mainType")&&c(u,o,"subType")&&c(u,o,"index","componentIndex")&&c(u,o,"name")&&c(u,o,"id")&&c(l,a,"name")&&c(l,a,"dataIndex")&&c(l,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(e,t.otherQuery,i,a));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),WS=["symbol","symbolSize","symbolRotate","symbolOffset"],iO=WS.concat(["symbolKeepAspect"]),$de={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<WS.length;o++){var s=WS[o],u=n.get(s);Et(u)?(a=!0,i[s]=u):r[s]=u}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(Ue({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var l=zn(i);function c(f,h){for(var d=n.getRawValue(h),p=n.getDataParams(h),g=0;g<l.length;g++){var m=l[g];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:a?c:null}}},Nde={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<iO.length;s++){var u=iO[s],l=o.getShallow(u,!0);l!=null&&i.setItemVisual(a,u,l)}}return{dataEach:t.hasItemOption?r:null}}};function Ode(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function Lde(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function Mde(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(o){a.push(o.seriesIndex)}),a}ne([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,o){i=Ue({},i),o.dispatchAction(Ue(i,{type:r[1],seriesIndex:t(a,i)}))})})}function nh(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,u=o.option.selectedMap,l=i.selected,c=0;c<l.length;c++)if(l[c].seriesIndex===s){var f=o.getData(),h=Xc(f,i.fromActionPayload);t.trigger(a,{type:a,seriesId:o.id,name:Ze(h)?f.getName(h[0]):f.getName(h),selected:lt(u)?u:Ue({},u)})}})}function Bde(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(nh("map","selectchanged",e,i,r),nh("pie","selectchanged",e,i,r)):r.fromAction==="select"?(nh("map","selected",e,i,r),nh("pie","selected",e,i,r)):r.fromAction==="unselect"&&(nh("map","unselected",e,i,r),nh("pie","unselected",e,i,r))})}function qp(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var Fde=Math.round(Math.random()*9),Vde=typeof Object.defineProperty=="function",zde=function(){function n(){this._id="__ec_inner_"+Fde++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return Vde?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}();const Ude=zde;var Wde=jt.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),Hde=jt.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),Gde=jt.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),u=r-a+o+s,l=Math.asin(s/o),c=Math.cos(l)*o,f=Math.sin(l),h=Math.cos(l),d=o*.6,p=o*.7;n.moveTo(t-c,u+s),n.arc(t,u,o,Math.PI-l,Math.PI*2+l),n.bezierCurveTo(t+c-f*d,u+s+h*d,t,r-p,t,r),n.bezierCurveTo(t,r-p,t-c+f*d,u+s+h*d,t-c,u+s),n.closePath()}}),jde=jt.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,o=r/3*2;n.moveTo(i,a),n.lineTo(i+o,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-o,a+t),n.lineTo(i,a),n.closePath()}}),qde={line:uo,rect:er,roundRect:er,square:er,circle:rd,diamond:Hde,pin:Gde,arrow:jde,triangle:Wde},Xde={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},HS={};ne(qde,function(n,e){HS[e]=new n});var Kde=jt.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=D0(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=HS[r];i||(r="rect",i=HS[r]),Xde[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function Yde(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function od(n,e,t,r,i,a,o){var s=n.indexOf("empty")===0;s&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var u;return n.indexOf("image://")===0?u=pV(n.slice(8),new Kt(e,t,r,i),o?"center":"cover"):n.indexOf("path://")===0?u=k2(n.slice(7),{},new Kt(e,t,r,i),o?"center":"cover"):u=new Kde({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),u.__isEmptyBrush=s,u.setColor=Yde,a&&u.setColor(a),u}function Zde(n){return Ze(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function w6(n,e){if(n!=null)return Ze(n)||(n=[n,n]),[tn(n[0],e[0])||0,tn(Gt(n[1],n[0]),e[1])||0]}function Ac(n){return isFinite(n)}function Qde(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,o=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,o=o*t.height+t.y),r=Ac(r)?r:0,i=Ac(i)?i:1,a=Ac(a)?a:0,o=Ac(o)?o:0;var s=n.createLinearGradient(r,a,i,o);return s}function Jde(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),o=e.x==null?.5:e.x,s=e.y==null?.5:e.y,u=e.r==null?.5:e.r;e.global||(o=o*r+t.x,s=s*i+t.y,u=u*a),o=Ac(o)?o:.5,s=Ac(s)?s:.5,u=u>=0&&Ac(u)?u:.5;var l=n.createRadialGradient(o,s,0,o,s,u);return l}function GS(n,e,t){for(var r=e.type==="radial"?Jde(n,e,t):Qde(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function epe(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function Km(n){return parseInt(n,10)}function Ym(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],o=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var s=document.defaultView.getComputedStyle(n);return(n[i]||Km(s[r])||Km(n.style[r]))-(Km(s[a])||0)-(Km(s[o])||0)|0}function tpe(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:dn(n)?[n]:Ze(n)?n:null}function S6(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&tpe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=nt(t,function(a){return a/i}),r/=i)}return[t,r]}var npe=new iu(!0);function H0(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function aO(n){return typeof n=="string"&&n!=="none"}function G0(n){var e=n.fill;return e!=null&&e!=="none"}function oO(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function sO(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function jS(n,e,t){var r=T5(e.image,e.__image,t);if(q1(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*fse),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function rpe(n,e,t,r){var i,a=H0(t),o=G0(t),s=t.strokePercent,u=s<1,l=!e.path;(!e.silent||u)&&l&&e.createPathProxy();var c=e.path||npe,f=e.__dirty;if(!r){var h=t.fill,d=t.stroke,p=o&&!!h.colorStops,g=a&&!!d.colorStops,m=o&&!!h.image,y=a&&!!d.image,b=void 0,_=void 0,w=void 0,T=void 0,E=void 0;(p||g)&&(E=e.getBoundingRect()),p&&(b=f?GS(n,h,E):e.__canvasFillGradient,e.__canvasFillGradient=b),g&&(_=f?GS(n,d,E):e.__canvasStrokeGradient,e.__canvasStrokeGradient=_),m&&(w=f||!e.__canvasFillPattern?jS(n,h,e):e.__canvasFillPattern,e.__canvasFillPattern=w),y&&(T=f||!e.__canvasStrokePattern?jS(n,d,e):e.__canvasStrokePattern,e.__canvasStrokePattern=w),p?n.fillStyle=b:m&&(w?n.fillStyle=w:o=!1),g?n.strokeStyle=_:y&&(T?n.strokeStyle=T:a=!1)}var A=e.getGlobalScale();c.setScale(A[0],A[1],e.segmentIgnoreThreshold);var I,$;n.setLineDash&&t.lineDash&&(i=S6(e),I=i[0],$=i[1]);var D=!0;(l||f&vh)&&(c.setDPR(n.dpr),u?c.setContext(null):(c.setContext(n),D=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),D&&c.rebuildPath(n,u?s:1),I&&(n.setLineDash(I),n.lineDashOffset=$),r||(t.strokeFirst?(a&&sO(n,t),o&&oO(n,t)):(o&&oO(n,t),a&&sO(n,t))),I&&n.setLineDash([])}function ipe(n,e,t){var r=e.__image=T5(t.image,e.__image,e,e.onload);if(!(!r||!q1(r))){var i=t.x||0,a=t.y||0,o=e.getWidth(),s=e.getHeight(),u=r.width/r.height;if(o==null&&s!=null?o=s*u:s==null&&o!=null?s=o/u:o==null&&s==null&&(o=r.width,s=r.height),t.sWidth&&t.sHeight){var l=t.sx||0,c=t.sy||0;n.drawImage(r,l,c,t.sWidth,t.sHeight,i,a,o,s)}else if(t.sx&&t.sy){var l=t.sx,c=t.sy,f=o-l,h=s-c;n.drawImage(r,l,c,f,h,i,a,o,s)}else n.drawImage(r,i,a,o,s)}}function ape(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||qc,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,o=void 0;n.setLineDash&&t.lineDash&&(r=S6(e),a=r[0],o=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=o),t.strokeFirst?(H0(t)&&n.strokeText(i,t.x,t.y),G0(t)&&n.fillText(i,t.x,t.y)):(G0(t)&&n.fillText(i,t.x,t.y),H0(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var uO=["shadowBlur","shadowOffsetX","shadowOffsetY"],lO=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function C6(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){$i(n,i),a=!0;var o=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(o)?Oc.opacity:o}(r||e.blend!==t.blend)&&(a||($i(n,i),a=!0),n.globalCompositeOperation=e.blend||Oc.blend);for(var s=0;s<uO.length;s++){var u=uO[s];(r||e[u]!==t[u])&&(a||($i(n,i),a=!0),n[u]=n.dpr*(e[u]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||($i(n,i),a=!0),n.shadowColor=e.shadowColor||Oc.shadowColor),a}function cO(n,e,t,r,i){var a=qv(e,i.inHover),o=r?null:t&&qv(t,i.inHover)||{};if(a===o)return!1;var s=C6(n,a,o,r,i);if((r||a.fill!==o.fill)&&(s||($i(n,i),s=!0),aO(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||($i(n,i),s=!0),aO(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||($i(n,i),s=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var u=a.lineWidth,l=u/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==l&&(s||($i(n,i),s=!0),n.lineWidth=l)}for(var c=0;c<lO.length;c++){var f=lO[c],h=f[0];(r||a[h]!==o[h])&&(s||($i(n,i),s=!0),n[h]=a[h]||f[1])}return s}function ope(n,e,t,r,i){return C6(n,qv(e,i.inHover),t&&qv(t,i.inHover),r,i)}function T6(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function spe(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),T6(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function upe(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var fO=1,hO=2,dO=3,pO=4;function lpe(n){var e=G0(n),t=H0(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function $i(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function qv(n,e){return e&&n.__hoverStyle||n.style}function E6(n,e){Rc(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Rc(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Qi,e.__isRendered=!1;return}var a=e.__clipPaths,o=t.prevElClipPaths,s=!1,u=!1;if((!o||epe(a,o))&&(o&&o.length&&($i(n,t),n.restore(),u=s=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&($i(n,t),n.save(),spe(a,n,t),s=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var l=t.prevEl;l||(u=s=!0);var c=e instanceof jt&&e.autoBatch&&lpe(e.style);s||upe(i,l.transform)?($i(n,t),T6(n,e)):c||$i(n,t);var f=qv(e,t.inHover);e instanceof jt?(t.lastDrawType!==fO&&(u=!0,t.lastDrawType=fO),cO(n,e,l,u,t),(!c||!t.batchFill&&!t.batchStroke)&&n.beginPath(),rpe(n,e,f,c),c&&(t.batchFill=f.fill||"",t.batchStroke=f.stroke||"")):e instanceof ES?(t.lastDrawType!==dO&&(u=!0,t.lastDrawType=dO),cO(n,e,l,u,t),ape(n,e,f)):e instanceof yf?(t.lastDrawType!==hO&&(u=!0,t.lastDrawType=hO),ope(n,e,l,u,t),ipe(n,e,f)):e.getTemporalDisplayables&&(t.lastDrawType!==pO&&(u=!0,t.lastDrawType=pO),cpe(n,e,t)),c&&r&&$i(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function cpe(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},o,s;for(o=e.getCursor(),s=r.length;o<s;o++){var u=r[o];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Rc(n,u,a,o===s-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),a.prevEl=u}for(var l=0,c=i.length;l<c;l++){var u=i[l];u.beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Rc(n,u,a,l===c-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),a.prevEl=u}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var b_=new Ude,vO=new _g(100),gO=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function qS(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&b_.delete(n);var a=b_.get(n);if(a)return a;var o=St(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return u(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/t,b_.set(n,s),n.dirty=!1,s;function u(l){for(var c=[t],f=!0,h=0;h<gO.length;++h){var d=o[gO[h]];if(d!=null&&!Ze(d)&&!lt(d)&&!dn(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var g=vO.get(p);g&&(i?l.svgElement=g:l.image=g)}var m=A6(o.dashArrayX),y=fpe(o.dashArrayY),b=k6(o.symbol),_=hpe(m),w=R6(y),T=!i&&mf.createCanvas(),E=i&&{tag:"g",attrs:{},key:"dcl",children:[]},A=$(),I;T&&(T.width=A.width*t,T.height=A.height*t,I=T.getContext("2d")),D(),f&&vO.put(p,T||E),l.image=T,l.svgElement=E,l.svgWidth=A.width,l.svgHeight=A.height;function $(){for(var N=1,z=0,F=_.length;z<F;++z)N=A$(N,_[z]);for(var G=1,z=0,F=b.length;z<F;++z)G=A$(G,b[z].length);N*=G;var U=w*_.length*b.length;return{width:Math.max(1,Math.min(N,o.maxTileWidth)),height:Math.max(1,Math.min(U,o.maxTileHeight))}}function D(){I&&(I.clearRect(0,0,T.width,T.height),o.backgroundColor&&(I.fillStyle=o.backgroundColor,I.fillRect(0,0,T.width,T.height)));for(var N=0,z=0;z<y.length;++z)N+=y[z];if(N<=0)return;for(var F=-w,G=0,U=0,H=0;F<A.height;){if(G%2===0){for(var X=U/2%b.length,Z=0,Q=0,le=0;Z<A.width*2;){for(var ge=0,z=0;z<m[H].length;++z)ge+=m[H][z];if(ge<=0)break;if(Q%2===0){var be=(1-o.symbolSize)*.5,ke=Z+m[H][Q]*be,Ae=F+y[G]*be,de=m[H][Q]*o.symbolSize,Ce=y[G]*o.symbolSize,ye=le/2%b[X].length;Ee(ke,Ae,de,Ce,b[X][ye])}Z+=m[H][Q],++le,++Q,Q===m[H].length&&(Q=0)}++H,H===m.length&&(H=0)}F+=y[G],++U,++G,G===y.length&&(G=0)}function Ee(De,Me,Ie,Be,et){var xt=i?1:t,Vt=od(et,De*xt,Me*xt,Ie*xt,Be*xt,o.color,o.symbolKeepAspect);if(i){var Xn=r.painter.renderOneToVNode(Vt);Xn&&E.children.push(Xn)}else E6(I,Vt)}}}}function k6(n){if(!n||n.length===0)return[["rect"]];if(lt(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!lt(n[t])){e=!1;break}if(e)return k6([n]);for(var r=[],t=0;t<n.length;++t)lt(n[t])?r.push([n[t]]):r.push(n[t]);return r}function A6(n){if(!n||n.length===0)return[[0,0]];if(dn(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!dn(n[r])){t=!1;break}if(t)return A6([n]);for(var i=[],r=0;r<n.length;++r)if(dn(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=nt(n[r],function(s){return Math.ceil(s)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function fpe(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(dn(n)){var e=Math.ceil(n);return[e,e]}var t=nt(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function hpe(n){return nt(n,function(e){return R6(e)})}function R6(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function dpe(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var u=r.ensureUniqueItemVisual(o,"style");u.decal=qS(s,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=qS(i,e)}}})}var ppe=new _o;const Ja=ppe;var I6={};function vpe(n,e){I6[n]=e}function gpe(n){return I6[n]}var mpe=1,ype=800,bpe=900,xpe=1e3,_pe=2e3,wpe=5e3,P6=1e3,Spe=1100,q2=2e3,D6=3e3,Cpe=4e3,vb=4500,Tpe=4600,Epe=5e3,kpe=6e3,$6=7e3,Ape={PROCESSOR:{FILTER:xpe,SERIES_FILTER:ype,STATISTIC:wpe},VISUAL:{LAYOUT:P6,PROGRESSIVE_LAYOUT:Spe,GLOBAL:q2,CHART:D6,POST_CHART_LAYOUT:Tpe,COMPONENT:Cpe,BRUSH:Epe,CHART_ITEM:vb,ARIA:kpe,DECAL:$6}},Gr="__flagInMainProcess",Ci="__pendingUpdate",x_="__needsUpdateStatus",mO=/^[a-zA-Z0-9_]+$/,__="__connectUpdateStatus",yO=0,Rpe=1,Ipe=2;function N6(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return L6(this,n,e)}}function O6(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return L6(this,n,e)}}function L6(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),_o.prototype[e].apply(n,t)}var M6=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(_o),B6=M6.prototype;B6.on=O6("on");B6.off=O6("off");var rh,w_,Zm,$u,S_,C_,T_,Sp,Cp,bO,xO,E_,_O,Qm,wO,F6,fa,SO,V6=function(n){rt(e,n);function e(t,r,i){var a=n.call(this,new Dde)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},lt(r)&&(r=z6[r]),a._dom=t;var o="canvas",s="auto",u=!1,l=a._zr=E$(t,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Gt(i.useDirtyRect,u),useCoarsePointer:Gt(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=j2(Tn(l.flush,l),17),r=Pt(r),r&&qV(r,!0),a._theme=r,a._locale=$fe(i.locale||CV),a._coordSysMgr=new B2;var c=a._api=wO(a);function f(h,d){return h.__prio-d.__prio}return Yy(q0,f),Yy(XS,f),a._scheduler=new x6(a,c,XS,q0),a._messageCenter=new M6,a._initEvents(),a.resize=Tn(a.resize,a),l.animation.on("frame",a._onframe,a),bO(l,a),xO(l,a),T0(a),a}return e.prototype._onframe=function(){if(!this._disposed){SO(this);var t=this._scheduler;if(this[Ci]){var r=this[Ci].silent;this[Gr]=!0;try{rh(this),$u.update.call(this,null,this[Ci].updateParams)}catch(u){throw this[Gr]=!1,this[Ci]=null,u}this._zr.flush(),this[Gr]=!1,this[Ci]=null,Sp.call(this,r),Cp.call(this,r)}else if(t.unfinished){var i=mpe,a=this._model,o=this._api;t.unfinished=!1;do{var s=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),C_(this,a),t.performVisualTasks(a),Qm(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[Gr]){if(this._disposed){this.id;return}var a,o,s;if(ht(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[Gr]=!0,!this._model||r){var u=new phe(this._api),l=this._theme,c=this._model=new HV;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,l,this._locale,u)}this._model.setOption(t,{replaceMerge:o},KS);var f={seriesTransition:s,optionChanged:!0};if(i)this[Ci]={silent:a,updateParams:f},this[Gr]=!1,this.getZr().wakeUp();else{try{rh(this),$u.update.call(this,null,f)}catch(h){throw this[Ci]=null,this[Gr]=!1,h}this._ssr||this._zr.flush(),this[Ci]=null,this[Gr]=!1,Sp.call(this,a),Cp.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Lt.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Lt.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return ne(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],o=this;ne(r,function(u){i.eachComponent({mainType:u},function(l){var c=o._componentsMap[l.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return ne(a,function(u){u.group.ignore=!1}),s},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(CO[i]){var u=s,l=s,c=-s,f=-s,h=[],d=t&&t.pixelRatio||this.getDevicePixelRatio();ne(bv,function(_,w){if(_.group===i){var T=r?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(Pt(t)),E=_.getDom().getBoundingClientRect();u=a(E.left,u),l=a(E.top,l),c=o(E.right,c),f=o(E.bottom,f),h.push({dom:T,left:E.left,top:E.top})}}),u*=d,l*=d,c*=d,f*=d;var p=c-u,g=f-l,m=mf.createCanvas(),y=E$(m,{renderer:r?"svg":"canvas"});if(y.resize({width:p,height:g}),r){var b="";return ne(h,function(_){var w=_.left-u,T=_.top-l;b+='<g transform="translate('+w+","+T+')">'+_.dom+"</g>"}),y.painter.getSvgRoot().innerHTML=b,t.connectedBackgroundColor&&y.painter.setBackgroundColor(t.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}else return t.connectedBackgroundColor&&y.add(new er({shape:{x:0,y:0,width:p,height:g},style:{fill:t.connectedBackgroundColor}})),ne(h,function(_){var w=new yf({style:{x:_.left*d-u,y:_.top*d-l,image:_.dom}});y.add(w)}),y.refreshImmediately(),m.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return S_(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return S_(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,o=hv(i,t);return ne(o,function(s,u){u.indexOf("Models")>=0&&ne(s,function(l){var c=l.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(u==="seriesModels"){var f=this._chartsMap[l.__viewId];f&&f.containPoint&&(a=a||f.containPoint(r,l))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=hv(i,t,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),u=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return u!=null?Ode(s,u,r):Lde(s,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;ne(Ppe,function(r){var i=function(a){var o=t.getModel(),s=a.target,u,l=r==="globalout";if(l?u={}:s&&qp(s,function(p){var g=an(p);if(g&&g.dataIndex!=null){var m=g.dataModel||o.getSeriesByIndex(g.seriesIndex);return u=m&&m.getDataParams(g.dataIndex,g.dataType)||{},!0}else if(g.eventData)return u=Ue({},g.eventData),!0},!0),u){var c=u.componentType,f=u.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=u.seriesIndex);var h=c&&f!=null&&o.getComponent(c,f),d=h&&t[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];u.event=a,u.type=r,t._$eventProcessor.eventInfo={targetEl:s,packedEvent:u,model:h,view:d},t.trigger(r,u)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),ne(yv,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),ne(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),Bde(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&_5(this.getDom(),K2,"");var r=this,i=r._api,a=r._model;ne(r._componentsViews,function(o){o.dispose(a,i)}),ne(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete bv[r.id]},e.prototype.resize=function(t){if(!this[Gr]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[Ci]&&(a==null&&(a=this[Ci].silent),i=!0,this[Ci]=null),this[Gr]=!0;try{i&&rh(this),$u.update.call(this,{type:"resize",animation:Ue({duration:0},t&&t.animation)})}catch(o){throw this[Gr]=!1,o}this[Gr]=!1,Sp.call(this,a),Cp.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(ht(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!YS[t]){var i=YS[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Ue({},t);return r.type=yv[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(ht(r)||(r={silent:!!r}),!!j0[t.type]&&this._model){if(this[Gr]){this._pendingActions.push(t);return}var i=r.silent;T_.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&Lt.browser.weChat&&this._throttledZrFlush(),Sp.call(this,i),Cp.call(this,i)}},e.prototype.updateLabelLayout=function(){Ja.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){rh=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),w_(f,!0),w_(f,!1),h.plan()},w_=function(f,h){for(var d=f._model,p=f._scheduler,g=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,y=f._zr,b=f._api,_=0;_<g.length;_++)g[_].__alive=!1;h?d.eachComponent(function(E,A){E!=="series"&&w(A)}):d.eachSeries(w);function w(E){var A=E.__requireNewView;E.__requireNewView=!1;var I="_ec_"+E.id+"_"+E.type,$=!A&&m[I];if(!$){var D=Ko(E.type),N=h?ra.getClass(D.main,D.sub):is.getClass(D.sub);$=new N,$.init(d,b),m[I]=$,g.push($),y.add($.group)}E.__viewId=$.__id=I,$.__alive=!0,$.__model=E,$.group.__ecComponentInfo={mainType:E.mainType,index:E.componentIndex},!h&&p.prepareView($,E,d,b)}for(var _=0;_<g.length;){var T=g[_];T.__alive?_++:(!h&&T.renderTask.dispose(),y.remove(T.group),T.dispose(d,b),g.splice(_,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Zm=function(f,h,d,p,g){var m=f._model;if(m.setUpdatePayload(d),!p){ne([].concat(f._componentsViews).concat(f._chartsViews),T);return}var y={};y[p+"Id"]=d[p+"Id"],y[p+"Index"]=d[p+"Index"],y[p+"Name"]=d[p+"Name"];var b={mainType:p,query:y};g&&(b.subType=g);var _=d.excludeSeriesId,w;_!=null&&(w=Tt(),ne(rr(_),function(E){var A=ns(E,null);A!=null&&w.set(A,!0)})),m&&m.eachComponent(b,function(E){var A=w&&w.get(E.id)!=null;if(!A)if(rN(d))if(E instanceof hl)d.type===Lc&&!d.notBlur&&!E.get(["emphasis","disabled"])&&vce(E,d,f._api);else{var I=_2(E.mainType,E.componentIndex,d.name,f._api),$=I.focusSelf,D=I.dispatchers;d.type===Lc&&$&&!d.notBlur&&AS(E.mainType,E.componentIndex,f._api),D&&ne(D,function(N){d.type===Lc?td(N):nd(N)})}else PS(d)&&E instanceof hl&&(yce(E,d,f._api),tN(E),fa(f))},f),m&&m.eachComponent(b,function(E){var A=w&&w.get(E.id)!=null;A||T(f[p==="series"?"_chartsMap":"_componentsMap"][E.__viewId])},f);function T(E){E&&E.__alive&&E[h]&&E[h](E.__model,m,f._api,d)}},$u={prepareAndUpdate:function(f){rh(this),$u.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,g=this._zr,m=this._coordSysMgr,y=this._scheduler;if(d){d.setUpdatePayload(f),y.restoreData(d,f),y.performSeriesTasks(d),m.create(d,p),y.performDataProcessorTasks(d,f),C_(this,d),m.update(d,p),t(d),y.performVisualTasks(d,f),E_(this,d,p,f,h);var b=d.get("backgroundColor")||"transparent",_=d.get("darkMode");g.setBackgroundColor(b),_!=null&&_!=="auto"&&g.setDarkMode(_),Ja.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(d){d.setUpdatePayload(f);var g=[];d.eachComponent(function(y,b){if(y!=="series"){var _=h.getViewOfComponentModel(b);if(_&&_.__alive)if(_.updateTransform){var w=_.updateTransform(b,d,p,f);w&&w.update&&g.push(_)}else g.push(_)}});var m=Tt();d.eachSeries(function(y){var b=h._chartsMap[y.__viewId];if(b.updateTransform){var _=b.updateTransform(y,d,p,f);_&&_.update&&m.set(y.uid,1)}else m.set(y.uid,1)}),t(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),Qm(this,d,p,f,{},m),Ja.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;h&&(h.setUpdatePayload(f),is.markUpdateMethod(f,"updateView"),t(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),E_(this,h,this._api,f,{}),Ja.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;d&&(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),is.markUpdateMethod(f,"updateVisual"),t(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,g){if(p!=="series"){var m=h.getViewOfComponentModel(g);m&&m.__alive&&m.updateVisual(g,d,h._api,f)}}),d.eachSeries(function(p){var g=h._chartsMap[p.__viewId];g.updateVisual(p,d,h._api,f)}),Ja.trigger("afterupdate",d,this._api))},updateLayout:function(f){$u.update.call(this,f)}},S_=function(f,h,d,p){if(f._disposed){f.id;return}for(var g=f._model,m=f._coordSysMgr.getCoordinateSystems(),y,b=hv(g,d),_=0;_<m.length;_++){var w=m[_];if(w[h]&&(y=w[h](g,b,p))!=null)return y}},C_=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(g){p.updateStreamModes(g,d[g.__viewId])})},T_=function(f,h){var d=this,p=this.getModel(),g=f.type,m=f.escapeConnect,y=j0[g],b=y.actionInfo,_=(b.update||"update").split(":"),w=_.pop(),T=_[0]!=null&&Ko(_[0]);this[Gr]=!0;var E=[f],A=!1;f.batch&&(A=!0,E=nt(f.batch,function(G){return G=St(Ue({},G),f),G.batch=null,G}));var I=[],$,D=PS(f),N=rN(f);if(N&&j5(this._api),ne(E,function(G){if($=y.action(G,d._model,d._api),$=$||Ue({},G),$.type=b.event||$.type,I.push($),N){var U=g2(f),H=U.queryOptionMap,X=U.mainTypeSpecified,Z=X?H.keys()[0]:"series";Zm(d,w,G,Z),fa(d)}else D?(Zm(d,w,G,"series"),fa(d)):T&&Zm(d,w,G,T.main,T.sub)}),w!=="none"&&!N&&!D&&!T)try{this[Ci]?(rh(this),$u.update.call(this,f),this[Ci]=null):$u[w].call(this,f)}catch(G){throw this[Gr]=!1,G}if(A?$={type:b.event||g,escapeConnect:m,batch:I}:$=I[0],this[Gr]=!1,!h){var z=this._messageCenter;if(z.trigger($.type,$),D){var F={type:"selectchanged",escapeConnect:m,selected:bce(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};z.trigger(F.type,F)}}},Sp=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();T_.call(this,d,f)}},Cp=function(f){!f&&this.trigger("updated")},bO=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[Ci]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},xO=function(f,h){f.on("mouseover",function(d){var p=d.target,g=qp(p,IS);g&&(gce(g,d,h._api),fa(h))}).on("mouseout",function(d){var p=d.target,g=qp(p,IS);g&&(mce(g,d,h._api),fa(h))}).on("click",function(d){var p=d.target,g=qp(p,function(b){return an(b).dataIndex!=null},!0);if(g){var m=g.selected?"unselect":"select",y=an(g);h._api.dispatchAction({type:m,dataType:y.dataType,dataIndexInside:y.dataIndex,seriesIndex:y.seriesIndex,isFromClick:!0})}})};function t(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function r(f){var h=[],d=[],p=!1;if(f.eachComponent(function(b,_){var w=_.get("zlevel")||0,T=_.get("z")||0,E=_.getZLevelKey();p=p||!!E,(b==="series"?d:h).push({zlevel:w,z:T,idx:_.componentIndex,type:b,key:E})}),p){var g=h.concat(d),m,y;Yy(g,function(b,_){return b.zlevel===_.zlevel?b.z-_.z:b.zlevel-_.zlevel}),ne(g,function(b){var _=f.getComponent(b.type,b.idx),w=b.zlevel,T=b.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==y&&w++,y=T):y&&(w===m&&w++,y=""),m=w,_.setZLevel(w)})}}E_=function(f,h,d,p,g){r(h),_O(f,h,d,p,g),ne(f._chartsViews,function(m){m.__alive=!1}),Qm(f,h,d,p,g),ne(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},_O=function(f,h,d,p,g,m){ne(m||f._componentsViews,function(y){var b=y.__model;l(b,y),y.render(b,h,d,p),s(b,y),c(b,y)})},Qm=function(f,h,d,p,g,m){var y=f._scheduler;g=Ue(g||{},{updatedSeries:h.getSeries()}),Ja.trigger("series:beforeupdate",h,d,g);var b=!1;h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];w.__alive=!0;var T=w.renderTask;y.updatePayload(T,p),l(_,w),m&&m.get(_.uid)&&T.dirty(),T.perform(y.getPerformArgs(T))&&(b=!0),w.group.silent=!!_.get("silent"),o(_,w),tN(_)}),y.unfinished=b||y.unfinished,Ja.trigger("series:layoutlabels",h,d,g),Ja.trigger("series:transition",h,d,g),h.eachSeries(function(_){var w=f._chartsMap[_.__viewId];s(_,w),c(_,w)}),a(f,h),Ja.trigger("series:afterupdate",h,d,g)},fa=function(f){f[x_]=!0,f.getZr().wakeUp()},SO=function(f){f[x_]&&(f.getZr().storage.traverse(function(h){Mh(h)||i(h)}),f[x_]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var g=d[p];g==="emphasis"||g==="blur"||g==="select"||h.push(g)}f.selected&&f.states.select&&h.push("select"),f.hoverState===Y1&&f.states.emphasis?h.push("emphasis"):f.hoverState===K1&&f.states.blur&&h.push("blur"),f.useStates(h)}function a(f,h){var d=f._zr,p=d.storage,g=0;p.traverse(function(m){m.isGroup||g++}),g>h.get("hoverLayerThreshold")&&!Lt.node&&!Lt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var y=f._chartsMap[m.__viewId];y.__alive&&y.eachRendered(function(b){b.states.emphasis&&(b.states.emphasis.hoverLayer=!0)})}})}function o(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(g){return u(g,d,p,-1/0),!0})}}function u(f,h,d,p){var g=f.getTextContent(),m=f.getTextGuideLine(),y=f.isGroup;if(y)for(var b=f.childrenRef(),_=0;_<b.length;_++)p=Math.max(u(b[_],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(g&&(g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function l(f,h){h.eachRendered(function(d){if(!Mh(d)){var p=d.getTextContent(),g=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),g=d.get("duration"),m=g>0?{duration:g,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(y){if(y.states&&y.states.emphasis){if(Mh(y))return;if(y instanceof jt&&Cce(y),y.__dirty){var b=y.prevStates;b&&y.useStates(b)}if(p){y.stateTransition=m;var _=y.getTextContent(),w=y.getTextGuideLine();_&&(_.stateTransition=m),w&&(w.stateTransition=m)}y.__dirty&&i(y)}})}wO=function(f){return new(function(h){rt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var g=p.__ecComponentInfo;if(g!=null)return f._model.getComponent(g.mainType,g.index);p=p.parent}},d.prototype.enterEmphasis=function(p,g){td(p,g),fa(f)},d.prototype.leaveEmphasis=function(p,g){nd(p,g),fa(f)},d.prototype.enterBlur=function(p){pce(p),fa(f)},d.prototype.leaveBlur=function(p){U5(p),fa(f)},d.prototype.enterSelect=function(p){W5(p),fa(f)},d.prototype.leaveSelect=function(p){H5(p),fa(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(GV))(f)},F6=function(f){function h(d,p){for(var g=0;g<d.length;g++){var m=d[g];m[__]=p}}ne(yv,function(d,p){f._messageCenter.on(p,function(g){if(CO[f.group]&&f[__]!==yO){if(g&&g.escapeConnect)return;var m=f.makeActionFromEvent(g),y=[];ne(bv,function(b){b!==f&&b.group===f.group&&y.push(b)}),h(y,yO),ne(y,function(b){b[__]!==Rpe&&b.dispatchAction(m)}),h(y,Ipe)}})})}}(),e}(_o),X2=V6.prototype;X2.on=N6("on");X2.off=N6("off");X2.one=function(n,e,t){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var Ppe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var j0={},yv={},XS=[],KS=[],q0=[],z6={},YS={},bv={},CO={},Dpe=+new Date-0,K2="_echarts_instance_";function aVe(n,e,t){var r=!(t&&t.ssr);if(r){var i=$pe(n);if(i)return i}var a=new V6(n,e,t);return a.id="ec_"+Dpe++,bv[a.id]=a,r&&_5(n,K2,a.id),F6(a),Ja.trigger("afterinit",a),a}function $pe(n){return bv[tle(n,K2)]}function U6(n,e){z6[n]=e}function W6(n){Ht(KS,n)<0&&KS.push(n)}function H6(n,e){Z2(XS,n,e,_pe)}function Npe(n){Y2("afterinit",n)}function Ope(n){Y2("afterupdate",n)}function Y2(n,e){Ja.on(n,e)}function bs(n,e,t){Et(e)&&(t=e,e="");var r=ht(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!yv[e]&&(cs(mO.test(r)&&mO.test(e)),j0[r]||(j0[r]={action:t,actionInfo:n}),yv[e]=r)}function Lpe(n,e){B2.register(n,e)}function Mpe(n,e){Z2(q0,n,e,P6,"layout")}function xf(n,e){Z2(q0,n,e,D6,"visual")}var TO=[];function Z2(n,e,t,r,i){if((Et(e)||ht(e))&&(t=e,e=r),!(Ht(TO,t)>=0)){TO.push(t);var a=x6.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function G6(n,e){YS[n]=e}function Bpe(n,e,t){var r=gpe("registerMap");r&&r(n,e,t)}var Fpe=Whe;xf(q2,gde);xf(vb,mde);xf(vb,yde);xf(q2,$de);xf(vb,Nde);xf($6,dpe);W6(qV);H6(bpe,whe);G6("default",bde);bs({type:Lc,event:Lc,update:Lc},pi);bs({type:r0,event:r0,update:r0},pi);bs({type:dv,event:dv,update:dv},pi);bs({type:i0,event:i0,update:i0},pi);bs({type:pv,event:pv,update:pv},pi);U6("light",Ide);U6("dark",Pde);function Tp(n){return n==null?0:n.length||1}function EO(n){return n}var Vpe=function(){function n(e,t,r,i,a,o){this._old=e,this._new=t,this._oldKeyGetter=r||EO,this._newKeyGetter=i||EO,this.context=a,this._diffModeMultiple=o==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<e.length;o++){var s=i[o],u=r[s],l=Tp(u);if(l>1){var c=u.shift();u.length===1&&(r[s]=u[0]),this._update&&this._update(c,o)}else l===1?(r[s]=null,this._update&&this._update(u,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],o=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var u=a[s],l=r[u],c=i[u],f=Tp(l),h=Tp(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,l),i[u]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,l),i[u]=null;else if(f===1&&h===1)this._update&&this._update(c,l),i[u]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,l),i[u]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(l[d]);else this._remove&&this._remove(l)}this._performRestAdd(o,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],o=Tp(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,o=0;o<e.length;o++){var s="_ec_"+this[i](e[o],o);if(a||(r[o]=s),!!t){var u=t[s],l=Tp(u);l===0?(t[s]=o,a&&r.push(s)):l===1?t[s]=[u,o]:u.push(o)}}},n}();const Xv=Vpe;var zpe=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function Upe(n,e){var t={},r=t.encode={},i=Tt(),a=[],o=[],s={};ne(n.dimensions,function(h){var d=n.getDimensionInfo(h),p=d.coordDim;if(p){var g=d.coordDimIndex;k_(r,p)[g]=h,d.isExtraCoord||(i.set(p,1),Hpe(d.type)&&(a[0]=h),k_(s,p)[g]=n.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(h)}BV.each(function(m,y){var b=k_(r,y),_=d.otherDims[y];_!=null&&_!==!1&&(b[_]=d.name)})});var u=[],l={};i.each(function(h,d){var p=r[d];l[d]=p[0],u=u.concat(p)}),t.dataDimsOnCoord=u,t.dataDimIndicesOnCoord=nt(u,function(h){return n.getDimensionInfo(h).storeDimIndex}),t.encodeFirstDimNotExtra=l;var c=r.label;c&&c.length&&(a=c.slice());var f=r.tooltip;return f&&f.length?o=f.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,t.userOutput=new zpe(s,e),t}function k_(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function Wpe(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function Hpe(n){return!(n==="ordinal"||n==="time")}var Gpe=function(){function n(e){this.otherDims={},e!=null&&Ue(this,e)}return n}();const l0=Gpe;var jpe=Fn(),qpe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},j6=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=K6(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return Gt(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=KV(this.source),r=!Y6(e),i="",a=[],o=0,s=0;o<e;o++){var u=void 0,l=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===o)u=t?f.name:null,l=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(o);h&&(u=t?h.name:null,l=h.type)}a.push({property:u,type:l,ordinalMeta:c}),t&&u!=null&&(!f||!f.isCalculationCoord)&&(i+=r?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),i+="$",i+=qpe[l]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(t);o&&(i=o.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function q6(n){return n instanceof j6}function X6(n){for(var e=Tt(),t=0;t<(n||[]).length;t++){var r=n[t],i=ht(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function K6(n){var e=jpe(n);return e.dimNameMap||(e.dimNameMap=X6(n.dimensionsDefine))}function Y6(n){return n>30}var Ep=ht,Nu=nt,Xpe=typeof Int32Array>"u"?Array:Int32Array,Kpe="e\0\0",kO=-1,Ype=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Zpe=["_approximateExtent"],AO,Jm,kp,Ap,A_,ey,R_,Qpe=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;q6(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},o=[],s={},u=!1,l={},c=0;c<r.length;c++){var f=r[c],h=lt(f)?new l0({name:f}):f instanceof l0?f:new l0(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),a[d]=h,l[d]!=null&&(u=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(u),this.hostModel=t,this._invertedIndicesMap=s,this._dimOmitted){var g=this._dimIdxToName=Tt();ne(o,function(m){g.set(a[m].storeDimIndex,m)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(dn(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof BS&&(a=e),!a){var o=this.dimensions,s=F2(e)||gi(e)?new YV(e,o.length):e;a=new BS;var u=Nu(o,function(l){return{type:i._dimInfos[l].type,property:l}});a.initData(s,u,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Upe(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var s=i;s<a;s++){var u=s-i;this._nameList[s]=t[u],o&&R_(this,s)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==rl&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,u=s===Fa;if(u&&!i.pure)for(var l=[],c=e;c<t;c++){var f=i.getItem(c,l);if(!this.hasItemOption&&Uue(f)&&(this.hasItemOption=!0),f){var h=f.name;a[c]==null&&h!=null&&(a[c]=ns(h,null));var d=f.id;o[c]==null&&d!=null&&(o[c]=ns(d,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)R_(this,c);AO(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){Ep(e)?Ue(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=kp(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return Jm(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return Ze(e)?i.getValues(Nu(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r[t];return i==null||isNaN(i)?kO:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){Et(e)&&(r=t,t=e,e=[]);var i=r||this,a=Nu(Ap(e),this._getStoreDimIndex,this);this._store.each(a,i?Tn(t,i):t)},n.prototype.filterSelf=function(e,t,r){Et(e)&&(r=t,t=e,e=[]);var i=r||this,a=Nu(Ap(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Tn(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=zn(e);return ne(i,function(a){var o=t._getStoreDimIndex(a);r[o]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){Et(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,o=Nu(Ap(e),this._getStoreDimIndex,this),s=ey(this);return s._store=this._store.map(o,a?Tn(t,a):t),s},n.prototype.modify=function(e,t,r,i){var a=r||i||this,o=Nu(Ap(e),this._getStoreDimIndex,this);this._store.modify(o,a?Tn(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=ey(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.lttbDownSample=function(e,t){var r=ey(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Tr(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Xv(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return Jm(e,r)},function(r){return Jm(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},Ep(e)?Ue(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),Ze(a)?a=a.slice():Ep(a)&&(a=Ue({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,Ep(t)?Ue(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){Ep(e)?Ue(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Ue(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;ice(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){ne(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Nu(this.dimensions,this._getDimInfo,this),this.hostModel)),A_(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];Et(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(u2(arguments)))})},n.internalField=function(){AO=function(e){var t=e._invertedIndicesMap;ne(t,function(r,i){var a=e._dimInfos[i],o=a.ordinalMeta,s=e._store;if(o){r=t[i]=new Xpe(o.categories.length);for(var u=0;u<r.length;u++)r[u]=kO;for(var u=0;u<s.count();u++)r[s.get(a.storeDimIndex,u)]=u}})},kp=function(e,t,r){return ns(e._getCategory(t,r),null)},Jm=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=kp(e,e._idDimIdx,t)),r==null&&(r=Kpe+t),r},Ap=function(e){return Ze(e)||(e=e!=null?[e]:[]),e},ey=function(e){var t=new n(e._schema?e._schema:Nu(e.dimensions,e._getDimInfo,e),e.hostModel);return A_(t,e),t},A_=function(e,t){ne(Ype.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,ne(Zpe,function(r){e[r]=Pt(t[r])}),e._calculationInfo=Ue({},t._calculationInfo)},R_=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,o=e._idDimIdx,s=r[t],u=i[t];if(s==null&&a!=null&&(r[t]=s=kp(e,a,t)),u==null&&o!=null&&(i[t]=u=kp(e,o,t)),u==null&&s!=null){var l=e._nameRepeatCount,c=l[s]=(l[s]||0)+1;u=s,c>1&&(u+="__ec__"+c),i[t]=u}}}(),n}();const Z6=Qpe;function Q6(n,e){F2(n)||(n=V2(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=Tt(),a=[],o=eve(n,t,r,e.dimensionsCount),s=e.canOmitUnusedDimensions&&Y6(o),u=r===n.dimensionsDefine,l=u?K6(n):X6(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(n,o));for(var f=Tt(c),h=new i6(o),d=0;d<h.length;d++)h[d]=-1;function p($){var D=h[$];if(D<0){var N=r[$],z=ht(N)?N:{name:N},F=new l0,G=z.name;G!=null&&l.get(G)!=null&&(F.name=F.displayName=G),z.type!=null&&(F.type=z.type),z.displayName!=null&&(F.displayName=z.displayName);var U=a.length;return h[$]=U,F.storeDimIndex=$,a.push(F),F}return a[D]}if(!s)for(var d=0;d<o;d++)p(d);f.each(function($,D){var N=rr($).slice();if(N.length===1&&!lt(N[0])&&N[0]<0){f.set(D,!1);return}var z=f.set(D,[]);ne(N,function(F,G){var U=lt(F)?l.get(F):F;U!=null&&U<o&&(z[G]=U,m(p(U),D,G))})});var g=0;ne(t,function($){var D,N,z,F;if(lt($))D=$,F={};else{F=$,D=F.name;var G=F.ordinalMeta;F.ordinalMeta=null,F=Ue({},F),F.ordinalMeta=G,N=F.dimsDef,z=F.otherDims,F.name=F.coordDim=F.coordDimIndex=F.dimsDef=F.otherDims=null}var U=f.get(D);if(U!==!1){if(U=rr(U),!U.length)for(var H=0;H<(N&&N.length||1);H++){for(;g<o&&p(g).coordDim!=null;)g++;g<o&&U.push(g++)}ne(U,function(X,Z){var Q=p(X);if(u&&F.type!=null&&(Q.type=F.type),m(St(Q,F),D,Z),Q.name==null&&N){var le=N[Z];!ht(le)&&(le={name:le}),Q.name=Q.displayName=le.name,Q.defaultTooltip=le.defaultTooltip}z&&St(Q.otherDims,z)})}});function m($,D,N){BV.get(D)!=null?$.otherDims[D]=N:($.coordDim=D,$.coordDimIndex=N,i.set(D,!0))}var y=e.generateCoord,b=e.generateCoordCount,_=b!=null;b=y?b||1:0;var w=y||"value";function T($){$.name==null&&($.name=$.coordDim)}if(s)ne(a,function($){T($)}),a.sort(function($,D){return $.storeDimIndex-D.storeDimIndex});else for(var E=0;E<o;E++){var A=p(E),I=A.coordDim;I==null&&(A.coordDim=tve(w,i,_),A.coordDimIndex=0,(!y||b<=0)&&(A.isExtraCoord=!0),b--),T(A),A.type==null&&(zV(n,E)===$r.Must||A.isExtraCoord&&(A.otherDims.itemName!=null||A.otherDims.seriesName!=null))&&(A.type="ordinal")}return Jpe(a),new j6({source:n,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function Jpe(n){for(var e=Tt(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function eve(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return ne(e,function(a){var o;ht(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function tve(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var nve=function(){function n(e){this.coordSysDims=[],this.axisMap=Tt(),this.categoryAxisMap=Tt(),this.coordSysName=e}return n}();function rve(n){var e=n.get("coordinateSystem"),t=new nve(e),r=ive[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var ive={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",Nr).models[0],a=n.getReferringComponents("yAxis",Nr).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),ih(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),ih(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",Nr).models[0];e.coordSysDims=["single"],t.set("single",i),ih(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",Nr).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",o),ih(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),ih(o)&&(r.set("angle",o),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();ne(a.parallelAxisIndex,function(s,u){var l=i.getComponent("parallelAxis",s),c=o[u];t.set(c,l),ih(l)&&(r.set(c,l),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=u))})}};function ih(n){return n.get("type")==="category"}function ave(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,o,s;ove(e)?a=e:(o=e.schema,a=o.dimensions,s=e.store);var u=!!(n&&n.get("stack")),l,c,f,h;if(ne(a,function(b,_){lt(b)&&(a[_]=b={name:b}),u&&!b.isExtraCoord&&(!r&&!l&&b.ordinalMeta&&(l=b),!c&&b.type!=="ordinal"&&b.type!=="time"&&(!i||i===b.coordDim)&&(c=b))}),c&&!r&&!l&&(r=!0),c){f="__\0ecstackresult_"+n.id,h="__\0ecstackedover_"+n.id,l&&(l.createInvertedIndices=!0);var d=c.coordDim,p=c.type,g=0;ne(a,function(b){b.coordDim===d&&g++});var m={name:f,coordDim:d,coordDimIndex:g,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},y={name:h,coordDim:h,coordDimIndex:g+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(m.storeDimIndex=s.ensureCalculationDimension(h,p),y.storeDimIndex=s.ensureCalculationDimension(f,p)),o.appendCalculationDimension(m),o.appendCalculationDimension(y)):(a.push(m),a.push(y))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:r,stackedOverDimension:h,stackResultDimension:f}}function ove(n){return!q6(n.schema)}function Yc(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function sve(n,e){return Yc(n,e)?n.getCalculationInfo("stackResultDimension"):e}function uve(n,e){var t=n.get("coordinateSystem"),r=B2.get(t),i;return e&&e.coordSysDims&&(i=nt(e.coordSysDims,function(a){var o={name:a},s=e.axisMap.get(a);if(s){var u=s.get("type");o.type=Wpe(u)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function lve(n,e,t){var r,i;return t&&ne(n,function(a,o){var s=a.coordDim,u=t.categoryAxisMap.get(s);u&&(r==null&&(r=o),a.ordinalMeta=u.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function Q2(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=V2(n)):(i=r.getSource(),a=i.sourceFormat===Fa);var o=rve(e),s=uve(e,o),u=t.useEncodeDefaulter,l=Et(u)?u:u?rn(Xfe,s,e):null,c={coordDimensions:s,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:l,canOmitUnusedDimensions:!a},f=Q6(i,c),h=lve(f.dimensions,t.createInvertedIndices,o),d=a?null:r.getSharedDataStore(f),p=ave(e,{schema:f,store:d}),g=new Z6(f,e);g.setCalculationInfo(p);var m=h!=null&&cve(i)?function(y,b,_,w){return w===h?_:this.defaultDimValueGetter(y,b,_,w)}:null;return g.hasItemOption=!1,g.initData(a?i:d,null,m),g}function cve(n){if(n.sourceFormat===Fa){var e=fve(n.data||[]);return!Ze(Cg(e))}}function fve(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}var J6=function(){function n(e){this._setting=e||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},n.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t)},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n}();j1(J6);const du=J6;var hve=0,dve=function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++hve}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&nt(r,pve);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!lt(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Tt(this.categories))},n}();function pve(n){return ht(n)&&n.value!=null?n.value:n+""}const ZS=dve;function QS(n){return n.type==="interval"||n.type==="log"}function vve(n,e,t,r){var i={},a=n[1]-n[0],o=i.interval=v5(a/e,!0);t!=null&&o<t&&(o=i.interval=t),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=ez(o),u=i.niceTickExtent=[ur(Math.ceil(n[0]/o)*o,s),ur(Math.floor(n[1]/o)*o,s)];return gve(u,n),i}function I_(n){var e=Math.pow(10,p2(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,ur(t*e)}function ez(n){return qs(n)+2}function RO(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function gve(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),RO(n,0,e),RO(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function gb(n,e){return n>=e[0]&&n<=e[1]}function mb(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function yb(n,e){return n*(e[1]-e[0])+e[0]}var tz=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new ZS({})),Ze(i)&&(i=new ZS({categories:nt(i,function(a){return ht(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:lt(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),gb(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),mb(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(yb(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,u=Math.min(s,r.length);o<u;++o){var l=r[o];i[o]=l,a[l]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(du);du.registerClass(tz);const nz=tz;var hc=ur,rz=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return gb(t,this._extent)},e.prototype.normalize=function(t){return mb(t,this._extent)},e.prototype.scale=function(t){return yb(t,this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=parseFloat(t)),isNaN(r)||(i[1]=parseFloat(r))},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),this.setExtent(r[0],r[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=ez(t)},e.prototype.getTicks=function(t){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var u=1e4;i[0]<a[0]&&(t?s.push({value:hc(a[0]-r,o)}):s.push({value:i[0]}));for(var l=a[0];l<=a[1]&&(s.push({value:l}),l=hc(l+r,o),l!==s[s.length-1].value);)if(s.length>u)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(t?s.push({value:hc(c+r,o)}):s.push({value:i[1]})),s},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],u=r[o-1],l=0,c=[],f=s.value-u.value,h=f/t;l<t-1;){var d=hc(u.value+(l+1)*h);d>a[0]&&d<a[1]&&c.push(d),l++}i.push(c)}return i},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=qs(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=hc(t.value,i,!0);return NV(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=vve(a,t,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(r[0]=hc(Math.floor(r[0]/o)*o)),t.fixMax||(r[1]=hc(Math.ceil(r[1]/o)*o))},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e}(du);du.registerClass(rz);const Ig=rz;var iz=typeof Float32Array<"u",mve=iz?Float32Array:Array;function Xs(n){return Ze(n)?iz?new Float32Array(n):n:new mve(n)}var yve="__ec_stack_";function J2(n){return n.get("stack")||yve+n.seriesIndex}function eE(n){return n.dim+n.index}function az(n,e){var t=[];return e.eachSeriesByType(n,function(r){sz(r)&&t.push(r)}),t}function bve(n){var e={};ne(n,function(u){var l=u.coordinateSystem,c=l.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=u.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),g=0,m=p.count();g<m;++g){var y=p.get(d,g);e[h]?e[h].push(y):e[h]=[y]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(u,l){return u-l});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}t[r]=a}}return t}function oz(n){var e=bve(n),t=[];return ne(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var u=a.dim+"_"+a.index,l=e[u],c=Math.abs(o[1]-o[0]),f=a.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=l?c/h*l:c}else{var d=r.getData();s=Math.abs(o[1]-o[0])/d.count()}var p=tn(r.get("barWidth"),s),g=tn(r.get("barMaxWidth"),s),m=tn(r.get("barMinWidth")||(uz(r)?.5:1),s),y=r.get("barGap"),b=r.get("barCategoryGap");t.push({bandWidth:s,barWidth:p,barMaxWidth:g,barMinWidth:m,barGap:y,barCategoryGap:b,axisKey:eE(a),stackId:J2(r)})}),xve(t)}function xve(n){var e={};ne(n,function(r,i){var a=r.axisKey,o=r.bandWidth,s=e[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},u=s.stacks;e[a]=s;var l=r.stackId;u[l]||s.autoWidthCount++,u[l]=u[l]||{width:0,maxWidth:0};var c=r.barWidth;c&&!u[l].width&&(u[l].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=r.barMaxWidth;f&&(u[l].maxWidth=f);var h=r.barMinWidth;h&&(u[l].minWidth=h);var d=r.barGap;d!=null&&(s.gap=d);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var t={};return ne(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var u=zn(a).length;s=Math.max(35-u*4,15)+"%"}var l=tn(s,o),c=tn(r.gap,1),f=r.remainedWidth,h=r.autoWidthCount,d=(f-l)/(h+(h-1)*c);d=Math.max(d,0),ne(a,function(y){var b=y.maxWidth,_=y.minWidth;if(y.width){var w=y.width;b&&(w=Math.min(w,b)),_&&(w=Math.max(w,_)),y.width=w,f-=w+c*w,h--}else{var w=d;b&&b<w&&(w=Math.min(b,f)),_&&_>w&&(w=_),w!==d&&(y.width=w,f-=w+c*w,h--)}}),d=(f-l)/(h+(h-1)*c),d=Math.max(d,0);var p=0,g;ne(a,function(y,b){y.width||(y.width=d),g=y,p+=y.width*(1+c)}),g&&(p-=g.width*c);var m=-p/2;ne(a,function(y,b){t[i][b]=t[i][b]||{bandWidth:o,offset:m,width:y.width},m+=y.width*(1+c)})}),t}function _ve(n,e,t){if(n&&e){var r=n[eE(e)];return r!=null&&t!=null?r[J2(t)]:r}}function wve(n,e){var t=az(n,e),r=oz(t);ne(t,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),u=J2(i),l=r[eE(s)][u],c=l.offset,f=l.width;a.setLayout({bandWidth:l.bandWidth,offset:c,size:f})})}function Sve(n){return{seriesType:n,plan:H2(),reset:function(e){if(sz(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=t.getDimensionIndex(t.mapDimension(a.dim)),s=t.getDimensionIndex(t.mapDimension(i.dim)),u=e.get("showBackground",!0),l=t.mapDimension(a.dim),c=t.getCalculationInfo("stackResultDimension"),f=Yc(t,l)&&!!t.getCalculationInfo("stackedOnSeries"),h=a.isHorizontal(),d=Cve(i,a),p=uz(e),g=e.get("barMinHeight")||0,m=c&&t.getDimensionIndex(c),y=t.getLayout("size"),b=t.getLayout("offset");return{progress:function(_,w){for(var T=_.count,E=p&&Xs(T*3),A=p&&u&&Xs(T*3),I=p&&Xs(T),$=r.master.getRect(),D=h?$.width:$.height,N,z=w.getStore(),F=0;(N=_.next())!=null;){var G=z.get(f?m:o,N),U=z.get(s,N),H=d,X=void 0;f&&(X=+G-z.get(o,N));var Z=void 0,Q=void 0,le=void 0,ge=void 0;if(h){var be=r.dataToPoint([G,U]);if(f){var ke=r.dataToPoint([X,U]);H=ke[0]}Z=H,Q=be[1]+b,le=be[0]-H,ge=y,Math.abs(le)<g&&(le=(le<0?-1:1)*g)}else{var be=r.dataToPoint([U,G]);if(f){var ke=r.dataToPoint([U,X]);H=ke[1]}Z=be[0]+b,Q=H,le=y,ge=be[1]-H,Math.abs(ge)<g&&(ge=(ge<=0?-1:1)*g)}p?(E[F]=Z,E[F+1]=Q,E[F+2]=h?le:ge,A&&(A[F]=h?$.x:Z,A[F+1]=h?Q:$.y,A[F+2]=D),I[N]=N):w.setItemLayout(N,{x:Z,y:Q,width:le,height:ge}),F+=3}p&&w.setLayout({largePoints:E,largeDataIndices:I,largeBackgroundPoints:A,valueAxisHorizontal:h})}}}}}}function sz(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function uz(n){return n.pipelineContext&&n.pipelineContext.large}function Cve(n,e){return e.toGlobalCoord(e.dataToCoord(e.type==="log"?1:0))}var Tve=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},lz=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return ab(t.value,bN[Mfe(Bh(this._minLevelUnit))]||bN.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return Bfe(t,r,i,o,a)},e.prototype.getTicks=function(){var t=this._interval,r=this._extent,i=[];if(!t)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=Dve(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},e.prototype.calcNiceExtent=function(t){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Sa,r[1]+=Sa),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Sa}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=ty.length,u=Math.min(Tve(ty,this._approxInterval,0,s),s-1);this._interval=ty[u][1],this._minLevelUnit=ty[Math.max(u-1,0)][0]},e.prototype.parse=function(t){return dn(t)?t:+ru(t)},e.prototype.contain=function(t){return gb(this.parse(t),this._extent)},e.prototype.normalize=function(t){return mb(this.parse(t),this._extent)},e.prototype.scale=function(t){return yb(t,this._extent)},e.type="time",e}(Ig),ty=[["second",D2],["minute",$2],["hour",gv],["quarter-day",gv*6],["half-day",gv*12],["day",Sa*1.2],["half-week",Sa*3.5],["week",Sa*7],["month",Sa*31],["quarter",Sa*95],["half-year",yN/2],["year",yN]];function Eve(n,e,t,r){var i=ru(e),a=ru(t),o=function(p){return xN(i,p,r)===xN(a,p,r)},s=function(){return o("year")},u=function(){return s()&&o("month")},l=function(){return u()&&o("day")},c=function(){return l()&&o("hour")},f=function(){return c()&&o("minute")},h=function(){return f()&&o("second")},d=function(){return h()&&o("millisecond")};switch(n){case"year":return s();case"month":return u();case"day":return l();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function kve(n,e){return n/=Sa,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function Ave(n){var e=30*Sa;return n/=e,n>6?6:n>3?3:n>2?2:1}function Rve(n){return n/=gv,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function IO(n,e){return n/=e?$2:D2,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function Ive(n){return v5(n,!0)}function Pve(n,e,t){var r=new Date(n);switch(Bh(e)){case"year":case"month":r[AV(t)](0);case"day":r[RV(t)](1);case"hour":r[IV(t)](0);case"minute":r[PV(t)](0);case"second":r[DV(t)](0),r[$V(t)](0)}return r.getTime()}function Dve(n,e,t,r){var i=1e4,a=EV,o=0;function s(D,N,z,F,G,U,H){for(var X=new Date(N),Z=N,Q=X[F]();Z<z&&Z<=r[1];)H.push({value:Z}),Q+=D,X[G](Q),Z=X.getTime();H.push({value:Z,notAdd:!0})}function u(D,N,z){var F=[],G=!N.length;if(!Eve(Bh(D),r[0],r[1],t)){G&&(N=[{value:Pve(new Date(r[0]),D,t)},{value:r[1]}]);for(var U=0;U<N.length-1;U++){var H=N[U].value,X=N[U+1].value;if(H!==X){var Z=void 0,Q=void 0,le=void 0,ge=!1;switch(D){case"year":Z=Math.max(1,Math.round(e/Sa/365)),Q=N2(t),le=Ffe(t);break;case"half-year":case"quarter":case"month":Z=Ave(e),Q=Fh(t),le=AV(t);break;case"week":case"half-week":case"day":Z=kve(e),Q=ob(t),le=RV(t),ge=!0;break;case"half-day":case"quarter-day":case"hour":Z=Rve(e),Q=Uv(t),le=IV(t);break;case"minute":Z=IO(e,!0),Q=sb(t),le=PV(t);break;case"second":Z=IO(e,!1),Q=ub(t),le=DV(t);break;case"millisecond":Z=Ive(e),Q=lb(t),le=$V(t);break}s(Z,H,X,Q,le,ge,F),D==="year"&&z.length>1&&U===0&&z.unshift({value:z[0].value-Z})}}for(var U=0;U<F.length;U++)z.push(F[U]);return F}}for(var l=[],c=[],f=0,h=0,d=0;d<a.length&&o++<i;++d){var p=Bh(a[d]);if(Lfe(a[d])){u(a[d],l[l.length-1]||[],c);var g=a[d+1]?Bh(a[d+1]):null;if(p!==g){if(c.length){h=f,c.sort(function(D,N){return D.value-N.value});for(var m=[],y=0;y<c.length;++y){var b=c[y].value;(y===0||c[y-1].value!==b)&&(m.push(c[y]),b>=r[0]&&b<=r[1]&&f++)}var _=(r[1]-r[0])/e;if(f>_*1.5&&h>_/1.5||(l.push(m),f>_||n===a[d]))break}c=[]}}}for(var w=Jn(nt(l,function(D){return Jn(D,function(N){return N.value>=r[0]&&N.value<=r[1]&&!N.notAdd})}),function(D){return D.length>0}),T=[],E=w.length-1,d=0;d<w.length;++d)for(var A=w[d],I=0;I<A.length;++I)T.push({value:A[I].value,level:E-d});T.sort(function(D,N){return D.value-N.value});for(var $=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&$.push(T[d]);return $}du.registerClass(lz);const $ve=lz;var PO=du.prototype,xv=Ig.prototype,Nve=ur,Ove=Math.floor,Lve=Math.ceil,ny=Math.pow,Ka=Math.log,tE=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Ig,t._interval=0,t}return e.prototype.getTicks=function(t){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=xv.getTicks.call(this,t);return nt(o,function(s){var u=s.value,l=ur(ny(this.base,u));return l=u===i[0]&&this._fixMin?ry(l,a[0]):l,l=u===i[1]&&this._fixMax?ry(l,a[1]):l,{value:l}},this)},e.prototype.setExtent=function(t,r){var i=Ka(this.base);t=Ka(Math.max(0,t))/i,r=Ka(Math.max(0,r))/i,xv.setExtent.call(this,t,r)},e.prototype.getExtent=function(){var t=this.base,r=PO.getExtent.call(this);r[0]=ny(t,r[0]),r[1]=ny(t,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=ry(r[0],a[0])),this._fixMax&&(r[1]=ry(r[1],a[1])),r},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var r=this.base;t[0]=Ka(t[0])/Ka(r),t[1]=Ka(t[1])/Ka(r),PO.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=Vue(i),o=t/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[ur(Lve(r[0]/a)*a),ur(Ove(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){xv.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Ka(t)/Ka(this.base),gb(t,this._extent)},e.prototype.normalize=function(t){return t=Ka(t)/Ka(this.base),mb(t,this._extent)},e.prototype.scale=function(t){return t=yb(t,this._extent),ny(this.base,t)},e.type="log",e}(du),cz=tE.prototype;cz.getMinorTicks=xv.getMinorTicks;cz.getLabel=xv.getLabel;function ry(n,e){return Nve(n,qs(e))}du.registerClass(tE);const Mve=tE;var Bve=function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=this._modelMinRaw=t.get("min",!0);Et(a)?this._modelMinNum=iy(e,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=iy(e,a));var o=this._modelMaxRaw=t.get("max",!0);if(Et(o)?this._modelMaxNum=iy(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=iy(e,o)),i)this._axisDataLen=t.getCategories().length;else{var s=t.get("boundaryGap"),u=Ze(s)?s:[s||0,s||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ll(u[0],1),ll(u[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=e?null:r-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,l=s!=null,c=u!=null;s==null&&(s=e?i?0:NaN:t-a[0]*o),u==null&&(u=e?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(u==null||!isFinite(u))&&(u=NaN);var f=C0(s)||C0(u)||e&&!i;this._needCrossZero&&(s>0&&u>0&&!l&&(s=0),s<0&&u<0&&!c&&(u=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,l=!0),d!=null&&(u=d,c=!0),{min:s,max:u,minFixed:l,maxFixed:c,isBlank:f}},n.prototype.modifyDataMinMax=function(e,t){this[Vve[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=Fve[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n}(),Fve={min:"_determinedMin",max:"_determinedMax"},Vve={min:"_dataMin",max:"_dataMax"};function fz(n,e,t){var r=n.rawExtentInfo;return r||(r=new Bve(n,e,t),n.rawExtentInfo=r,r)}function iy(n,e){return e==null?null:C0(e)?NaN:n.parse(e)}function hz(n,e){var t=n.type,r=fz(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,o=e.ecModel;if(o&&t==="time"){var s=az("bar",o),u=!1;if(ne(s,function(f){u=u||f.getBaseAxis()===e.axis}),u){var l=oz(s),c=zve(i,a,e,l);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function zve(n,e,t,r){var i=t.axis.getExtent(),a=i[1]-i[0],o=_ve(r,t.axis);if(o===void 0)return{min:n,max:e};var s=1/0;ne(o,function(d){s=Math.min(d.offset,s)});var u=-1/0;ne(o,function(d){u=Math.max(d.offset+d.width,u)}),s=Math.abs(s),u=Math.abs(u);var l=s+u,c=e-n,f=1-(s+u)/a,h=c/f-c;return e+=h*(u/l),n-=h*(s/l),{min:n,max:e}}function X0(n,e){var t=e,r=hz(n,t),i=r.extent,a=t.get("splitNumber");n instanceof Mve&&(n.base=t.get("logBase"));var o=n.type,s=t.get("interval"),u=o==="interval"||o==="time";n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:u?t.get("minInterval"):null,maxInterval:u?t.get("maxInterval"):null}),s!=null&&n.setInterval&&n.setInterval(s)}function dz(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new nz({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new $ve({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(du.getClass(e)||Ig)}}function Uve(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function Pg(n){var e=n.getLabelModel().get("formatter"),t=n.type==="category"?n.scale.getExtent()[0]:null;return n.scale.type==="time"?function(r){return function(i,a){return n.scale.getFormattedLabel(i,a,r)}}(e):lt(e)?function(r){return function(i){var a=n.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(e):Et(e)?function(r){return function(i,a){return t!=null&&(a=i.value-t),r(nE(n,i),a,i.level!=null?{level:i.level}:null)}}(e):function(r){return n.scale.getLabel(r)}}function nE(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function Wve(n){var e=n.model,t=n.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var r,i,a=t.getExtent();t instanceof nz?i=t.count():(r=t.getTicks(),i=r.length);var o=n.getLabelModel(),s=Pg(n),u,l=1;i>40&&(l=Math.ceil(i/40));for(var c=0;c<i;c+=l){var f=r?r[c]:{value:a[0]+c},h=s(f,c),d=o.getTextRect(h),p=Hve(d,o.get("rotate")||0);u?u.union(p):u=p}return u}}function Hve(n,e){var t=e*Math.PI/180,r=n.width,i=n.height,a=r*Math.abs(Math.cos(t))+Math.abs(i*Math.sin(t)),o=r*Math.abs(Math.sin(t))+Math.abs(i*Math.cos(t)),s=new Kt(n.x,n.y,a,o);return s}function rE(n){var e=n.get("interval");return e??"auto"}function pz(n){return n.type==="category"&&rE(n.getLabelModel())===0}function K0(n,e){var t={};return ne(n.mapDimensionsAll(e),function(r){t[sve(n,r)]=!0}),zn(t)}function Gve(n,e,t){e&&ne(K0(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}var vz=function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n}(),DO=[],jve={registerPreprocessor:W6,registerProcessor:H6,registerPostInit:Npe,registerPostUpdate:Ope,registerUpdateLifecycle:Y2,registerAction:bs,registerCoordinateSystem:Lpe,registerLayout:Mpe,registerVisual:xf,registerTransform:Fpe,registerLoading:G6,registerMap:Bpe,registerImpl:vpe,PRIORITY:Ape,ComponentModel:bn,ComponentView:ra,SeriesModel:hl,ChartView:is,registerComponentModel:function(n){bn.registerClass(n)},registerComponentView:function(n){ra.registerClass(n)},registerSeriesModel:function(n){hl.registerClass(n)},registerChartView:function(n){is.registerClass(n)},registerSubTypeDefaulter:function(n,e){bn.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){$ue(n,e)}};function ou(n){if(Ze(n)){ne(n,function(e){ou(e)});return}Ht(DO,n)>=0||(DO.push(n),Et(n)&&(n={install:n}),n.install(jve))}var Kv=Fn();function qve(n){return n.type==="category"?Kve(n):Zve(n)}function Xve(n,e){return n.type==="category"?Yve(n,e):{ticks:nt(n.scale.getTicks(),function(t){return t.value})}}function Kve(n){var e=n.getLabelModel(),t=gz(n,e);return!e.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function gz(n,e){var t=mz(n,"labels"),r=rE(e),i=yz(t,r);if(i)return i;var a,o;return Et(r)?a=_z(n,r):(o=r==="auto"?Qve(n):r,a=xz(n,o)),bz(t,r,{labels:a,labelCategoryInterval:o})}function Yve(n,e){var t=mz(n,"ticks"),r=rE(e),i=yz(t,r);if(i)return i;var a,o;if((!e.get("show")||n.scale.isBlank())&&(a=[]),Et(r))a=_z(n,r,!0);else if(r==="auto"){var s=gz(n,n.getLabelModel());o=s.labelCategoryInterval,a=nt(s.labels,function(u){return u.tickValue})}else o=r,a=xz(n,o,!0);return bz(t,r,{ticks:a,tickCategoryInterval:o})}function Zve(n){var e=n.scale.getTicks(),t=Pg(n);return{labels:nt(e,function(r,i){return{level:r.level,formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value}})}}function mz(n,e){return Kv(n)[e]||(Kv(n)[e]=[])}function yz(n,e){for(var t=0;t<n.length;t++)if(n[t].key===e)return n[t].value}function bz(n,e,t){return n.push({key:e,value:t}),t}function Qve(n){var e=Kv(n).autoInterval;return e??(Kv(n).autoInterval=n.calculateCategoryInterval())}function Jve(n){var e=ege(n),t=Pg(n),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=a[0],l=n.dataToCoord(u+1)-n.dataToCoord(u),c=Math.abs(l*Math.cos(r)),f=Math.abs(l*Math.sin(r)),h=0,d=0;u<=a[1];u+=s){var p=0,g=0,m=Sg(t({value:u}),e.font,"center","top");p=m.width*1.3,g=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,g,7)}var y=h/c,b=d/f;isNaN(y)&&(y=1/0),isNaN(b)&&(b=1/0);var _=Math.max(0,Math.floor(Math.min(y,b))),w=Kv(n.model),T=n.getExtent(),E=w.lastAutoInterval,A=w.lastTickCount;return E!=null&&A!=null&&Math.abs(E-_)<=1&&Math.abs(A-o)<=1&&E>_&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?_=E:(w.lastTickCount=o,w.lastAutoInterval=_,w.axisExtent0=T[0],w.axisExtent1=T[1]),_}function ege(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function xz(n,e,t){var r=Pg(n),i=n.scale,a=i.getExtent(),o=n.getLabelModel(),s=[],u=Math.max((e||0)+1,1),l=a[0],c=i.count();l!==0&&u>1&&c/u>2&&(l=Math.round(Math.ceil(l/u)*u));var f=pz(n),h=o.get("showMinLabel")||f,d=o.get("showMaxLabel")||f;h&&l!==a[0]&&g(a[0]);for(var p=l;p<=a[1];p+=u)g(p);d&&p-u!==a[1]&&g(a[1]);function g(m){var y={value:m};s.push(t?m:{formattedLabel:r(y),rawLabel:i.getLabel(y),tickValue:m})}return s}function _z(n,e,t){var r=n.scale,i=Pg(n),a=[];return ne(r.getTicks(),function(o){var s=r.getLabel(o),u=o.value;e(o.value,s)&&a.push(t?u:{formattedLabel:i(o),rawLabel:s,tickValue:u})}),a}var $O=[0,1],tge=function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(e)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return d5(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(e),this.onBand&&i.type==="ordinal"&&(r=r.slice(),NO(r,i.count())),Hu(e,$O,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),NO(r,i.count()));var a=Hu(e,r,$O,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=Xve(this,t),i=r.ticks,a=nt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return nge(this,a,o,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=nt(r,function(a){return nt(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},n.prototype.getViewLabels=function(){return qve(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(){return Jve(this)},n}();function NO(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function nge(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),o,s;if(i===1)e[0].coord=a[0],o=e[1]={coord:a[0]};else{var u=e[i-1].tickValue-e[0].tickValue,l=(e[i-1].coord-e[0].coord)/u;ne(e,function(d){d.coord-=l/2});var c=n.scale.getExtent();s=1+c[1]-e[i-1].tickValue,o={coord:e[i-1].coord+l*s},e.push(o)}var f=a[0]>a[1];h(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&h(a[0],e[0].coord)&&e.unshift({coord:a[0]}),h(a[1],o.coord)&&(r?o.coord=a[1]:e.pop()),r&&h(o.coord,a[1])&&e.push({coord:a[1]});function h(d,p){return d=ur(d),p=ur(p),f?d>p:d<p}}const _f=tge;var Rp=Math.PI*2,dc=iu.CMD,rge=["top","right","bottom","left"];function ige(n,e,t,r,i){var a=t.width,o=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+o+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+o/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+o/2),i.set(1,0);break}}function age(n,e,t,r,i,a,o,s,u){o-=n,s-=e;var l=Math.sqrt(o*o+s*s);o/=l,s/=l;var c=o*t+n,f=s*t+e;if(Math.abs(r-i)%Rp<1e-4)return u[0]=c,u[1]=f,l-t;if(a){var h=r;r=Yu(i),i=Yu(h)}else r=Yu(r),i=Yu(i);r>i&&(i+=Rp);var d=Math.atan2(s,o);if(d<0&&(d+=Rp),d>=r&&d<=i||d+Rp>=r&&d+Rp<=i)return u[0]=c,u[1]=f,l-t;var p=t*Math.cos(r)+n,g=t*Math.sin(r)+e,m=t*Math.cos(i)+n,y=t*Math.sin(i)+e,b=(p-o)*(p-o)+(g-s)*(g-s),_=(m-o)*(m-o)+(y-s)*(y-s);return b<_?(u[0]=p,u[1]=g,Math.sqrt(b)):(u[0]=m,u[1]=y,Math.sqrt(_))}function Y0(n,e,t,r,i,a,o,s){var u=i-n,l=a-e,c=t-n,f=r-e,h=Math.sqrt(c*c+f*f);c/=h,f/=h;var d=u*c+l*f,p=d/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var g=o[0]=n+p*c,m=o[1]=e+p*f;return Math.sqrt((g-i)*(g-i)+(m-a)*(m-a))}function wz(n,e,t,r,i,a,o){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var s=n+t,u=e+r,l=o[0]=Math.min(Math.max(i,n),s),c=o[1]=Math.min(Math.max(a,e),u);return Math.sqrt((l-i)*(l-i)+(c-a)*(c-a))}var eo=[];function oge(n,e,t){var r=wz(e.x,e.y,e.width,e.height,n.x,n.y,eo);return t.set(eo[0],eo[1]),r}function sge(n,e,t){for(var r=0,i=0,a=0,o=0,s,u,l=1/0,c=e.data,f=n.x,h=n.y,d=0;d<c.length;){var p=c[d++];d===1&&(r=c[d],i=c[d+1],a=r,o=i);var g=l;switch(p){case dc.M:a=c[d++],o=c[d++],r=a,i=o;break;case dc.L:g=Y0(r,i,c[d],c[d+1],f,h,eo,!0),r=c[d++],i=c[d++];break;case dc.C:g=J4(r,i,c[d++],c[d++],c[d++],c[d++],c[d],c[d+1],f,h,eo),r=c[d++],i=c[d++];break;case dc.Q:g=t5(r,i,c[d++],c[d++],c[d],c[d+1],f,h,eo),r=c[d++],i=c[d++];break;case dc.A:var m=c[d++],y=c[d++],b=c[d++],_=c[d++],w=c[d++],T=c[d++];d+=1;var E=!!(1-c[d++]);s=Math.cos(w)*b+m,u=Math.sin(w)*_+y,d<=1&&(a=s,o=u);var A=(f-m)*_/b+m;g=age(m,y,_,w,w+T,E,A,h,eo),r=Math.cos(w+T)*b+m,i=Math.sin(w+T)*_+y;break;case dc.R:a=r=c[d++],o=i=c[d++];var I=c[d++],$=c[d++];g=wz(a,o,I,$,f,h,eo);break;case dc.Z:g=Y0(r,i,a,o,f,h,eo,!0),r=a,i=o;break}g<l&&(l=g,t.set(eo[0],eo[1]))}return l}var lo=new bt,yn=new bt,Qn=new bt,Yo=new bt,Go=new bt;function OO(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||rge,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var u=1/0,l=i.anchor,c=n.getComputedTransform(),f=c&&H1([],c),h=e.get("length2")||0;l&&Qn.copy(l);for(var d=0;d<o.length;d++){var p=o[d];ige(p,0,s,lo,Yo),bt.scaleAndAdd(yn,lo,Yo,h),yn.transform(f);var g=n.getBoundingRect(),m=l?l.distance(yn):n instanceof jt?sge(yn,n.path,Qn):oge(yn,g,Qn);m<u&&(u=m,yn.transform(c),Qn.transform(c),Qn.toArray(a[0]),yn.toArray(a[1]),lo.toArray(a[2]))}Sz(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var Z0=[],fi=new bt;function Sz(n,e){if(e<=180&&e>0){e=e/180*Math.PI,lo.fromArray(n[0]),yn.fromArray(n[1]),Qn.fromArray(n[2]),bt.sub(Yo,lo,yn),bt.sub(Go,Qn,yn);var t=Yo.len(),r=Go.len();if(!(t<.001||r<.001)){Yo.scale(1/t),Go.scale(1/r);var i=Yo.dot(Go),a=Math.cos(e);if(a<i){var o=Y0(yn.x,yn.y,Qn.x,Qn.y,lo.x,lo.y,Z0,!1);fi.fromArray(Z0),fi.scaleAndAdd(Go,o/Math.tan(Math.PI-e));var s=Qn.x!==yn.x?(fi.x-yn.x)/(Qn.x-yn.x):(fi.y-yn.y)/(Qn.y-yn.y);if(isNaN(s))return;s<0?bt.copy(fi,yn):s>1&&bt.copy(fi,Qn),fi.toArray(n[1])}}}}function uge(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,lo.fromArray(n[0]),yn.fromArray(n[1]),Qn.fromArray(n[2]),bt.sub(Yo,yn,lo),bt.sub(Go,Qn,yn);var r=Yo.len(),i=Go.len();if(!(r<.001||i<.001)){Yo.scale(1/r),Go.scale(1/i);var a=Yo.dot(e),o=Math.cos(t);if(a<o){var s=Y0(yn.x,yn.y,Qn.x,Qn.y,lo.x,lo.y,Z0,!1);fi.fromArray(Z0);var u=Math.PI/2,l=Math.acos(Go.dot(e)),c=u+l-t;if(c>=u)bt.copy(fi,Qn);else{fi.scaleAndAdd(Go,s/Math.tan(Math.PI/2-c));var f=Qn.x!==yn.x?(fi.x-yn.x)/(Qn.x-yn.x):(fi.y-yn.y)/(Qn.y-yn.y);if(isNaN(f))return;f<0?bt.copy(fi,yn):f>1&&bt.copy(fi,Qn)}fi.toArray(n[1])}}}}function LO(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?n.useStyle(s):a.style=s}function lge(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=oS(r[0],r[1]),a=oS(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*t,s=Ky([],r[1],r[0],o/i),u=Ky([],r[1],r[2],o/a),l=Ky([],s,u,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],l[0],l[1]),n.bezierCurveTo(u[0],u[1],u[0],u[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)n.lineTo(r[c][0],r[c][1])}function Cz(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,o=a.get("show"),s=i.ignore,u=0;u<N0.length;u++){var l=N0[u],c=e[l],f=l==="normal";if(c){var h=c.get("show"),d=f?s:Gt(i.states[l]&&i.states[l].ignore,s);if(d||!Gt(h,o)){var p=f?r:r&&r.states[l];p&&(p.ignore=!0);continue}r||(r=new Eg,n.setTextGuideLine(r),!f&&(s||!o)&&LO(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),LO(r,!1,l,c)}}if(r){St(r.style,t),r.style.fill=null;var g=a.get("showAbove"),m=n.textGuideLineConfig=n.textGuideLineConfig||{};m.showAbove=g||!1,r.buildPath=lge}}function Tz(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<Ba.length;r++){var i=Ba[r];t[i]=n.getModel([i,e])}return t}function Ez(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,u=i.style.margin||0,l=o.clone();l.applyTransform(a),l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u;var c=s?new L0(o,a):null;e.push({label:i,labelLine:r.labelLine,rect:l,localRect:o,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return e}function kz(n,e,t,r,i,a){var o=n.length;if(o<2)return;n.sort(function(I,$){return I.rect[e]-$.rect[e]});for(var s=0,u,l=!1,c=0,f=0;f<o;f++){var h=n[f],d=h.rect;u=d[e]-s,u<0&&(d[e]-=u,h.label[e]-=u,l=!0);var p=Math.max(-u,0);c+=p,s=d[e]+d[t]}c>0&&a&&T(-c/o,0,o);var g=n[0],m=n[o-1],y,b;_(),y<0&&E(-y,.8),b<0&&E(b,.8),_(),w(y,b,1),w(b,y,-1),_(),y<0&&A(-y),b<0&&A(b);function _(){y=g.rect[e]-r,b=i-m.rect[e]-m.rect[t]}function w(I,$,D){if(I<0){var N=Math.min($,-I);if(N>0){T(N*D,0,o);var z=N+I;z<0&&E(-z*D,1)}else E(-I*D,1)}}function T(I,$,D){I!==0&&(l=!0);for(var N=$;N<D;N++){var z=n[N],F=z.rect;F[e]+=I,z.label[e]+=I}}function E(I,$){for(var D=[],N=0,z=1;z<o;z++){var F=n[z-1].rect,G=Math.max(n[z].rect[e]-F[e]-F[t],0);D.push(G),N+=G}if(N){var U=Math.min(Math.abs(I)/N,$);if(I>0)for(var z=0;z<o-1;z++){var H=D[z]*U;T(H,0,z+1)}else for(var z=o-1;z>0;z--){var H=D[z-1]*U;T(-H,z,o)}}}function A(I){var $=I<0?-1:1;I=Math.abs(I);for(var D=Math.ceil(I/(o-1)),N=0;N<o-1;N++)if($>0?T(D,0,N+1):T(-D,o-N-1,o),I-=D,I<=0)return}return l}function cge(n,e,t,r){return kz(n,"x","width",e,t,r)}function Az(n,e,t,r){return kz(n,"y","height",e,t,r)}function Rz(n){var e=[];n.sort(function(g,m){return m.priority-g.priority});var t=new Kt(0,0,0,0);function r(g){if(!g.ignore){var m=g.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}g.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],o=a.axisAligned,s=a.localRect,u=a.transform,l=a.label,c=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var f=a.obb,h=!1,d=0;d<e.length;d++){var p=e[d];if(t.intersect(p.rect)){if(o&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new L0(p.localRect,p.transform)),f||(f=new L0(s,u)),f.intersect(p.obb)){h=!0;break}}}h?(r(l),c&&r(c)):(l.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function fge(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function hge(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:fge(r&&r.shape.points)}}var MO=["align","verticalAlign","width","height","fontSize"],Ki=new wg,P_=Fn(),dge=Fn();function ay(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var oy=["x","y","rotation"],pge=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var o=i.style,s=i.__hostTarget,u=s.textConfig||{},l=i.getComputedTransform(),c=i.getBoundingRect().plain();Kt.applyTransform(c,c,l),l?Ki.setLocalTransform(l):(Ki.x=Ki.y=Ki.rotation=Ki.originX=Ki.originY=0,Ki.scaleX=Ki.scaleY=1);var f=i.__hostTarget,h;if(f){h=f.getBoundingRect().plain();var d=f.getComputedTransform();Kt.applyTransform(h,h,d)}var p=h&&f.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:r,dataIndex:e,dataType:t,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:Ki.x,y:Ki.y,scaleX:Ki.scaleX,scaleY:Ki.scaleY,rotation:Ki.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:u.position,attachedRot:u.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(Et(i)||zn(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=an(a);o&&!o.disableLabelLayout&&t._addLabel(s.dataIndex,s.dataType,r,o,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(_,w){return function(){OO(_,w)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,u=s.__hostTarget,l=o.defaultAttr,c=void 0;Et(o.layoutOption)?c=o.layoutOption(hge(o,u)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var f=Math.PI/180;u&&u.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:l.attachedPos,rotation:c.rotate!=null?c.rotate*f:l.attachedRot,offset:[c.dx||0,c.dy||0]});var h=!1;if(c.x!=null?(s.x=tn(c.x,t),s.setStyle("x",0),h=!0):(s.x=l.x,s.setStyle("x",l.style.x)),c.y!=null?(s.y=tn(c.y,r),s.setStyle("y",0),h=!0):(s.y=l.y,s.setStyle("y",l.style.y)),c.labelLinePoints){var d=u.getTextGuideLine();d&&(d.setShape({points:c.labelLinePoints}),h=!1)}var p=P_(s);p.needsUpdateLabelLine=h,s.rotation=c.rotate!=null?c.rotate*f:l.rotation,s.scaleX=l.scaleX,s.scaleY=l.scaleY;for(var g=0;g<MO.length;g++){var m=MO[g];s.setStyle(m,c[m]!=null?c[m]:l.style[m])}if(c.draggable){if(s.draggable=!0,s.cursor="move",u){var y=o.seriesModel;if(o.dataIndex!=null){var b=o.seriesModel.getData(o.dataType);y=b.getItemModel(o.dataIndex)}s.on("drag",i(u,y.getModel("labelLine")))}}else s.off("drag"),s.cursor=l.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=Ez(this._labelList),a=Jn(i,function(u){return u.layoutOption.moveOverlap==="shiftX"}),o=Jn(i,function(u){return u.layoutOption.moveOverlap==="shiftY"});cge(a,0,t),Az(o,0,r);var s=Jn(i,function(u){return u.layoutOption.hideOverlap});Rz(s)},n.prototype.processLabelsOverall=function(){var e=this;ne(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,u=o.getTextContent();!s&&u&&(s=P_(u).needsUpdateLabelLine),s&&e._updateLabelLine(o,r),a&&e._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=an(e),a=i.dataIndex;if(r&&a!=null){var o=t.getData(i.dataType),s=o.getItemModel(a),u={},l=o.getItemVisual(a,"style"),c=o.getVisual("drawType");u.stroke=l[c];var f=s.getModel("labelLine");Cz(e,Tz(s),u),OO(e,f)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!Mh(e))){var a=P_(r),o=a.oldLayout,s=an(e),u=s.dataIndex,l={x:r.x,y:r.y,rotation:r.rotation},c=t.getData(s.dataType);if(o){r.attr(o);var h=e.prevStates;h&&(Ht(h,"select")>=0&&r.attr(a.oldLayoutSelect),Ht(h,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),Rr(r,l,t,u)}else if(r.attr(l),!Rd(r).valueAnimation){var f=Gt(r.style.opacity,1);r.style.opacity=0,ei(r,{style:{opacity:f}},t,u)}if(a.oldLayout=l,r.states.select){var d=a.oldLayoutSelect={};ay(d,l,oy),ay(d,r.states.select,oy)}if(r.states.emphasis){var p=a.oldLayoutEmphasis={};ay(p,l,oy),ay(p,r.states.emphasis,oy)}xfe(r,u,c,t,t)}if(i&&!i.ignore&&!i.invisible){var a=dge(i),o=a.oldLayout,g={points:i.shape.points};o?(i.attr({shape:o}),Rr(i,{shape:g},t)):(i.setShape(g),i.style.strokePercent=0,ei(i,{style:{strokePercent:1}},t)),a.oldLayout=g}},n}();const vge=pge;var D_=Fn();function oVe(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=D_(t).labelManager;i||(i=D_(t).labelManager=new vge),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=D_(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var gge=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Q2(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new lr,i=od("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,u=t.itemHeight*.8,l=od(s,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);r.add(l),l.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return l.rotation=c*Math.PI/180,l.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(hl);const mge=gge;function iE(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=ad(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<t.length;o++)a.push(ad(n,e,t[o]));return a.join(" ")}}function Iz(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Ze(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var yge=function(n){rt(e,n);function e(t,r,i,a){var o=n.call(this)||this;return o.updateData(t,r,i,a),o}return e.prototype._createSymbol=function(t,r,i,a,o){this.removeAll();var s=od(t,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=bge,this._symbolType=t,this.add(s)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){td(this.childAt(0))},e.prototype.downplay=function(){nd(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var o=t.getItemVisual(r,"symbol")||"circle",s=t.hostModel,u=e.getSymbolSize(t,r),l=o!==this._symbolType,c=a&&a.disableAnimation;if(l){var f=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,t,r,u,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:u[0]/2,scaleY:u[1]/2};c?h.attr(d):Rr(h,d,s,r),E2(h)}if(this._updateCommon(t,r,u,i,a),l){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,ei(h,d,s,r)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,o){var s=this.childAt(0),u=t.hostModel,l,c,f,h,d,p,g,m,y;if(a&&(l=a.emphasisItemStyle,c=a.blurItemStyle,f=a.selectItemStyle,h=a.focus,d=a.blurScope,g=a.labelStatesModels,m=a.hoverScale,y=a.cursorStyle,p=a.emphasisDisabled),!a||t.hasItemOption){var b=a&&a.itemModel?a.itemModel:t.getItemModel(r),_=b.getModel("emphasis");l=_.getModel("itemStyle").getItemStyle(),f=b.getModel(["select","itemStyle"]).getItemStyle(),c=b.getModel(["blur","itemStyle"]).getItemStyle(),h=_.get("focus"),d=_.get("blurScope"),p=_.get("disabled"),g=Ag(b),m=_.getShallow("scale"),y=b.getShallow("cursor")}var w=t.getItemVisual(r,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=w6(t.getItemVisual(r,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),y&&s.attr("cursor",y);var E=t.getItemVisual(r,"style"),A=E.fill;if(s instanceof yf){var I=s.style;s.useStyle(Ue({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},E))}else s.__isEmptyBrush?s.useStyle(Ue({},E)):s.useStyle(E),s.style.decal=null,s.setColor(A,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var $=t.getItemVisual(r,"liftZ"),D=this._z2;$!=null?D==null&&(this._z2=s.z2,s.z2+=$):D!=null&&(s.z2=D,this._z2=null);var N=o&&o.useNameLabel;kg(s,g,{labelFetcher:u,labelDataIndex:r,defaultText:z,inheritColor:A,defaultOpacity:E.opacity});function z(U){return N?t.getName(U):iE(t,U)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var F=s.ensureState("emphasis");F.style=l,s.ensureState("select").style=f,s.ensureState("blur").style=c;var G=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;F.scaleX=this._sizeX*G,F.scaleY=this._sizeY*G,this.setSymbolScale(1),Fv(this,h,d,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),o=an(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var u=a.getTextContent();u&&M0(u,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();M0(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:t,removeOpt:s})},e.getSymbolSize=function(t,r){return Zde(t.getItemVisual(r,"symbolSize"))},e}(lr);function bge(n,e){this.parent.drift(n,e)}const aE=yge;function $_(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function BO(n){return n!=null&&!ht(n)&&(n={isIgnore:n}),n||{}}function FO(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Ag(e),cursorStyle:e.get("cursor")}}var xge=function(){function n(e){this.group=new lr,this._SymbolCtor=e||aE}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=BO(t);var r=this.group,i=e.hostModel,a=this._data,o=this._SymbolCtor,s=t.disableAnimation,u=FO(e),l={disableAnimation:s},c=t.getSymbolPoint||function(f){return e.getItemLayout(f)};a||r.removeAll(),e.diff(a).add(function(f){var h=c(f);if($_(e,h,f,t)){var d=new o(e,f,u,l);d.setPosition(h),e.setItemGraphicEl(f,d),r.add(d)}}).update(function(f,h){var d=a.getItemGraphicEl(h),p=c(f);if(!$_(e,p,f,t)){r.remove(d);return}var g=e.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==g)r.remove(d),d=new o(e,f,u,l),d.setPosition(p);else{d.updateData(e,f,u,l);var y={x:p[0],y:p[1]};s?d.attr(y):Rr(d,y,i)}r.add(d),e.setItemGraphicEl(f,d)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&h.fadeOut(function(){r.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=FO(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=BO(r);function i(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var o=t.getItemLayout(a);if($_(t,o,a,r)){var s=new this._SymbolCtor(t,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},n.prototype.eachRendered=function(e){rb(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n}();const _ge=xge;function Pz(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=wge(i,t),o=r.dim,s=i.dim,u=e.mapDimension(s),l=e.mapDimension(o),c=s==="x"||s==="radius"?1:0,f=nt(n.dimensions,function(p){return e.mapDimension(p)}),h=!1,d=e.getCalculationInfo("stackResultDimension");return Yc(e,f[0])&&(h=!0,f[0]=d),Yc(e,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:u,baseDim:l,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function wge(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:dn(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function Dz(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,o=[];return o[a]=t.get(n.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function Sge(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function Cge(n,e,t,r,i,a,o,s){for(var u=Sge(n,e),l=[],c=[],f=[],h=[],d=[],p=[],g=[],m=Pz(i,e,o),y=n.getLayout("points")||[],b=e.getLayout("points")||[],_=0;_<u.length;_++){var w=u[_],T=!0,E=void 0,A=void 0;switch(w.cmd){case"=":E=w.idx*2,A=w.idx1*2;var I=y[E],$=y[E+1],D=b[A],N=b[A+1];(isNaN(I)||isNaN($))&&(I=D,$=N),l.push(I,$),c.push(D,N),f.push(t[E],t[E+1]),h.push(r[A],r[A+1]),g.push(e.getRawIndex(w.idx1));break;case"+":var z=w.idx,F=m.dataDimsForPoint,G=i.dataToPoint([e.get(F[0],z),e.get(F[1],z)]);A=z*2,l.push(G[0],G[1]),c.push(b[A],b[A+1]);var U=Dz(m,i,e,z);f.push(U[0],U[1]),h.push(r[A],r[A+1]),g.push(e.getRawIndex(z));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(de,Ce){return g[de]-g[Ce]});for(var H=l.length,X=Xs(H),Z=Xs(H),Q=Xs(H),le=Xs(H),ge=[],_=0;_<p.length;_++){var be=p[_],ke=_*2,Ae=be*2;X[ke]=l[Ae],X[ke+1]=l[Ae+1],Z[ke]=c[Ae],Z[ke+1]=c[Ae+1],Q[ke]=f[Ae],Q[ke+1]=f[Ae+1],le[ke]=h[Ae],le[ke+1]=h[Ae+1],ge[_]=d[be]}return{current:X,next:Z,stackedOnCurrent:Q,stackedOnNext:le,status:ge}}var Ou=Math.min,Lu=Math.max;function Mc(n,e){return isNaN(n)||isNaN(e)}function JS(n,e,t,r,i,a,o,s,u){for(var l,c,f,h,d,p,g=t,m=0;m<r;m++){var y=e[g*2],b=e[g*2+1];if(g>=i||g<0)break;if(Mc(y,b)){if(u){g+=a;continue}break}if(g===t)n[a>0?"moveTo":"lineTo"](y,b),f=y,h=b;else{var _=y-l,w=b-c;if(_*_+w*w<.5){g+=a;continue}if(o>0){for(var T=g+a,E=e[T*2],A=e[T*2+1];E===y&&A===b&&m<r;)m++,T+=a,g+=a,E=e[T*2],A=e[T*2+1],y=e[g*2],b=e[g*2+1],_=y-l,w=b-c;var I=m+1;if(u)for(;Mc(E,A)&&I<r;)I++,T+=a,E=e[T*2],A=e[T*2+1];var $=.5,D=0,N=0,z=void 0,F=void 0;if(I>=r||Mc(E,A))d=y,p=b;else{D=E-l,N=A-c;var G=y-l,U=E-y,H=b-c,X=A-b,Z=void 0,Q=void 0;if(s==="x"){Z=Math.abs(G),Q=Math.abs(U);var le=D>0?1:-1;d=y-le*Z*o,p=b,z=y+le*Q*o,F=b}else if(s==="y"){Z=Math.abs(H),Q=Math.abs(X);var ge=N>0?1:-1;d=y,p=b-ge*Z*o,z=y,F=b+ge*Q*o}else Z=Math.sqrt(G*G+H*H),Q=Math.sqrt(U*U+X*X),$=Q/(Q+Z),d=y-D*o*(1-$),p=b-N*o*(1-$),z=y+D*o*$,F=b+N*o*$,z=Ou(z,Lu(E,y)),F=Ou(F,Lu(A,b)),z=Lu(z,Ou(E,y)),F=Lu(F,Ou(A,b)),D=z-y,N=F-b,d=y-D*Z/Q,p=b-N*Z/Q,d=Ou(d,Lu(l,y)),p=Ou(p,Lu(c,b)),d=Lu(d,Ou(l,y)),p=Lu(p,Ou(c,b)),D=y-d,N=b-p,z=y+D*Q/Z,F=b+N*Q/Z}n.bezierCurveTo(f,h,d,p,y,b),f=z,h=F}else n.lineTo(y,b)}l=y,c=b,g+=a}return m}var $z=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),Tge=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new $z},e.prototype.buildPath=function(t,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&Mc(i[o*2-2],i[o*2-1]);o--);for(;a<o&&Mc(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=JS(t,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=iu.CMD,s,u,l=r==="x",c=[],f=0;f<a.length;){var h=a[f++],d=void 0,p=void 0,g=void 0,m=void 0,y=void 0,b=void 0,_=void 0;switch(h){case o.M:s=a[f++],u=a[f++];break;case o.L:if(d=a[f++],p=a[f++],_=l?(t-s)/(d-s):(t-u)/(p-u),_<=1&&_>=0){var w=l?(p-u)*_+u:(d-s)*_+s;return l?[t,w]:[w,t]}s=d,u=p;break;case o.C:d=a[f++],p=a[f++],g=a[f++],m=a[f++],y=a[f++],b=a[f++];var T=l?A0(s,d,g,y,t,c):A0(u,p,m,b,t,c);if(T>0)for(var E=0;E<T;E++){var A=c[E];if(A<=1&&A>=0){var w=l?vr(u,p,m,b,A):vr(s,d,g,y,A);return l?[t,w]:[w,t]}}s=y,u=b;break}}},e}(jt),Ege=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}($z),kge=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new Ege},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,u=r.smoothMonotone;if(r.connectNulls){for(;s>0&&Mc(i[s*2-2],i[s*2-1]);s--);for(;o<s&&Mc(i[o*2],i[o*2+1]);o++);}for(;o<s;){var l=JS(t,i,o,s,s,1,r.smooth,u,r.connectNulls);JS(t,a,o+l-1,l,s,-1,r.stackedOnSmooth,u,r.connectNulls),o+=l+1,t.closePath()}},e}(jt);function Nz(n,e,t,r,i){var a=n.getArea(),o=a.x,s=a.y,u=a.width,l=a.height,c=t.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,u+=c,l+=c,o=Math.floor(o),u=Math.round(u);var f=new er({shape:{x:o,y:s,width:u,height:l}});if(e){var h=n.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=u),f.shape.width=0):(p||(f.shape.y+=l),f.shape.height=0);var g=Et(i)?function(m){i(m,f)}:null;ei(f,{shape:{width:u,height:l,x:o,y:s}},t,null,r,g)}return f}function Oz(n,e,t){var r=n.getArea(),i=ur(r.r0,1),a=ur(r.r,1),o=new fo({shape:{cx:ur(n.cx,1),cy:ur(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var s=n.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,ei(o,{shape:{endAngle:r.endAngle,r:a}},t)}return o}function Age(n,e,t,r,i){if(n){if(n.type==="polar")return Oz(n,e,t);if(n.type==="cartesian2d")return Nz(n,e,t,r,i)}else return null;return null}function oE(n,e){return n.type===e}function VO(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function zO(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var o=n[a++],s=n[a++];isNaN(o)||(e=Math.min(o,e),r=Math.max(o,r)),isNaN(s)||(t=Math.min(s,t),i=Math.max(s,i))}return[[e,t],[r,i]]}function UO(n,e){var t=zO(n),r=t[0],i=t[1],a=zO(e),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function WO(n){return dn(n)?n:n?.5:0}function Rge(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=Xs(r*2),a=0;a<r;a++){var o=Dz(t,n,e,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Mu(n,e,t,r){var i=e.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,u=[],l=[],c=[],f=[];if(r){for(s=0;s<n.length;s+=2)!isNaN(n[s])&&!isNaN(n[s+1])&&f.push(n[s],n[s+1]);n=f}for(s=0;s<n.length-2;s+=2)switch(c[0]=n[s+2],c[1]=n[s+3],l[0]=n[s],l[1]=n[s+1],o.push(l[0],l[1]),t){case"end":u[a]=c[a],u[1-a]=l[1-a],o.push(u[0],u[1]);break;case"middle":var h=(l[a]+c[a])/2,d=[];u[a]=d[a]=h,u[1-a]=l[1-a],d[1-a]=c[1-a],o.push(u[0],u[1]),o.push(d[0],d[1]);break;default:u[a]=l[a],u[1-a]=c[1-a],o.push(u[0],u[1])}return o.push(n[s++],n[s++]),o}function Ige(n,e){var t=[],r=n.length,i,a;function o(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),g=nue(p,[c.color,f.color]);return{coord:h,color:g}}for(var s=0;s<r;s++){var u=n[s],l=u.coord;if(l<0)i=u;else if(l>e){a?t.push(o(a,u,e)):i&&t.push(o(i,u,0),o(i,u,e));break}else i&&(t.push(o(i,u,0)),i=null),t.push(u),a=u}return t}function Pge(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=n.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var u=e.getAxis(i),l=nt(a.stops,function(_){return{coord:u.toGlobalCoord(u.dataToCoord(_.value)),color:_.color}}),c=l.length,f=a.outerColors.slice();c&&l[0].coord>l[c-1].coord&&(l.reverse(),f.reverse());var h=Ige(l,i==="x"?t.getWidth():t.getHeight()),d=h.length;if(!d&&c)return l[0].coord<0?f[1]?f[1]:l[c-1].color:f[0]?f[0]:l[0].color;var p=10,g=h[0].coord-p,m=h[d-1].coord+p,y=m-g;if(y<.001)return"transparent";ne(h,function(_){_.offset=(_.coord-g)/y}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var b=new hV(0,0,0,0,h,!0);return b[i]=g,b[i+"2"]=m,b}}}function Dge(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&$ge(a,e))){var o=e.mapDimension(a.dim),s={};return ne(a.getViewLabels(),function(u){var l=a.scale.getRawOrdinalNumber(u.tickValue);s[l]=1}),function(u){return!s.hasOwnProperty(e.get(o,u))}}}}function $ge(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(aE.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function Nge(n,e){return isNaN(n)||isNaN(e)}function Oge(n){for(var e=n.length/2;e>0&&Nge(n[e*2-2],n[e*2-1]);e--);return e-1}function HO(n,e){return[n[e*2],n[e*2+1]]}function Lge(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,o,s=0,u=-1,l=0;l<r;l++)if(o=n[l*2+i],!(isNaN(o)||isNaN(n[l*2+1-i]))){if(l===0){a=o;continue}if(a<=e&&o>=e||a>=e&&o<=e){u=l;break}s=l,a=o}return{range:[s,u],t:(e-a)/(o-a)}}function Lz(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<Ba.length;e++)if(n.get([Ba[e],"endLabel","show"]))return!0;return!1}function N_(n,e,t,r){if(oE(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},u=Lz(r)?function(d,p){n._endLabelOnDuring(d,p,o,s,a,i,e)}:null,l=e.getBaseAxis().isHorizontal(),c=Nz(e,t,r,function(){var d=n._endLabel;d&&t&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},u);if(!r.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);l?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return u&&u(1,c),c}else return Oz(e,t,r)}function Mge(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||o}}}var Bge=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new lr,r=new _ge;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t},e.prototype.render=function(t,r,i){var a=this,o=t.coordinateSystem,s=this.group,u=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),f=u.getLayout("points")||[],h=o.type==="polar",d=this._coordSys,p=this._symbolDraw,g=this._polyline,m=this._polygon,y=this._lineGroup,b=t.get("animation"),_=!c.isEmpty(),w=c.get("origin"),T=Pz(o,u,w),E=_&&Rge(o,u,T),A=t.get("showSymbol"),I=t.get("connectNulls"),$=A&&!h&&Dge(t,u,o),D=this._data;D&&D.eachItemGraphicEl(function(Ce,ye){Ce.__temp&&(s.remove(Ce),D.setItemGraphicEl(ye,null))}),A||p.remove(),s.add(y);var N=h?!1:t.get("step"),z;o&&o.getArea&&t.get("clip",!0)&&(z=o.getArea(),z.width!=null?(z.x-=.1,z.y-=.1,z.width+=.2,z.height+=.2):z.r0&&(z.r0-=.5,z.r+=.5)),this._clipShapeForSymbol=z;var F=Pge(u,o,i)||u.getVisual("style")[u.getVisual("drawType")];if(!(g&&d.type===o.type&&N===this._step))A&&p.updateData(u,{isIgnore:$,clipShape:z,disableAnimation:!0,getSymbolPoint:function(Ce){return[f[Ce*2],f[Ce*2+1]]}}),b&&this._initSymbolLabelAnimation(u,o,z),N&&(f=Mu(f,o,N,I),E&&(E=Mu(E,o,N,I))),g=this._newPolyline(f),_?m=this._newPolygon(f,E):m&&(y.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,Kc(F)),y.setClipPath(N_(this,o,!0,t));else{_&&!m?m=this._newPolygon(f,E):m&&!_&&(y.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(t,o,Kc(F));var G=y.getClipPath();if(G){var U=N_(this,o,!1,t);ei(G,{shape:U.shape},t)}else y.setClipPath(N_(this,o,!0,t));A&&p.updateData(u,{isIgnore:$,clipShape:z,disableAnimation:!0,getSymbolPoint:function(Ce){return[f[Ce*2],f[Ce*2+1]]}}),(!VO(this._stackedOnPoints,E)||!VO(this._points,f))&&(b?this._doUpdateAnimation(u,E,o,i,N,w,I):(N&&(f=Mu(f,o,N,I),E&&(E=Mu(E,o,N,I))),g.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:E})))}var H=t.getModel("emphasis"),X=H.get("focus"),Z=H.get("blurScope"),Q=H.get("disabled");if(g.useStyle(St(l.getLineStyle(),{fill:"none",stroke:F,lineJoin:"bevel"})),O0(g,t,"lineStyle"),g.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var le=g.getState("emphasis").style;le.lineWidth=+g.style.lineWidth+1}an(g).seriesIndex=t.seriesIndex,Fv(g,X,Z,Q);var ge=WO(t.get("smooth")),be=t.get("smoothMonotone");if(g.setShape({smooth:ge,smoothMonotone:be,connectNulls:I}),m){var ke=u.getCalculationInfo("stackedOnSeries"),Ae=0;m.useStyle(St(c.getAreaStyle(),{fill:F,opacity:.7,lineJoin:"bevel",decal:u.getVisual("style").decal})),ke&&(Ae=WO(ke.get("smooth"))),m.setShape({smooth:ge,stackedOnSmooth:Ae,smoothMonotone:be,connectNulls:I}),O0(m,t,"areaStyle"),an(m).seriesIndex=t.seriesIndex,Fv(m,X,Z,Q)}var de=function(Ce){a._changePolyState(Ce)};u.eachItemGraphicEl(function(Ce){Ce&&(Ce.onHoverStateChange=de)}),this._polyline.onHoverStateChange=de,this._data=u,this._coordSys=o,this._stackedOnPoints=E,this._points=f,this._step=N,this._valueOrigin=w,t.get("triggerLineEvent")&&(this.packEventData(t,g),m&&this.packEventData(t,m))},e.prototype.packEventData=function(t,r){an(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var o=t.getData(),s=Xc(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var u=o.getLayout("points"),l=o.getItemGraphicEl(s);if(!l){var c=u[s*2],f=u[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=t.get("zlevel")||0,d=t.get("z")||0;l=new aE(o,s),l.x=c,l.y=f,l.setZ(h,d);var p=l.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),l.__temp=!0,o.setItemGraphicEl(s,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else is.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var o=t.getData(),s=Xc(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var u=o.getItemGraphicEl(s);u&&(u.__temp?(o.setItemGraphicEl(s,null),this.group.remove(u)):u.downplay())}else is.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;Q$(this._polyline,t),r&&Q$(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new Tge({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new kge({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,o,s=r.getBaseAxis(),u=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var l=t.hostModel,c=l.get("animationDuration");Et(c)&&(c=c(null));var f=l.get("animationDelay")||0,h=Et(f)?f(null):f;t.eachItemGraphicEl(function(d,p){var g=d;if(g){var m=[d.x,d.y],y=void 0,b=void 0,_=void 0;if(i)if(o){var w=i,T=r.pointToCoord(m);a?(y=w.startAngle,b=w.endAngle,_=-T[1]/180*Math.PI):(y=w.r0,b=w.r,_=T[0])}else{var E=i;a?(y=E.x,b=E.x+E.width,_=d.x):(y=E.y+E.height,b=E.y,_=d.y)}var A=b===y?0:(_-y)/(b-y);u&&(A=1-A);var I=Et(f)?f(p):c*A+h,$=g.getSymbolPath(),D=$.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:I}),D&&D.animateFrom({style:{opacity:0}},{duration:300,delay:I}),$.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(Lz(t)){var o=t.getData(),s=this._polyline,u=o.getLayout("points");if(!u){s.removeTextContent(),this._endLabel=null;return}var l=this._endLabel;l||(l=this._endLabel=new br({z2:200}),l.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=Oge(u);c>=0&&(kg(s,Ag(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?Iz(o,d):iE(o,f)},enableTextSetter:!0},Mge(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,o,s,u){var l=this._endLabel,c=this._polyline;if(l){t<1&&a.originalX==null&&(a.originalX=l.x,a.originalY=l.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),g=s.get("distance")||0,m=u.getBaseAxis(),y=m.isHorizontal(),b=m.inverse,_=r.shape,w=b?y?_.x:_.y+_.height:y?_.x+_.width:_.y,T=(y?g:0)*(b?-1:1),E=(y?0:-g)*(b?-1:1),A=y?"x":"y",I=Lge(f,w,A),$=I.range,D=$[1]-$[0],N=void 0;if(D>=1){if(D>1&&!d){var z=HO(f,$[0]);l.attr({x:z[0]+T,y:z[1]+E}),o&&(N=h.getRawValue($[0]))}else{var z=c.getPointOn(w,A);z&&l.attr({x:z[0]+T,y:z[1]+E});var F=h.getRawValue($[0]),G=h.getRawValue($[1]);o&&(N=w5(i,p,F,G,I.t))}a.lastFrameIndex=$[0]}else{var U=t===1||a.lastFrameIndex>0?$[0]:0,z=HO(f,U);o&&(N=h.getRawValue(U)),l.attr({x:z[0]+T,y:z[1]+E})}o&&Rd(l).setLabelText(N)}},e.prototype._doUpdateAnimation=function(t,r,i,a,o,s,u){var l=this._polyline,c=this._polygon,f=t.hostModel,h=Cge(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,g=h.next,m=h.stackedOnNext;if(o&&(d=Mu(h.current,i,o,u),p=Mu(h.stackedOnCurrent,i,o,u),g=Mu(h.next,i,o,u),m=Mu(h.stackedOnNext,i,o,u)),UO(d,g)>3e3||c&&UO(p,m)>3e3){l.stopAnimation(),l.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:m}));return}l.shape.__points=h.current,l.shape.points=d;var y={shape:{points:g}};h.current!==d&&(y.shape.__points=h.next),l.stopAnimation(),Rr(l,y,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),Rr(c,{shape:{stackedOnPoints:m}},f),l.shape.points!==c.shape.points&&(c.shape.points=l.shape.points));for(var b=[],_=h.status,w=0;w<_.length;w++){var T=_[w].cmd;if(T==="="){var E=t.getItemGraphicEl(_[w].idx1);E&&b.push({el:E,ptIdx:w})}}l.animators&&l.animators.length&&l.animators[0].during(function(){c&&c.dirtyShape();for(var A=l.shape.__points,I=0;I<b.length;I++){var $=b[I].el,D=b[I].ptIdx*2;$.x=A[D],$.y=A[D+1],$.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(is);const Fge=Bge;function Vge(n,e){return{seriesType:n,plan:H2(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,o=e||a.large;if(i){var s=nt(i.dimensions,function(d){return r.mapDimension(d)}).slice(0,2),u=s.length,l=r.getCalculationInfo("stackResultDimension");Yc(r,s[0])&&(s[0]=l),Yc(r,s[1])&&(s[1]=l);var c=r.getStore(),f=r.getDimensionIndex(s[0]),h=r.getDimensionIndex(s[1]);return u&&{progress:function(d,p){for(var g=d.end-d.start,m=o&&Xs(g*u),y=[],b=[],_=d.start,w=0;_<d.end;_++){var T=void 0;if(u===1){var E=c.get(f,_);T=i.dataToPoint(E,null,b)}else y[0]=c.get(f,_),y[1]=c.get(h,_),T=i.dataToPoint(y,null,b);o?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(_,T.slice())}o&&p.setLayout("points",m)}}}}}}var zge={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},Uge=function(n){return Math.round(n.length/2)};function Mz(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),o=e.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var u=o.getBaseAxis(),l=o.getOtherAxis(u),c=u.getExtent(),f=r.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){a==="lttb"&&e.setData(i.lttbDownSample(i.mapDimension(l.dim),1/d));var p=void 0;lt(a)?p=zge[a]:Et(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(l.dim),1/d,p,Uge))}}}}}function sVe(n){n.registerChartView(Fge),n.registerSeriesModel(mge),n.registerLayout(Vge("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Mz("line"))}var Bz=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return Q2(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.dataToPoint(a.clampData(t));if(i)ne(a.getAxes(),function(f,h){if(f.type==="category"){var d=f.getTicksCoords(),p=a.clampData(t)[h];r&&(r[h]==="x1"||r[h]==="y1")&&(p+=1),p>d.length-1&&(p=d.length-1),p<0&&(p=0),d[p]&&(o[h]=f.toGlobalCoord(d[p].coord))}});else{var s=this.getData(),u=s.getLayout("offset"),l=s.getLayout("size"),c=a.getBaseAxis().isHorizontal()?0:1;o[c]+=u+l/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(hl);hl.registerClass(Bz);const GO=Bz;var Wge=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Q2(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=SV(GO.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(GO);const Hge=Wge;var Gge=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),jge=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Gge},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),u=(s-o)*.5,l=o+u,c=r.startAngle,f=r.endAngle,h=r.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var g=Math.cos(c),m=Math.sin(c),y=Math.cos(f),b=Math.sin(f);p?(t.moveTo(g*o+i,m*o+a),t.arc(g*l+i,m*l+a,u,-Math.PI+c,c,!h)):t.moveTo(g*s+i,m*s+a),t.arc(i,a,s,c,f,!h),t.arc(y*l+i,b*l+a,u,f-Math.PI*2,f-Math.PI,!h),o!==0&&t.arc(i,a,o,f,c,h)},e}(jt);const jO=jge;function qge(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return D0(r,i,a);var s=n(o),u=i.distance!=null?i.distance:5,l=this.shape,c=l.cx,f=l.cy,h=l.r,d=l.r0,p=(h+d)/2,g=l.startAngle,m=l.endAngle,y=(g+m)/2,b=t?Math.abs(h-d)/2:0,_=Math.cos,w=Math.sin,T=c+h*_(g),E=f+h*w(g),A="left",I="top";switch(s){case"startArc":T=c+(d-u)*_(y),E=f+(d-u)*w(y),A="center",I="top";break;case"insideStartArc":T=c+(d+u)*_(y),E=f+(d+u)*w(y),A="center",I="bottom";break;case"startAngle":T=c+p*_(g)+sy(g,u+b,!1),E=f+p*w(g)+uy(g,u+b,!1),A="right",I="middle";break;case"insideStartAngle":T=c+p*_(g)+sy(g,-u+b,!1),E=f+p*w(g)+uy(g,-u+b,!1),A="left",I="middle";break;case"middle":T=c+p*_(y),E=f+p*w(y),A="center",I="middle";break;case"endArc":T=c+(h+u)*_(y),E=f+(h+u)*w(y),A="center",I="bottom";break;case"insideEndArc":T=c+(h-u)*_(y),E=f+(h-u)*w(y),A="center",I="top";break;case"endAngle":T=c+p*_(m)+sy(m,u+b,!0),E=f+p*w(m)+uy(m,u+b,!0),A="left",I="middle";break;case"insideEndAngle":T=c+p*_(m)+sy(m,-u+b,!0),E=f+p*w(m)+uy(m,-u+b,!0),A="right",I="middle";break;default:return D0(r,i,a)}return r=r||{},r.x=T,r.y=E,r.align=A,r.verticalAlign=I,r}}function Xge(n,e,t,r){if(dn(r)){n.setTextConfig({rotation:r});return}else if(Ze(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,u,l=t(e);switch(l){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":u=s;break;case"startAngle":case"insideStartAngle":u=a;break;case"endAngle":case"insideEndAngle":u=o;break;default:n.setTextConfig({rotation:0});return}var c=Math.PI*1.5-u;l==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),n.setTextConfig({rotation:c})}function sy(n,e,t){return e*Math.sin(n)*(t?-1:1)}function uy(n,e,t){return e*Math.cos(n)*(t?1:-1)}var O_=Math.max,L_=Math.min;function Kge(n,e){var t=n.getArea&&n.getArea();if(oE(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var Yge=function(n){rt(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var o=t.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){rb(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var o=this.group,s=t.getData(),u=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),f;l.type==="cartesian2d"?f=c.isHorizontal():l.type==="polar"&&(f=c.dim==="angle");var h=t.isAnimationEnabled()?t:null,d=Zge(t,l);d&&this._enableRealtimeSort(d,s,i);var p=t.get("clip",!0)||d,g=Kge(l,s);o.removeClipPath();var m=t.get("roundCap",!0),y=t.get("showBackground",!0),b=t.getModel("backgroundStyle"),_=b.get("borderRadius")||0,w=[],T=this._backgroundEls,E=a&&a.isInitSort,A=a&&a.type==="changeAxisOrder";function I(N){var z=ly[l.type](s,N),F=ime(l,f,z);return F.useStyle(b.getItemStyle()),l.type==="cartesian2d"&&F.setShape("r",_),w[N]=F,F}s.diff(u).add(function(N){var z=s.getItemModel(N),F=ly[l.type](s,N,z);if(y&&I(N),!(!s.hasValue(N)||!ZO[l.type](F))){var G=!1;p&&(G=qO[l.type](g,F));var U=XO[l.type](t,s,N,F,f,h,c.model,!1,m);d&&(U.forceLabelAnimation=!0),QO(U,s,N,z,F,t,f,l.type==="polar"),E?U.attr({shape:F}):d?KO(d,h,U,F,N,f,!1,!1):ei(U,{shape:F},t,N),s.setItemGraphicEl(N,U),o.add(U),U.ignore=G}}).update(function(N,z){var F=s.getItemModel(N),G=ly[l.type](s,N,F);if(y){var U=void 0;T.length===0?U=I(z):(U=T[z],U.useStyle(b.getItemStyle()),l.type==="cartesian2d"&&U.setShape("r",_),w[N]=U);var H=ly[l.type](s,N),X=Vz(f,H,l);Rr(U,{shape:X},h,N)}var Z=u.getItemGraphicEl(z);if(!s.hasValue(N)||!ZO[l.type](G)){o.remove(Z);return}var Q=!1;if(p&&(Q=qO[l.type](g,G),Q&&o.remove(Z)),Z?E2(Z):Z=XO[l.type](t,s,N,G,f,h,c.model,!!Z,m),d&&(Z.forceLabelAnimation=!0),A){var le=Z.getTextContent();if(le){var ge=Rd(le);ge.prevValue!=null&&(ge.prevValue=ge.value)}}else QO(Z,s,N,F,G,t,f,l.type==="polar");E?Z.attr({shape:G}):d?KO(d,h,Z,G,N,f,!0,A):Rr(Z,{shape:G},t,N,null),s.setItemGraphicEl(N,Z),Z.ignore=Q,o.add(Z)}).remove(function(N){var z=u.getItemGraphicEl(N);z&&B0(z,t,N)}).execute();var $=this._backgroundGroup||(this._backgroundGroup=new lr);$.removeAll();for(var D=0;D<w.length;++D)$.add(w[D]);o.add($),this._backgroundEls=w,this._data=s},e.prototype._renderLarge=function(t,r,i){this._clear(),eL(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),eL(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&Age(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var o=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var s=function(u){var l=r.getItemGraphicEl(u),c=l&&l.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(o,s){var u=i(s);u=u??NaN,a.push({dataIndex:s,mappedValue:u,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:nt(a,function(o){return o.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,o=t.mapDimension(i.dim),s=Number.MAX_VALUE,u=0,l=a.getOrdinalMeta().categories.length;u<l;++u){var c=t.rawIndexOf(o,a.getRawOrdinalNumber(u)),f=c<0?Number.MIN_VALUE:r(t.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(t.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var o=this._dataSort(t,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,o=this._dataSort(t,a,function(s){return t.get(t.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){B0(a,t,an(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(is),qO={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,o=O_(e.x,n.x),s=L_(e.x+e.width,i),u=O_(e.y,n.y),l=L_(e.y+e.height,a),c=s<o,f=l<u;return e.x=c&&o>i?s:o,e.y=f&&u>a?l:u,e.width=c?0:s-o,e.height=f?0:l-u,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||f},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=L_(e.r,n.r),a=O_(e.r0,n.r0);e.r=i,e.r0=a;var o=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return o}},XO={cartesian2d:function(n,e,t,r,i,a,o,s,u){var l=new er({shape:Ue({},r),z2:1});if(l.__dataIndex=t,l.name="item",a){var c=l.shape,f=i?"height":"width";c[f]=0}return l},polar:function(n,e,t,r,i,a,o,s,u){var l=!i&&u?jO:fo,c=new l({shape:r,z2:1});c.name="item";var f=Fz(i);if(c.calculateTextPosition=qge(f,{isRoundCap:l===jO}),a){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:r.startAngle,p[d]=r[d],(s?Rr:ei)(c,{shape:p},a)}return c}};function Zge(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function KO(n,e,t,r,i,a,o,s){var u,l;a?(l={x:r.x,width:r.width},u={y:r.y,height:r.height}):(l={y:r.y,height:r.height},u={x:r.x,width:r.width}),s||(o?Rr:ei)(t,{shape:u},e,i,null);var c=e?n.baseAxis.model:null;(o?Rr:ei)(t,{shape:l},c,i)}function YO(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var Qge=["x","y","width","height"],Jge=["cx","cy","r","startAngle","endAngle"],ZO={cartesian2d:function(n){return!YO(n,Qge)},polar:function(n){return!YO(n,Jge)}},ly={cartesian2d:function(n,e,t){var r=n.getItemLayout(e),i=t?tme(t,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function eme(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function Fz(n){return function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}}(n)}function QO(n,e,t,r,i,a,o,s){var u=e.getItemVisual(t,"style");s||n.setShape("r",r.get(["itemStyle","borderRadius"])||0),n.useStyle(u);var l=r.getShallow("cursor");l&&n.attr("cursor",l);var c=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=Ag(r);kg(n,f,{labelFetcher:a,labelDataIndex:t,defaultText:iE(a.getData(),t),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:c});var h=n.getTextContent();if(s&&h){var d=r.get(["label","position"]);n.textConfig.inside=d==="middle"?!0:null,Xge(n,d==="outside"?c:d,Fz(o),r.get(["label","rotate"]))}bfe(h,f,a.getRawValue(t),function(g){return Iz(e,g)});var p=r.getModel(["emphasis"]);Fv(n,p.get("focus"),p.get("blurScope"),p.get("disabled")),O0(n,r),eme(i)&&(n.style.fill="none",n.style.stroke="none",ne(n.states,function(g){g.style&&(g.style.fill=g.style.stroke="none")}))}function tme(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var nme=function(){function n(){}return n}(),JO=function(n){rt(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new nme},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],u=[],l=this.barWidth,c=0;c<i.length;c+=3)u[a]=l,u[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],t.rect(s[0],s[1],u[0],u[1])},e}(jt);function eL(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),u=n.getModel("backgroundStyle"),l=i.getLayout("largeBackgroundPoints");if(l){var c=new JO({shape:{points:l},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(u.getItemStyle()),e.add(c),t&&t.push(c)}var f=new JO({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=a,f.largeDataIndices=o,f.barWidth=s,e.add(f),f.useStyle(i.getVisual("style")),an(f).seriesIndex=n.seriesIndex,n.get("silent")||(f.on("mousedown",tL),f.on("mousemove",tL)),t&&t.push(f)}var tL=j2(function(n){var e=this,t=rme(e,n.offsetX,n.offsetY);an(e).dataIndex=t>=0?t:null},30,!1);function rme(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,o=n.largeDataIndices,s=[],u=[],l=n.barWidth,c=0,f=a.length/3;c<f;c++){var h=c*3;if(u[r]=l,u[i]=a[h+2],s[r]=a[h+r],s[i]=a[h+i],u[i]<0&&(s[i]+=u[i],u[i]=-u[i]),e>=s[0]&&e<=s[0]+u[0]&&t>=s[1]&&t<=s[1]+u[1])return o[c]}return-1}function Vz(n,e,t){if(oE(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function ime(n,e,t){var r=n.type==="polar"?fo:er;return new r({shape:Vz(e,t,n),silent:!0,z2:0})}const ame=Yge;function uVe(n){n.registerChartView(ame),n.registerSeriesModel(Hge),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,rn(wve,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Sve("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Mz("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var cy=Math.PI*2,nL=Math.PI/180;function zz(n,e){return fl(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Uz(n,e){var t=zz(n,e),r=n.get("center"),i=n.get("radius");Ze(i)||(i=[0,i]);var a=tn(t.width,e.getWidth()),o=tn(t.height,e.getHeight()),s=Math.min(a,o),u=tn(i[0],s/2),l=tn(i[1],s/2),c,f,h=n.coordinateSystem;if(h){var d=h.dataToPoint(r);c=d[0]||0,f=d[1]||0}else Ze(r)||(r=[r,r]),c=tn(r[0],a)+t.x,f=tn(r[1],o)+t.y;return{cx:c,cy:f,r0:u,r:l}}function ome(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),o=zz(r,t),s=Uz(r,t),u=s.cx,l=s.cy,c=s.r,f=s.r0,h=-r.get("startAngle")*nL,d=r.get("minAngle")*nL,p=0;i.each(a,function(D){!isNaN(D)&&p++});var g=i.getSum(a),m=Math.PI/(g||p)*2,y=r.get("clockwise"),b=r.get("roseType"),_=r.get("stillShowZeroSum"),w=i.getDataExtent(a);w[0]=0;var T=cy,E=0,A=h,I=y?1:-1;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(D,N){var z;if(isNaN(D)){i.setItemLayout(N,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:u,cy:l,r0:f,r:b?NaN:c});return}b!=="area"?z=g===0&&_?m:D*m:z=cy/p,z<d?(z=d,T-=d):E+=D;var F=A+I*z;i.setItemLayout(N,{angle:z,startAngle:A,endAngle:F,clockwise:y,cx:u,cy:l,r0:f,r:b?Hu(D,w,[f,c]):c}),A=F}),T<cy&&p)if(T<=.001){var $=cy/p;i.each(a,function(D,N){if(!isNaN(D)){var z=i.getItemLayout(N);z.angle=$,z.startAngle=h+I*N*$,z.endAngle=h+I*(N+1)*$}})}else m=T/E,A=h,i.each(a,function(D,N){if(!isNaN(D)){var z=i.getItemLayout(N),F=z.angle===d?d:D*m;z.startAngle=A,z.endAngle=A+I*F,A+=I*F}})})}function sme(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var ume=Math.PI/180;function rL(n,e,t,r,i,a,o,s,u,l){if(n.length<2)return;function c(g){for(var m=g.rB,y=m*m,b=0;b<g.list.length;b++){var _=g.list[b],w=Math.abs(_.label.y-t),T=r+_.len,E=T*T,A=Math.sqrt((1-Math.abs(w*w/y))*E),I=e+(A+_.len2)*i,$=I-_.label.x,D=_.targetTextWidth-$*i;Wz(_,D,!0),_.label.x=I}}function f(g){for(var m={list:[],maxY:0},y={list:[],maxY:0},b=0;b<g.length;b++)if(g[b].labelAlignTo==="none"){var _=g[b],w=_.label.y>t?y:m,T=Math.abs(_.label.y-t);if(T>=w.maxY){var E=_.label.x-e-_.len2*i,A=r+_.len,I=Math.abs(E)<A?Math.sqrt(T*T/(1-E*E/A/A)):A;w.rB=I,w.maxY=T}w.list.push(_)}c(m),c(y)}for(var h=n.length,d=0;d<h;d++)if(n[d].position==="outer"&&n[d].labelAlignTo==="labelLine"){var p=n[d].label.x-l;n[d].linePoints[1][0]+=p,n[d].label.x=l}Az(n,u,u+o)&&f(n)}function lme(n,e,t,r,i,a,o,s){for(var u=[],l=[],c=Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<n.length;h++){var d=n[h].label;M_(n[h])||(d.x<e?(c=Math.min(c,d.x),u.push(n[h])):(f=Math.max(f,d.x),l.push(n[h])))}for(var h=0;h<n.length;h++){var p=n[h];if(!M_(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var d=p.label,g=p.linePoints,m=void 0;p.labelAlignTo==="edge"?d.x<e?m=g[2][0]-p.labelDistance-o-p.edgeDistance:m=o+i-p.edgeDistance-g[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?d.x<e?m=c-o-p.bleedMargin:m=o+i-f-p.bleedMargin:d.x<e?m=d.x-o-p.bleedMargin:m=o+i-d.x-p.bleedMargin,p.targetTextWidth=m,Wz(p,m)}}rL(l,e,t,r,1,i,a,o,s,f),rL(u,e,t,r,-1,i,a,o,s,c);for(var h=0;h<n.length;h++){var p=n[h];if(!M_(p)&&p.linePoints){var d=p.label,g=p.linePoints,y=p.labelAlignTo==="edge",b=d.style.padding,_=b?b[1]+b[3]:0,w=d.style.backgroundColor?0:_,T=p.rect.width+w,E=g[1][0]-g[2][0];y?d.x<e?g[2][0]=o+p.edgeDistance+T+p.labelDistance:g[2][0]=o+i-p.edgeDistance-T-p.labelDistance:(d.x<e?g[2][0]=d.x+p.labelDistance:g[2][0]=d.x-p.labelDistance,g[1][0]=g[2][0]+E),g[1][1]=g[2][1]=d.y}}}function Wz(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,o=i.backgroundColor,s=i.padding,u=s?s[1]+s[3]:0,l=i.overflow,c=a.width+(o?0:u);if(e<c||t){var f=a.height;if(l&&l.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-u);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",o)}else{var d=e-u,p=e<c?d:t?d>n.unconstrainedWidth?null:d:null;r.setStyle("width",p)}var g=r.getBoundingRect();a.width=g.width;var m=(r.style.margin||0)+2.1;a.height=g.height+m,a.y-=(a.height-f)/2}}}function M_(n){return n.position==="center"}function cme(n){var e=n.getData(),t=[],r,i,a=!1,o=(n.get("minShowLabelAngle")||0)*ume,s=e.getLayout("viewRect"),u=e.getLayout("r"),l=s.width,c=s.x,f=s.y,h=s.height;function d(E){E.ignore=!0}function p(E){if(!E.ignore)return!0;for(var A in E.states)if(E.states[A].ignore===!1)return!0;return!1}e.each(function(E){var A=e.getItemGraphicEl(E),I=A.shape,$=A.getTextContent(),D=A.getTextGuideLine(),N=e.getItemModel(E),z=N.getModel("label"),F=z.get("position")||N.get(["emphasis","label","position"]),G=z.get("distanceToLabelLine"),U=z.get("alignTo"),H=tn(z.get("edgeDistance"),l),X=z.get("bleedMargin"),Z=N.getModel("labelLine"),Q=Z.get("length");Q=tn(Q,l);var le=Z.get("length2");if(le=tn(le,l),Math.abs(I.endAngle-I.startAngle)<o){ne($.states,d),$.ignore=!0,D&&(ne(D.states,d),D.ignore=!0);return}if(p($)){var ge=(I.startAngle+I.endAngle)/2,be=Math.cos(ge),ke=Math.sin(ge),Ae,de,Ce,ye;r=I.cx,i=I.cy;var Ee=F==="inside"||F==="inner";if(F==="center")Ae=I.cx,de=I.cy,ye="center";else{var De=(Ee?(I.r+I.r0)/2*be:I.r*be)+r,Me=(Ee?(I.r+I.r0)/2*ke:I.r*ke)+i;if(Ae=De+be*3,de=Me+ke*3,!Ee){var Ie=De+be*(Q+u-I.r),Be=Me+ke*(Q+u-I.r),et=Ie+(be<0?-1:1)*le,xt=Be;U==="edge"?Ae=be<0?c+H:c+l-H:Ae=et+(be<0?-G:G),de=xt,Ce=[[De,Me],[Ie,Be],[et,xt]]}ye=Ee?"center":U==="edge"?be>0?"right":"left":be>0?"left":"right"}var Vt=Math.PI,Xn=0,ir=z.get("rotate");if(dn(ir))Xn=ir*(Vt/180);else if(F==="center")Xn=0;else if(ir==="radial"||ir===!0){var bi=be<0?-ge+Vt:-ge;Xn=bi}else if(ir==="tangential"&&F!=="outside"&&F!=="outer"){var xr=Math.atan2(be,ke);xr<0&&(xr=Vt*2+xr);var se=ke>0;se&&(xr=Vt+xr),Xn=xr-Vt}if(a=!!Xn,$.x=Ae,$.y=de,$.rotation=Xn,$.setStyle({verticalAlign:"middle"}),Ee){$.setStyle({align:ye});var Kn=$.states.select;Kn&&(Kn.x+=$.x,Kn.y+=$.y)}else{var dt=$.getBoundingRect().clone();dt.applyTransform($.getComputedTransform());var Dn=($.style.margin||0)+2.1;dt.y-=Dn/2,dt.height+=Dn,t.push({label:$,labelLine:D,position:F,len:Q,len2:le,minTurnAngle:Z.get("minTurnAngle"),maxSurfaceAngle:Z.get("maxSurfaceAngle"),surfaceNormal:new bt(be,ke),linePoints:Ce,textAlign:ye,labelDistance:G,labelAlignTo:U,edgeDistance:H,bleedMargin:X,rect:dt,unconstrainedWidth:dt.width,labelStyleWidth:$.style.width})}A.setTextConfig({inside:Ee})}}),!a&&n.get("avoidLabelOverlap")&&lme(t,r,i,u,l,h,c,f);for(var g=0;g<t.length;g++){var m=t[g],y=m.label,b=m.labelLine,_=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:m.textAlign}),_&&(ne(y.states,d),y.ignore=!0);var w=y.states.select;w&&(w.x+=y.x,w.y+=y.y)}if(b){var T=m.linePoints;_||!T?(ne(b.states,d),b.ignore=!0):(Sz(T,m.minTurnAngle),uge(T,m.surfaceNormal,m.maxSurfaceAngle),b.setShape({points:T}),y.__hostTarget.textGuideLineConfig={anchor:new bt(T[0][0],T[0][1])})}}}function fy(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Ze(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:nt(r,function(a){return ll(a,i)})}}var fme=function(n){rt(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var o=new br;return a.setTextContent(o),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var o=this,s=t.hostModel,u=t.getItemModel(r),l=u.getModel("emphasis"),c=t.getItemLayout(r),f=Ue(fy(u.getModel("itemStyle"),c,!0),c);if(isNaN(f.startAngle)){o.setShape(f);return}if(a){o.setShape(f);var h=s.getShallow("animationType");s.ecModel.ssr?(ei(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=f.cx,o.originY=f.cy):h==="scale"?(o.shape.r=c.r0,ei(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),ei(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,Rr(o,{shape:{endAngle:c.endAngle}},s,r))}else E2(o),Rr(o,{shape:f},s,r);o.useStyle(t.getItemVisual(r,"style")),O0(o,u);var d=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),g=Math.cos(d)*p,m=Math.sin(d)*p,y=u.getShallow("cursor");y&&o.attr("cursor",y),this._updateLabel(s,t,r),o.ensureState("emphasis").shape=Ue({r:c.r+(l.get("scale")&&l.get("scaleSize")||0)},fy(l.getModel("itemStyle"),c)),Ue(o.ensureState("select"),{x:g,y:m,shape:fy(u.getModel(["select","itemStyle"]),c)}),Ue(o.ensureState("blur"),{shape:fy(u.getModel(["blur","itemStyle"]),c)});var b=o.getTextGuideLine(),_=o.getTextContent();b&&Ue(b.ensureState("select"),{x:g,y:m}),Ue(_.ensureState("select"),{x:g,y:m}),Fv(this,l.get("focus"),l.get("blurScope"),l.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),u=r.getItemVisual(i,"style"),l=u&&u.fill,c=u&&u.opacity;kg(a,Ag(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:l,defaultOpacity:c,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var f=a.getTextContent();a.setTextConfig({position:null,rotation:null}),f.attr({z2:10});var h=t.get(["label","position"]);if(h!=="outside"&&h!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Eg,this.setTextGuideLine(d)),Cz(this,Tz(o),{stroke:l,opacity:uv(s.get(["lineStyle","opacity"]),c,1)})}},e}(fo),hme=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var o=t.getData(),s=this._data,u=this.group,l;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),f=1;isNaN(c&&c.startAngle)&&f<o.count();++f)c=o.getItemLayout(f);c&&(l=c.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),o.count()===0&&t.get("showEmptyCircle")){var h=new fo({shape:Uz(t,i)});h.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,u.add(h)}o.diff(s).add(function(d){var p=new fme(o,d,l);o.setItemGraphicEl(d,p),u.add(p)}).update(function(d,p){var g=s.getItemGraphicEl(p);g.updateData(o,d,l),g.off("click"),u.add(g),o.setItemGraphicEl(d,g)}).remove(function(d){var p=s.getItemGraphicEl(d);B0(p,t,d)}).execute(),cme(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=t[0]-a.cx,s=t[1]-a.cy,u=Math.sqrt(o*o+s*s);return u<=a.r&&u>=a.r0}},e.type="pie",e}(is);const dme=hme;function pme(n,e,t){e=Ze(e)&&{coordDimensions:e}||Ue({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=Q6(r,e).dimensions,a=new Z6(i,n);return a.initData(r,t),a}var vme=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}();const gme=vme;var mme=Fn(),yme=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new gme(Tn(this.getData,this),Tn(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return pme(this,{coordDimensions:["value"],encodeDefaulter:rn(Kfe,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=mme(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(u){o.push(u)}),a=i.seats=Mue(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,t);return s.percent=a[t]||0,s.$vars.push("percent"),s},e.prototype._defaultLabelLine=function(t){wS(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(hl);const bme=yme;function xme(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(dn(o)&&!isNaN(o)&&o<0)})}}}function lVe(n){n.registerChartView(dme),n.registerSeriesModel(bme),Mde("pie",n.registerAction),n.registerLayout(rn(ome,"pie")),n.registerProcessor(sme("pie")),n.registerProcessor(xme("pie"))}var _me=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(bn);const wme=_me;var eC=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Nr).models[0]},e.type="cartesian2dAxis",e}(bn);xo(eC,vz);var Hz={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Sme=Mt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Hz),sE=Mt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Hz),Cme=Mt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},sE),Tme=St({logBase:10},sE);const Eme={category:Sme,value:sE,time:Cme,log:Tme};var kme={value:1,category:1,time:1,log:1};function Q0(n,e,t,r){ne(kme,function(i,a){var o=Mt(Mt({},Eme[a],!0),r,!0),s=function(u){rt(l,u);function l(){var c=u!==null&&u.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return l.prototype.mergeDefaultAndTheme=function(c,f){var h=Wv(this),d=h?fb(c):{},p=f.getTheme();Mt(c,p.get(a+"Axis")),Mt(c,this.getDefaultOption()),c.type=iL(c),h&&id(c,d,h)},l.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=ZS.createByAxisModel(this))},l.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},l.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},l.type=e+"Axis."+a,l.defaultOption=o,l}(t);n.registerComponentModel(s)}),n.registerSubTypeDefaulter(e+"Axis",iL)}function iL(n){return n.type||(n.data?"category":"value")}var Ame=function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return nt(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Jn(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n}();const Rme=Ame;var tC=["x","y"];function aL(n){return n.type==="interval"||n.type==="time"}var Ime=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=tC,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!aL(t)||!aL(r))){var i=t.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),u=i[1]-i[0],l=a[1]-a[0];if(!(!u||!l)){var c=(s[0]-o[0])/u,f=(s[1]-o[1])/l,h=o[0]-i[0]*c,d=o[1]-a[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=H1([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),o=this.getArea(),s=new Kt(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],o=t[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return $a(i,t,this._transform);var s=this.getAxis("x"),u=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=u.toGlobalCoord(u.dataToCoord(o,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),u=i.parse(t[0]),l=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),r},e.prototype.pointToData=function(t,r){var i=[];if(this._invTransform)return $a(i,t,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=o.coordToData(o.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),i=Math.min(t[0],t[1]),a=Math.min(r[0],r[1]),o=Math.max(t[0],t[1])-i,s=Math.max(r[0],r[1])-a;return new Kt(i,a,o,s)},e}(Rme),Pme=function(n){rt(e,n);function e(t,r,i,a,o){var s=n.call(this,t,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(_f);const Dme=Pme;function nC(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,u=o?"onZero":s,l=i.dim,c=r.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,p=l==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));p[h.onZero]=Math.max(Math.min(g,p[1]),p[0])}a.position=[l==="y"?p[h[u]]:f[0],l==="x"?p[h[u]]:f[3]],a.rotation=Math.PI/2*(l==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=m[s],a.labelOffset=o?p[h[s]]-p[h.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Ov(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var y=e.get(["axisLabel","rotate"]);return a.labelRotate=u==="top"?-y:y,a.z2=1,a}function oL(n){return n.get("coordinateSystem")==="cartesian2d"}function sL(n){var e={xAxisModel:null,yAxisModel:null};return ne(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,Nr).models[0];e[r]=a}),e}var B_=Math.log;function $me(n,e,t){var r=Ig.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,!0),o=i.length-1,s=r.getInterval.call(t),u=hz(n,e),l=u.extent,c=u.fixMin,f=u.fixMax;if(n.type==="log"){var h=B_(n.base);l=[B_(l[0])/h,B_(l[1])/h]}n.setExtent(l[0],l[1]),n.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:f});var d=r.getExtent.call(n);c&&(l[0]=d[0]),f&&(l[1]=d[1]);var p=r.getInterval.call(n),g=l[0],m=l[1];if(c&&f)p=(m-g)/o;else if(c)for(m=l[0]+p*o;m<l[1]&&isFinite(m)&&isFinite(l[1]);)p=I_(p),m=l[0]+p*o;else if(f)for(g=l[1]-p*o;g>l[0]&&isFinite(g)&&isFinite(l[0]);)p=I_(p),g=l[1]-p*o;else{var y=n.getTicks().length-1;y>o&&(p=I_(p));var b=p*o;m=Math.ceil(l[1]/p)*p,g=ur(m-b),g<0&&l[0]>=0?(g=0,m=ur(b)):m>0&&l[1]<=0&&(m=0,g=-ur(b))}var _=(i[0].value-a[0].value)/s,w=(i[o].value-a[o].value)/s;r.setExtent.call(n,g+p*_,m+p*w),r.setInterval.call(n,p),(_||w)&&r.setNiceExtent.call(n,g+p,m-p)}var Nme=function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=tC,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(o){var s,u=zn(o),l=u.length;if(l){for(var c=[],f=l-1;f>=0;f--){var h=+u[f],d=o[h],p=d.model,g=d.scale;QS(g)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(X0(g,p),QS(g)&&(s=d))}c.length&&(s||(s=c.pop(),X0(s.scale,s.model)),ne(c,function(m){$me(m.scale,m.model,s.scale)}))}}i(r.x),i(r.y);var a={};ne(r.x,function(o){uL(r,"y",o,a)}),ne(r.y,function(o){uL(r,"x",o,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=e.getBoxLayoutParams(),a=!r&&e.get("containLabel"),o=fl(i,{width:t.getWidth(),height:t.getHeight()});this._rect=o;var s=this._axesList;u(),a&&(ne(s,function(l){if(!l.model.get(["axisLabel","inside"])){var c=Wve(l);if(c){var f=l.isHorizontal()?"height":"width",h=l.model.get(["axisLabel","margin"]);o[f]-=c[f]+h,l.position==="top"?o.y+=c.height+h:l.position==="left"&&(o.x+=c.width+h)}}}),u()),ne(this._coordsList,function(l){l.calcAffineTransform()});function u(){ne(s,function(l){var c=l.isHorizontal(),f=c?[0,o.width]:[0,o.height],h=l.inverse?1:0;l.setExtent(f[h],f[1-h]),Ome(l,c?o.x:o.y)})}},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}ht(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",Nr).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",Nr).models[0],a=e.gridModel,o=this._coordsList,s,u;if(t)s=t.coordinateSystem,Ht(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)u=this.getAxis("x",r.componentIndex);else if(i)u=this.getAxis("y",i.componentIndex);else if(a){var l=a.coordinateSystem;l===this&&(s=this._coordsList[0])}return{cartesian:s,axis:u}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},u={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!u.x||!u.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,ne(s.x,function(c,f){ne(s.y,function(h,d){var p="x"+f+"y"+d,g=new Ime(p);g.master=i,g.model=e,i._coordsMap[p]=g,i._coordsList.push(g),g.addAxis(c),g.addAxis(h)})});function l(c){return function(f,h){if(F_(f,e)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var p=new Dme(c,dz(f),[0,0],f.get("type"),d),g=p.type==="category";p.onBand=g&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=a,p.index=h,a._axesList.push(p),s[c][h]=p,u[c]++}}}},n.prototype._updateScale=function(e,t){ne(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(oL(i)){var a=sL(i),o=a.xAxisModel,s=a.yAxisModel;if(!F_(o,t)||!F_(s,t))return;var u=this.getCartesian(o.componentIndex,s.componentIndex),l=i.getData(),c=u.getAxis("x"),f=u.getAxis("y");r(l,c),r(l,f)}},this);function r(i,a){ne(K0(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return ne(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),o=i.getOtherAxis(a);Ht(t,a)<0&&t.push(a),Ht(r,o)<0&&r.push(o)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var o=new n(i,e,t);o.name="grid_"+a,o.resize(i,t,!0),i.coordinateSystem=o,r.push(o)}),e.eachSeries(function(i){if(oL(i)){var a=sL(i),o=a.xAxisModel,s=a.yAxisModel,u=o.getCoordSysModel(),l=u.coordinateSystem;i.coordinateSystem=l.getCartesian(o.componentIndex,s.componentIndex)}}),r},n.dimensions=tC,n}();function F_(n,e){return n.getCoordSysModel()===e}function uL(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,o=t.model,s=o.get(["axisLine","onZero"]),u=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(u!=null)lL(i[u])&&(a=i[u]);else for(var l in i)if(i.hasOwnProperty(l)&&lL(i[l])&&!r[c(i[l])]){a=i[l];break}a&&(r[c(a)]=!0);function c(f){return f.dim+"_"+f.index}}function lL(n){return n&&n.type!=="category"&&n.type!=="time"&&Uve(n)}function Ome(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}const Lme=Nme;var Zu=Math.PI,Bc=function(){function n(e,t){this.group=new lr,this.opt=t,this.axisModel=e,St(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new lr({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!cL[e]},n.prototype.add=function(e){cL[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=p5(t-e),a,o;return $0(i)?(o=r>0?"top":"bottom",a="center"):$0(i-Zu)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Zu?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),cL={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),o=r.transform,s=[a[0],0],u=[a[1],0],l=s[0]>u[0];o&&($a(s,s,o),$a(u,u,o));var c=Ue({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new uo({shape:{x1:s[0],y1:s[1],x2:u[0],y2:u[1]},style:c,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});Vv(f.shape,f.style.lineWidth),f.anid="line",t.add(f);var h=e.get(["axisLine","symbol"]);if(h!=null){var d=e.get(["axisLine","symbolSize"]);lt(h)&&(h=[h,h]),(lt(d)||dn(d))&&(d=[d,d]);var p=w6(e.get(["axisLine","symbolOffset"])||0,d),g=d[0],m=d[1];ne([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-u[0])*(s[0]-u[0])+(s[1]-u[1])*(s[1]-u[1]))}],function(y,b){if(h[b]!=="none"&&h[b]!=null){var _=od(h[b],-g/2,-m/2,g,m,c.stroke,!0),w=y.r+y.offset,T=l?u:s;_.attr({rotation:y.rotate,x:T[0]+w*Math.cos(n.rotation),y:T[1]-w*Math.sin(n.rotation),silent:!0,z2:11}),t.add(_)}})}}},axisTickLabel:function(n,e,t,r){var i=Fme(t,r,e,n),a=zme(t,r,e,n);if(Bme(e,a,i),Vme(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var o=Ez(nt(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Rz(o)}},axisName:function(n,e,t,r){var i=Ov(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),o=n.nameDirection,s=e.getModel("nameTextStyle"),u=e.get("nameGap")||0,l=e.axis.getExtent(),c=l[0]>l[1]?-1:1,f=[a==="start"?l[0]-c*u:a==="end"?l[1]+c*u:(l[0]+l[1])/2,hL(a)?n.labelOffset+o*u:0],h,d=e.get("nameRotate");d!=null&&(d=d*Zu/180);var p;hL(a)?h=Bc.innerTextLayout(n.rotation,d??n.rotation,o):(h=Mme(n.rotation,a,d||0,l),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var g=s.getFont(),m=e.get("nameTruncate",!0)||{},y=m.ellipsis,b=Ov(n.nameTruncateMaxWidth,m.maxWidth,p),_=new br({x:f[0],y:f[1],rotation:h.rotation,silent:Bc.isLabelSilent(e),style:au(s,{text:i,font:g,overflow:"truncate",width:b,ellipsis:y,fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(nb({el:_,componentModel:e,itemName:i}),_.__fullText=i,_.anid="name",e.get("triggerEvent")){var w=Bc.makeAxisEventDataBase(e);w.targetType="axisName",w.name=i,an(_).eventData=w}r.add(_),_.updateTransform(),t.add(_),_.decomposeTransform()}}};function Mme(n,e,t,r){var i=p5(t-n),a,o,s=r[0]>r[1],u=e==="start"&&!s||e!=="start"&&s;return $0(i-Zu/2)?(o=u?"bottom":"top",a="center"):$0(i-Zu*1.5)?(o=u?"top":"bottom",a="center"):(o="middle",i<Zu*1.5&&i>Zu/2?a=u?"left":"right":a=u?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function Bme(n,e,t){if(!pz(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],o=e[1],s=e[e.length-1],u=e[e.length-2],l=t[0],c=t[1],f=t[t.length-1],h=t[t.length-2];r===!1?(ha(a),ha(l)):fL(a,o)&&(r?(ha(o),ha(c)):(ha(a),ha(l))),i===!1?(ha(s),ha(f)):fL(u,s)&&(i?(ha(u),ha(h)):(ha(s),ha(f)))}}function ha(n){n&&(n.ignore=!0)}function fL(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=c2([]);return W1(i,i,-n.rotation),t.applyTransform(Oh([],i,n.getLocalTransform())),r.applyTransform(Oh([],i,e.getLocalTransform())),t.intersect(r)}}function hL(n){return n==="middle"||n==="center"}function Gz(n,e,t,r,i){for(var a=[],o=[],s=[],u=0;u<n.length;u++){var l=n[u].coord;o[0]=l,o[1]=0,s[0]=l,s[1]=t,e&&($a(o,o,e),$a(s,s,e));var c=new uo({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});Vv(c.shape,c.style.lineWidth),c.anid=i+"_"+n[u].tickValue,a.push(c)}return a}function Fme(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),u=r.tickDirection*a.get("length"),l=i.getTicksCoords(),c=Gz(l,e.transform,u,St(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)n.add(c[f]);return c}}function Vme(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),u=r*a.get("length"),l=St(s.getLineStyle(),St(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var f=Gz(o[c],e.transform,u,l,"minorticks_"+c),h=0;h<f.length;h++)n.add(f[h])}}function zme(n,e,t,r){var i=t.axis,a=Ov(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=t.getModel("axisLabel"),s=o.get("margin"),u=i.getViewLabels(),l=(Ov(r.labelRotate,o.get("rotate"))||0)*Zu/180,c=Bc.innerTextLayout(r.rotation,l,r.labelDirection),f=t.getCategories&&t.getCategories(!0),h=[],d=Bc.isLabelSilent(t),p=t.get("triggerEvent");return ne(u,function(g,m){var y=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,b=g.formattedLabel,_=g.rawLabel,w=o;if(f&&f[y]){var T=f[y];ht(T)&&T.textStyle&&(w=new Tr(T.textStyle,o,t.ecModel))}var E=w.getTextColor()||t.get(["axisLine","lineStyle","color"]),A=i.dataToCoord(y),I=new br({x:A,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(g.level||0),style:au(w,{text:b,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Et(E)?E(i.type==="category"?_:i.type==="value"?y+"":y,m):E})});if(I.anid="label_"+y,p){var $=Bc.makeAxisEventDataBase(t);$.targetType="axisLabel",$.value=_,$.tickIndex=m,i.type==="category"&&($.dataIndex=y),an(I).eventData=$}e.add(I),I.updateTransform(),h.push(I),n.add(I),I.decomposeTransform()}),h}}const sd=Bc;function Ume(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Wme(t,n,e),t.seriesInvolved&&Gme(t,n),t}function Wme(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];ne(t.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var u=Yv(s.model),l=n.coordSysAxesInfo[u]={};n.coordSysMap[u]=s;var c=s.model,f=c.getModel("tooltip",r);if(ne(s.getAxes(),rn(g,!1,null)),s.getTooltipAxes&&r&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&ne(p.baseAxes,rn(g,d?"cross":!0,h)),d&&ne(p.otherAxes,rn(g,"cross",!1))}function g(m,y,b){var _=b.model.getModel("axisPointer",i),w=_.get("show");if(!(!w||w==="auto"&&!m&&!rC(_))){y==null&&(y=_.get("triggerTooltip")),_=m?Hme(b,f,i,e,m,y):_;var T=_.get("snap"),E=Yv(b.model),A=y||T||b.type==="category",I=n.axesInfo[E]={key:E,axis:b,coordSys:s,axisPointerModel:_,triggerTooltip:y,involveSeries:A,snap:T,useHandle:rC(_),seriesModels:[],linkGroup:null};l[E]=I,n.seriesInvolved=n.seriesInvolved||A;var $=jme(a,b);if($!=null){var D=o[$]||(o[$]={axesInfo:{}});D.axesInfo[E]=I,D.mapper=a[$].mapper,I.linkGroup=D}}}})}function Hme(n,e,t,r,i,a){var o=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],u={};ne(s,function(h){u[h]=Pt(o.get(h))}),u.snap=n.type!=="category"&&!!a,o.get("type")==="cross"&&(u.type="line");var l=u.label||(u.label={});if(l.show==null&&(l.show=!1),i==="cross"){var c=o.get(["label","show"]);if(l.show=c??!0,!a){var f=u.lineStyle=o.get("crossStyle");f&&St(l,f.textStyle)}}return n.model.getModel("axisPointer",new Tr(u,t,r))}function Gme(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||ne(n.coordSysAxesInfo[Yv(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(t),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=t.getData().count())})})}function jme(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(V_(a[r+"AxisId"],t.id)||V_(a[r+"AxisIndex"],t.componentIndex)||V_(a[r+"AxisName"],t.name))return i}}function V_(n,e){return n==="all"||Ze(n)&&Ht(n,e)>=0||n===e}function qme(n){var e=uE(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),o=t.get("value");o!=null&&(o=r.parse(o));var s=rC(t);a==null&&(i.status=s?"show":"hide");var u=r.getExtent().slice();u[0]>u[1]&&u.reverse(),(o==null||o>u[1])&&(o=u[1]),o<u[0]&&(o=u[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function uE(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Yv(n)]}function Xme(n){var e=uE(n);return e&&e.axisPointerModel}function rC(n){return!!n.get(["handle","show"])}function Yv(n){return n.type+"||"+n.id}var dL={},Kme=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&qme(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var o=Xme(t);o?(this._axisPointer||(this._axisPointer=new a)).render(t,o,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){dL[t]=r},e.getAxisPointerClass=function(t){return t&&dL[t]},e.type="axis",e}(ra);const Dg=Kme;var iC=Fn();function Yme(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),u=r.coordinateSystem.getRect(),l=i.getTicksCoords({tickModel:a,clamp:!0});if(l.length){var c=s.length,f=iC(n).splitAreaColors,h=Tt(),d=0;if(f)for(var p=0;p<l.length;p++){var g=f.get(l[p].tickValue);if(g!=null){d=(g+(c-1)*p)%c;break}}var m=i.toGlobalCoord(l[0].coord),y=o.getAreaStyle();s=Ze(s)?s:[s];for(var p=1;p<l.length;p++){var b=i.toGlobalCoord(l[p].coord),_=void 0,w=void 0,T=void 0,E=void 0;i.isHorizontal()?(_=m,w=u.y,T=b-_,E=u.height,m=_+T):(_=u.x,w=m,T=u.width,E=b-w,m=w+E);var A=l[p-1].tickValue;A!=null&&h.set(A,d),e.add(new er({anid:A!=null?"area_"+A:null,shape:{x:_,y:w,width:T,height:E},style:St({fill:s[d]},y),autoBatch:!0,silent:!0})),d=(d+1)%c}iC(n).splitAreaColors=h}}}function Zme(n){iC(n).splitAreaColors=null}var Qme=["axisLine","axisTickLabel","axisName"],Jme=["splitArea","splitLine","minorSplitLine"],jz=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new lr,this.group.add(this._axisGroup),!!t.get("show")){var s=t.getCoordSysModel(),u=nC(s,t),l=new sd(t,Ue({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(QS(h[d].getOtherAxis(t.axis).scale))return!0;return!1}},u));ne(Qme,l.add,l),this._axisGroup.add(l.getGroup()),ne(Jme,function(f){t.get([f,"show"])&&eye[f](this,this._axisGroup,t,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||R2(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){Zme(this)},e.type="cartesianAxis",e}(Dg),eye={splitLine:function(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=Ze(s)?s:[s];for(var u=r.coordinateSystem.getRect(),l=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:a}),h=[],d=[],p=o.getLineStyle(),g=0;g<f.length;g++){var m=i.toGlobalCoord(f[g].coord);l?(h[0]=m,h[1]=u.y,d[0]=m,d[1]=u.y+u.height):(h[0]=u.x,h[1]=m,d[0]=u.x+u.width,d[1]=m);var y=c++%s.length,b=f[g].tickValue,_=new uo({anid:b!=null?"line_"+f[g].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:St({stroke:s[y]},p),silent:!0});Vv(_.shape,p.lineWidth),e.add(_)}}},minorSplitLine:function(n,e,t,r){var i=t.axis,a=t.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),u=i.isHorizontal(),l=i.getMinorTicksCoords();if(l.length)for(var c=[],f=[],h=o.getLineStyle(),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var g=i.toGlobalCoord(l[d][p].coord);u?(c[0]=g,c[1]=s.y,f[0]=g,f[1]=s.y+s.height):(c[0]=s.x,c[1]=g,f[0]=s.x+s.width,f[1]=g);var m=new uo({anid:"minor_line_"+l[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});Vv(m.shape,h.lineWidth),e.add(m)}},splitArea:function(n,e,t,r){Yme(n,e,t,r)}},qz=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(jz),tye=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=qz.type,t}return e.type="yAxis",e}(jz),nye=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new er({shape:t.coordinateSystem.getRect(),style:St({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(ra),pL={offset:0};function rye(n){n.registerComponentView(nye),n.registerComponentModel(wme),n.registerCoordinateSystem("cartesian2d",Lme),Q0(n,"x",eC,pL),Q0(n,"y",eC,pL),n.registerComponentView(qz),n.registerComponentView(tye),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}var vL="\0_ec_interaction_mutex";function iye(n,e,t){var r=Xz(n);r[e]=t}function aye(n,e,t){var r=Xz(n),i=r[e];i===t&&(r[e]=null)}function Xz(n){return n[vL]||(n[vL]={})}bs({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},pi);var oye={axisPointer:1,tooltip:1,brush:1};function sye(n,e,t){var r=e.getComponentByElement(n.topTarget),i=r&&r.coordinateSystem;return r&&r!==t&&!oye.hasOwnProperty(r.mainType)&&i&&i.model!==t}function Kz(n,e,t,r,i,a){n=n||0;var o=t[1]-t[0];if(i!=null&&(i=ah(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(e[1]-e[0]);s=ah(s,[0,o]),i=a=ah(s,[i,a]),r=0}e[0]=ah(e[0],t),e[1]=ah(e[1],t);var u=z_(e,r);e[r]+=n;var l=i||0,c=t.slice();u.sign<0?c[0]+=l:c[1]-=l,e[r]=ah(e[r],c);var f;return f=z_(e,r),i!=null&&(f.sign!==u.sign||f.span<i)&&(e[1-r]=e[r]+u.sign*i),f=z_(e,r),a!=null&&f.span>a&&(e[1-r]=e[r]+f.sign*a),e}function z_(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function ah(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var Zc=!0,Zv=Math.min,ud=Math.max,uye=Math.pow,lye=1e4,cye=6,fye=6,gL="globalPan",hye={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},dye={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},mL={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},pye=0,vye=function(n){rt(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new lr,r._uid="brushController_"+pye++,ne(wye,function(i,a){this._handlers[a]=Tn(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||iye(r,gL,this._uid),ne(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=Mt(Pt(mL),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;aye(t,gL,this._uid),ne(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};ne(t,function(i){r[i.panelId]=Pt(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=nt(t,function(h){return Mt(Pt(mL),h,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Xv(i,t,l,u).add(c).update(c).remove(f).execute(),this;function u(h,d){return(h.id!=null?h.id:r+d)+"-"+h.brushType}function l(h,d){return u(h.__brushOption,d)}function c(h,d){var p=t[h];if(d!=null&&i[d]===s)a[h]=i[d];else{var g=a[h]=d!=null?(i[d].__brushOption=p,i[d]):Zz(o,Yz(o,p));lE(o,g)}}function f(h){i[h]!==s&&o.group.remove(i[h])}},e.prototype.unmount=function(){return this.enableBrush(!1),aC(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(_o);function Yz(n,e){var t=bb[e.brushType].createCover(n,e);return t.__brushOption=e,Jz(t,e),n.group.add(t),t}function Zz(n,e){var t=cE(e);return t.endCreating&&(t.endCreating(n,e),Jz(e,e.__brushOption)),e}function Qz(n,e){var t=e.__brushOption;cE(e).updateCoverShape(n,e,t.range,t)}function Jz(n,e){var t=e.z;t==null&&(t=lye),n.traverse(function(r){r.z=t,r.z2=t})}function lE(n,e){cE(e).updateCommon(n,e),Qz(n,e)}function cE(n){return bb[n.__brushOption.brushType]}function fE(n,e,t){var r=n._panels;if(!r)return Zc;var i,a=n._transform;return ne(r,function(o){o.isTargetByCursor(e,t,a)&&(i=o)}),i}function eU(n,e){var t=n._panels;if(!t)return Zc;var r=e.__brushOption.panelId;return r!=null?t[r]:Zc}function aC(n){var e=n._covers,t=e.length;return ne(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function Qc(n,e){var t=nt(n._covers,function(r){var i=r.__brushOption,a=Pt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function gye(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],o=uye(i*i+a*a,.5);return o>cye}function tU(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function nU(n,e,t,r){var i=new lr;return i.add(new er({name:"main",style:hE(t),silent:!0,draggable:!0,cursor:"move",drift:rn(yL,n,e,i,["n","s","w","e"]),ondragend:rn(Qc,e,{isEnd:!0})})),ne(r,function(a){i.add(new er({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:rn(yL,n,e,i,a),ondragend:rn(Qc,e,{isEnd:!0})}))}),i}function rU(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=ud(i,fye),o=t[0][0],s=t[1][0],u=o-i/2,l=s-i/2,c=t[0][1],f=t[1][1],h=c-a+i/2,d=f-a+i/2,p=c-o,g=f-s,m=p+i,y=g+i;Bs(n,e,"main",o,s,p,g),r.transformable&&(Bs(n,e,"w",u,l,a,y),Bs(n,e,"e",h,l,a,y),Bs(n,e,"n",u,l,m,a),Bs(n,e,"s",u,d,m,a),Bs(n,e,"nw",u,l,a,a),Bs(n,e,"ne",h,l,a,a),Bs(n,e,"sw",u,d,a,a),Bs(n,e,"se",h,d,a,a))}function oC(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(hE(t)),i.attr({silent:!r,cursor:r?"move":"default"}),ne([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=e.childOfName(a.join("")),s=a.length===1?sC(n,a[0]):yye(n,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?dye[s]+"-resize":null})})}function Bs(n,e,t,r,i,a,o){var s=e.childOfName(t);s&&s.setShape(xye(dE(n,e,[[r,i],[r+a,i+o]])))}function hE(n){return St({strokeNoScale:!0},n.brushStyle)}function iU(n,e,t,r){var i=[Zv(n,t),Zv(e,r)],a=[ud(n,t),ud(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function mye(n){return A2(n.group)}function sC(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=mV(t[e],mye(n));return r[i]}function yye(n,e){var t=[sC(n,e[0]),sC(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function yL(n,e,t,r,i,a){var o=t.__brushOption,s=n.toRectRange(o.range),u=aU(e,i,a);ne(r,function(l){var c=hye[l];s[c[0]][c[1]]+=u[c[0]]}),o.range=n.fromRectRange(iU(s[0][0],s[1][0],s[0][1],s[1][1])),lE(e,t),Qc(e,{isEnd:!1})}function bye(n,e,t,r){var i=e.__brushOption.range,a=aU(n,t,r);ne(i,function(o){o[0]+=a[0],o[1]+=a[1]}),lE(n,e),Qc(n,{isEnd:!1})}function aU(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function dE(n,e,t){var r=eU(n,e);return r&&r!==Zc?r.clipPath(t,n._transform):Pt(t)}function xye(n){var e=Zv(n[0][0],n[1][0]),t=Zv(n[0][1],n[1][1]),r=ud(n[0][0],n[1][0]),i=ud(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function _ye(n,e,t){if(!(!n._brushType||Sye(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=fE(n,e,t);if(!n._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===Zc||s.panelId===a.panelId)&&bb[s.brushType].contain(i[o],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function uC(n){var e=n.event;e.preventDefault&&e.preventDefault()}function lC(n,e,t){return n.childOfName("main").contain(e,t)}function oU(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,o=n._brushOption,s;if(n._track.push(t.slice()),gye(n)||i){if(a&&!i){o.brushMode==="single"&&aC(n);var u=Pt(o);u.brushType=bL(u.brushType,a),u.panelId=a===Zc?null:a.panelId,i=n._creatingCover=Yz(n,u),n._covers.push(i)}if(i){var l=bb[bL(n._brushType,a)],c=i.__brushOption;c.range=l.getCreatingRange(dE(n,i,n._track)),r&&(Zz(n,i),l.updateCommon(n,i)),Qz(n,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&fE(n,e,t)&&aC(n)&&(s={isEnd:r,removeOnClick:!0});return s}function bL(n,e){return n==="auto"?e.defaultBrushType:n}var wye={mousedown:function(n){if(this._dragging)xL(this,n);else if(!n.target||!n.target.draggable){uC(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=fE(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(_ye(this,n,r),this._dragging){uC(n);var i=oU(this,n,r,!1);i&&Qc(this,i)}},mouseup:function(n){xL(this,n)}};function xL(n,e){if(n._dragging){uC(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=oU(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&Qc(n,a)}}function Sye(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var bb={lineX:_L(0),lineY:_L(1),rect:{createCover:function(n,e){function t(r){return r}return nU({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=tU(n);return iU(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){rU(n,e,t,r)},updateCommon:oC,contain:lC},polygon:{createCover:function(n,e){var t=new lr;return t.add(new Eg({name:"main",style:hE(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new Q1({name:"main",draggable:!0,drift:rn(bye,n,e),ondragend:rn(Qc,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:dE(n,e,t)})},updateCommon:oC,contain:lC}};function _L(n){return{createCover:function(e,t){return nU({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=tU(e),r=Zv(t[0][n],t[1][n]),i=ud(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,o=eU(e,t);if(o!==Zc&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(n);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-n]]}var u=[r,a];n&&u.reverse(),rU(e,t,u,i)},updateCommon:oC,contain:lC}}const Cye=vye;function Tye(n){return n=pE(n),function(e){return yV(e,n)}}function Eye(n,e){return n=pE(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function kye(n,e,t){var r=pE(n);return function(i,a){return r.contain(a[0],a[1])&&!sye(i,e,t)}}function pE(n){return Kt.create(n)}var wc=Fn(),wL=Pt,U_=Tn,Aye=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),o=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,u=this._handle;if(!o||o==="hide"){s&&s.hide(),u&&u.hide();return}s&&s.show(),u&&u.show();var l={};this.makeElOption(l,a,e,t,r);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(e,t);if(!s)s=this._group=new lr,this.createPointerEl(s,l,e,t),this.createLabelEl(s,l,e,t),r.getZr().add(s);else{var h=rn(SL,t,f);this.updatePointerEl(s,l,h),this.updateLabelEl(s,l,h,t)}TL(s,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",o=t.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var u=uE(e).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/u>s}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var o=wc(e).pointerEl=new vfe[a.type](wL(t.pointer));e.add(o)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=wc(e).labelEl=new br(wL(t.label));e.add(a),CL(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=wc(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=wc(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),CL(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),o=t.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=tb(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(l){W4(l.event)},onmousedown:U_(this._onHandleDragMove,this,0,0),drift:U_(this._onHandleDragMove,this),ondragend:U_(this._onHandleDragEnd,this)}),r.add(i)),TL(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var u=a.get("size");Ze(u)||(u=[u,u]),i.scaleX=u[0]/2,i.scaleY=u[1]/2,p6(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,s)}},n.prototype._moveHandleToValue=function(e,t){SL(this._axisPointerModel,!t&&this._moveAnimation,this._handle,W_(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(W_(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(W_(i)),wc(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),US(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function SL(n,e,t,r){sU(wc(t).lastProp,r)||(wc(t).lastProp=r,e?Rr(t,r,n):(t.stopAnimation(),t.attr(r)))}function sU(n,e){if(ht(n)&&ht(e)){var t=!0;return ne(e,function(r,i){t=t&&sU(n[i],r)}),!!t}else return n===e}function CL(n,e){n[e.get(["label","show"])?"show":"hide"]()}function W_(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function TL(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}const uU=Aye;function lU(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function cU(n,e,t,r,i){var a=t.get("value"),o=fU(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),s=t.getModel("label"),u=cb(s.get("padding")||0),l=s.getFont(),c=Sg(o,l),f=i.position,h=c.width+u[1]+u[3],d=c.height+u[0]+u[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var g=i.verticalAlign;g==="bottom"&&(f[1]-=d),g==="middle"&&(f[1]-=d/2),Rye(f,h,d,r);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=e.get(["axisLine","lineStyle","color"])),n.label={x:f[0],y:f[1],style:au(s,{text:o,font:l,fill:s.getTextColor(),padding:u,backgroundColor:m}),z2:10}}function Rye(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function fU(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),o=i.formatter;if(o){var s={value:nE(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};ne(r,function(u){var l=t.getSeriesByIndex(u.seriesIndex),c=u.dataIndexInside,f=l&&l.getDataParams(c);f&&s.seriesData.push(f)}),lt(o)?a=o.replace("{value}",a):Et(o)&&(a=o(s))}return a}function hU(n,e,t){var r=ed();return W1(r,r,t.rotation),E0(r,r,t.position),eb([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function Iye(n,e,t,r,i,a){var o=sd.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),cU(e,r,i,a,{position:hU(r.axis,n,t),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function dU(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function Pye(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function EL(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var Dye=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis,u=s.grid,l=a.get("type"),c=kL(u,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(r,!0));if(l&&l!=="none"){var h=lU(a),d=$ye[l](s,f,c);d.style=h,t.graphicKey=d.type,t.pointer=d}var p=nC(u.model,i);Iye(r,t,p,i,a,o)},e.prototype.getHandleTransform=function(t,r,i){var a=nC(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=hU(r.axis,t,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var o=i.axis,s=o.grid,u=o.getGlobalExtent(!0),l=kL(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,f=[t.x,t.y];f[c]+=r[c],f[c]=Math.min(u[1],f[c]),f[c]=Math.max(u[0],f[c]);var h=(l[1]+l[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:t.rotation,cursorPoint:d,tooltipOption:p[c]}},e}(uU);function kL(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var $ye={line:function(n,e,t){var r=dU([e,t[0]],[e,t[1]],AL(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:Pye([e-r/2,t[0]],[r,i],AL(n))}}};function AL(n){return n.dim==="x"?0:1}const Nye=Dye;var Oye=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(bn);const Lye=Oye;var Ks=Fn(),Mye=ne;function pU(n,e,t){if(!Lt.node){var r=e.getZr();Ks(r).records||(Ks(r).records={}),Bye(r,e);var i=Ks(r).records[n]||(Ks(r).records[n]={});i.handler=t}}function Bye(n,e){if(Ks(n).initialized)return;Ks(n).initialized=!0,t("click",rn(RL,"click")),t("mousemove",rn(RL,"mousemove")),t("globalout",Vye);function t(r,i){n.on(r,function(a){var o=zye(e);Mye(Ks(n).records,function(s){s&&i(s,a,o.dispatchAction)}),Fye(o.pendings,e)})}}function Fye(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Vye(n,e,t){n.handler("leave",null,t)}function RL(n,e,t,r){e.handler(n,t,r)}function zye(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function cC(n,e){if(!Lt.node){var t=e.getZr(),r=(Ks(t).records||{})[n];r&&(Ks(t).records[n]=null)}}var Uye=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),o=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";pU("axisPointer",i,function(s,u,l){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&l({type:"updateAxisPointer",currTrigger:s,x:u&&u.offsetX,y:u&&u.offsetY})})},e.prototype.remove=function(t,r){cC("axisPointer",r)},e.prototype.dispose=function(t,r){cC("axisPointer",r)},e.type="axisPointer",e}(ra);const Wye=Uye;function vU(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=Xc(a,n);if(o==null||o<0||Ze(o))return{point:[]};var s=a.getItemGraphicEl(o),u=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(o)||[];else if(u&&u.dataToPoint)if(n.isStacked){var l=u.getBaseAxis(),c=u.getOtherAxis(l),f=c.dim,h=l.dim,d=f==="x"||f==="radius"?1:0,p=a.mapDimension(h),g=[];g[d]=a.get(p,o),g[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),t=u.dataToPoint(g)||[]}else t=u.dataToPoint(a.getValues(nt(u.dimensions,function(y){return a.mapDimension(y)}),o))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),t=[m.x+m.width/2,m.y+m.height/2]}return{point:t,el:s}}var IL=Fn();function Hye(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,o=n.dispatchAction||Tn(t.dispatchAction,t),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){c0(i)&&(i=vU({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var u=c0(i),l=a.axesInfo,c=s.axesInfo,f=r==="leave"||c0(i),h={},d={},p={list:[],map:{}},g={showPointer:rn(jye,d),showTooltip:rn(qye,p)};ne(s.coordSysMap,function(y,b){var _=u||y.containPoint(i);ne(s.coordSysAxesInfo[b],function(w,T){var E=w.axis,A=Zye(l,w);if(!f&&_&&(!l||A)){var I=A&&A.value;I==null&&!u&&(I=E.pointToData(i)),I!=null&&PL(w,I,g,!1,h)}})});var m={};return ne(c,function(y,b){var _=y.linkGroup;_&&!d[b]&&ne(_.axesInfo,function(w,T){var E=d[T];if(w!==y&&E){var A=E.value;_.mapper&&(A=y.axis.scale.parse(_.mapper(A,DL(w),DL(y)))),m[y.key]=A}})}),ne(m,function(y,b){PL(c[b],y,g,!0,h)}),Xye(d,c,h),Kye(p,i,n,o),Yye(c,o,t),h}}function PL(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var o=Gye(e,n),s=o.payloadBatch,u=o.snapToValue;s[0]&&i.seriesIndex==null&&Ue(i,s[0]),!r&&n.snap&&a.containData(u)&&u!=null&&(e=u),t.showPointer(n,e,s),t.showTooltip(n,o,u)}}function Gye(n,e){var t=e.axis,r=t.dim,i=n,a=[],o=Number.MAX_VALUE,s=-1;return ne(e.seriesModels,function(u,l){var c=u.getData().mapDimensionsAll(r),f,h;if(u.getAxisTooltipData){var d=u.getAxisTooltipData(c,n,t);h=d.dataIndices,f=d.nestestValue}else{if(h=u.getData().indicesOfNearest(c[0],n,t.type==="category"?.5:null),!h.length)return;f=u.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=n-f,g=Math.abs(p);g<=o&&((g<o||p>=0&&s<0)&&(o=g,s=p,i=f,a.length=0),ne(h,function(m){a.push({seriesIndex:u.seriesIndex,dataIndexInside:m,dataIndex:u.getData().getRawIndex(m)})}))}}),{payloadBatch:a,snapToValue:i}}function jye(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function qye(n,e,t,r){var i=t.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var u=e.coordSys.model,l=Yv(u),c=n.map[l];c||(c=n.map[l]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},n.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Xye(n,e,t){var r=t.axesInfo=[];ne(e,function(i,a){var o=i.axisPointerModel.option,s=n[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function Kye(n,e,t,r){if(c0(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function Yye(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=IL(r)[i]||{},o=IL(r)[i]={};ne(n,function(l,c){var f=l.axisPointerModel.option;f.status==="show"&&ne(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;o[d]=h})});var s=[],u=[];ne(a,function(l,c){!o[c]&&u.push(l)}),ne(o,function(l,c){!a[c]&&s.push(l)}),u.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:u}),s.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Zye(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function DL(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function c0(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function vE(n){Dg.registerAxisPointerClass("CartesianAxisPointer",Nye),n.registerComponentModel(Lye),n.registerComponentView(Wye),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Ze(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=Ume(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Hye)}function cVe(n){ou(rye),ou(vE)}var Qye=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var u=s.polar,l=u.getOtherAxis(s),c=l.getExtent(),f=s.dataToCoord(r),h=a.get("type");if(h&&h!=="none"){var d=lU(a),p=e0e[h](s,u,f,c);p.style=d,t.graphicKey=p.type,t.pointer=p}var g=a.get(["label","margin"]),m=Jye(r,i,a,u,g);cU(t,i,a,o,m)},e}(uU);function Jye(n,e,t,r,i){var a=e.axis,o=a.dataToCoord(n),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var u=r.getRadiusAxis().getExtent(),l,c,f;if(a.dim==="radius"){var h=ed();W1(h,h,s),E0(h,h,[r.cx,r.cy]),l=eb([o,-i],h);var d=e.getModel("axisLabel").get("rotate")||0,p=sd.innerTextLayout(s,d*Math.PI/180,-1);c=p.textAlign,f=p.textVerticalAlign}else{var g=u[1];l=r.coordToPoint([g+i,o]);var m=r.cx,y=r.cy;c=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",f=Math.abs(l[1]-y)/g<.3?"middle":l[1]>y?"top":"bottom"}return{position:l,align:c,verticalAlign:f}}var e0e={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:dU(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:EL(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:EL(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}};const t0e=Qye;var n0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(bn);const r0e=n0e;var gE=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Nr).models[0]},e.type="polarAxis",e}(bn);xo(gE,vz);var i0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(gE),a0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(gE),mE=function(n){rt(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e}(_f);mE.prototype.dataToRadius=_f.prototype.dataToCoord;mE.prototype.radiusToData=_f.prototype.coordToData;const o0e=mE;var s0e=Fn(),yE=function(n){rt(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],u=t.dataToCoord(s+1)-t.dataToCoord(s),l=Math.abs(u),c=Sg(s==null?"":s+"",r.getFont(),"center","top"),f=Math.max(c.height,7),h=f/l;isNaN(h)&&(h=1/0);var d=Math.max(0,Math.floor(h)),p=s0e(t.model),g=p.lastAutoInterval,m=p.lastTickCount;return g!=null&&m!=null&&Math.abs(g-d)<=1&&Math.abs(m-o)<=1&&g>d?d=g:(p.lastTickCount=o,p.lastAutoInterval=d),d},e}(_f);yE.prototype.dataToAngle=_f.prototype.dataToCoord;yE.prototype.angleToData=_f.prototype.coordToData;const u0e=yE;var gU=["radius","angle"],l0e=function(){function n(e){this.dimensions=gU,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new o0e,this._angleAxis=new u0e,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},n.prototype.pointToData=function(e,t){var r=this.pointToCoord(e);return[this._radiusAxis.radiusToData(r[0],t),this._angleAxis.angleToData(r[1],t)]},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var u=Math.sqrt(t*t+r*r);t/=u,r/=u;for(var l=Math.atan2(-r,t)/Math.PI*180,c=l<o?1:-1;l<o||l>s;)l+=c*360;return[u,l]},n.prototype.coordToPoint=function(e){var t=e[0],r=e[1]/180*Math.PI,i=Math.cos(r)*t+this.cx,a=-Math.sin(r)*t+this.cy;return[i,a]},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(o,s){var u=o-this.cx,l=s-this.cy,c=u*u+l*l-1e-4,f=this.r,h=this.r0;return c<=f*f&&c>=h*h}}},n.prototype.convertToPixel=function(e,t,r){var i=$L(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=$L(t);return i===this?this.pointToData(r):null},n}();function $L(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}const c0e=l0e;function f0e(n,e,t){var r=e.get("center"),i=t.getWidth(),a=t.getHeight();n.cx=tn(r[0],i),n.cy=tn(r[1],a);var o=n.getRadiusAxis(),s=Math.min(i,a)/2,u=e.get("radius");u==null?u=[0,"100%"]:Ze(u)||(u=[0,u]);var l=[tn(u[0],s),tn(u[1],s)];o.inverse?o.setExtent(l[1],l[0]):o.setExtent(l[0],l[1])}function h0e(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(s){if(s.coordinateSystem===t){var u=s.getData();ne(K0(u,"radius"),function(l){i.scale.unionExtentFromData(u,l)}),ne(K0(u,"angle"),function(l){r.scale.unionExtentFromData(u,l)})}}),X0(r.scale,r.model),X0(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function d0e(n){return n.mainType==="angleAxis"}function NL(n,e){if(n.type=e.get("type"),n.scale=dz(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),d0e(e)){n.inverse=n.inverse!==e.get("clockwise");var t=e.get("startAngle");n.setExtent(t,t+(n.inverse?-360:360))}e.axis=n,n.model=e}var p0e={dimensions:gU,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new c0e(i+"");a.update=h0e;var o=a.getRadiusAxis(),s=a.getAngleAxis(),u=r.findAxisModel("radiusAxis"),l=r.findAxisModel("angleAxis");NL(o,u),NL(s,l),f0e(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",Nr).models[0];r.coordinateSystem=i.coordinateSystem}}),t}};const v0e=p0e;var g0e=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function hy(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function dy(n){var e=n.getRadiusAxis();return e.inverse?0:1}function OL(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var m0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),u=i.getMinorTicksCoords(),l=nt(i.getViewLabels(),function(c){c=Pt(c);var f=i.scale,h=f.type==="ordinal"?f.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(h),c});OL(l),OL(s),ne(g0e,function(c){t.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&y0e[c](this.group,t,a,s,u,o,l)},this)}},e.type="angleAxis",e}(Dg),y0e={axisLine:function(n,e,t,r,i,a){var o=e.getModel(["axisLine","lineStyle"]),s=dy(t),u=s?0:1,l;a[u]===0?l=new rd({shape:{cx:t.cx,cy:t.cy,r:a[s]},style:o.getLineStyle(),z2:1,silent:!0}):l=new S2({shape:{cx:t.cx,cy:t.cy,r:a[s],r0:a[u]},style:o.getLineStyle(),z2:1,silent:!0}),l.style.fill=null,n.add(l)},axisTick:function(n,e,t,r,i,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),u=a[dy(t)],l=nt(r,function(c){return new uo({shape:hy(t,[u,u+s],c.coord)})});n.add(Ws(l,{style:St(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),u=(o.get("inside")?-1:1)*s.get("length"),l=a[dy(t)],c=[],f=0;f<i.length;f++)for(var h=0;h<i[f].length;h++)c.push(new uo({shape:hy(t,[l,l+u],i[f][h].coord)}));n.add(Ws(c,{style:St(s.getModel("lineStyle").getLineStyle(),St(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,o){var s=e.getCategories(!0),u=e.getModel("axisLabel"),l=u.get("margin"),c=e.get("triggerEvent");ne(o,function(f,h){var d=u,p=f.tickValue,g=a[dy(t)],m=t.coordToPoint([g+l,f.coord]),y=t.cx,b=t.cy,_=Math.abs(m[0]-y)/g<.3?"center":m[0]>y?"left":"right",w=Math.abs(m[1]-b)/g<.3?"middle":m[1]>b?"top":"bottom";if(s&&s[p]){var T=s[p];ht(T)&&T.textStyle&&(d=new Tr(T.textStyle,u,u.ecModel))}var E=new br({silent:sd.isLabelSilent(e),style:au(d,{x:m[0],y:m[1],fill:d.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:f.formattedLabel,align:_,verticalAlign:w})});if(n.add(E),c){var A=sd.makeAxisEventDataBase(e);A.targetType="axisLabel",A.value=f.rawLabel,an(E).eventData=A}},this)},splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),u=s.get("color"),l=0;u=u instanceof Array?u:[u];for(var c=[],f=0;f<r.length;f++){var h=l++%u.length;c[h]=c[h]||[],c[h].push(new uo({shape:hy(t,a,r[f].coord)}))}for(var f=0;f<c.length;f++)n.add(Ws(c[f],{style:St({stroke:u[f%u.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var o=e.getModel("minorSplitLine"),s=o.getModel("lineStyle"),u=[],l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)u.push(new uo({shape:hy(t,a,i[l][c].coord)}));n.add(Ws(u,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),u=s.get("color"),l=0;u=u instanceof Array?u:[u];for(var c=[],f=Math.PI/180,h=-r[0].coord*f,d=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),g=e.get("clockwise"),m=1,y=r.length;m<=y;m++){var b=m===y?r[0].coord:r[m].coord,_=l++%u.length;c[_]=c[_]||[],c[_].push(new fo({shape:{cx:t.cx,cy:t.cy,r0:d,r:p,startAngle:h,endAngle:-b*f,clockwise:g},silent:!0})),h=-b*f}for(var m=0;m<c.length;m++)n.add(Ws(c[m],{style:St({fill:u[m%u.length]},s.getAreaStyle()),silent:!0}))}}};const b0e=m0e;var x0e=["axisLine","axisTickLabel","axisName"],_0e=["splitLine","splitArea","minorSplitLine"],w0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=this._axisGroup,a=this._axisGroup=new lr;this.group.add(a);var o=t.axis,s=o.polar,u=s.getAngleAxis(),l=o.getTicksCoords(),c=o.getMinorTicksCoords(),f=u.getExtent()[0],h=o.getExtent(),d=C0e(s,t,f),p=new sd(t,d);ne(x0e,p.add,p),a.add(p.getGroup()),R2(i,a,t),ne(_0e,function(g){t.get([g,"show"])&&!o.scale.isBlank()&&S0e[g](this.group,t,s,f,h,l,c)},this)}},e.type="radiusAxis",e}(Dg),S0e={splitLine:function(n,e,t,r,i,a){var o=e.getModel("splitLine"),s=o.getModel("lineStyle"),u=s.get("color"),l=0;u=u instanceof Array?u:[u];for(var c=[],f=0;f<a.length;f++){var h=l++%u.length;c[h]=c[h]||[],c[h].push(new rd({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[f].coord,0)}}))}for(var f=0;f<c.length;f++)n.add(Ws(c[f],{style:St({stroke:u[f%u.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,o){if(o.length){for(var s=e.getModel("minorSplitLine"),u=s.getModel("lineStyle"),l=[],c=0;c<o.length;c++)for(var f=0;f<o[c].length;f++)l.push(new rd({shape:{cx:t.cx,cy:t.cy,r:o[c][f].coord}}));n.add(Ws(l,{style:St({fill:null},u.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var o=e.getModel("splitArea"),s=o.getModel("areaStyle"),u=s.get("color"),l=0;u=u instanceof Array?u:[u];for(var c=[],f=a[0].coord,h=1;h<a.length;h++){var d=l++%u.length;c[d]=c[d]||[],c[d].push(new fo({shape:{cx:t.cx,cy:t.cy,r0:f,r:a[h].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),f=a[h].coord}for(var h=0;h<c.length;h++)n.add(Ws(c[h],{style:St({fill:u[h%u.length]},s.getAreaStyle()),silent:!0}))}}};function C0e(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}const T0e=w0e;function mU(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function yU(n,e){return e.dim+n.model.componentIndex}function E0e(n,e,t){var r={},i=k0e(Jn(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,u=s.getBaseAxis(),l=yU(s,u),c=mU(a),f=i[l][c],h=f.offset,d=f.width,p=s.getOtherAxis(u),g=a.coordinateSystem.cx,m=a.coordinateSystem.cy,y=a.get("barMinHeight")||0,b=a.get("barMinAngle")||0;r[c]=r[c]||[];for(var _=o.mapDimension(p.dim),w=o.mapDimension(u.dim),T=Yc(o,_),E=u.dim!=="radius"||!a.get("roundCap",!0),A=p.dataToCoord(0),I=0,$=o.count();I<$;I++){var D=o.get(_,I),N=o.get(w,I),z=D>=0?"p":"n",F=A;T&&(r[c][N]||(r[c][N]={p:A,n:A}),F=r[c][N][z]);var G=void 0,U=void 0,H=void 0,X=void 0;if(p.dim==="radius"){var Z=p.dataToCoord(D)-A,Q=u.dataToCoord(N);Math.abs(Z)<y&&(Z=(Z<0?-1:1)*y),G=F,U=F+Z,H=Q-h,X=H-d,T&&(r[c][N][z]=U)}else{var le=p.dataToCoord(D,E)-A,ge=u.dataToCoord(N);Math.abs(le)<b&&(le=(le<0?-1:1)*b),G=ge+h,U=G+d,H=F,X=F+le,T&&(r[c][N][z]=X)}o.setItemLayout(I,{cx:g,cy:m,r0:G,r:U,startAngle:-H*Math.PI/180,endAngle:-X*Math.PI/180,clockwise:H>=X})}}})}function k0e(n){var e={};ne(n,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),u=yU(o,s),l=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(l[1]-l[0])/a.count(),f=e[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=f.stacks;e[u]=f;var d=mU(r);h[d]||f.autoWidthCount++,h[d]=h[d]||{width:0,maxWidth:0};var p=tn(r.get("barWidth"),c),g=tn(r.get("barMaxWidth"),c),m=r.get("barGap"),y=r.get("barCategoryGap");p&&!h[d].width&&(p=Math.min(f.remainedWidth,p),h[d].width=p,f.remainedWidth-=p),g&&(h[d].maxWidth=g),m!=null&&(f.gap=m),y!=null&&(f.categoryGap=y)});var t={};return ne(e,function(r,i){t[i]={};var a=r.stacks,o=r.bandWidth,s=tn(r.categoryGap,o),u=tn(r.gap,1),l=r.remainedWidth,c=r.autoWidthCount,f=(l-s)/(c+(c-1)*u);f=Math.max(f,0),ne(a,function(g,m){var y=g.maxWidth;y&&y<f&&(y=Math.min(y,l),g.width&&(y=Math.min(y,g.width)),l-=y,g.width=y,c--)}),f=(l-s)/(c+(c-1)*u),f=Math.max(f,0);var h=0,d;ne(a,function(g,m){g.width||(g.width=f),d=g,h+=g.width*(1+u)}),d&&(h-=d.width*u);var p=-h/2;ne(a,function(g,m){t[i][m]=t[i][m]||{offset:p,width:g.width},p+=g.width*(1+u)})}),t}var A0e={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},R0e={splitNumber:5},I0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(ra);function fVe(n){ou(vE),Dg.registerAxisPointerClass("PolarAxisPointer",t0e),n.registerCoordinateSystem("polar",v0e),n.registerComponentModel(r0e),n.registerComponentView(I0e),Q0(n,"angle",i0e,A0e),Q0(n,"radius",a0e,R0e),n.registerComponentView(b0e),n.registerComponentView(T0e),n.registerLayout(rn(E0e,"bar"))}var LL=["x","y","radius","angle","single"],P0e=["cartesian2d","polar","singleAxis"];function D0e(n){var e=n.get("coordinateSystem");return Ht(P0e,e)>=0}function Eh(n){return n+"Axis"}function $0e(n,e){var t=Tt(),r=[],i=Tt();n.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||s(c)});var a;do a=!1,n.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&u(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),l(c)}function u(c){var f=!1;return c.eachTargetAxis(function(h,d){var p=t.get(h);p&&p[d]&&(f=!0)}),f}function l(c){c.eachTargetAxis(function(f,h){(t.get(f)||t.set(f,[]))[h]=!0})}return r}var H_=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n}(),N0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=ML(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=ML(t);Mt(this.option,t,!0),Mt(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;ne([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=Tt(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return ne(LL,function(i){var a=this.getReferringComponents(Eh(i),ele);if(a.specified){r=!0;var o=new H_;ne(a.models,function(s){o.add(s.componentIndex)}),t.set(i,o)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});u(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});u(s,"single")}function u(l,c){var f=l[0];if(f){var h=new H_;if(h.add(f.componentIndex),t.set(c,h),a=!1,c==="x"||c==="y"){var d=f.getReferringComponents("grid",Nr).models[0];d&&ne(l,function(p){f.componentIndex!==p.componentIndex&&d===p.getReferringComponents("grid",Nr).models[0]&&h.add(p.componentIndex)})}}}a&&ne(LL,function(l){if(a){var c=i.findComponents({mainType:Eh(l),filter:function(h){return h.get("type",!0)==="category"}});if(c[0]){var f=new H_;f.add(c[0].componentIndex),t.set(l,f),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");ne([["start","startValue"],["end","endValue"]],function(a,o){var s=t[a[0]]!=null,u=t[a[1]]!=null;s&&!u?r[o]="percent":!s&&u?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(Eh(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){ne(i.indexList,function(o){t.call(r,a,o)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(Eh(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;ne([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;ne(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),u=0;u<s.indexList.length;u++){var l=this.getAxisProxy(o,s.indexList[u]);if(l.hostedBy(this))return l;r||(r=l)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(bn);function ML(n){var e={};return ne(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}const O0e=N0e;var L0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(O0e);const M0e=L0e;var B0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e}(ra);const F0e=B0e;var V0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(F0e);const z0e=V0e;var mh=ne,BL=Oue,U0e=function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(D0e(t)){var r=Eh(this._dimName),i=t.getReferringComponents(r,Nr).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Pt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],u=[],l;mh(["start","end"],function(h,d){var p=e[h],g=e[h+"Value"];a[d]==="percent"?(p==null&&(p=o[d]),g=i.parse(Hu(p,o,t))):(l=!0,g=g==null?t[d]:i.parse(g),p=Hu(g,t,o)),u[d]=g==null||isNaN(g)?t[d]:g,s[d]=p==null||isNaN(p)?o[d]:p}),BL(u),BL(s);var c=this._minMaxSpan;l?f(u,s,t,o,!1):f(s,u,o,t,!0);function f(h,d,p,g,m){var y=m?"Span":"ValueSpan";Kz(0,h,p,"all",c["min"+y],c["max"+y]);for(var b=0;b<2;b++)d[b]=Hu(h[b],p,g,!0),m&&(d[b]=i.parse(d[b]))}return{valueWindow:u,percentWindow:s}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=W0e(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),o=this._valueWindow;if(a==="none")return;mh(i,function(u){var l=u.getData(),c=l.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var f=l.getStore(),h=nt(c,function(d){return l.getDimensionIndex(d)},l);l.filterSelf(function(d){for(var p,g,m,y=0;y<c.length;y++){var b=f.get(h[y],d),_=!isNaN(b),w=b<o[0],T=b>o[1];if(_&&!w&&!T)return!0;_&&(m=!0),w&&(p=!0),T&&(g=!0)}return m&&p&&g})}else mh(c,function(d){if(a==="empty")u.setData(l=l.map(d,function(g){return s(g)?g:NaN}));else{var p={};p[d]=o,l.selectRange(p)}});mh(c,function(d){l.setApproximateExtent(o,d)})}});function s(u){return u>=o[0]&&u<=o[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;mh(["min","max"],function(i){var a=t.get(i+"Span"),o=t.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Hu(r[0]+o,r,[0,100],!0):a!=null&&(o=Hu(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=d5(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n}();function W0e(n,e,t){var r=[1/0,-1/0];mh(t,function(o){Gve(r,o.getData(),e)});var i=n.getAxisModel(),a=fz(i.axis.scale,i,r).calculate();return[a.min,a.max]}const H0e=U0e;var G0e={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var u=n.getComponent(Eh(o),s);i(o,s,u,a)})})}e(function(i,a,o,s){o.__dzAxisProxy=null});var t=[];e(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new H0e(i,a,s,n),t.push(o.__dzAxisProxy))});var r=Tt();return ne(t,function(i){ne(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};const j0e=G0e;function q0e(n){n.registerAction("dataZoom",function(e,t){var r=$0e(t,e);ne(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var FL=!1;function X0e(n){FL||(FL=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,j0e),q0e(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function K0e(n){n.registerComponentModel(M0e),n.registerComponentView(z0e),X0e(n)}var ro=function(){function n(){}return n}(),bU={};function Ip(n,e){bU[n]=e}function xU(n){return bU[n]}var Y0e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;ne(this.option.feature,function(r,i){var a=xU(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),Mt(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(bn);const Z0e=Y0e;function Q0e(n,e,t){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:t.getWidth(),height:t.getHeight()},o=fl(r,a,i);Vh(e.get("orient"),n,e.get("itemGap"),o.width,o.height),Ufe(n,r,a,i)}function _U(n,e){var t=cb(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new er({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var J0e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var o=this.group;if(o.removeAll(),!t.get("show"))return;var s=+t.get("itemSize"),u=t.get("orient")==="vertical",l=t.get("feature")||{},c=this._features||(this._features={}),f=[];ne(l,function(p,g){f.push(g)}),new Xv(this._featureNames||[],f).add(h).update(h).remove(rn(h,null)).execute(),this._featureNames=f;function h(p,g){var m=f[p],y=f[g],b=l[m],_=new Tr(b,t,t.ecModel),w;if(a&&a.newTitle!=null&&a.featureName===m&&(b.title=a.newTitle),m&&!y){if(e1e(m))w={onclick:_.option.onclick,featureName:m};else{var T=xU(m);if(!T)return;w=new T}c[m]=w}else if(w=c[y],!w)return;w.uid=Rg("toolbox-feature"),w.model=_,w.ecModel=r,w.api=i;var E=w instanceof ro;if(!m&&y){E&&w.dispose&&w.dispose(r,i);return}if(!_.get("show")||E&&w.unusable){E&&w.remove&&w.remove(r,i);return}d(_,w,m),_.setIconStatus=function(A,I){var $=this.option,D=this.iconPaths;$.iconStatus=$.iconStatus||{},$.iconStatus[A]=I,D[A]&&(I==="emphasis"?td:nd)(D[A])},w instanceof ro&&w.render&&w.render(_,r,i,a)}function d(p,g,m){var y=p.getModel("iconStyle"),b=p.getModel(["emphasis","iconStyle"]),_=g instanceof ro&&g.getIcons?g.getIcons():p.get("icon"),w=p.get("title")||{},T,E;lt(_)?(T={},T[m]=_):T=_,lt(w)?(E={},E[m]=w):E=w;var A=p.iconPaths={};ne(T,function(I,$){var D=tb(I,{},{x:-s/2,y:-s/2,width:s,height:s});D.setStyle(y.getItemStyle());var N=D.ensureState("emphasis");N.style=b.getItemStyle();var z=new br({style:{text:E[$],align:b.get("textAlign"),borderRadius:b.get("textBorderRadius"),padding:b.get("textPadding"),fill:null},ignore:!0});D.setTextContent(z),nb({el:D,componentModel:t,itemName:$,formatterParamsExtra:{title:E[$]}}),D.__title=E[$],D.on("mouseover",function(){var F=b.getItemStyle(),G=u?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";z.setStyle({fill:b.get("textFill")||F.fill||F.stroke||"#000",backgroundColor:b.get("textBackgroundColor")}),D.setTextConfig({position:b.get("textPosition")||G}),z.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",$])!=="emphasis"&&i.leaveEmphasis(this),z.hide()}),(p.get(["iconStatus",$])==="emphasis"?td:nd)(D),o.add(D),D.on("click",Tn(g.onclick,g,r,i,$)),A[$]=D})}Q0e(o,t,i),o.add(_U(o.getBoundingRect(),t)),u||o.eachChild(function(p){var g=p.__title,m=p.ensureState("emphasis"),y=m.textConfig||(m.textConfig={}),b=p.getTextContent(),_=b&&b.ensureState("emphasis");if(_&&!Et(_)&&g){var w=_.style||(_.style={}),T=Sg(g,br.makeFont(w)),E=p.x+o.x,A=p.y+o.y+s,I=!1;A+T.height>i.getHeight()&&(y.position="top",I=!0);var $=I?-5-T.height:s+10;E+T.width/2>i.getWidth()?(y.position=["100%",$],w.align="right"):E-T.width/2<0&&(y.position=[0,$],w.align="left")}})},e.prototype.updateView=function(t,r,i,a){ne(this._features,function(o){o instanceof ro&&o.updateView&&o.updateView(o.model,r,i,a)})},e.prototype.remove=function(t,r){ne(this._features,function(i){i instanceof ro&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){ne(this._features,function(i){i instanceof ro&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e}(ra);function e1e(n){return n.indexOf("my")===0}const t1e=J0e;var n1e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",u=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),l=Lt.browser;if(Et(MouseEvent)&&(l.newEdge||!l.ie&&!l.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=u;var f=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(f)}else if(window.navigator.msSaveOrOpenBlob||o){var h=u.split(","),d=h[0].indexOf("base64")>-1,p=o?decodeURIComponent(h[1]):h[1];d&&(p=window.atob(p));var g=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var m=p.length,y=new Uint8Array(m);m--;)y[m]=p.charCodeAt(m);var b=new Blob([y]);window.navigator.msSaveOrOpenBlob(b,g)}else{var _=document.createElement("iframe");document.body.appendChild(_);var w=_.contentWindow,T=w.document;T.open("image/svg+xml","replace"),T.write(p),T.close(),w.focus(),T.execCommand("SaveAs",!0,g),document.body.removeChild(_)}}else{var E=i.get("lang"),A='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(E&&E[0]||"")+'" /></body>',I=window.open();I.document.write(A),I.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e}(ro);const r1e=n1e;var VL="__ec_magicType_stack__",i1e=[["line","bar"],["stack"]],a1e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return ne(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if(zL[i]){var s={series:[]},u=function(f){var h=f.subType,d=f.id,p=zL[i](h,d,f,a);p&&(St(p,f.option),s.series.push(p));var g=f.coordinateSystem;if(g&&g.type==="cartesian2d"&&(i==="line"||i==="bar")){var m=g.getAxesByScale("ordinal")[0];if(m){var y=m.dim,b=y+"Axis",_=f.getReferringComponents(b,Nr).models[0],w=_.componentIndex;s[b]=s[b]||[];for(var T=0;T<=w;T++)s[b][w]=s[b][w]||{};s[b][w].boundaryGap=i==="bar"}}};ne(i1e,function(f){Ht(f,i)>=0&&ne(f,function(h){a.setIconStatus(h,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},u);var l,c=i;i==="stack"&&(l=Mt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:l,featureName:"magicType"})}},e}(ro),zL={line:function(n,e,t,r){if(n==="bar")return Mt({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return Mt({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===VL;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),Mt({id:e,stack:i?"":VL},r.get(["option","stack"])||{},!0)}};bs({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});const o1e=a1e;var xb=new Array(60).join("-"),ld="	";function s1e(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;e[s]||(e[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),e[s].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function u1e(n){var e=[];return ne(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,o=a.dim,s=[" "].concat(nt(t.series,function(d){return d.name})),u=[i.model.getCategories()];ne(t.series,function(d){var p=d.getRawData();u.push(d.getRawData().mapArray(p.mapDimension(o),function(g){return g}))});for(var l=[s.join(ld)],c=0;c<u[0].length;c++){for(var f=[],h=0;h<u.length;h++)f.push(u[h][c]);l.push(f.join(ld))}e.push(l.join(`
`))}),e.join(`

`+xb+`

`)}function l1e(n){return nt(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=t.getName(o),u=0;u<a-1;u++)i[u]=arguments[u];r.push((s?s+ld:"")+i.join(ld))}),r.join(`
`)}).join(`

`+xb+`

`)}function c1e(n){var e=s1e(n);return{value:Jn([u1e(e.seriesGroupByCategoryAxis),l1e(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+xb+`

`),meta:e.meta}}function J0(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function f1e(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(ld)>=0)return!0}var fC=new RegExp("["+ld+"]+","g");function h1e(n){for(var e=n.split(/\n+/g),t=J0(e.shift()).split(fC),r=[],i=nt(t,function(u){return{name:u,data:[]}}),a=0;a<e.length;a++){var o=J0(e[a]).split(fC);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function d1e(n){for(var e=n.split(/\n+/g),t=J0(e.shift()),r=[],i=0;i<e.length;i++){var a=J0(e[i]);if(a){var o=a.split(fC),s="",u=void 0,l=!1;isNaN(o[0])?(l=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},u=r[i].value):u=r[i]=[];for(var c=0;c<o.length;c++)u.push(+o[c]);u.length===1&&(l?r[i].value=u[0]:r[i]=u[0])}}return{name:t,data:r}}function p1e(n,e){var t=n.split(new RegExp(`
*`+xb+`
*`,"g")),r={series:[]};return ne(t,function(i,a){if(f1e(i)){var o=h1e(i),s=e[a],u=s.axisDim+"Axis";s&&(r[u]=r[u]||[],r[u][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=d1e(i);r.series.push(o)}}),r}var v1e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),u=a.get("lang")||[];s.innerHTML=u[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var l=document.createElement("div"),c=document.createElement("textarea");l.style.cssText="overflow:auto";var f=a.get("optionToContent"),h=a.get("contentToOption"),d=c1e(t);if(Et(f)){var p=f(r.getOption());lt(p)?l.innerHTML=p:Nv(p)&&l.appendChild(p)}else{c.readOnly=a.get("readOnly");var g=c.style;g.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",g.color=a.get("textColor"),g.borderColor=a.get("textareaBorderColor"),g.backgroundColor=a.get("textareaColor"),c.value=d.value,l.appendChild(c)}var m=d.meta,y=document.createElement("div");y.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",_=document.createElement("div"),w=document.createElement("div");b+=";background-color:"+a.get("buttonColor"),b+=";color:"+a.get("buttonTextColor");var T=this;function E(){i.removeChild(o),T._dom=null}cS(_,"click",E),cS(w,"click",function(){if(h==null&&f!=null||h!=null&&f==null){E();return}var A;try{Et(h)?A=h(l,r.getOption()):A=p1e(c.value,m)}catch(I){throw E(),new Error("Data view format error "+I)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),E()}),_.innerHTML=u[1],w.innerHTML=u[2],w.style.cssText=_.style.cssText=b,!a.get("readOnly")&&y.appendChild(w),y.appendChild(_),o.appendChild(s),o.appendChild(l),o.appendChild(y),l.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},e}(ro);function g1e(n,e){return nt(n,function(t,r){var i=e&&e[r];if(ht(i)&&!Ze(i)){var a=ht(t)&&!Ze(t);a||(t={value:t});var o=i.name!=null&&t.name==null;return t=St(t,i),o&&delete t.name,t}else return t})}bs({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];ne(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Ue({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:g1e(r.data,a)})}}),e.mergeOption(St({series:t},n.newOption))});const m1e=v1e;var wU=ne,SU=Fn();function y1e(n,e){var t=bE(n);wU(e,function(r,i){for(var a=t.length-1;a>=0;a--){var o=t[a];if(o[i])break}if(a<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var u=s.getPercentRange();t[0][i]={dataZoomId:i,start:u[0],end:u[1]}}}}),t.push(e)}function b1e(n){var e=bE(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return wU(t,function(i,a){for(var o=e.length-1;o>=0;o--)if(i=e[o][a],i){r[a]=i;break}}),r}function x1e(n){SU(n).snapshots=null}function _1e(n){return bE(n).length}function bE(n){var e=SU(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var w1e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){x1e(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e}(ro);bs({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});const S1e=w1e;var C1e=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],T1e=function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=UL(t,e);ne(E1e,function(o,s){(!r||!r.include||Ht(r.include,s)>=0)&&o(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=G_[r.brushType](0,a,i);r.__rangeOffset={offset:jL[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){ne(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&ne(a.coordSyses,function(o){var s=G_[i.brushType](1,o,i.range,!0);r(i,s.values,o,t)})},this)},n.prototype.setInputRanges=function(e,t){ne(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=G_[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?jL[r.brushType](a.values,o.offset,k1e(a.xyMinMax,o.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return nt(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:Tye(i),isTargetByCursor:kye(i,e,r.coordSysModel),getLinearBrushOtherExtent:Eye(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&Ht(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=UL(t,e),a=0;a<r.length;a++){var o=r[a],s=e.panelId;if(s){if(o.panelId===s)return o}else for(var u=0;u<WL.length;u++)if(WL[u](i,o))return o}return!0},n}();function hC(n){return n[0]>n[1]&&n.reverse(),n}function UL(n,e){return hv(n,e,{includeMainTypes:C1e})}var E1e={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=Tt(),o={},s={};!t&&!r&&!i||(ne(t,function(u){var l=u.axis.grid.model;a.set(l.id,l),o[l.id]=!0}),ne(r,function(u){var l=u.axis.grid.model;a.set(l.id,l),s[l.id]=!0}),ne(i,function(u){a.set(u.id,u),o[u.id]=!0,s[u.id]=!0}),a.each(function(u){var l=u.coordinateSystem,c=[];ne(l.getCartesians(),function(f,h){(Ht(t,f.getAxis("x").model)>=0||Ht(r,f.getAxis("y").model)>=0)&&c.push(f)}),e.push({panelId:"grid--"+u.id,gridModel:u,coordSysModel:u,coordSys:c[0],coordSyses:c,getPanelRect:HL.grid,xAxisDeclared:o[u.id],yAxisDeclared:s[u.id]})}))},geo:function(n,e){ne(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:HL.geo})})}},WL=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],HL={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(A2(n)),e}},G_={lineX:rn(GL,0),lineY:rn(GL,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),o=[hC([i[0],a[0]]),hC([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=nt(t,function(o){var s=n?e.pointToData(o,r):e.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function GL(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=hC(nt([0,1],function(s){return e?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[n]=a,o[1-n]=[NaN,NaN],{values:a,xyMinMax:o}}var jL={lineX:rn(qL,0),lineY:rn(qL,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return nt(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function qL(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function k1e(n,e){var t=XL(n),r=XL(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function XL(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}const CU=T1e;var dC=ne,A1e=Yue("toolbox-dataZoom_"),R1e=function(n){rt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new Cye(i.getZr()),this._brushController.on("brush",Tn(this._onBrush,this)).mount()),D1e(t,r,this,a,i),P1e(t,r)},e.prototype.onclick=function(t,r,i){I1e[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new CU(xE(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(l,c,f){if(f.type==="cartesian2d"){var h=l.brushType;h==="rect"?(s("x",f,c[0]),s("y",f,c[1])):s({lineX:"x",lineY:"y"}[h],f,c)}}),y1e(a,i),this._dispatchZoomAction(i);function s(l,c,f){var h=c.getAxis(l),d=h.model,p=u(l,d,a),g=p.findRepresentativeAxisProxy(d).getMinMaxSpan();(g.minValueSpan!=null||g.maxValueSpan!=null)&&(f=Kz(0,f.slice(),h.scale.getExtent(),0,g.minValueSpan,g.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:f[0],endValue:f[1]})}function u(l,c,f){var h;return f.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var p=d.getAxisModel(l,c.componentIndex);p&&(h=d)}),h}},e.prototype._dispatchZoomAction=function(t){var r=[];dC(t,function(i,a){r.push(Pt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},e}(ro),I1e={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(b1e(this.ecModel))}};function xE(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function P1e(n,e){n.setIconStatus("back",_1e(e)>1?"emphasis":"normal")}function D1e(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var o=new CU(xE(n),e,{include:["grid"]}),s=o.makePanelOpts(i,function(u){return u.xAxisDeclared&&!u.yAxisDeclared?"lineX":!u.xAxisDeclared&&u.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Zfe("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=xE(r),o=hv(n,a);dC(o.xAxisModels,function(u){return s(u,"xAxis","xAxisIndex")}),dC(o.yAxisModels,function(u){return s(u,"yAxis","yAxisIndex")});function s(u,l,c){var f=u.componentIndex,h={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:A1e+l+f};h[c]=f,i.push(h)}return i});const $1e=R1e;function hVe(n){n.registerComponentModel(Z0e),n.registerComponentView(t1e),Ip("saveAsImage",r1e),Ip("magicType",o1e),Ip("dataView",m1e),Ip("dataZoom",$1e),Ip("restore",S1e),ou(K0e)}var N1e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(bn);const O1e=N1e;function TU(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function EU(n){if(Lt.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var kU=EU(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),L1e=EU(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function AU(n,e){if(!n)return e;e=OV(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function M1e(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?e?t[e]:t:null}var B1e=AU(L1e,"transition"),_E=AU(kU,"transform"),F1e="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Lt.transform3dSupported?"will-change:transform;":"");function V1e(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function z1e(n,e,t){if(!lt(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=Kc(e);var a=V1e(t),o=Math.max(Math.round(i)*1.5,6),s="",u=_E+":",l;Ht(["left","right"],a)>-1?(s+="top:50%",u+="translateY(-50%) rotate("+(l=a==="left"?-225:-45)+"deg)"):(s+="left:50%",u+="translateX(-50%) rotate("+(l=a==="top"?225:45)+"deg)");var c=l*Math.PI/180,f=o+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+a+":-"+d+"px";var p=e+" solid "+i+"px;",g=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+u+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+g.join("")+'"></div>'}function U1e(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=Lt.transformSupported?","+_E+r:",left"+r+",top"+r),B1e+":"+i}function KL(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!Lt.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=Lt.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+_E+":"+o+";":[["top",0],["left",0],[kU,o]]}function W1e(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var i=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,s=n.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),ne(["decoration","align"],function(u){var l=n.get(u);l&&e.push("text-"+u+":"+l)}),e.join(";")}function H1e(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),u=n.get("shadowOffsetX"),l=n.get("shadowOffsetY"),c=n.getModel("textStyle"),f=h6(n,"html"),h=u+"px "+l+"px "+o+"px "+s;return r.push("box-shadow:"+h),e&&i&&r.push(U1e(i,t)),a&&r.push("background-color:"+a),ne(["width","color","radius"],function(d){var p="border-"+d,g=OV(p),m=n.get(g);m!=null&&r.push(p+":"+m+(d==="color"?"":"px"))}),r.push(W1e(c)),f!=null&&r.push("padding:"+cb(f).join("px ")+"px"),r.join(";")+";"}function YL(n,e,t,r,i){var a=e&&e.painter;if(t){var o=a&&a.getViewportRoot();o&&wse(n,o,document.body,r,i)}else{n[0]=r,n[1]=i;var s=a&&a.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var G1e=function(){function n(e,t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Lt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=t.getZr(),o=this._appendToBody=r&&r.appendToBody;YL(this._styleCoord,a,o,t.getWidth()/2,t.getHeight()/2),o?document.body.appendChild(i):e.appendChild(i),this._container=e;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(u){if(u=u||window.event,!s._enterable){var l=a.handler,c=a.painter.getViewportRoot();ga(c,u,!0),l.dispatch("mousemove",u)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(e){var t=this._container,r=M1e(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=F1e+H1e(e,!this._firstShow,this._longHide)+KL(a[0],a[1],!0)+("border-color:"+Kc(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var o=this.el;if(e==null){o.innerHTML="";return}var s="";if(lt(a)&&r.get("trigger")==="item"&&!TU(r)&&(s=z1e(r,i,a)),lt(e))o.innerHTML=e+s;else if(e){o.innerHTML="",Ze(e)||(e=[e]);for(var u=0;u<e.length;u++)Nv(e[u])&&e[u].parentNode!==o&&o.appendChild(e[u]);if(s&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=s,o.appendChild(l)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},n.prototype.moveTo=function(e,t){var r=this._styleCoord;if(YL(r,this._zr,this._appendToBody,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=KL(r[0],r[1]);ne(a,function(o){i[o[0]]=o[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Lt.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Tn(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const j1e=G1e;var q1e=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=e.getZr(),QL(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized()},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var o=this;ht(e)&&en(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new br({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:h6(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),ne(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(l){o.el.style[l]=r.get(l)}),ne(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(l){o.el.style[l]=s.get(l)||0}),this._zr.add(this.el);var u=this;this.el.on("mouseover",function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0}),this.el.on("mouseout",function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=ZL(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;QL(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,o=Vu(a.borderWidth||0),s=ZL(a);r.x=e+o+s.left,r.y=t+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Tn(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Vu(n){return Math.max(0,n)}function ZL(n){var e=Vu(n.shadowBlur||0),t=Vu(n.shadowOffsetX||0),r=Vu(n.shadowOffsetY||0);return{left:Vu(e-t),right:Vu(e+t),top:Vu(e-r),bottom:Vu(e+r)}}function QL(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}const X1e=q1e;var K1e=new er({shape:{x:-1,y:-1,width:2,height:2}}),Y1e=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(Lt.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=nle(i.get("renderMode"));this._tooltipContent=a==="richText"?new X1e(r):new j1e(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(t,r,i){if(!(Lt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i,this._alwaysShowContent=t.get("alwaysShowContent");var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?p6(this,"_updatePosition",50,"fixRate"):US(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");pU("itemTooltip",this._api,Tn(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(t,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||Lt.node||!i.getDom())){var o=JL(a,i);this._ticket="";var s=a.dataByCoordSys,u=ebe(a,r,i);if(u){var l=u.el.getBoundingRect().clone();l.applyTransform(u.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:u.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=K1e;c.x=a.x,c.y=a.y,c.update(),an(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var f=vU(a,r),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},e.prototype.manuallyHideTip=function(t,r,i,a){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(JL(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var o=a.seriesIndex,s=a.dataIndex,u=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||u==null)){var l=r.getSeriesByIndex(o);if(l){var c=l.getData(),f=Pp([c.getItemModel(s),l,(l.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var o=t.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,t);else if(i){this._lastDataByCoordSys=null;var s,u;qp(i,function(l){if(an(l).dataIndex!=null)return s=l,!0;if(an(l).tooltipConfig!=null)return u=l,!0},!0),s?this._showSeriesItemTooltip(t,s,r):u?this._showComponentItemTooltip(t,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=Tn(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Pp([r.tooltipOption],a),u=this._renderMode,l=[],c=Gv("section",{blocks:[],noHeader:!0}),f=[],h=new y_;ne(t,function(b){ne(b.dataByAxis,function(_){var w=i.getComponent(_.axisDim+"Axis",_.axisIndex),T=_.value;if(!(!w||T==null)){var E=fU(T,w.axis,i,_.seriesDataIndices,_.valueLabelOpt),A=Gv("section",{header:E,noHeader:!Xo(E),sortBlocks:!0,blocks:[]});c.blocks.push(A),ne(_.seriesDataIndices,function(I){var $=i.getSeriesByIndex(I.seriesIndex),D=I.dataIndexInside,N=$.getDataParams(D);if(!(N.dataIndex<0)){N.axisDim=_.axisDim,N.axisIndex=_.axisIndex,N.axisType=_.axisType,N.axisId=_.axisId,N.axisValue=nE(w.axis,{value:T}),N.axisValueLabel=E,N.marker=h.makeTooltipMarker("item",Kc(N.color),u);var z=VN($.formatTooltip(D,!0,null)),F=z.frag;if(F){var G=Pp([$],a).get("valueFormatter");A.blocks.push(G?Ue({valueFormatter:G},F):F)}z.text&&f.push(z.text),l.push(N)}})}})}),c.blocks.reverse(),f.reverse();var d=r.position,p=s.get("order"),g=jN(c,h,u,p,i.get("useUTC"),s.get("textStyle"));g&&f.unshift(g);var m=u==="richText"?`

`:"<br/>",y=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t,l)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,l):this._showTooltipContent(s,y,l,Math.random()+"",o[0],o[1],d,null,h)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,o=an(r),s=o.seriesIndex,u=a.getSeriesByIndex(s),l=o.dataModel||u,c=o.dataIndex,f=o.dataType,h=l.getData(f),d=this._renderMode,p=t.positionDefault,g=Pp([h.getItemModel(c),l,u&&(u.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=g.get("trigger");if(!(m!=null&&m!=="item")){var y=l.getDataParams(c,f),b=new y_;y.marker=b.makeTooltipMarker("item",Kc(y.color),d);var _=VN(l.formatTooltip(c,!1,f)),w=g.get("order"),T=g.get("valueFormatter"),E=_.frag,A=E?jN(T?Ue({valueFormatter:T},E):E,b,d,w,a.get("useUTC"),g.get("textStyle")):_.text,I="item_"+l.name+"_"+c;this._showOrMove(g,function(){this._showTooltipContent(g,A,y,I,t.offsetX,t.offsetY,t.position,t.target,b)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=an(r),o=a.tooltipConfig,s=o.option||{};if(lt(s)){var u=s;s={content:u,formatter:u}}var l=[s],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&l.push(c),l.push({formatter:s.content});var f=t.positionDefault,h=Pp(l,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",g=new y_;this._showOrMove(h,function(){var m=Pt(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,t.offsetX,t.offsetY,t.position,r,g)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,o,s,u,l,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var f=this._tooltipContent;f.setEnterable(t.get("enterable"));var h=t.get("formatter");u=u||t.get("position");var d=r,p=this._getNearestPoint([o,s],i,t.get("trigger"),t.get("borderColor")),g=p.color;if(h)if(lt(h)){var m=t.ecModel.get("useUTC"),y=Ze(i)?i[0]:i,b=y&&y.axisType&&y.axisType.indexOf("time")>=0;d=h,b&&(d=ab(y.axisValue,d,m)),d=LV(d,i,!0)}else if(Et(h)){var _=Tn(function(w,T){w===this._ticket&&(f.setContent(T,c,t,g,u),this._updatePosition(t,u,o,s,f,i,l))},this);this._ticket=a,d=h(i,a,_)}else d=h;f.setContent(d,c,t,g,u),f.show(t,g),this._updatePosition(t,u,o,s,f,i,l)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||Ze(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Ze(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,o,s,u){var l=this._api.getWidth(),c=this._api.getHeight();r=r||t.get("position");var f=o.getSize(),h=t.get("align"),d=t.get("verticalAlign"),p=u&&u.getBoundingRect().clone();if(u&&p.applyTransform(u.transform),Et(r)&&(r=r([i,a],s,o.el,p,{viewSize:[l,c],contentSize:f.slice()})),Ze(r))i=tn(r[0],l),a=tn(r[1],c);else if(ht(r)){var g=r;g.width=f[0],g.height=f[1];var m=fl(g,{width:l,height:c});i=m.x,a=m.y,h=null,d=null}else if(lt(r)&&u){var y=J1e(r,p,f,t.get("borderWidth"));i=y[0],a=y[1]}else{var y=Z1e(i,a,o,l,c,h?null:20,d?null:20);i=y[0],a=y[1]}if(h&&(i-=eM(h)?f[0]/2:h==="right"?f[0]:0),d&&(a-=eM(d)?f[1]/2:d==="bottom"?f[1]:0),TU(t)){var y=Q1e(i,a,o,l,c);i=y[0],a=y[1]}o.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===t.length;return o&&ne(i,function(s,u){var l=s.dataByAxis||[],c=t[u]||{},f=c.dataByAxis||[];o=o&&l.length===f.length,o&&ne(l,function(h,d){var p=f[d]||{},g=h.seriesDataIndices||[],m=p.seriesDataIndices||[];o=o&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&g.length===m.length,o&&ne(g,function(y,b){var _=m[b];o=o&&y.seriesIndex===_.seriesIndex&&y.dataIndex===_.dataIndex}),a&&ne(h.seriesDataIndices,function(y){var b=y.seriesIndex,_=r[b],w=a[b];_&&w&&w.data!==_.data&&(o=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!o},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){Lt.node||!r.getDom()||(US(this,"_updatePosition"),this._tooltipContent.dispose(),cC("itemTooltip",r))},e.type="tooltip",e}(ra);function Pp(n,e,t){var r=e.ecModel,i;t?(i=new Tr(t,r,r),i=new Tr(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var o=n[a];o&&(o instanceof Tr&&(o=o.get("tooltip",!0)),lt(o)&&(o={formatter:o}),o&&(i=new Tr(o,i,r)))}return i}function JL(n,e){return n.dispatchAction||Tn(e.dispatchAction,e)}function Z1e(n,e,t,r,i,a,o){var s=t.getSize(),u=s[0],l=s[1];return a!=null&&(n+u+a+2>r?n-=u+a:n+=a),o!=null&&(e+l+o>i?e-=l+o:e+=o),[n,e]}function Q1e(n,e,t,r,i){var a=t.getSize(),o=a[0],s=a[1];return n=Math.min(n+o,r)-o,e=Math.min(e+s,i)-s,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function J1e(n,e,t,r){var i=t[0],a=t[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,u=0,l=e.width,c=e.height;switch(n){case"inside":s=e.x+l/2-i/2,u=e.y+c/2-a/2;break;case"top":s=e.x+l/2-i/2,u=e.y-a-o;break;case"bottom":s=e.x+l/2-i/2,u=e.y+c+o;break;case"left":s=e.x-i-o,u=e.y+c/2-a/2;break;case"right":s=e.x+l+o,u=e.y+c/2-a/2}return[s,u]}function eM(n){return n==="center"||n==="middle"}function ebe(n,e,t){var r=g2(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=Tg(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=t.getViewOfComponentModel(o),u;if(s.group.traverse(function(l){var c=an(l).tooltipConfig;if(c&&c.name===n.name)return u=l,!0}),u)return{componentMainType:i,componentIndex:o.componentIndex,el:u}}}}const tbe=Y1e;function dVe(n){ou(vE),n.registerComponentModel(O1e),n.registerComponentView(tbe),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},pi),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},pi)}var nbe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(bn),rbe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,o=t.getModel("textStyle"),s=t.getModel("subtextStyle"),u=t.get("textAlign"),l=Gt(t.get("textBaseline"),t.get("textVerticalAlign")),c=new br({style:au(o,{text:t.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=t.get("subtext"),d=new br({style:au(s,{text:h,fill:s.getTextColor(),y:f.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),g=t.get("sublink"),m=t.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!g&&!m,p&&c.on("click",function(){wN(p,"_"+t.get("target"))}),g&&d.on("click",function(){wN(g,"_"+t.get("subtarget"))}),an(c).eventData=an(d).eventData=m?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(c),h&&a.add(d);var y=a.getBoundingRect(),b=t.getBoxLayoutParams();b.width=y.width,b.height=y.height;var _=fl(b,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));u||(u=t.get("left")||t.get("right"),u==="middle"&&(u="center"),u==="right"?_.x+=_.width:u==="center"&&(_.x+=_.width/2)),l||(l=t.get("top")||t.get("bottom"),l==="center"&&(l="middle"),l==="bottom"?_.y+=_.height:l==="middle"&&(_.y+=_.height/2),l=l||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var w={align:u,verticalAlign:l};c.setStyle(w),d.setStyle(w),y=a.getBoundingRect();var T=_.margin,E=t.getItemStyle(["color","opacity"]);E.fill=t.get("backgroundColor");var A=new er({shape:{x:y.x-T[3],y:y.y-T[0],width:y.width+T[1]+T[3],height:y.height+T[0]+T[2],r:t.get("borderRadius")},style:E,subPixelOptimize:!0,silent:!0});a.add(A)}},e.type="title",e}(ra);function pVe(n){n.registerComponentModel(nbe),n.registerComponentView(rbe)}var ibe=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},abe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Ze(r)&&ne(r,function(a,o){lt(a)&&(a={type:a}),r[o]=Mt(a,ibe(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(u){var l=u.name;i.push(l);var c;if(u.legendVisualProvider){var f=u.legendVisualProvider,h=f.getAllNames();t.isSeriesFiltered(u)||(i=i.concat(h)),h.length?r=r.concat(h):c=!0}else c=!0;c&&v2(u)&&r.push(u.name)}),this._availableNames=i;var a=this.get("data")||r,o=Tt(),s=nt(a,function(u){return(lt(u)||dn(u))&&(u={name:u}),o.get(u.name)?null:(o.set(u.name,!0),new Tr(u,this,this.ecModel))},this);this._data=Jn(s,function(u){return!!u})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;ne(a,function(o){r[o.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;ne(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;ne(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&Ht(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(bn);const pC=abe;var oh=rn,vC=ne,py=lr,obe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new py),this.group.add(this._selectorGroup=new py),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),s=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&s==="vertical"?"right":"left");var u=t.get("selector",!0),l=t.get("selectorPosition",!0);u&&(!l||l==="auto")&&(l=s==="horizontal"?"end":"start"),this.renderInner(o,t,r,i,u,s,l);var c=t.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=t.get("padding"),d=fl(c,f,h),p=this.layoutInner(t,o,d,a,u,l),g=fl(St({width:p.width,height:p.height},c),f,h);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=_U(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,o,s,u){var l=this.getContentGroup(),c=Tt(),f=r.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),vC(r.getData(),function(d,p){var g=d.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var m=new py;m.newline=!0,l.add(m);return}var y=i.getSeriesByName(g)[0];if(!c.get(g))if(y){var b=y.getData(),_=b.getVisual("legendLineStyle")||{},w=b.getVisual("legendIcon"),T=b.getVisual("style"),E=this._createItem(y,g,p,d,r,t,_,T,w,f,a);E.on("click",oh(tM,g,null,a,h)).on("mouseover",oh(gC,y.name,null,a,h)).on("mouseout",oh(mC,y.name,null,a,h)),c.set(g,!0)}else i.eachRawSeries(function(A){if(!c.get(g)&&A.legendVisualProvider){var I=A.legendVisualProvider;if(!I.containName(g))return;var $=I.indexOfName(g),D=I.getItemVisual($,"style"),N=I.getItemVisual($,"legendIcon"),z=Zs(D.fill);z&&z[3]===0&&(z[3]=.2,D=Ue(Ue({},D),{fill:G1(z,"rgba")}));var F=this._createItem(A,g,p,d,r,t,{},D,N,f,a);F.on("click",oh(tM,null,g,a,h)).on("mouseover",oh(gC,null,g,a,h)).on("mouseout",oh(mC,null,g,a,h)),c.set(g,!0)}},this)},this),o&&this._createSelector(o,r,a,s,u)},e.prototype._createSelector=function(t,r,i,a,o){var s=this.getSelectorGroup();vC(t,function(l){var c=l.type,f=new br({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=r.getModel("selectorLabel"),d=r.getModel(["emphasis","selectorLabel"]);kg(f,{normal:h,emphasis:d},{defaultText:l.title}),RS(f)})},e.prototype._createItem=function(t,r,i,a,o,s,u,l,c,f,h){var d=t.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),m=o.isSelected(r),y=a.get("symbolRotate"),b=a.get("symbolKeepAspect"),_=a.get("icon");c=_||c||"roundRect";var w=sbe(c,a,u,l,d,m,h),T=new py,E=a.getModel("textStyle");if(Et(t.getLegendIcon)&&(!_||_==="inherit"))T.add(t.getLegendIcon({itemWidth:p,itemHeight:g,icon:c,iconRotate:y,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}));else{var A=_==="inherit"&&t.getData().getVisual("symbol")?y==="inherit"?t.getData().getVisual("symbolRotate"):y:0;T.add(ube({itemWidth:p,itemHeight:g,icon:c,iconRotate:A,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}))}var I=s==="left"?p+5:-5,$=s,D=o.get("formatter"),N=r;lt(D)&&D?N=D.replace("{name}",r??""):Et(D)&&(N=D(r));var z=a.get("inactiveColor");T.add(new br({style:au(E,{text:N,x:I,y:g/2,fill:m?E.getTextColor():z,align:$,verticalAlign:"middle"})}));var F=new er({shape:T.getBoundingRect(),invisible:!0}),G=a.getModel("tooltip");return G.get("show")&&nb({el:F,componentModel:o,itemName:r,itemTooltipOption:G.option}),T.add(F),T.eachChild(function(U){U.silent=!0}),F.silent=!f,this.getContentGroup().add(T),RS(T),T.__legendDataIndex=i,T},e.prototype.layoutInner=function(t,r,i,a,o,s){var u=this.getContentGroup(),l=this.getSelectorGroup();Vh(t.get("orient"),u,t.get("itemGap"),i.width,i.height);var c=u.getBoundingRect(),f=[-c.x,-c.y];if(l.markRedraw(),u.markRedraw(),o){Vh("horizontal",l,t.get("selectorItemGap",!0));var h=l.getBoundingRect(),d=[-h.x,-h.y],p=t.get("selectorButtonGap",!0),g=t.getOrient().index,m=g===0?"width":"height",y=g===0?"height":"width",b=g===0?"y":"x";s==="end"?d[g]+=c[m]+p:f[g]+=h[m]+p,d[1-g]+=c[y]/2-h[y]/2,l.x=d[0],l.y=d[1],u.x=f[0],u.y=f[1];var _={x:0,y:0};return _[m]=c[m]+p+h[m],_[y]=Math.max(c[y],h[y]),_[b]=Math.min(0,h[b]+d[1-g]),_}else return u.x=f[0],u.y=f[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(ra);function sbe(n,e,t,r,i,a,o){function s(m,y){m.lineWidth==="auto"&&(m.lineWidth=y.lineWidth>0?2:0),vC(m,function(b,_){m[_]==="inherit"&&(m[_]=y[_])})}var u=e.getModel("itemStyle"),l=u.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",f=u.getShallow("decal");l.decal=!f||f==="inherit"?r.decal:qS(f,o),l.fill==="inherit"&&(l.fill=r[i]),l.stroke==="inherit"&&(l.stroke=r[c]),l.opacity==="inherit"&&(l.opacity=(i==="fill"?r:t).opacity),s(l,r);var h=e.getModel("lineStyle"),d=h.getLineStyle();if(s(d,t),l.fill==="auto"&&(l.fill=r.fill),l.stroke==="auto"&&(l.stroke=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),g=l[c];l.lineWidth=p==="auto"?r.lineWidth>0&&g?2:0:l.lineWidth,l.fill=e.get("inactiveColor"),l.stroke=e.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:l,lineStyle:d}}function ube(n){var e=n.icon||"roundRect",t=od(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function tM(n,e,t,r){mC(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),gC(n,e,t,r)}function RU(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function gC(n,e,t,r){RU(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function mC(n,e,t,r){RU(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}const IU=obe;function lbe(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function Dp(n,e,t){var r={},i=n==="toggleSelected",a;return t.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](e.name):n==="allSelect"||n==="inverseSelect"?o[n]():(o[n](e.name),a=o.isSelected(e.name));var s=o.getData();ne(s,function(u){var l=u.get("name");if(!(l===`
`||l==="")){var c=o.isSelected(l);r.hasOwnProperty(l)?r[l]=r[l]&&c:r[l]=c}})}),n==="allSelect"||n==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function cbe(n){n.registerAction("legendToggleSelect","legendselectchanged",rn(Dp,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",rn(Dp,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",rn(Dp,"inverseSelect")),n.registerAction("legendSelect","legendselected",rn(Dp,"select")),n.registerAction("legendUnSelect","legendunselected",rn(Dp,"unSelect"))}function PU(n){n.registerComponentModel(pC),n.registerComponentView(IU),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,lbe),n.registerSubTypeDefaulter("legend",function(){return"plain"}),cbe(n)}var fbe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=fb(t);n.prototype.init.call(this,t,r,i),nM(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),nM(this,this.option,t)},e.type="legend.scroll",e.defaultOption=SV(pC.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(pC);function nM(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,id(e,t,{type:"box",ignoreSize:!!i})}const hbe=fbe;var rM=lr,j_=["width","height"],q_=["x","y"],dbe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new rM),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new rM)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,o,s,u){var l=this;n.prototype.renderInner.call(this,t,r,i,a,o,s,u);var c=this._controllerGroup,f=r.get("pageIconSize",!0),h=Ze(f)?f:[f,f];p("pagePrev",0);var d=r.getModel("pageTextStyle");c.add(new br({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,m){var y=g+"DataIndex",b=tb(r.get("pageIcons",!0)[r.getOrient().name][m],{onclick:Tn(l._pageGo,l,y,r,a)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});b.name=g,c.add(b)}},e.prototype.layoutInner=function(t,r,i,a,o,s){var u=this.getSelectorGroup(),l=t.getOrient().index,c=j_[l],f=q_[l],h=j_[1-l],d=q_[1-l];o&&Vh("horizontal",u,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),g=u.getBoundingRect(),m=[-g.x,-g.y],y=Pt(i);o&&(y[c]=i[c]-g[c]-p);var b=this._layoutContentAndController(t,a,y,l,c,h,d,f);if(o){if(s==="end")m[l]+=b[c]+p;else{var _=g[c]+p;m[l]-=_,b[f]-=_}b[c]+=g[c]+p,m[1-l]+=b[d]+b[h]/2-g[h]/2,b[h]=Math.max(b[h],g[h]),b[d]=Math.min(b[d],g[d]+m[1-l]),u.x=m[0],u.y=m[1],u.markRedraw()}return b},e.prototype._layoutContentAndController=function(t,r,i,a,o,s,u,l){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Vh(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),Vh("horizontal",h,t.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),g=this._showController=d[o]>i[o],m=[-d.x,-d.y];r||(m[a]=c[l]);var y=[0,0],b=[-p.x,-p.y],_=Gt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(g){var w=t.get("pageButtonPosition",!0);w==="end"?b[a]+=i[o]-p[o]:y[a]+=p[o]+_}b[1-a]+=d[s]/2-p[s]/2,c.setPosition(m),f.setPosition(y),h.setPosition(b);var T={x:0,y:0};if(T[o]=g?i[o]:d[o],T[s]=Math.max(d[s],p[s]),T[u]=Math.min(0,p[u]+b[1-a]),f.__rectSize=i[o],g){var E={x:0,y:0};E[o]=Math.max(i[o]-p[o]-_,0),E[s]=T[s],f.setClipPath(new er({shape:E})),f.__rectSize=E[o]}else h.eachChild(function(I){I.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&Rr(c,{x:A.contentPosition[0],y:A.contentPosition[1]},g?t:null),this._updatePageInfoView(t,A),T},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;ne(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=r[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var a=i.childOfName("pageText"),o=t.get("pageFormatter"),s=r.pageIndex,u=s!=null?s+1:0,l=r.pageCount;a&&o&&a.setStyle("text",lt(o)?o.replace("{current}",u==null?"":u+"").replace("{total}",l==null?"":l+""):o({current:u,total:l}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=t.getOrient().index,s=j_[o],u=q_[o],l=this._findTargetItemIndex(r),c=i.children(),f=c[l],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var g=w(f);p.contentPosition[o]=-g.s;for(var m=l+1,y=g,b=g,_=null;m<=h;++m)_=w(c[m]),(!_&&b.e>y.s+a||_&&!T(_,y.s))&&(b.i>y.i?y=b:y=_,y&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=y.i),++p.pageCount)),b=_;for(var m=l-1,y=g,b=g,_=null;m>=-1;--m)_=w(c[m]),(!_||!T(b,_.s))&&y.i<b.i&&(b=y,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=y.i),++p.pageCount,++p.pageIndex),y=_;return p;function w(E){if(E){var A=E.getBoundingRect(),I=A[u]+E[u];return{s:I,e:I+A[s],i:E.__legendDataIndex}}}function T(E,A){return E.e>=A&&E.s<=A+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var u=o.__legendDataIndex;a==null&&u!=null&&(a=s),u===t&&(r=s)}),r??a},e.type="legend.scroll",e}(IU);const pbe=dbe;function vbe(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function gbe(n){ou(PU),n.registerComponentModel(hbe),n.registerComponentView(pbe),vbe(n)}function vVe(n){ou(PU),ou(gbe)}var iM={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},mbe=function(){function n(e){var t=this._condVal=lt(e)?new RegExp(e):ose(e)?e:null;if(t==null){var r="";en(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return lt(t)?this._condVal.test(e):dn(t)?this._condVal.test(e+""):!1},n}(),ybe=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),bbe=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n}(),xbe=function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n}(),_be=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),wbe=function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n}();function wE(n,e){if(n===!0||n===!1){var t=new ybe;return t.value=n,t}var r="";return DU(n)||en(r),n.and?aM("and",n,e):n.or?aM("or",n,e):n.not?Sbe(n,e):Cbe(n,e)}function aM(n,e,t){var r=e[n],i="";Ze(r)||en(i),r.length||en(i);var a=n==="and"?new bbe:new xbe;return a.children=nt(r,function(o){return wE(o,t)}),a.children.length||en(i),a}function Sbe(n,e){var t=n.not,r="";DU(t)||en(r);var i=new _be;return i.child=wE(t,e),i.child||en(r),i}function Cbe(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=zn(n),o=n.parser,s=o?e6(o):null,u=0;u<a.length;u++){var l=a[u];if(!(l==="parser"||e.valueGetterAttrMap.get(l))){var c=nu(iM,l)?iM[l]:l,f=n[l],h=s?s(f):f,d=Lhe(c,h)||c==="reg"&&new mbe(h);d||en(t),i.push(d)}}i.length||en(t);var p=new wbe;return p.valueGetterParam=r,p.valueParser=s,p.getValue=e.getValue,p.subCondList=i,p}function DU(n){return ht(n)&&!gi(n)}var Tbe=function(){function n(e,t){this._cond=wE(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}();function Ebe(n,e){return new Tbe(n,e)}var kbe={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=Ebe(n.config,{valueGetterAttrMap:Tt({dimension:!0}),prepareGetValue:function(s){var u="",l=s.dimension;nu(s,"dimension")||en(u);var c=e.getDimensionInfo(l);return c||en(u),{dimIdx:c.index}},getValue:function(s){return e.retrieveValueFromItem(t,s.dimIdx)}}),i=[],a=0,o=e.count();a<o;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},Abe={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=rr(t);i.length||en(r);var a=[];ne(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&en(r),h!=="asc"&&h!=="desc"&&en(r),p&&p!=="min"&&p!=="max"){var g="";en(g)}if(h!=="asc"&&h!=="desc"){var m="";en(m)}var y=e.getDimensionInfo(f);y||en(r);var b=d?e6(d):null;d&&!b&&en(r),a.push({dimIdx:y.index,parser:b,comparator:new n6(h,p)})});var o=e.sourceFormat;o!==mi&&o!==Va&&en(r);for(var s=[],u=0,l=e.count();u<l;u++)s.push(e.getRawDataItem(u));return s.sort(function(c,f){for(var h=0;h<a.length;h++){var d=a[h],p=e.retrieveValueFromItem(c,d.dimIdx),g=e.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),g=d.parser(g));var m=d.comparator.evaluate(p,g);if(m!==0)return m}return 0}),{data:s}}};function gVe(n){n.registerTransform(kbe),n.registerTransform(Abe)}var Rbe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new o6(this),HN(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),HN(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:rs},e}(bn),Ibe=function(n){rt(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(ra);function mVe(n){n.registerComponentModel(Rbe),n.registerComponentView(Ibe)}var Uo=iu.CMD;function kh(n,e){return Math.abs(n-e)<1e-5}function yC(n){var e=n.data,t=n.len(),r=[],i,a=0,o=0,s=0,u=0;function l(F,G){i&&i.length>2&&r.push(i),i=[F,G]}function c(F,G,U,H){kh(F,U)&&kh(G,H)||i.push(F,G,U,H,U,H)}function f(F,G,U,H,X,Z){var Q=Math.abs(G-F),le=Math.tan(Q/4)*4/3,ge=G<F?-1:1,be=Math.cos(F),ke=Math.sin(F),Ae=Math.cos(G),de=Math.sin(G),Ce=be*X+U,ye=ke*Z+H,Ee=Ae*X+U,De=de*Z+H,Me=X*le*ge,Ie=Z*le*ge;i.push(Ce-Me*ke,ye+Ie*be,Ee+Me*de,De-Ie*Ae,Ee,De)}for(var h,d,p,g,m=0;m<t;){var y=e[m++],b=m===1;switch(b&&(a=e[m],o=e[m+1],s=a,u=o,(y===Uo.L||y===Uo.C||y===Uo.Q)&&(i=[s,u])),y){case Uo.M:a=s=e[m++],o=u=e[m++],l(s,u);break;case Uo.L:h=e[m++],d=e[m++],c(a,o,h,d),a=h,o=d;break;case Uo.C:i.push(e[m++],e[m++],e[m++],e[m++],a=e[m++],o=e[m++]);break;case Uo.Q:h=e[m++],d=e[m++],p=e[m++],g=e[m++],i.push(a+2/3*(h-a),o+2/3*(d-o),p+2/3*(h-p),g+2/3*(d-g),p,g),a=p,o=g;break;case Uo.A:var _=e[m++],w=e[m++],T=e[m++],E=e[m++],A=e[m++],I=e[m++]+A;m+=1;var $=!e[m++];h=Math.cos(A)*T+_,d=Math.sin(A)*E+w,b?(s=h,u=d,l(s,u)):c(a,o,h,d),a=Math.cos(I)*T+_,o=Math.sin(I)*E+w;for(var D=($?-1:1)*Math.PI/2,N=A;$?N>I:N<I;N+=D){var z=$?Math.max(N+D,I):Math.min(N+D,I);f(N,z,_,w,T,E)}break;case Uo.R:s=a=e[m++],u=o=e[m++],h=s+e[m++],d=u+e[m++],l(h,u),c(h,u,h,d),c(h,d,s,d),c(s,d,s,u),c(s,u,h,u);break;case Uo.Z:i&&c(a,o,s,u),a=s,o=u;break}}return i&&i.length>2&&r.push(i),r}function bC(n,e,t,r,i,a,o,s,u,l){if(kh(n,t)&&kh(e,r)&&kh(i,o)&&kh(a,s)){u.push(o,s);return}var c=2/l,f=c*c,h=o-n,d=s-e,p=Math.sqrt(h*h+d*d);h/=p,d/=p;var g=t-n,m=r-e,y=i-o,b=a-s,_=g*g+m*m,w=y*y+b*b;if(_<f&&w<f){u.push(o,s);return}var T=h*g+d*m,E=-h*y-d*b,A=_-T*T,I=w-E*E;if(A<f&&T>=0&&I<f&&E>=0){u.push(o,s);return}var $=[],D=[];ul(n,t,i,o,.5,$),ul(e,r,a,s,.5,D),bC($[0],D[0],$[1],D[1],$[2],D[2],$[3],D[3],u,l),bC($[4],D[4],$[5],D[5],$[6],D[6],$[7],D[7],u,l)}function Pbe(n,e){var t=yC(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],o=[],s=a[0],u=a[1];o.push(s,u);for(var l=2;l<a.length;){var c=a[l++],f=a[l++],h=a[l++],d=a[l++],p=a[l++],g=a[l++];bC(s,u,c,f,h,d,p,g,o,e),s=p,u=g}r.push(o)}return r}function $U(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*t)),s=Math.floor(t/o);s===0&&(s=1,o=t);for(var u=[],l=0;l<o;l++)u.push(s);var c=o*s,f=t-c;if(f>0)for(var l=0;l<f;l++)u[l%o]+=1;return u}function oM(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,o=n.endAngle,s=Math.abs(o-a),u=s*i,l=i-r,c=u>Math.abs(l),f=$U([u,l],c?0:1,e),h=(c?s:l)/f.length,d=0;d<f.length;d++)for(var p=(c?l:s)/f[d],g=0;g<f[d];g++){var m={};c?(m.startAngle=a+h*d,m.endAngle=a+h*(d+1),m.r0=r+p*g,m.r=r+p*(g+1)):(m.startAngle=a+p*g,m.endAngle=a+p*(g+1),m.r0=r+h*d,m.r=r+h*(d+1)),m.clockwise=n.clockwise,m.cx=n.cx,m.cy=n.cy,t.push(m)}}function Dbe(n,e,t){for(var r=n.width,i=n.height,a=r>i,o=$U([r,i],a?0:1,e),s=a?"width":"height",u=a?"height":"width",l=a?"x":"y",c=a?"y":"x",f=n[s]/o.length,h=0;h<o.length;h++)for(var d=n[u]/o[h],p=0;p<o[h];p++){var g={};g[l]=h*f,g[c]=p*d,g[s]=f,g[u]=d,g.x+=n.x,g.y+=n.y,t.push(g)}}function sM(n,e,t,r){return n*r-t*e}function $be(n,e,t,r,i,a,o,s){var u=t-n,l=r-e,c=o-i,f=s-a,h=sM(c,f,u,l);if(Math.abs(h)<1e-6)return null;var d=n-i,p=e-a,g=sM(d,p,c,f)/h;return g<0||g>1?null:new bt(g*u+n,g*l+e)}function Nbe(n,e,t){var r=new bt;bt.sub(r,t,e),r.normalize();var i=new bt;bt.sub(i,n,e);var a=i.dot(r);return a}function sh(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function Obe(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var o=n[a],s=n[(a+1)%r],u=$be(o[0],o[1],s[0],s[1],e.x,e.y,t.x,t.y);u&&i.push({projPt:Nbe(u,e,t),pt:u,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(m,y){return m.projPt-y.projPt});var l=i[0],c=i[i.length-1];if(c.idx<l.idx){var f=l;l=c,c=f}for(var h=[l.pt.x,l.pt.y],d=[c.pt.x,c.pt.y],p=[h],g=[d],a=l.idx+1;a<=c.idx;a++)sh(p,n[a].slice());sh(p,d),sh(p,h);for(var a=c.idx+1;a<=l.idx+r;a++)sh(g,n[a%r].slice());return sh(g,h),sh(g,d),[{points:p},{points:g}]}function uM(n){var e=n.points,t=[],r=[];R5(e,t,r);var i=new Kt(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,o=i.height,s=i.x,u=i.y,l=new bt,c=new bt;return a>o?(l.x=c.x=s+a/2,l.y=u,c.y=u+o):(l.y=c.y=u+o/2,l.x=s,c.x=s+a),Obe(e,l,c)}function e1(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);e1(n,a[0],i,r),e1(n,a[1],t-i,r)}return r}function Lbe(n,e){for(var t=[],r=0;r<e;r++)t.push(w2(n));return t}function Mbe(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function Bbe(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function Fbe(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":Dbe(r,e,t),i=er;break;case"sector":oM(r,e,t),i=fo;break;case"circle":oM({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=fo;break;default:var a=n.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=nt(Pbe(n.getUpdatedPathProxy(),o),function(y){return Bbe(y)}),u=s.length;if(u===0)e1(uM,{points:s[0]},e,t);else if(u===e)for(var l=0;l<u;l++)t.push({points:s[l]});else{var c=0,f=nt(s,function(y){var b=[],_=[];R5(y,b,_);var w=(_[1]-b[1])*(_[0]-b[0]);return c+=w,{poly:y,area:w}});f.sort(function(y,b){return b.area-y.area});for(var h=e,l=0;l<u;l++){var d=f[l];if(h<=0)break;var p=l===u-1?h:Math.ceil(d.area/c*e);p<0||(e1(uM,{points:d.poly},p,t),h-=p)}}i=Q1;break}if(!i)return Lbe(n,e);for(var g=[],l=0;l<t.length;l++){var m=new i;m.setShape(t[l]),Mbe(n,m),g.push(m)}return g}function Vbe(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],o=t<r?n:e,s=Math.min(t,r),u=Math.abs(r-t)/6,l=(s-2)/6,c=Math.ceil(u/l)+1,f=[o[0],o[1]],h=u,d=2;d<s;){var p=o[d-2],g=o[d-1],m=o[d++],y=o[d++],b=o[d++],_=o[d++],w=o[d++],T=o[d++];if(h<=0){f.push(m,y,b,_,w,T);continue}for(var E=Math.min(h,c-1)+1,A=1;A<=E;A++){var I=A/E;ul(p,m,b,w,I,i),ul(g,y,_,T,I,a),p=i[3],g=a[3],f.push(i[1],a[1],i[2],a[2],p,g),m=i[5],y=a[5],b=i[6],_=a[6]}h-=E-1}return o===n?[f,e]:[n,f]}function lM(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],o=0;o<e.length;)a[o++]=r,a[o++]=i;return a}function zbe(n,e){for(var t,r,i,a=[],o=[],s=0;s<Math.max(n.length,e.length);s++){var u=n[s],l=e[s],c=void 0,f=void 0;u?l?(t=Vbe(u,l),c=t[0],f=t[1],r=c,i=f):(f=lM(i||u,u),c=u):(c=lM(r||l,l),f=l),a.push(c),o.push(f)}return[a,o]}function cM(n){for(var e=0,t=0,r=0,i=n.length,a=0,o=i-2;a<i;o=a,a+=2){var s=n[o],u=n[o+1],l=n[a],c=n[a+1],f=s*c-l*u;e+=f,t+=(s+l)*f,r+=(u+c)*f}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function Ube(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,o=0,s=n.length,u=s-2,l=0;l<i;l++){for(var c=l*6,f=0,h=0;h<s;h+=2){var d=h===0?c:(c+h-2)%u+2,p=n[d]-t[0],g=n[d+1]-t[1],m=e[h]-r[0],y=e[h+1]-r[1],b=m-p,_=y-g;f+=b*b+_*_}f<a&&(a=f,o=l)}return o}function Wbe(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function Hbe(n,e,t,r){for(var i=[],a,o=0;o<n.length;o++){var s=n[o],u=e[o],l=cM(s),c=cM(u);a==null&&(a=l[2]<0!=c[2]<0);var f=[],h=[],d=0,p=1/0,g=[],m=s.length;a&&(s=Wbe(s));for(var y=Ube(s,u,l,c)*6,b=m-2,_=0;_<b;_+=2){var w=(y+_)%b+2;f[_+2]=s[w]-l[0],f[_+3]=s[w+1]-l[1]}if(f[0]=s[y]-l[0],f[1]=s[y+1]-l[1],t>0)for(var T=r/t,E=-r/2;E<=r/2;E+=T){for(var A=Math.sin(E),I=Math.cos(E),$=0,_=0;_<s.length;_+=2){var D=f[_],N=f[_+1],z=u[_]-c[0],F=u[_+1]-c[1],G=z*I-F*A,U=z*A+F*I;g[_]=G,g[_+1]=U;var H=G-D,X=U-N;$+=H*H+X*X}if($<p){p=$,d=E;for(var Z=0;Z<g.length;Z++)h[Z]=g[Z]}}else for(var Q=0;Q<m;Q+=2)h[Q]=u[Q]-c[0],h[Q+1]=u[Q+1]-c[1];i.push({from:f,to:h,fromCp:l,toCp:c,rotation:-d})}return i}function t1(n){return n.__isCombineMorphing}var NU="__mOriginal_";function n1(n,e,t){var r=NU+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,o=t.after,s=t.before;n[e]=function(){var u=arguments,l;return s&&s.apply(this,u),a?l=a.apply(this,u):l=i.apply(this,u),o&&o.apply(this,u),l}}function _v(n,e){var t=NU+e;n[t]&&(n[e]=n[t],n[t]=null)}function fM(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=e[0]*a+e[2]*o+e[4],r[i++]=e[1]*a+e[3]*o+e[5]}}function OU(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=zbe(yC(t),yC(r)),a=i[0],o=i[1],s=n.getComputedTransform(),u=e.getComputedTransform();function l(){this.transform=null}s&&fM(a,s),u&&fM(o,u),n1(e,"updateTransform",{replace:l}),e.transform=null;var c=Hbe(a,o,10,Math.PI),f=[];n1(e,"buildPath",{replace:function(h){for(var d=e.__morphT,p=1-d,g=[],m=0;m<c.length;m++){var y=c[m],b=y.from,_=y.to,w=y.rotation*d,T=y.fromCp,E=y.toCp,A=Math.sin(w),I=Math.cos(w);Ky(g,T,E,d);for(var $=0;$<b.length;$+=2){var D=b[$],N=b[$+1],z=_[$],F=_[$+1],G=D*p+z*d,U=N*p+F*d;f[$]=G*I-U*A+g[0],f[$+1]=G*A+U*I+g[1]}var H=f[0],X=f[1];h.moveTo(H,X);for(var $=2;$<b.length;){var z=f[$++],F=f[$++],Z=f[$++],Q=f[$++],le=f[$++],ge=f[$++];H===z&&X===F&&Z===le&&Q===ge?h.lineTo(le,ge):h.bezierCurveTo(z,F,Z,Q,le,ge),H=le,X=ge}}}})}function SE(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;OU(n,e),e.__morphT=0;function a(){_v(e,"buildPath"),_v(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},St({during:function(o){e.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},t)),e}function Gbe(n,e,t,r,i,a){var o=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var s=0,u,l=(1<<o)/2;l>0;l/=2){var c=0,f=0;(n&l)>0&&(c=1),(e&l)>0&&(f=1),s+=l*l*(3*c^f),f===0&&(c===1&&(n=l-1-n,e=l-1-e),u=n,n=e,e=u)}return s}function r1(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=nt(n,function(s){var u=s.getBoundingRect(),l=s.getComputedTransform(),c=u.x+u.width/2+(l?l[4]:0),f=u.y+u.height/2+(l?l[5]:0);return e=Math.min(c,e),t=Math.min(f,t),r=Math.max(c,r),i=Math.max(f,i),[c,f]}),o=nt(a,function(s,u){return{cp:s,z:Gbe(s[0],s[1],e,t,r,i),path:n[u]}});return o.sort(function(s,u){return s.z-u.z}).map(function(s){return s.path})}function LU(n){return Fbe(n.path,n.count)}function xC(){return{fromIndividuals:[],toIndividuals:[],count:0}}function jbe(n,e,t){var r=[];function i(T){for(var E=0;E<T.length;E++){var A=T[E];t1(A)?i(A.childrenRef()):A instanceof jt&&r.push(A)}}i(n);var a=r.length;if(!a)return xC();var o=t.dividePath||LU,s=o({path:e,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),xC();r=r1(r),s=r1(s);for(var u=t.done,l=t.during,c=t.individualDelay,f=new wg,h=0;h<a;h++){var d=r[h],p=s[h];p.parent=e,p.copyTransform(f),c||OU(d,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return s};function g(T){for(var E=0;E<s.length;E++)s[E].addSelfToZr(T)}n1(e,"addSelfToZr",{after:function(T){g(T)}}),n1(e,"removeSelfFromZr",{after:function(T){for(var E=0;E<s.length;E++)s[E].removeSelfFromZr(T)}});function m(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,_v(e,"addSelfToZr"),_v(e,"removeSelfFromZr")}var y=s.length;if(c)for(var b=y,_=function(){b--,b===0&&(m(),u&&u())},h=0;h<y;h++){var w=c?St({delay:(t.delay||0)+c(h,y,r[h],s[h]),done:_},t):t;SE(r[h],s[h],w)}else e.__morphT=0,e.animateTo({__morphT:1},St({during:function(T){for(var E=0;E<y;E++){var A=s[E];A.__morphT=e.__morphT,A.dirtyShape()}l&&l(T)},done:function(){m();for(var T=0;T<n.length;T++)_v(n[T],"updateTransform");u&&u()}},t));return e.__zr&&g(e.__zr),{fromIndividuals:r,toIndividuals:s,count:y}}function qbe(n,e,t){var r=e.length,i=[],a=t.dividePath||LU;function o(d){for(var p=0;p<d.length;p++){var g=d[p];t1(g)?o(g.childrenRef()):g instanceof jt&&i.push(g)}}if(t1(n)){o(n.childrenRef());var s=i.length;if(s<r)for(var u=0,l=s;l<r;l++)i.push(w2(i[u++%s]));i.length=r}else{i=a({path:n,count:r});for(var c=n.getComputedTransform(),l=0;l<i.length;l++)i[l].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),xC()}i=r1(i),e=r1(e);for(var f=t.individualDelay,l=0;l<r;l++){var h=f?St({delay:(t.delay||0)+f(l,r,i[l],e[l])},t):t;SE(i[l],e[l],h)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function hM(n){return Ze(n[0])}function dM(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,o=void 0;for(o=0;o<a;o++)t[o%r].many.push(e[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!t[i].many.length){var u=t[s].many;if(u.length<=1)if(s)s=0;else return t;var a=u.length,l=Math.ceil(a/2);t[i].many=u.slice(l,a),t[s].many=u.slice(0,l),s++}return t}var Xbe={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=w2(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function X_(n,e,t,r,i,a){if(!n.length||!e.length)return;var o=J1("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},o),l,c;hM(n)&&(l=n,c=e),hM(e)&&(l=e,c=n);function f(y,b,_,w,T){var E=y.many,A=y.one;if(E.length===1&&!T){var I=b?E[0]:A,$=b?A:E[0];if(t1(I))f({many:[I],one:$},!0,_,w,!0);else{var D=s?St({delay:s(_,w)},u):u;SE(I,$,D),a(I,$,I,$,D)}}else for(var N=St({dividePath:Xbe[t],individualDelay:s&&function(X,Z,Q,le){return s(X+_,w)}},u),z=b?jbe(E,A,N):qbe(A,E,N),F=z.fromIndividuals,G=z.toIndividuals,U=F.length,H=0;H<U;H++){var D=s?St({delay:s(H,U)},u):u;a(F[H],G[H],b?E[H]:y.one,b?y.one:E[H],D)}}for(var h=l?l===n:n.length>e.length,d=l?dM(c,l):dM(h?e:n,[h?n:e]),p=0,g=0;g<d.length;g++)p+=d[g].many.length;for(var m=0,g=0;g<d.length;g++)f(d[g],h,m,p),m+=d[g].many.length}function bc(n){if(!n)return[];if(Ze(n)){for(var e=[],t=0;t<n.length;t++)e.push(bc(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof jt&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var MU=1e4,Kbe=Fn();function Ybe(n){for(var e=n.dimensions,t=0;t<e.length;t++){var r=n.getDimensionInfo(e[t]);if(r&&r.otherDims.itemGroupId===0)return e[t]}}function pM(n){var e=[];return ne(n,function(t){var r=t.data;if(!(r.count()>MU))for(var i=r.getIndices(),a=Ybe(r),o=0;o<i.length;o++)e.push({dataGroupId:t.dataGroupId,data:r,dim:t.dim||a,divide:t.divide,dataIndex:o})}),e}function K_(n,e,t){n.traverse(function(r){r instanceof jt&&ei(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function Y_(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function uh(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function Zbe(n,e,t){var r=J1("update",t,e);r&&n.traverse(function(i){if(i instanceof Ad){var a=ife(i);a&&i.animateFrom({style:a},r)}})}function Qbe(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function BU(n,e,t){var r=pM(n),i=pM(e);function a(y,b,_,w,T){(_||y)&&b.animateFrom({style:_&&_!==y?Ue(Ue({},_.style),y.style):y.style},T)}function o(y){for(var b=0;b<y.length;b++)if(y[b].dim)return y[b].dim}var s=o(r),u=o(i),l=!1;function c(y,b){return function(_){var w=_.data,T=_.dataIndex;if(b)return w.getId(T);var E=_.dataGroupId,A=y?s||u:u||s,I=A&&w.getDimensionInfo(A),$=I&&I.ordinalMeta;if(I){var D=w.get(I.name,T);return $&&$.categories[D]||D+""}var N=w.getRawDataItem(T);return N&&N.groupId?N.groupId+"":E||w.getId(T)}}var f=Qbe(r,i),h={};if(!f)for(var d=0;d<i.length;d++){var p=i[d],g=p.data.getItemGraphicEl(p.dataIndex);g&&(h[g.id]=!0)}function m(y,b){var _=r[b],w=i[y],T=w.data.hostModel,E=_.data.getItemGraphicEl(_.dataIndex),A=w.data.getItemGraphicEl(w.dataIndex);if(E===A){A&&Zbe(A,w.dataIndex,T);return}E&&h[E.id]||A&&(uh(A),E?(uh(E),Y_(E),l=!0,X_(bc(E),bc(A),w.divide,T,y,a)):K_(A,T,y))}new Xv(r,i,c(!0,f),c(!1,f),null,"multiple").update(m).updateManyToOne(function(y,b){var _=i[y],w=_.data,T=w.hostModel,E=w.getItemGraphicEl(_.dataIndex),A=Jn(nt(b,function(I){return r[I].data.getItemGraphicEl(r[I].dataIndex)}),function(I){return I&&I!==E&&!h[I.id]});E&&(uh(E),A.length?(ne(A,function(I){uh(I),Y_(I)}),l=!0,X_(bc(A),bc(E),_.divide,T,y,a)):K_(E,T,_.dataIndex))}).updateOneToMany(function(y,b){var _=r[b],w=_.data.getItemGraphicEl(_.dataIndex);if(!(w&&h[w.id])){var T=Jn(nt(y,function(A){return i[A].data.getItemGraphicEl(i[A].dataIndex)}),function(A){return A&&A!==w}),E=i[y[0]].data.hostModel;T.length&&(ne(T,function(A){return uh(A)}),w?(uh(w),Y_(w),l=!0,X_(bc(w),bc(T),_.divide,E,y[0],a)):ne(T,function(A){return K_(A,E,y[0])}))}}).updateManyToMany(function(y,b){new Xv(b,y,function(_){return r[_].data.getId(r[_].dataIndex)},function(_){return i[_].data.getId(i[_].dataIndex)}).update(function(_,w){m(y[_],b[w])}).execute()}).execute(),l&&ne(e,function(y){var b=y.data,_=b.hostModel,w=_&&t.getViewOfSeriesModel(_),T=J1("update",_,0);w&&_.isAnimationEnabled()&&T&&T.duration>0&&w.group.traverse(function(E){E instanceof jt&&!E.animators.length&&E.animateFrom({style:{opacity:0}},T)})})}function vM(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function gM(n){return Ze(n)?n.sort().join(","):n}function Uu(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function Jbe(n,e){var t=Tt(),r=Tt(),i=Tt();return ne(n.oldSeries,function(a,o){var s=n.oldDataGroupIds[o],u=n.oldData[o],l=vM(a),c=gM(l);r.set(c,{dataGroupId:s,data:u}),Ze(l)&&ne(l,function(f){i.set(f,{key:c,dataGroupId:s,data:u})})}),ne(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),u=vM(a),l=gM(u),c=r.get(l);if(c)t.set(l,{oldSeries:[{dataGroupId:c.dataGroupId,divide:Uu(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:Uu(s),data:s}]});else if(Ze(u)){var f=[];ne(u,function(p){var g=r.get(p);g.data&&f.push({dataGroupId:g.dataGroupId,divide:Uu(g.data),data:g.data})}),f.length&&t.set(l,{oldSeries:f,newSeries:[{dataGroupId:o,data:s,divide:Uu(s)}]})}else{var h=i.get(u);if(h){var d=t.get(h.key);d||(d={oldSeries:[{dataGroupId:h.dataGroupId,data:h.data,divide:Uu(h.data)}],newSeries:[]},t.set(h.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:Uu(s)})}}}}),t}function mM(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function exe(n,e,t,r){var i=[],a=[];ne(rr(n.from),function(o){var s=mM(e.oldSeries,o);s>=0&&i.push({dataGroupId:e.oldDataGroupIds[s],data:e.oldData[s],divide:Uu(e.oldData[s]),dim:o.dimension})}),ne(rr(n.to),function(o){var s=mM(t.updatedSeries,o);if(s>=0){var u=t.updatedSeries[s].getData();a.push({dataGroupId:e.oldDataGroupIds[s],data:u,divide:Uu(u),dim:o.dimension})}}),i.length>0&&a.length>0&&BU(i,a,r)}function yVe(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){ne(rr(r.seriesTransition),function(i){ne(rr(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][u0]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=Kbe(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)ne(rr(a),function(d){exe(d,i,r,t)});else{var o=Jbe(i,r);ne(o.keys(),function(d){var p=o.get(d);BU(p.oldSeries,p.newSeries,t)})}ne(r.updatedSeries,function(d){d[u0]&&(d[u0]=!1)})}for(var s=e.getSeries(),u=i.oldSeries=[],l=i.oldDataGroupIds=[],c=i.oldData=[],f=0;f<s.length;f++){var h=s[f].getData();h.count()<MU&&(u.push(s[f]),l.push(s[f].get("dataGroupId")),c.push(h))}})}function yM(n,e,t){var r=mf.createCanvas(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var txe=function(n){kn(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||P0,typeof t=="string"?o=yM(t,r,i):ht(t)&&(o=t,t=o.id),a.id=t,a.dom=o;var s=o.style;return s&&(z4(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=yM("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,u=!1,l=new Kt(0,0,0,0);function c(b){if(!(!b.isFinite()||b.isZero()))if(o.length===0){var _=new Kt(0,0,0,0);_.copy(b),o.push(_)}else{for(var w=!1,T=1/0,E=0,A=0;A<o.length;++A){var I=o[A];if(I.intersect(b)){var $=new Kt(0,0,0,0);$.copy(I),$.union(b),o[A]=$,w=!0;break}else if(u){l.copy(b),l.union(I);var D=b.width*b.height,N=I.width*I.height,z=l.width*l.height,F=z-D-N;F<T&&(T=F,E=A)}}if(u&&(o[E].union(b),w=!0),!w){var _=new Kt(0,0,0,0);_.copy(b),o.push(_)}u||(u=o.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=t[f];if(h){var d=h.shouldBePainted(i,a,!0,!0),p=h.__isRendered&&(h.__dirty&Qi||!d)?h.getPrevPaintRect():null;p&&c(p);var g=d&&(h.__dirty&Qi||!h.__isRendered)?h.getPaintRect():null;g&&c(g)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=r[f],d=h.shouldBePainted(i,a,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<o.length;){if(o[f].isZero()){o.splice(f,1);continue}for(var y=f+1;y<o.length;)o[f].intersect(o[y])?(m=!0,o[f].union(o[y]),o.splice(y,1)):y++;f++}}while(m);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=t+"px",o.height=r+"px"),a.width=t*i,a.height=r*i,s&&(s.width=t*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,o=this.ctx,s=a.width,u=a.height;r=r||this.clearColor;var l=this.motionBlur&&!t,c=this.lastFrameAlpha,f=this.dpr,h=this;l&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/f,u/f));var d=this.domBack;function p(g,m,y,b){if(o.clearRect(g,m,y,b),r&&r!=="transparent"){var _=void 0;if(z1(r)){var w=r.global||r.__width===y&&r.__height===b;_=w&&r.__canvasGradient||GS(o,r,{x:0,y:0,width:y,height:b}),r.__canvasGradient=_,r.__width=y,r.__height=b}else ase(r)&&(r.scaleX=r.scaleX||f,r.scaleY=r.scaleY||f,_=jS(o,r,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}}));o.save(),o.fillStyle=_||r,o.fillRect(g,m,y,b),o.restore()}l&&(o.save(),o.globalAlpha=c,o.drawImage(d,g,m,y,b),o.restore())}!i||l?p(0,0,s,u):i.length&&ne(i,function(g){p(g.x*f,g.y*f,g.width*f,g.height*f)})},e}(_o);const Z_=txe;var bM=1e5,pc=314159,vy=.01,nxe=.001;function rxe(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function ixe(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var axe=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Ue({},r||{}),this.dpr=r.devicePixelRatio||P0,this._singleCanvas=a,this.root=e;var o=e.style;o&&(z4(e),e.innerHTML=""),this.storage=t;var s=this._zlevelList;this._prevDisplayList=[];var u=this._layers;if(a){var c=e,f=c.width,h=c.height;r.width!=null&&(f=r.width),r.height!=null&&(h=r.height),this.dpr=r.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new Z_(c,this,this.dpr);d.__builtin__=!0,d.initContext(),u[pc]=d,d.zlevel=pc,s.push(pc),this._domRoot=e}else{this._width=Ym(e,0,r),this._height=Ym(e,1,r);var l=this._domRoot=ixe(this._width,this._height);e.appendChild(l)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var u=a===0?this._backgroundColor:null;s.refresh(u)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<t;o++){var s=e[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(bM)),a||(a=r.ctx,a.save()),Rc(a,s,i,o===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(bM)},n.prototype.paintOne=function(e,t){E6(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(e),o)this.eachLayer(function(l){l.afterBrush&&l.afterBrush()});else{var u=this;fS(function(){u._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(pc).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var u=this._zlevelList[s],l=this._layers[u];l.__builtin__&&l!==this._hoverlayer&&(l.__dirty||r)&&a.push(l)}for(var c=!0,f=!1,h=function(g){var m=a[g],y=m.ctx,b=o&&m.createRepaintRects(e,t,d._width,d._height),_=r?m.__startIndex:m.__drawIndex,w=!r&&m.incremental&&Date.now,T=w&&Date.now(),E=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,E,b);else if(_===m.__startIndex){var A=e[_];(!A.incremental||!A.notClear||r)&&m.clear(!1,E,b)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=m.__startIndex);var I,$=function(F){var G={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(I=_;I<m.__endIndex;I++){var U=e[I];if(U.__inHover&&(f=!0),i._doPaintEl(U,m,o,F,G,I===m.__endIndex-1),w){var H=Date.now()-T;if(H>15)break}}G.prevElClipPaths&&y.restore()};if(b)if(b.length===0)I=m.__endIndex;else for(var D=d.dpr,N=0;N<b.length;++N){var z=b[N];y.save(),y.beginPath(),y.rect(z.x*D,z.y*D,z.width*D,z.height*D),y.clip(),$(z),y.restore()}else y.save(),$(),y.restore();m.__drawIndex=I,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<a.length;p++)h(p);return Lt.wxa&&ne(this._layers,function(g){g&&g.ctx&&g.ctx.draw&&g.ctx.draw()}),{finished:c,needsRefreshHover:f}},n.prototype._doPaintEl=function(e,t,r,i,a,o){var s=t.ctx;if(r){var u=e.getPaintRect();(!i||u&&u.intersect(i))&&(Rc(s,e,a,o),e.setPrevPaintRect(u))}else Rc(s,e,a,o)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=pc);var r=this._layers[e];return r||(r=new Z_("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?Mt(r,this._layerConfig[e],!0):this._layerConfig[e-vy]&&Mt(r,this._layerConfig[e-vy],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,u=-1;if(!r[e]&&rxe(t)){if(a>0&&e>i[0]){for(u=0;u<a-1&&!(i[u]<e&&i[u+1]>e);u++);s=r[i[u]]}if(i.splice(u+1,0,e),r[e]=t,!t.virtual)if(s){var l=s.dom;l.nextSibling?o.insertBefore(t.dom,l.nextSibling):o.appendChild(t.dom)}else o.firstChild?o.insertBefore(t.dom,o.firstChild):o.appendChild(t.dom);t.__painter=this}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&e.call(t,o,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||e.call(t,o,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function t(f){a&&(a.__endIndex!==f&&(a.__dirty=!0),a.__endIndex=f)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,u;for(u=0;u<e.length;u++){var i=e[u],l=i.zlevel,c=void 0;s!==l&&(s=l,o=0),i.incremental?(c=this.getLayer(l+nxe,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(l+(o>0?vy:0),this._needsManuallyCompositing),c.__builtin__||s2("ZLevel "+l+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==u&&(c.__dirty=!0),c.__startIndex=u,c.incremental?c.__drawIndex=-1:c.__drawIndex=u,t(u),a=c),i.__dirty&Qi&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=u))}t(u),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,ne(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?Mt(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+vy){var o=this._layers[a];Mt(o,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(Ht(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=Ym(a,0,i),t=Ym(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(pc).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[pc].dom;var t=new Z_("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(f){f.__builtin__?r.drawImage(f.dom,0,0,i,a):f.renderToCanvas&&(r.save(),f.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),u=0,l=s.length;u<l;u++){var c=s[u];Rc(r,c,o,u===l-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const oxe=axe;function bVe(n){n.registerPainter("canvas",oxe)}var _C={},sxe={get exports(){return _C},set exports(n){_C=n}};/*! GoldPlay built @6/28/2020, 11:46:42 AM */(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=r,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)i.d(s,u,function(l){return a[l]}.bind(null,u));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=162)}([function(t,r){t.exports=function(i,a,o){return a in i?Object.defineProperty(i,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[a]=o,i}},function(t,r){t.exports=function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}},function(t,r){t.exports=function(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}},function(t,r){function i(a,o){for(var s=0;s<o.length;s++){var u=o[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}t.exports=function(a,o,s){return o&&i(a.prototype,o),s&&i(a,s),a}},function(t,r){function i(a){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},i(a)}t.exports=i},function(t,r,i){var a=i(11),o=i(1);t.exports=function(s,u){return!u||a(u)!=="object"&&typeof u!="function"?o(s):u}},function(t,r,i){var a=i(48);t.exports=function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),s&&a(o,s)}},,function(t,r){t.exports=function(i,a){return a||(a=i.slice(0)),Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(a)}}))}},function(t,r,i){i.d(r,"c",function(){return a}),i.d(r,"b",function(){return o}),i.d(r,"a",function(){return s}),i.d(r,"d",function(){return u});var a={projectName:"GOLDPLAY",projectAbbreviation:"GP",mode:"production",basePath:"./",get distPath(){var l="";return(this.mode=="development"||this.mode=="test")&&(l="/dist/"),l},get libPath(){return this.distPath+"lib/"},hideBarBoxTime:300,speedList:[{name:"0.5X",value:.5},{name:"1.0X",value:1},{name:"1.5X",value:1.5},{name:"2.0X",value:2},{name:"3.0X",value:3}]},o={maxDuration:30,maxSize:1024e6,maxRetryCount:3},s=1/9e4,u={READYBUFFERLENGTH:1e3,MAXBUFFERLENGTH:5e3}},function(t,r,i){var a=i(2),o=i.n(a),s=i(3),u=i.n(s),l=i(0),c=i.n(l),f=i(9),h=console||{};function d(g,m){if(h[g]){if(this.disabled||this.level<0||f.c.mode==="production"&&(g!=="error"||g!=="warn")||this.level===1&&["info"].includes(g)||this.level===2&&["log","info"].includes(g)||this.level>2&&g!=="error")return;for(var y=new Date().toLocaleString(),b=arguments.length,_=new Array(b>2?b-2:0),w=2;w<b;w++)_[w-2]=arguments[w];var T=["\x1B[32m".concat(m,"\x1B[39m")].concat(_,[y]);g!=="error"&&g!=="warn"||(T=[m].concat(_,[y])),typeof h[g]=="function"&&h[g].apply(h,T)}}var p=function(){function g(m){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o()(this,g),c()(this,"prefix",f.c.projectName),c()(this,"joiner",">"),c()(this,"left","["),c()(this,"right","]"),c()(this,"disabled",!1),c()(this,"level",0),Object.assign(this,y),typeof m=="string"?this.file=m:m&&m.constructor&&(this.file=m.constructor.name)}return u()(g,[{key:"setDisabled",value:function(m){this.disabled=m}},{key:"setLevel",value:function(m){this.level=m}}],[{key:"get",value:function(m,y){return new g(m,y)}}]),g}();["info","log","debug","warn","error"].forEach(function(g){p.prototype[g]=function(m,y){y=y===void 0?"":this.joiner+y;for(var b=this.left+m+y+this.right,_=this.left+this.prefix+" "+this.file+this.right+b,w=arguments.length,T=new Array(w>2?w-2:0),E=2;E<w;E++)T[E-2]=arguments[E];d.apply(this,[g,_].concat(T))}}),r.a=p},function(t,r){function i(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t.exports=i=function(o){return typeof o}:t.exports=i=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(a)}t.exports=i},,,,,,,function(t,r,i){t.exports=i(88)},,,,,function(t,r,i){i.d(r,"a",function(){return p});var a=i(2),o=i.n(a),s=i(3),u=i.n(s),l=i(0),c=i.n(l),f=i(9),h={eval:EvalError,range:RangeError,reference:ReferenceError,syntax:SyntaxError,type:TypeError,uri:URIError,default:Error},d=null,p=(d||(d=new(function(){function g(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1001;return o()(this,g),c()(this,"type",""),c()(this,"errorName","DefaultError"),c()(this,"code",null),c()(this,"message",""),c()(this,"stack",""),this.type=m,this.code=y,this.throws.bind(this)}return u()(g,[{key:"throws",value:function(m){for(var y="",b=Error,_=arguments.length,w=new Array(_>1?_-1:0),T=1;T<_;T++)w[T-1]=arguments[T];if(m instanceof Error){for(var E in h)if(m instanceof h[E]){this.errorName=h[E].name,b=m.constructor;break}this.stack=m.stack,w&&w.splice&&(y=w[0],w.splice(0,1))}else y=m.toString();this.message="[".concat(f.c.projectName," ERROR:")+this.type+"-"+this.code+"]"+y;try{throw new b(this.message,"[args]:",w)}catch(A){this.stack=this.stack||A.stack,console.error(A,"[message]:",y,"[args]:",w)}}}]),g}())),d)},function(t,r){t.exports=function(i,a){var o=a.get(i);if(!o)throw new TypeError("attempted to get private field on non-instance");return o.get?o.get.call(i):o.value}},,,function(t,r,i){var a=i(48),o=i(86);function s(u,l,c){return o()?t.exports=s=Reflect.construct:t.exports=s=function(f,h,d){var p=[null];p.push.apply(p,h);var g=new(Function.bind.apply(f,p));return d&&a(g,d.prototype),g},s.apply(null,arguments)}t.exports=s},function(t,r){function i(a,o,s,u,l,c,f){try{var h=a[c](f),d=h.value}catch(p){return void s(p)}h.done?o(d):Promise.resolve(d).then(u,l)}t.exports=function(a){return function(){var o=this,s=arguments;return new Promise(function(u,l){var c=a.apply(o,s);function f(d){i(c,u,l,f,h,"next",d)}function h(d){i(c,u,l,f,h,"throw",d)}f(void 0)})}}},function(t,r){t.exports=function(i,a,o){var s=a.get(i);if(!s)throw new TypeError("attempted to set private field on non-instance");if(s.set)s.set.call(i,o);else{if(!s.writable)throw new TypeError("attempted to set read only private field");s.value=o}return o}},,,,,function(t,r,i){var a=i(4),o=i(48),s=i(87),u=i(27);function l(c){var f=typeof Map=="function"?new Map:void 0;return t.exports=l=function(h){if(h===null||!s(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(h))return f.get(h);f.set(h,d)}function d(){return u(h,arguments,a(this).constructor)}return d.prototype=Object.create(h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),o(d,h)},l(c)}t.exports=l},,,,,,,,,,function(t,r,i){function a(c){var f={};function h(p){if(f[p])return f[p].exports;var g=f[p]={i:p,l:!1,exports:{}};return c[p].call(g.exports,g,g.exports,h),g.l=!0,g.exports}h.m=c,h.c=f,h.i=function(p){return p},h.d=function(p,g,m){h.o(p,g)||Object.defineProperty(p,g,{configurable:!1,enumerable:!0,get:m})},h.r=function(p){Object.defineProperty(p,"__esModule",{value:!0})},h.n=function(p){var g=p&&p.__esModule?function(){return p.default}:function(){return p};return h.d(g,"a",g),g},h.o=function(p,g){return Object.prototype.hasOwnProperty.call(p,g)},h.p="/",h.oe=function(p){throw console.error(p),p};var d=h(h.s=ENTRY_MODULE);return d.default||d}var o="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function s(c){return(c+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(c,f,h){var d={};d[h]=[];var p=f.toString(),g=p.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!g)return d;for(var m,y=g[1],b=new RegExp("(\\\\n|\\W)"+s(y)+o,"g");m=b.exec(p);)m[3]!=="dll-reference"&&d[h].push(m[3]);for(b=new RegExp("\\("+s(y)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)'+o,"g");m=b.exec(p);)c[m[2]]||(d[h].push(m[1]),c[m[2]]=i(m[1]).m),d[m[2]]=d[m[2]]||[],d[m[2]].push(m[4]);for(var _,w=Object.keys(d),T=0;T<w.length;T++)for(var E=0;E<d[w[T]].length;E++)_=d[w[T]][E],isNaN(1*_)||(d[w[T]][E]=1*d[w[T]][E]);return d}function l(c){return Object.keys(c).reduce(function(f,h){return f||c[h].length>0},!1)}t.exports=function(c,f){f=f||{};var h={main:i.m},d=f.all?{main:Object.keys(h.main)}:function(b,_){for(var w={main:[_]},T={main:[]},E={main:{}};l(w);)for(var A=Object.keys(w),I=0;I<A.length;I++){var $=A[I],D=w[$].pop();if(E[$]=E[$]||{},!E[$][D]&&b[$][D]){E[$][D]=!0,T[$]=T[$]||[],T[$].push(D);for(var N=u(b,b[$][D],$),z=Object.keys(N),F=0;F<z.length;F++)w[z[F]]=w[z[F]]||[],w[z[F]]=w[z[F]].concat(N[z[F]])}}return T}(h,c),p="";Object.keys(d).filter(function(b){return b!=="main"}).forEach(function(b){for(var _=0;d[b][_];)_++;d[b].push(_),h[b][_]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",p=p+"var "+b+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(_))+")({"+d[b].map(function(w){return JSON.stringify(w)+": "+h[b][w].toString()}).join(",")+`});
`}),p=p+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(c))+")({"+d.main.map(function(b){return JSON.stringify(b)+": "+h.main[b].toString()}).join(",")+"}))(self);";var g=new window.Blob([p],{type:"text/javascript"});if(f.bare)return g;var m=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(g),y=new window.Worker(m);return y.objectURL=m,y}},function(t,r,i){var a,o,s;o=[],(s=typeof(a=function(){var u=function(){},l={},c={},f={};function h(m,y){if(m){var b=f[m];if(c[m]=y,b)for(;b.length;)b[0](m,y),b.splice(0,1)}}function d(m,y){m.call&&(m={success:m}),y.length?(m.error||u)(y):(m.success||u)(m)}function p(m,y,b,_){var w,T,E=document,A=b.async,I=(b.numRetries||0)+1,$=b.before||u,D=m.replace(/[\?|#].*$/,""),N=m.replace(/^(css|img)!/,"");_=_||0,/(^css!|\.css$)/.test(D)?((T=E.createElement("link")).rel="stylesheet",T.href=N,(w="hideFocus"in T)&&T.relList&&(w=0,T.rel="preload",T.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(D)?(T=E.createElement("img")).src=N:((T=E.createElement("script")).src=m,T.async=A===void 0||A),T.onload=T.onerror=T.onbeforeload=function(z){var F=z.type[0];if(w)try{T.sheet.cssText.length||(F="e")}catch(G){G.code!=18&&(F="e")}if(F=="e"){if((_+=1)<I)return p(m,y,b,_)}else if(T.rel=="preload"&&T.as=="style")return T.rel="stylesheet";y(m,F,z.defaultPrevented)},$(m,T)!==!1&&E.head.appendChild(T)}function g(m,y,b){var _,w;if(y&&y.trim&&(_=y),w=(_?b:y)||{},_){if(_ in l)throw"LoadJS";l[_]=!0}function T(E,A){(function(I,$,D){var N,z,F=(I=I.push?I:[I]).length,G=F,U=[];for(N=function(H,X,Z){if(X=="e"&&U.push(H),X=="b"){if(!Z)return;U.push(H)}--F||$(U)},z=0;z<G;z++)p(I[z],N,D)})(m,function(I){d(w,I),E&&d({success:E,error:A},I),h(_,I)},w)}if(w.returnPromise)return new Promise(T);T()}return g.ready=function(m,y){return function(b,_){b=b.push?b:[b];var w,T,E,A=[],I=b.length,$=I;for(w=function(D,N){N.length&&A.push(D),--$||_(A)};I--;)T=b[I],(E=c[T])?w(T,E):(f[T]=f[T]||[]).push(w)}(m,function(b){d(y,b)}),g},g.done=function(m){h(m,[])},g.reset=function(){l={},c={},f={}},g.isDefined=function(m){return m in l},g})=="function"?a.apply(r,o):a)===void 0||(t.exports=s)},,,function(t,r){function i(a,o){return t.exports=i=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},i(a,o)}t.exports=i},function(t,r){(function(){function i(a,o){throw new Error("abstract")}i.prototype.drawFrame=function(a){throw new Error("abstract")},i.prototype.clear=function(){throw new Error("abstract")},t.exports=i})()},,,,,,,,,,,function(t,r){var i={validateDimension:function(a){if(a<=0||a!==(0|a))throw"YUV plane dimensions must be a positive integer"},validateOffset:function(a){if(a<0||a!==(0|a))throw"YUV plane offsets must be a non-negative integer"},format:function(a){var o=a.width,s=a.height,u=a.chromaWidth||o,l=a.chromaHeight||s,c=a.cropLeft||0,f=a.cropTop||0,h=a.cropWidth||o-c,d=a.cropHeight||s-f,p=a.displayWidth||h,g=a.displayHeight||d;return this.validateDimension(o),this.validateDimension(s),this.validateDimension(u),this.validateDimension(l),this.validateOffset(c),this.validateOffset(f),this.validateDimension(h),this.validateDimension(d),this.validateDimension(p),this.validateDimension(g),{width:o,height:s,chromaWidth:u,chromaHeight:l,cropLeft:c,cropTop:f,cropWidth:h,cropHeight:d,displayWidth:p,displayHeight:g}},allocPlane:function(a,o){return i.validateDimension(a),i.validateDimension(o),{bytes:new Uint8Array(a*o),stride:a}},suitableStride:function(a){i.validateDimension(a);var o=a%4;return o==0?a:a+(4-o)},allocPlane:function(a,o,s,u,l){var c,f;if(this.validateDimension(a),this.validateDimension(o),l=l||0,u=u||this.suitableStride(a),this.validateDimension(u),u<a)throw"Invalid input stride for YUV plane; must be larger than width";if(c=u*o,s){if(s.length-l<c)throw"Invalid input buffer for YUV plane; must be large enough for stride times height";f=s.slice(l,l+c)}else f=new Uint8Array(c),u=u||this.suitableStride(a);return{bytes:f,stride:u}},lumaPlane:function(a,o,s,u){return this.allocPlane(a.width,a.height,o,s,u)},chromaPlane:function(a,o,s,u){return this.allocPlane(a.chromaWidth,a.chromaHeight,o,s,u)},frame:function(a,o,s,u){return{format:a,y:o=o||this.lumaPlane(a),u:s=s||this.chromaPlane(a),v:u=u||this.chromaPlane(a)}},copyPlane:function(a){return{bytes:a.bytes.slice(),stride:a.stride}},copyFrame:function(a){return{format:a.format,y:this.copyPlane(a.y),u:this.copyPlane(a.u),v:this.copyPlane(a.v)}},transferables:function(a){return[a.y.bytes.buffer,a.u.bytes.buffer,a.v.bytes.buffer]}};t.exports=i},function(t,r,i){var a=i(95),o=i(96),s=i(97),u=i(99);t.exports=function(l,c){return a(l)||o(l,c)||s(l,c)||u()}},,,,,,,,,,,function(t,r,i){(function(){var a=i(49),o=i(89),s=i(92),u={FrameSink:a,SoftwareFrameSink:o,WebGLFrameSink:s,attach:function(l,c){return("webGL"in(c=c||{})?c.webGL:s.isAvailable())?new s(l,c):new o(l,c)}};t.exports=u})()},,,,,,,,,,,,,function(t,r,i){i.r(r);var a=i(2),o=i.n(a),s=i(3),u=i.n(s),l=i(5),c=i.n(l),f=i(4),h=i.n(f),d=i(1),p=i.n(d),g=i(6),m=i.n(g),y=i(0),b=i.n(y),_=i(24),w=i.n(_),T=i(29),E=i.n(T),A=i(10),I=A.a.get("Events.js"),$=function(){function P(C){o()(this,P),b()(this,"eventsQueue",{}),b()(this,"target",{}),b()(this,"disallowRepeat",!1),this.target=C}return u()(P,[{key:"add",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0,x=arguments.length>2?arguments[2]:void 0,k=!0,B=!1,q=void 0;try{for(var ee,ie=C[Symbol.iterator]();!(k=(ee=ie.next()).done);k=!0){var me=ee.value;this.on(me,v,x)}}catch(Re){B=!0,q=Re}finally{try{k||ie.return==null||ie.return()}finally{if(B)throw q}}}},{key:"on",value:function(C,v,x){if(this.eventsQueue[C]===void 0&&(this.eventsQueue[C]={methods:[],once:!1}),typeof v=="function"){if(!this.disallowRepeat||!this.eventsQueue[C].methods.includes(v))return this.eventsQueue[C].methods.push(v),x!==void 0&&(this.eventsQueue[C].once=x),this.target}else I.error("on","the argument is not function.",v)}},{key:"once",value:function(C,v){this.on(C,v,!0)}},{key:"off",value:function(C,v){var x=this.eventsQueue[C];if(x){var k=x.methods;if(v)for(var B=k.length;B--;)k[B]===v&&k.splice(B,1);else delete this.eventsQueue[C];return this.target}}},{key:"emit",value:function(C){for(var v=this,x=arguments.length,k=new Array(x>1?x-1:0),B=1;B<x;B++)k[B-1]=arguments[B];var q=this.eventsQueue[C];if(q){var ee=q.methods;return ee.forEach(function(ie){ie.apply(v.target,k)}),q.once&&this.off(C),this.target}}},{key:"clear",value:function(C){delete this.eventsQueue[C]}},{key:"clearAll",value:function(){this.eventsQueue={}}}]),P}(),D=function(P){var C=new $(P);return function(v){return C.target=v,C}},N=i(11),z=i.n(N),F=A.a.get("Element.js"),G=function(){function P(){o()(this,P)}return u()(P,null,[{key:"createEl",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",v=arguments.length>1?arguments[1]:void 0;if(typeof C!="string")return F.error("please input element name"),null;var x=document.createElement(C,v);return x}},{key:"registerElement",value:function(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:HTMLElement,x=arguments.length>2?arguments[2]:void 0,k=document.registerElement(C,{prototype:Object.create(v.prototype),extends:x});return k}},{key:"addEl",value:function(C,v){if(C&&v)try{v.appendChild(C)}catch(x){F.error(x)}}},{key:"removeEl",value:function(C){try{var v=C.parentNode;v&&v.removeChild(C)}catch(x){F.error(x)}}},{key:"addClass",value:function(C){try{for(var v,x=arguments.length,k=new Array(x>1?x-1:0),B=1;B<x;B++)k[B-1]=arguments[B];(v=C.classList).add.apply(v,k)}catch(q){F.error(q)}}},{key:"removeClass",value:function(){}},{key:"hasClass",value:function(){}},{key:"isElement",value:function(C){try{return C instanceof HTMLElement}catch{return z()(C)==="object"&&C.nodeType===1&&z()(C.style)==="object"&&z()(C.ownerDocument)==="object"}}},{key:"setAttributes",value:function(C,v){if(P.isElement(C))for(var x=0,k=v.length;x<k;x++){var B=v[x],q=B.name;q=B.name.replace(/["|']/g,""),C.setAttribute(q,B.value)}}},{key:"syncAttributes",value:function(C,v){var x=v.attributes;P.setAttributes(C,x);var k=C.attributes;P.setAttributes(v,k)}},{key:"getClientWidth",value:function(){return document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth}},{key:"getClientHeight",value:function(){return document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight}},{key:"adaptSizeElement",value:function(C,v,x,k){var B=x,q=k;q.width=C||q.width||B.offsetWidth,q.height=v||q.height||B.offsetHeight;var ee=q.width,ie=q.height,me=0;q.style.position="absolute",B.offsetWidth<=0&&(B.style.width=ee+"px"),B.offsetHeight<=0&&(B.style.height=ie+"px");var Re=B.offsetWidth/ee,Ve=B.offsetHeight/ie;me=Ve>Re?Re:Ve,q.style.top=B.offsetTop+(B.offsetHeight-ie*me)/2+"px",q.style.left=B.offsetLeft+(B.offsetWidth-ee*me)/2+"px",q.style.transform="scale(".concat(me,", ").concat(me,")"),q.style["transform-origin"]="top left",q.style.display="inline-block"}}]),P}(),U=i(27),H=i.n(U),X=function(){function P(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o()(this,P),b()(this,"logger",null),b()(this,"__instance__",null),b()(this,"__singleton__",null),this.options=C,this.setLogger(this.constructor.name+".js")}return u()(P,[{key:"setLogger",value:function(C){this.logger=new A.a(C)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(C){Object.assign(this.options,C)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):D(this)}}],[{key:"getInstance",value:function(){for(var C=arguments.length,v=new Array(C),x=0;x<C;x++)v[x]=arguments[x];return this.__instance__=H()(this,v),this.__instance__}},{key:"getSingleton",value:function(){if(!this.__singleton__){for(var C=arguments.length,v=new Array(C),x=0;x<C;x++)v[x]=arguments[x];this.__singleton__=H()(this,v)}return this.__singleton__}}]),P}(),Z=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this)),b()(p()(x),"component",null),x.component=v.component,x}return m()(C,P),u()(C,[{key:"confirm",value:function(){}},{key:"show",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.component.data.content=v,this.component.data.display!=="default"&&this.component.data.display!==""||this.component.showBox(),this.component.data.display!=="show"&&this.component.show()}},{key:"hide",value:function(){this.component.hide()}}]),C}(X),Q=i(23),le=function(){function P(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o()(this,P),b()(this,"logger",null),this.options=C,this.debug=C.debug||!1,this.setLogger(this.constructor.name+".js")}return u()(P,[{key:"setLogger",value:function(C){this.logger=new A.a(C)}},{key:"getLogger",value:function(){return this.logger}},{key:"setOptions",value:function(C){Object.assign(this.options,C)}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"events",get:function(){return this.options&&this.options.events?this.options.events(this):D(this)}},{key:"alert",get:function(){var C="";return this.options&&this.options.alertError&&(C=this.options.alertError),C}}]),P}(),ge=i(9),be=function(P){function C(){var v;return o()(this,C),v=c()(this,h()(C).call(this)),b()(p()(v),"loadData",null),b()(p()(v),"sourceURL",""),v}return m()(C,P),u()(C,[{key:"init",value:function(){}},{key:"setLoadData",value:function(v){this.loadData=v}},{key:"setSourceURL",value:function(v){this.sourceURL=v}},{key:"getLoadData",value:function(){return this.getLoadData}},{key:"getSourceURL",value:function(){return this.getSourceURL}}]),C}(le),ke={LOAD_PLAYLIST:10,get 10(){return"loading playlist"},LOADED_PLAYLIST:11,get 11(){return"playlist is loaded"},IDLE:0,get 0(){return"is free"},LOADING:1,get 1(){return"loading segment"},DONE:2,get 2(){return"segment is loaded"},ERROR:3,get 3(){return"load get error"}},Ae=A.a.get("M3U8Parser.js",{level:2}),de={lineDelimiter:/\r?\n/,extensionHeader:"#EXTM3U",tagPrefix:"#EXT",segmentPrefix:"#EXTINF",segmentParse:/^#EXTINF: *([0-9.]+)(, *(.+?)?)?$/,tagParse:/^#EXT-X-([A-Z-]+)(:(.+))?$/,version:"VERSION",allowCache:"ALLOW-CACHE",combined:"COMBINED",endList:"ENDLIST",targetDuration:"TARGETDURATION",mediaSequence:"MEDIA-SEQUENCE",discontinuity:"DISCONTINUITY",steamInf:"STREAM-INF",isComment:function(P){return P&&P[0]==="#"&&!P.startsWith(de.tagPrefix)},isBlank:function(P){return P===""},canStrip:function(P){return de.isBlank(P)||de.isComment(P)}},Ce=0,ye=1,Ee={file:void 0,name:void 0,start:0,end:0,discontinuity:void 0,duration:void 0},De=function(){function P(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o()(this,P),b()(this,"source",""),b()(this,"segments",[]),b()(this,"_currentSegment",null),b()(this,"discontinuous",null),b()(this,"tags",{VERSION:void 0,TARGETDURATION:void 0}),b()(this,"_state",null),this.source=C,this.options=v,this.parse(this.source)}return u()(P,[{key:"readSegment",value:function(C){var v=de.segmentParse.exec(C);if(v!==null){var x=parseFloat(v[1],10),k=v[3];x%1!=0&&this.tags.VERSION>=3&&Ae.info("readsegment","Version must be 3 or higher to support floating.","duration:",x),x<this.tags.TARGETDURATION&&Ae.info("readsegment","Segment duration must be less than the TARGETDURATION","duration:",x),x*=1e3,this._currentSegment=Object.assign({},Ee,{duration:x,name:k,discontinuity:this.discontinuous});var B=this.segments[this.segments.length-1]||{start:0,end:0};this._currentSegment.start=B.end,this._currentSegment.end=B.end+x,this.discontinuous=!1,this._state=ye}else Ae.warn("readsegment","read segment failed","line:",C)}},{key:"readTag",value:function(C){var v=de.tagParse.exec(C);if(v!==null)return{name:v[1],value:v[3]}}},{key:"readLine",value:function(C){if(C.startsWith(de.segmentPrefix))return this.readSegment(C);var v=this.readTag(C);if(v)switch(v.name){case de.version:this.tags.VERSION=parseFloat(v.value,10);break;case de.mediaSequence:this.tags.MEDIA_SEQUENCE=parseFloat(v.value,10);break;case de.allowCache:this.tags.ALLOW_CACHE=!!/\s*(YES|yes)\s*/.test(v.value);break;case de.discontinuity:this.tags.DISCONTINUITY=!0,this.discontinuous=!0;break;case de.targetDuration:this.tags.TARGETDURATION=parseFloat(v.value,10);break;case de.combined:this.tags.COMBINED=v.value;break;case de.streamInf:this.tags.STREAM_INF=v.value;break;case de.endList:this.tags.ENDLIST="EOF";break;default:Ae.warn("readLine","unknow line","line:",C)}}},{key:"addFile",value:function(C){if(C[0]!=="#"){this._currentSegment.file=C;var v=this.parseSDParam(C);if(v>=0){this._currentSegment.start=v,this._currentSegment.end=v+this._currentSegment.duration;var x=this.segments[this.segments.length-1]||{sd:0,start:0,end:0};x.duration=v-x.start,x.end=v}this._currentSegment.name||(this._currentSegment.name=C.substr(Math.max(0,C.lastIndexOf("/")),C.lastIndexOf("."))),this.segments.push(this._currentSegment),this._state=Ce}else{var k=this.readTag(C);switch(k.name){case"PROGRAM-DATE-TIME":var B=new Date(k.value);this._currentSegment.time=B;break;default:Ae.warn("addFile","Invalid tag.","tag.name:",k.name)}}}},{key:"parseSDParam",value:function(C){var v=-1;try{var x=new URL(C).searchParams.get("sd");x&&(v=parseInt(x,10))}catch{}return v}},{key:"parse",value:function(C){var v=this;if(typeof(C=C||this.source)=="string"){this._state=Ce,this.discontinuous=!1;var x=C.split(de.lineDelimiter);if(x[0]==de.extensionHeader)return x.forEach(function(k){if(!de.canStrip(k))switch(v._state){case Ce:v.readLine(k);break;case ye:v.addFile(k);break;default:Object(Q.a)("parsing m3u8 get an error, it is unknow state.")}}),this;Ae.error("parse","it is not a valid  m3u8 header","header:",x[0])}else Object(Q.a)("m3u8 file is not text.",C)}},{key:"version",get:function(){return this.tags.VERSION}},{key:"duration",get:function(){return this.segments.length?this.segments.reduce(function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=arguments.length>1?arguments[1]:void 0,x=typeof C=="number"?C:C.duration;return x+v.duration}):0}},{key:"targetDuration",get:function(){return this.tags.TARGETDURATION}},{key:"mediaSequence",get:function(){return this.tags.MEDIA_SEQUENCE}},{key:"allowCache",get:function(){return this.tags.ALLOW_CACHE}},{key:"length",get:function(){return this.segments.length}}]),P}(),Me=i(45),Ie=i.n(Me);function Be(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Object";return function(C){var v="[object "+P+"]";return Object.prototype.toString.call(C)==v}}var et=function(){function P(){o()(this,P)}return u()(P,null,[{key:"importScripts",value:function(C,v,x){var k="ready"+Date.now();C instanceof Array?Ie()(C,k):Ie()([C],k),Ie.a.ready(k,{success:v,error:x})}},{key:"blobData",value:function(C){var v=new Blob([C],{type:"application/javascript"});return URL.createObjectURL(v)}},{key:"escapeHTML",value:function(C){if(P.isString(C))return C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"getInnerWidthHeight",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"Fullscreen",value:function(){var C=document.documentElement;C.requestFullscreen?C.requestFullscreen():C.mozRequestFullScreen?C.mozRequestFullScreen():C.webkitRequestFullScreen&&(C.webkitRequestFullScreen(),setTimeout(function(){console.error("fullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))},0))}},{key:"exitFullscreen",value:function(){var C=document;C.exitFullscreen?C.exitFullscreen():C.mozCancelFullScreen?C.mozCancelFullScreen():C.webkitExitFullscreen&&(C.webkitExitFullscreen(),setTimeout(function(){console.error("exitfullscreen success"),document.dispatchEvent(new Event("fullscreenchange"))},0))}},{key:"buildFilePath",value:function(C,v){return C.map(function(x){return v+x})}},{key:"insertSort",value:function(C,v,x){var k,B,q=C.length;if(q!==0)if(x){var ee=x(v);k=ee.key,B=ee.value;for(var ie=0;ie<q;ie++)if(B<C[ie][k]){for(var me=q;me>ie;)C[me]=C[me-1],me--;return void(C[ie]=v)}C.push(v)}else{B=v;for(var Re=0;Re<q;Re++)if(B<C[Re]){for(var Ve=q;Ve>Re;)C[Ve]=C[Ve-1],Ve--;return void(C[Re]=B)}C.push(B)}else C.push(v)}},{key:"isSafari",value:function(){var C=navigator.userAgent;return/Safari/.test(C)&&!/Chrome/.test(C)}},{key:"msec2sec",value:function(C){var v=(C/1e3).toFixed(3);return parseFloat(v,10)}}]),P}();b()(et,"isObject",function(){return Be("Object")}),b()(et,"isString",function(){return Be("String")}),b()(et,"isFunction",function(){return Be("Function")});var xt=i(34),Vt=i.n(xt),Xn=function(P){function C(){return o()(this,C),c()(this,h()(C).call(this))}return m()(C,P),u()(C,[{key:"add",value:function(v){this.push(Object.freeze(v))}},{key:"addAll",value:function(v){var x=this;v.forEach(function(k){x.add(k)})}},{key:"get",value:function(v){return this[v]}},{key:"getLast",value:function(){return this[this.length-1]}},{key:"getBy",value:function(v){var x=this;if(typeof v=="function"){var k=new this.constructor;return this.every(function(B,q){return v.call(x,B,q,x)===!0&&k.add(B),!0}),k}}},{key:"indexOfByTime",value:function(v,x){x||(x=function(ie){return v>=ie.start&&v<ie.end});for(var k=this.length-1,B=0;B<=k;){var q=Math.floor((k+B)/2),ee=this[q];if(x(ee))return q;ee.start>v?k=q-1:B=q+1}return-1}},{key:"getByTime",value:function(v){var x=this.indexOfByTime(v);if(x>=0)return this[x]}},{key:"getByKey",value:function(){for(var v=arguments.length,x=new Array(v),k=0;k<v;k++)x[k]=arguments[k];return Array.isArray(x[0])&&(x=x[0]),this.getBy(function(B){var q=!1;return x.every(function(ee){return!Object.prototype.hasOwnProperty.call(B,ee)||(q=!0,!1)}),q})}},{key:"getByValue",value:function(){for(var v=arguments.length,x=new Array(v),k=0;k<v;k++)x[k]=arguments[k];return Array.isArray(x[0])&&(x=x[0]),this.getBy(function(B){var q=!1;return B.each(function(ee,ie){if(x.includes(ie))return q=!0,!1}),q})}},{key:"getByKeyValue",value:function(v,x){return this.getBy(function(k){return k[v]===x})}},{key:"getValues",value:function(){for(var v=arguments.length,x=new Array(v),k=0;k<v;k++)x[k]=arguments[k];return Array.isArray(x[0])&&(x=x[0]),this.map(function(B){return x.length?B.get(B,x):B.getValues(B)})}},{key:"indexOfBy",value:function(v){var x=0,k=this.length;for(v=v||function(){return!1};x<k;){if(v.call(this,this[x],x,this)===!0)return x;x++}return-1}},{key:"indexOfByKey",value:function(v,x){return this.indexOfBy(function(k){return k[v]===x})}},{key:"indexOfByKeyValue",value:function(v,x){return this.indexOfByKey(v,x)}},{key:"each",value:function(v){if(typeof v=="function")return this.forEach(v),this}},{key:"remove",value:function(v,x){return this.length<=0?this:(v=v<0?0:v,x=x||v+1,this.splice(v,x-v),this)}},{key:"removeItem",value:function(){for(var v=arguments.length,x=new Array(v),k=0;k<v;k++)x[k]=arguments[k];return Array.isArray(x[0])&&(x=x[0]),this.removeBy(function(B){return x.includes(B)})}},{key:"removeBy",value:function(v){for(var x=0,k=this.length;x<k;x++)v.call(this,this[x],x,this)===!0&&(this.splice(x,1),k--,x--);return this}},{key:"removeByKeyValue",value:function(v,x){return this.removeBy(function(k){return k[v]===x})}},{key:"toJSON",value:function(){var v=Array.from(this);return v.forEach(function(x,k){v[k]=x&&typeof x.toJSON=="function"?x.toJSON():x}),v}},{key:"toArray",value:function(){return Array.from(this)}},{key:"size",get:function(){return this.length}}]),C}(Vt()(Array)),ir=function(){function P(){o()(this,P)}return u()(P,[{key:"pair",value:function(){return Object.entries(this)}},{key:"keys",value:function(){return Object.keys(this)}},{key:"set",value:function(C,v){return this[C]=v,this}},{key:"get",value:function(C){return this[C]}},{key:"add",value:function(C,v){return Object.prototype.hasOwnProperty.call(this,C)||this.set(C,v),this}},{key:"addAll",value:function(C){for(var v in C)this.add(v,C[v]);return this}},{key:"toJSON",value:function(){var C={};for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&(C[v]=this[v]);return C}}]),P}(),bi=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"no",0),b()(p()(x),"name",null),b()(p()(x),"duration",0),b()(p()(x),"file",null),b()(p()(x),"start",0),b()(p()(x),"end",0),Object.assign(p()(x),v),x}return m()(C,P),C}(ir),xr=function(P){function C(v){return o()(this,C),c()(this,h()(C).call(this,v))}return m()(C,P),u()(C,[{key:"add",value:function(v){v instanceof bi||(v=new bi(v)),v.no=this.length+1,et.isObject(v)&&this.push(v)}}]),C}(Xn),se={ProcessorResetEnd:"DataProcessorController.processorResetEnd",DataProcessorReady:"DataProcessorController.dataProcessorReady",DecodeStartDecode:"DecodeController.startDecode",DecodeFlush:"DecodeController.flush",DecodeDecoded:"DecodeController.decoded",DecodeApppendEnd:"DecodeController.appendEnd",DecodeFlushEnd:"DecodeController.flushEnd",DecodeReady:"DecodeController.ready",DemuxResetEnd:"DemuxController.resetEnd",DemuxStartDemux:"DemuxController.startDemux",DemuxLast:"DemuxController.last",DemuxVideo:"DemuxController.video",DemuxAAC:"DemuxController.AAC",DemuxReady:"DemuxController.ready",ImagePlayerRenderEnd:"ImagePlayer.renderEnd",ImagePlayerWait:"ImagePlayer.wait",ImagePlayerReady:"ImagePlayer.ready",ImagePlayerEnd:"ImagePlayer.end",ImagePlayerBuffeUpdate:"ImagePlayer.bufferUpdate",ControlBarPlay:"ControlBar.onPlay",ControlBarPause:"ControlBar.onPause",ControlBarPauseLoading:"ControlBar.onPauseLoading",LoadDataReadBufferByNo:"LoadData.readBufferByNo",LoadDataReadBuffer:"LoadData.readBuffer",LoadDataRead:"LoadData.onRead",LoadDataSeek:"LoadData.onSeek",LoadDataFirstLoaded:"LoadData.onFirstLoaded",LoaderPlayListStart:"Loader.playlistStart",LoaderLoading:"Loader.onLoading",LoaderError:"Loader.onError",LoaderLoaded:"Loader.onLoaded",LoaderUpdateSpeed:"Loader.updateSpeed",LoaderLoadFile:"Loader.loadFile",LoaderPlayListLoaded:"Loader.playlistLoaded",AudioPlayerReady:"AudioPlayer.MSEReady",AudioPlayerDataReady:"AudioPlayer.dataReady",AudioPlayerWait:"AudioPlayer.wait",AudioPlayerEnd:"AudioPlayer.end",AudioPlayerPlaySuccess:"AudioPlayer.playSuccess",AudioPlayerPlayFail:"AudioPlayer.playFail",PlayerMaxPTS:"DemuxController.maxpts",PlayerSeekEnd:"Player.seekend",PlayerSpeedTo:"Player.speedTo",PlayerChangeRate:"Player.changeRate",PlayerChangeSrc:"Player.changeSrc",PlayerPlaying:"Player.playing",PlayerTimeUpdate:"Player.timeUpdate",PlayerbufferUpdate:"Player.bufferupdate",PlayerResetReady:"Player.resetReady",PlayerWait:"Player.wait",PlayerLoadNext:"Player.loadNext",PlayerOnPlay:"Player.onPlay",PlayerOnPause:"Player.onPause",PlayerOnSeek:"Player.onSeek",PlayerOnVolume:"Player.onVolume",PlayerReady:"Player.ready",PlayerPlay:"Player.play",PlayerReset:"Player.reset",PlayerLoadedMetaData:"Player.loadedMetaData",PlayerEnd:"Player.end",PlayerPause:"Player.pause",PlayerSeeking:"Player.seeking",PlayerAlert:"Player.alert",PlayerThrowError:"Player.throwError",StreamDataReady:"StreamController.dataReady"};function dt(P,C){var v=Object.keys(P);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(P);C&&(x=x.filter(function(k){return Object.getOwnPropertyDescriptor(P,k).enumerable})),v.push.apply(v,x)}return v}var Dn,Kn,un={HLS:function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this)),b()(p()(x),"state",ke.IDLE),b()(p()(x),"maxBufferDuration",ge.b.maxDuration),b()(p()(x),"maxBufferSize",ge.b.maxSize),b()(p()(x),"baseUrl",""),b()(p()(x),"options",null),b()(p()(x),"httpWorker",null),b()(p()(x),"sourceData",null),b()(p()(x),"segmentPool",[]),b()(p()(x),"currentNo",null),b()(p()(x),"maxRetryCount",ge.b.maxRetryCount),x.options=v,x.loaderController=x.options.loaderController,x.dataController=x.loaderController.dataController,x.httpWorker=v.httpWorker,x.setSegmentPool(new xr),x}return m()(C,P),u()(C,[{key:"loadPlaylist",value:function(v){var x=this;this.httpWorker.postMessage({type:"invoke",fileType:"m3u8",method:"get",name:"playlist",url:this.sourceURL}),this.httpWorker.onmessage=function(k){var B=k.data,q=k.data.data;if(q)B.name=="playlist"&&x.parsePlaylist(q,v);else{var ee="Get the ".concat(B.fileType," file error. URL: ").concat(B.url);x.events.emit(se.PlayerAlert,ee),x.events.emit(se.LoaderError,ee,B);var ie=[x.state,"request playlist error.","data:",B,ee];x.events.emit(se.PlayerThrowError,ie)}}}},{key:"parsePlaylist",value:function(v,x){var k=new De(v);if(k.segments&&k.segments.length)k.segments.forEach(function(q){q.start=et.msec2sec(q.start),q.end=et.msec2sec(q.end),q.duration=et.msec2sec(q.duration)}),this.setSourceData(Object.freeze(k)),this.segmentPool.addAll(k.segments),x.call(this,k);else{this.events.emit(se.LoaderError,k),this.events.emit(se.PlayerAlert,"Parse playlist file error.");var B=[this.state,"Parse playlist error.","data:",k];this.events.emit(se.PlayerThrowError,B)}}},{key:"setSourceData",value:function(v){this.sourceData=v}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setSegmentPool",value:function(v){this.segmentPool=v}},{key:"getSegmentPool",value:function(){return this.segmentPool}},{key:"isNotFree",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return v="["+v+"]loader is not free. please wait.",this.state!==ke.IDLE&&this.state!==ke.DONE&&(this.logger.warn("isNotFree","check status for loader","notice:",v),!0)}},{key:"getBaseUrl",value:function(v){var x=this.options.sourceURL;if(!(v.indexOf("//")>-1)){var k=x.lastIndexOf("/");return x.substr(0,k+1)}return""}},{key:"checkLoadCondition",value:function(v){return!(v.no>this.segmentPool.length)&&(!(this.dataController.getLoadDataBufferPool().bufferDuration>this.maxBufferDuration)||(this.logger.info("checkLoadCondition","stop load next segment.","bufferDuration:",this.dataController.getLoadDataBufferPool().bufferDuration,"maxBufferDuration:",this.maxBufferDuration),!1))}},{key:"loadFile",value:function(v,x,k){var B=this;if(v instanceof bi)if(this.isNotFree()&&x!=="seek"&&x!=="start")this.logger.warn("loadFile","is loading","segment:",v,"type:",x);else{if(!this.checkLoadCondition(v))return this.state=ke.IDLE,void this.logger.warn("loadFile","checkLoadCondition failed","segment:",v,"type:",x);this.currentNo=v.no;var q=this.getBaseUrl(v.file)+v.file,ee=1,ie=function(Re,Ve){return typeof B.options.processURL=="function"?B.options.processURL(Re,Ve):Re},me=function(){B.httpWorker.postMessage({type:"invoke",fileType:"ts",method:"get",name:v.no,url:ie(q,v)})};this.state=ke.LOADING,this.events.emit(se.LoaderLoading,v,x,k),this.httpWorker.onmessage=function(Re){B.state=ke.DONE;var Ve=Re.data;if(B.logger.info("loadfile","httpWorker","onmessage get data"),Ve&&Ve.type!=="error")Ve.type==="notice"?Ve.noticeType==="speed"&&B.events.emit(se.LoaderUpdateSpeed,Ve.data):Ve.fileType==="ts"&&Ve.name===v.no?(B.logger.info("loadFile","read success","data no:",Ve.name),B.state=ke.IDLE,B.events.emit(se.LoaderLoaded,Ve,v,x,k)):B.logger.warn("loadFile","is not ts file or the segment'no is not equal.","fileType:",Ve.fileType,"data:",Ve);else if(B.state=ke.ERROR,ee<=B.maxRetryCount)B.logger.warn("loadFile","retry to load","count:",ee,"segment:",v),me(),ee+=1;else{B.events.emit(se.LoaderError,v,x,k),B.events.emit(se.PlayerAlert,"Load file error, please concat administrator.");var wt=[B.state,"Load File error.","load count:",ee,"segment:",v];B.events.emit(se.PlayerThrowError,wt)}},me()}}},{key:"destroy",value:function(){this.httpWorker&&this.httpWorker.terminate()}}]),C}(be)},xi=function(P){function C(v,x){var k;return o()(this,C),k=c()(this,h()(C).call(this)),b()(p()(k),"state",null),b()(p()(k),"exeLoader",null),b()(p()(k),"loadData",null),b()(p()(k),"type","HLS"),b()(p()(k),"options",null),b()(p()(k),"dataController",null),k.type=v||k.type,k.player=x.player,k.options=x.player.options,k.dataController=k.player.dataController,k.init(k.type,k.options),k}return m()(C,P),u()(C,[{key:"init",value:function(v,x){this.bindEvent(),this.setExeLoader(new un[v](function(k){for(var B=1;B<arguments.length;B++){var q=arguments[B]!=null?arguments[B]:{};B%2?dt(Object(q),!0).forEach(function(ee){b()(k,ee,q[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(q)):dt(Object(q)).forEach(function(ee){Object.defineProperty(k,ee,Object.getOwnPropertyDescriptor(q,ee))})}return k}({},x,{player:this.player,loaderController:this}))),this.setSourceURL(x.sourceURL),this.player.loadData?this.setLoadData(this.player.loadData):this.setLoadData(this.dataController.getDataInstance("load",x)),this.exeLoader.setLoadData(this.loadData)}},{key:"run",value:function(){this.state=ke.LOAD_PLAYLIST,this.events.emit(se.LoaderPlayListStart,this),this.logger.info("run",ke[this.state],"url:",this.options.sourceURL),this.loadPlaylist()}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.LoaderLoadFile,function(x,k,B){v.exeLoader.loadFile(x,k,B)})}},{key:"loadPlaylist",value:function(v){var x=this;this.exeLoader.loadPlaylist(function(k){k?(x.dataController.setLoadDataSourceData(x.exeLoader.getSourceData()),x.dataController.setLoadDataSegmentPool(x.exeLoader.getSegmentPool()),x.state=ke.LOADED_PLAYLIST,x.events.emit(se.LoaderPlayListLoaded,x),typeof v=="function"&&v.call(x,k)):x.logger.error("run","start load m3u8","data:",k)})}},{key:"switchPlaylist",value:function(v,x){this.setSourceURL(v),this.dataController.clearLoadData(),this.state=ke.LOAD_PLAYLIST,this.events.emit(se.LoaderPlayListStart,this),this.logger.info("switchPlaylist",ke[this.state],"url:",v),this.loadPlaylist(x)}},{key:"setExeLoader",value:function(v){this.exeLoader=v}},{key:"getExeLoader",value:function(){return this.exeLoader}},{key:"setSourceURL",value:function(v){this.exeLoader.setSourceURL(v)}},{key:"getSourceURL",value:function(){return this.exeLoader.getSourceURL()}},{key:"setLoadData",value:function(v){this.loadData=v}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getSourceData",value:function(){return this.exeLoader.getSourceData()}},{key:"destroy",value:function(){this.exeLoader.destroy()}}]),C}(X),Wi=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"no",0),b()(p()(x),"start",0),b()(p()(x),"end",0),b()(p()(x),"blob",null),b()(p()(x),"arrayBuffer",null),b()(p()(x),"duration",0),Object.assign(p()(x),v),x}return m()(C,P),u()(C,[{key:"size",get:function(){return this.blob.size}}]),C}(ir),To=function(P){function C(v){return o()(this,C),c()(this,h()(C).call(this,v))}return m()(C,P),u()(C,[{key:"add",value:function(v){v instanceof Wi||(v=new Wi(v));var x=this.length;if(x!==0){for(;x--;)if(v.no<=this[x].no)return void this.splice(x,1,v);return this.push(v),this}this.push(v)}},{key:"getBufferSize",value:function(){return this.length<=0?0:this.reduce(function(v,x){return isNaN(v)&&(v=v.blob.size),v+x.blob.size})}},{key:"getBufferDuration",value:function(){return this.length<=0?0:this.reduce(function(v,x){return isNaN(v)&&(v=v.end-v.start),v+(x.end-x.start)})}},{key:"bufferSize",get:function(){return this.getBufferSize()}},{key:"bufferDuration",get:function(){return this.getBufferDuration()}}]),C}(Xn),Eo=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this)),b()(p()(v),"bufferPool",[]),b()(p()(v),"sourceData",{}),b()(p()(v),"options",{}),b()(p()(v),"segmentPool",[]),b()(p()(v),"readBufferNo",null),b()(p()(v),"startLoadTime",null),b()(p()(v),"currentSeekTime",null),v.options=x,v.init(),v}return m()(C,P),u()(C,[{key:"init",value:function(){var v=this;this.setBufferPool(new To),this.events.on(se.LoadDataReadBufferByNo,function(x,k){v.readBufferByNo(x,k)}),this.events.on(se.LoadDataReadBuffer,function(x,k){v.readBuffer(x,k)}),this.events.on(se.LoaderLoaded,function(x,k,B,q){var ee=v.createBuffer({arrayBuffer:x.arrayBuffer},k);if(v.segmentLoaded(k,ee),B==="seek"&&q===v.currentSeekTime)return v.events.emit(se.LoadDataSeek,ee,q),void v.removeBufferByNo(ee.no);q===v.startLoadTime&&v.events.emit(se.LoadDataFirstLoaded,ee,q)})}},{key:"setOptions",value:function(v){Object.assign(this.options,v)}},{key:"startLoad",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.logger.info("startLoad","begin to load ts data","time:",v),isNaN(v)?this.logger.error("seekTime","seek","time:",v):(this.startLoadTime=v,this.loadSegmentByTime(v,"start"))}},{key:"readBuffer",value:function(v,x){var k=this.getSegmentByTime(v);k&&this.readBufferByNo(k.no,x)}},{key:"segmentLoaded",value:function(v,x){x&&this.addBufferPool(x),v.no===this.options.player.currentIndex&&this.readBufferByNo(v.no),v.no<this.segmentPool.getLast().no&&this.loadSegmentByNo(v.no+1)}},{key:"seekTime",value:function(v){if(isNaN(v))this.logger.error("seekTime","seek","time:",v);else{var x;this.currentSeekTime=v;var k=this.bufferPool.indexOfByTime(v);k>-1?(x=this.bufferPool[k],this.events.emit(se.LoadDataSeek,x,v)):(this.removeBufferPool(this.bufferPool.length),this.loadSegmentByTime(v,"seek"))}}},{key:"loadSegmentByTime",value:function(v,x){if(!isNaN(v)){var k=this.segmentPool.indexOfByTime(v);if(k>=0){var B=this.segmentPool[k];this.events.emit(se.LoaderLoadFile,B,x,v)}else this.logger.error("loadSegmentByTime","time over","time:",v,"type:",x)}}},{key:"createBuffer",value:function(v,x){if(v){var k={start:x.start,end:x.end,no:x.no,duration:x.end-x.start,arrayBuffer:v.arrayBuffer};return new Wi(k)}}},{key:"isValidSegmentNo",value:function(v){return!isNaN(v)&&v>0&&v<=this.segmentPool.length}},{key:"loadSegmentByNo",value:function(v){var x=v-1,k=this.segmentPool.get(x);k&&this.events.emit(se.LoaderLoadFile,k,"play")}},{key:"readBufferByNo",value:function(v,x){this.isValidSegmentNo(v)?(this.readBufferNo=v,x=x||function(k){this.events.emit(se.LoadDataRead,k)},this.getBlobByNo(v,x)):this.logger.error("readBufferByNo","check buffer no","is not valid no",v)}},{key:"getSegmentByTime",value:function(v){var x=this.segmentPool.indexOfByTime(v);return this.segmentPool[x]}},{key:"getBlobByNo",value:function(v,x){if(isNaN(v))this.logger.error("getBlobByNo","isNaN","no:",v);else{var k;if(!this.isBufferReading)return this.isBufferReading=!0,k=this.bufferPool.getByKeyValue("no",v)[0],typeof x=="function"&&(x.call(this,k),k&&this.removeBufferByNo(k.no)),this.isBufferReading=!1,k;this.logger.warn("getBlobByNo","isBufferReading","no:",v)}}},{key:"addBufferPool",value:function(v){if(this.bufferPool.length){if(this.bufferPool[0].no===v.no+1)return this.bufferPool.unshift(v),!0;var x=this.bufferPool.getLast();if(v.no-x.no==1)return this.bufferPool.push(v),!0;if(this.bufferPool.indexOfByKey("no",v.no))return!0;this.bufferPool.splice(0,this.bufferPool.length)}this.bufferPool.push(v)}},{key:"removeBufferPool",value:function(v){this.bufferPool.splice(0,v+1)}},{key:"removeBufferByNo",value:function(v){var x=this.bufferPool.indexOfByKey("no",v);if(!(x<=-1))return this.removeBufferPool(x),this.bufferPool.length?this.bufferPool.getLast().no<this.segmentPool.getLast().no&&this.loadSegmentByNo(this.bufferPool.getLast().no+1):v<this.segmentPool.getLast().no&&this.loadSegmentByNo(v+1),!0}},{key:"clear",value:function(){this.sourceData={},this.readBufferNo=null,this.currentSeekTime=null,this.bufferPool.length=0,this.segmentPool.length=0}},{key:"getSegmentByNo",value:function(v){return this.segmentPool.get(v-1)}},{key:"getSegment",value:function(v){return this.segmentPool.getByTime(v)}},{key:"setSourceData",value:function(v){this.sourceData=v}},{key:"getSourceData",value:function(){return this.sourceData}},{key:"setBufferPool",value:function(v){this.bufferPool=v}},{key:"getBufferPool",value:function(){return this.bufferPool}},{key:"setSegmentPool",value:function(v){this.segmentPool=v}},{key:"getSegmentPool",value:function(){return this.segmentPool}}]),C}(le),Ga=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this)),b()(p()(x),"loadData",null),x.options=v,x}return m()(C,P),u()(C,[{key:"setLoadData",value:function(){for(var v=arguments.length,x=new Array(v),k=0;k<v;k++)x[k]=arguments[k];this.loadData=H()(Eo,x)}},{key:"getLoadData",value:function(){return this.loadData}},{key:"getLoadDataBufferPool",value:function(){return this.loadData.bufferPool}},{key:"setLoadDataSourceData",value:function(v){this.loadData.setSourceData(v)}},{key:"setLoadDataSegmentPool",value:function(v){this.loadData.setSegmentPool(v)}},{key:"startLoad",value:function(v){v=Math.max(v,0),this.startLoadData(v)}},{key:"startLoadData",value:function(v){this.loadData.startLoad(v)}},{key:"clearLoadData",value:function(){this.loadData.clear()}},{key:"getDataInstance",value:function(v){if(v)switch(v){case"load":if(!this.loadData){for(var x=arguments.length,k=new Array(x>1?x-1:0),B=1;B<x;B++)k[B-1]=arguments[B];this.setLoadData.apply(this,k)}return this.loadData;default:return null}}}]),C}(X),Wd=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"checkHanlder",null),b()(p()(x),"resetStatus",{processor:!1,audioPlayer:!1}),x.player=v.player,x.player?(x.audioPlayer=v.audioPlayer,x.imagePlayer=v.imagePlayer,x.loadData=v.loadData,x.bindEvent(),x):c()(x)}return m()(C,P),u()(C,[{key:"bindEvent",value:function(){var v=this;this.events.on(se.ProcessorResetEnd,function(){v.checkResetReady("processor")}),this.events.on(se.AudioPlayerReady,function(){v.checkResetReady("audioPlayer")}),this.events.on(se.PlayerResetReady,function(){v.onResetReady()}),this.events.on(se.LoadDataSeek,function(x,k){v.onSeek(x,k)}),this.events.on(se.ImagePlayerRenderEnd,function(x){v.onRenderEnd(x)}),this.events.on(se.ImagePlayerWait,function(){v.audioPlayer.pause()})}},{key:"play",value:function(v){this.logger.warn("play","play start"),this.sync(v)}},{key:"sync",value:function(v){var x=this.player,k=this.audioPlayer,B=this.imagePlayer,q=k.offset,ee=B.offset,ie=Math.min(q,ee),me=Math.max(q,ee),Re=x.playbackRate;if(x.seeking&&(x.seeking=!1),!x.reseting&&x.status!=="pause"&&k.status!=="waiting"&&B.status!=="wait")if(x.status!=="end"){if(this.setCurrentTime(v),!(v<ie))return v>=q&&v<=ee?(this.events.once(se.AudioPlayerPlaySuccess,function(){B.render(ee)}),k.playbackRate=Re,void k.play()):void(v>=ee&&v<=q?B.render(v):v>me&&(this.audioPlayer.playbackRate=Re,this.audioPlayer.play(),B.render(v)));this.sync(ie)}else k.paused||k.pause()}},{key:"setCurrentTime",value:function(v){this.player.currentTime=v,this.events.emit(se.PlayerTimeUpdate,v)}},{key:"pause",value:function(){this.audioPlayer.pause(),this.clearDrawHanlder()}},{key:"seek",value:function(v){var x=this,k=this.imagePlayer.isBuffered(v),B=this.audioPlayer.isBuffered(v);this.player.pause(),k&&B?(this.logger.warn("seek","seek in buffer, time: ".concat(v,", buffer: ").concat(this.player.buffer()[0],", ").concat(this.player.buffer()[1])),this.audioPlayer.onSeekedHandler=function(){x.player.play()},this.audioPlayer.currentTime=v):this.reset()}},{key:"reset",value:function(v){this.logger.info("reset","reset start"),this.player.reseting=!0,this.events.emit(se.PlayerReset,v),this.resetStatus={processor:!1,audioPlayer:!1},this.player.processController.reset(),this.player.streamController.reset(),this.player.audioPlayer.reset(v),this.player.imagePlayer.reset(),this.player.currentIndex=null}},{key:"checkResetReady",value:function(v){var x=this.resetStatus;if(v&&typeof v=="string"){x[v]=!0;for(var k=Object.keys(x),B=0;B<k.length;B++)if(!x[k[B]])return!1;this.logger.warn("checkResetReady","reset ready"),this.events.emit(se.PlayerResetReady)}}},{key:"onResetReady",value:function(){this.player.reseting=!1,this.logger.info("onResetReady","reset Ready"),this.player.changing&&this.events.emit(se.DataProcessorReady),this.player.seeking&&this.player.loadData.seekTime(this.player.currentTime/1e3)}},{key:"onSeek",value:function(v,x){var k=this.player.currentTime;this.logger.info("onseek",k,v,v.no,x),v&&v.no&&Math.abs(k-Math.floor(1e3*x))<2?(this.player.currentIndex=v.no,this.logger.info("seektime:",v.no,x,this.player.currentTime),this.player.seekSegmentNo=v.no,this.player.streamController.startLoad(v.no)):this.logger.warn("seek failue, not found data",k,v,x)}},{key:"clearDrawHanlder",value:function(){clearTimeout(this.drawFrameHanlder),this.drawFrameHanlder=null}},{key:"onRenderEnd",value:function(){this.player.seekTime&&(this.logger.info("onRenderEnd","seektoRenderTime:",Date.now()-this.player.seekTime),this.player.seekTime=null);var v=this.imagePlayer,x=this.audioPlayer,k=this.player.playbackRate,B=x.currentTime,q=v.currentTime,ee=x.offset,ie=v.fragDuration,me=B-q,Re=0;q<ee?this.drawNext(q+ie*k,ie):(me>0&&me>ie?ie=(Re=q+Math.ceil(me/ie+k)*ie)-B:(Re=q+ie*k,ie-=me),this.drawNext(Re,ie))}},{key:"drawNext",value:function(v,x){var k=this;this.drawFrameHanlder&&this.clearDrawHanlder(),this.drawFrameHanlder=setTimeout(function(){k.sync(v)},x)}}]),C}(le);function Hi(P){if(Dn){for(var C=arguments.length,v=new Array(C>1?C-1:0),x=1;x<C;x++)v[x-1]=arguments[x];Dn.apply(void 0,[P].concat(v))}}function ua(P){if(Kn){for(var C=arguments.length,v=new Array(C>1?C-1:0),x=1;x<C;x++)v[x-1]=arguments[x];Kn.apply(void 0,[P].concat(v))}}var fr=function(){function P(C){o()(this,P),this.payload=C,this.nri=(96&this.payload[0])>>5,this.ntype=31&this.payload[0]}return u()(P,null,[{key:"type",value:function(C){return C.ntype in P.TYPES?P.TYPES[C.ntype]:"UNKNOWN"}},{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var C;return C={},b()(C,P.IDR,"IDR"),b()(C,P.SEI,"SEI"),b()(C,P.SPS,"SPS"),b()(C,P.PPS,"PPS"),b()(C,P.NDR,"NDR"),b()(C,P.AUD,"AUD"),C}}]),u()(P,[{key:"toString",value:function(){return"".concat(P.type(this),": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri>>6}},{key:"type",value:function(){return this.ntype}},{key:"isKeyframe",value:function(){return this.ntype==P.IDR}},{key:"getSize",value:function(){return 4+this.payload.byteLength}},{key:"getData",value:function(){var C=new Uint8Array(this.getSize());return new DataView(C.buffer).setUint32(0,this.getSize()-4),C.set(this.payload,4),C}}]),P}(),Il=function(){function P(C){o()(this,P),this.data=C,this.index=0,this.bitLength=8*C.byteLength}return u()(P,[{key:"skipBits",value:function(C){if(this.bitsAvailable<C)return!1;this.index+=C}},{key:"readBits",value:function(C){var v=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],x=this.getBits(C,this.index,v);return x}},{key:"getBits",value:function(C,v){var x=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(this.bitsAvailable<C)return 0;var k=v%8,B=this.data[v/8|0]&255>>>k,q=8-k;if(q>=C)return x&&(this.index+=C),B>>q-C;x&&(this.index+=q);var ee=C-q;return B<<ee|this.getBits(ee,v+q,x)}},{key:"skipLZ",value:function(){var C;for(C=0;C<this.bitLength-this.index;++C)if(this.getBits(1,this.index+C,!1)!==0)return this.index+=C,C;return C}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var C=this.skipLZ();return this.readBits(C+1)-1}},{key:"readEG",value:function(){var C=this.readUEG();return 1&C?1+C>>>1:-1*(C>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(8*C)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}}]),P}(),Pl=function(){function P(C){o()(this,P),this.remuxer=C,this.track=C.mp4track}return u()(P,null,[{key:"extractNALu",value:function(C){for(var v,x,k=0,B=C.byteLength,q=0,ee=[];k<B;)switch(v=C[k++],q){case 0:v===0&&(q=1);break;case 1:q=v===0?2:0;break;case 2:case 3:v===0?q=3:(v===1&&k<B&&(x&&ee.push(C.subarray(x,k-q-1)),x=k),q=0)}return x&&ee.push(C.subarray(x,B)),ee}},{key:"skipScalingList",value:function(C,v){for(var x=8,k=8,B=0;B<v;B++)k!==0&&(k=(x+C.readEG()+256)%256),x=k===0?x:k}},{key:"readSPS",value:function(C){var v,x,k,B,q,ee,ie=new Il(C),me=0,Re=0,Ve=0,wt=0,$t=1;if(ie.readUByte(),v=ie.readUByte(),ie.readBits(5),ie.skipBits(3),ie.readUByte(),ie.skipUEG(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){var Sn=ie.readUEG();if(Sn===3&&ie.skipBits(1),ie.skipUEG(),ie.skipUEG(),ie.skipBits(1),ie.readBoolean()){ee=Sn!==3?8:12;for(var Cn=0;Cn<ee;++Cn)ie.readBoolean()&&(Cn<6?P.skipScalingList(ie,16):P.skipScalingList(ie,64))}}ie.skipUEG();var Hn=ie.readUEG();if(Hn===0)ie.readUEG();else if(Hn===1){ie.skipBits(1),ie.skipEG(),ie.skipEG(),x=ie.readUEG();for(var Dr=0;Dr<x;++Dr)ie.skipEG()}if(ie.skipUEG(),ie.skipBits(1),k=ie.readUEG(),B=ie.readUEG(),(q=ie.readBits(1))===0&&ie.skipBits(1),ie.skipBits(1),ie.readBoolean()&&(me=ie.readUEG(),Re=ie.readUEG(),Ve=ie.readUEG(),wt=ie.readUEG()),ie.readBoolean()){if(ie.readBoolean()){var Ut;switch(ie.readUByte()){case 1:Ut=[1,1];break;case 2:Ut=[12,11];break;case 3:Ut=[10,11];break;case 4:Ut=[16,11];break;case 5:Ut=[40,33];break;case 6:Ut=[24,11];break;case 7:Ut=[20,11];break;case 8:Ut=[32,11];break;case 9:Ut=[80,33];break;case 10:Ut=[18,11];break;case 11:Ut=[15,11];break;case 12:Ut=[64,33];break;case 13:Ut=[160,99];break;case 14:Ut=[4,3];break;case 15:Ut=[3,2];break;case 16:Ut=[2,1];break;case 255:Ut=[ie.readUByte()<<8|ie.readUByte(),ie.readUByte()<<8|ie.readUByte()]}Ut&&($t=Ut[0]/Ut[1])}ie.readBoolean()&&ie.skipBits(1),ie.readBoolean()&&(ie.skipBits(4),ie.readBoolean()&&ie.skipBits(24)),ie.readBoolean()&&(ie.skipUEG(),ie.skipUEG()),ie.readBoolean()&&(ie.readUInt(),ie.readUInt(),ie.readBoolean())}return{width:Math.ceil((16*(k+1)-2*me-2*Re)*$t),height:(2-q)*(B+1)*16-(q?2:4)*(Ve+wt)}}}]),u()(P,[{key:"parseSPS",value:function(C){var v=P.readSPS(new Uint8Array(C));this.track.width=v.width,this.track.height=v.height,this.track.sps=[new Uint8Array(C)],this.track.codec="avc1.";for(var x=new DataView(C.buffer,C.byteOffset+1,4),k=0;k<3;++k){var B=x.getUint8(k).toString(16);B.length<2&&(B="0"+B),this.track.codec+=B}}},{key:"parsePPS",value:function(C){this.track.pps=[new Uint8Array(C)]}},{key:"parseNAL",value:function(C){if(!C)return!1;var v=!1;switch(C.type()){case fr.NDR:case fr.IDR:v=!0;break;case fr.PPS:this.track.pps||(this.parsePPS(C.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),v=!0;break;case fr.SPS:this.track.sps||(this.parseSPS(C.getData().subarray(4)),!this.remuxer.readyToDecode&&this.track.pps&&this.track.sps&&(this.remuxer.readyToDecode=!0)),v=!0;break;case fr.AUD:Hi("AUD - ignoing and disable HD mode for live channel"),this.remuxer.isHDAvail&&(this.remuxer.isHDAvail=!1);break;case fr.SEI:Hi("SEI - ignoing")}return v}}]),P}(),ko=function(){function P(C){o()(this,P),this.listener={},this.type=""|C}return u()(P,[{key:"on",value:function(C,v){return this.listener[C]||(this.listener[C]=[]),this.listener[C].push(v),!0}},{key:"off",value:function(C,v){if(this.listener[C]){var x=this.listener[C].indexOf(v);return x>-1&&this.listener[C].splice(x,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(C,v){return!!this.listener[C]&&(this.listener[C].map(function(x){x.apply(null,[v])}),!0)}}]),P}(),Yn=Math.pow(2,32)-1,Bt=function(){function P(){o()(this,P)}return u()(P,null,[{key:"init",value:function(){var C;for(C in P.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},P.types)P.types.hasOwnProperty(C)&&(P.types[C]=[C.charCodeAt(0),C.charCodeAt(1),C.charCodeAt(2),C.charCodeAt(3)]);var v=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);P.HDLR_TYPES={video:v,audio:x};var k=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),B=new Uint8Array([0,0,0,0,0,0,0,0]);P.STTS=P.STSC=P.STCO=B,P.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),P.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),P.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),P.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var q=new Uint8Array([105,115,111,109]),ee=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]);P.FTYP=P.box(P.types.ftyp,q,ie,q,ee),P.DINF=P.box(P.types.dinf,P.box(P.types.dref,k))}},{key:"box",value:function(C){for(var v=arguments.length,x=new Array(v>1?v-1:0),k=1;k<v;k++)x[k-1]=arguments[k];for(var B,q=8,ee=x.length,ie=ee;ee--;)q+=x[ee].byteLength;for((B=new Uint8Array(q))[0]=q>>24&255,B[1]=q>>16&255,B[2]=q>>8&255,B[3]=255&q,B.set(C,4),ee=0,q=8;ee<ie;++ee)B.set(x[ee],q),q+=x[ee].byteLength;return B}},{key:"hdlr",value:function(C){return P.box(P.types.hdlr,P.HDLR_TYPES[C])}},{key:"mdat",value:function(C){return P.box(P.types.mdat,C)}},{key:"mdhd",value:function(C,v){v*=C;var x=Math.floor(v/(Yn+1)),k=Math.floor(v%(Yn+1));return P.box(P.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,C>>24&255,C>>16&255,C>>8&255,255&C,x>>24,x>>16&255,x>>8&255,255&x,k>>24,k>>16&255,k>>8&255,255&k,85,196,0,0]))}},{key:"mdia",value:function(C){return P.box(P.types.mdia,P.mdhd(C.timescale,C.duration),P.hdlr(C.type),P.minf(C))}},{key:"mfhd",value:function(C){return P.box(P.types.mfhd,new Uint8Array([0,0,0,0,C>>24,C>>16&255,C>>8&255,255&C]))}},{key:"minf",value:function(C){return C.type==="audio"?P.box(P.types.minf,P.box(P.types.smhd,P.SMHD),P.DINF,P.stbl(C)):P.box(P.types.minf,P.box(P.types.vmhd,P.VMHD),P.DINF,P.stbl(C))}},{key:"moof",value:function(C,v,x){return P.box(P.types.moof,P.mfhd(C),P.traf(x,v))}},{key:"moov",value:function(C,v,x){for(var k=C.length,B=[];k--;)B[k]=P.trak(C[k]);return P.box.apply(null,[P.types.moov,P.mvhd(x,v)].concat(B).concat(P.mvex(C)))}},{key:"mvex",value:function(C){for(var v=C.length,x=[];v--;)x[v]=P.trex(C[v]);return P.box.apply(null,[P.types.mvex].concat(x))}},{key:"mvhd",value:function(C,v){v*=C;var x=Math.floor(v/(Yn+1)),k=Math.floor(v%(Yn+1)),B=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,C>>24&255,C>>16&255,C>>8&255,255&C,x>>24,x>>16&255,x>>8&255,255&x,k>>24,k>>16&255,k>>8&255,255&k,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return P.box(P.types.mvhd,B)}},{key:"sdtp",value:function(C){var v,x,k=C.samples||[],B=new Uint8Array(4+k.length);for(x=0;x<k.length;x++)v=k[x].flags,B[x+4]=v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy;return P.box(P.types.sdtp,B)}},{key:"stbl",value:function(C){return P.box(P.types.stbl,P.stsd(C),P.box(P.types.stts,P.STTS),P.box(P.types.stsc,P.STSC),P.box(P.types.stsz,P.STSZ),P.box(P.types.stco,P.STCO))}},{key:"avc1",value:function(C){var v,x,k,B=[],q=[];for(v=0;v<C.sps.length;v++)k=(x=C.sps[v]).byteLength,B.push(k>>>8&255),B.push(255&k),B=B.concat(Array.prototype.slice.call(x));for(v=0;v<C.pps.length;v++)k=(x=C.pps[v]).byteLength,q.push(k>>>8&255),q.push(255&k),q=q.concat(Array.prototype.slice.call(x));var ee=P.box(P.types.avcC,new Uint8Array([1,B[3],B[4],B[5],255,224|C.sps.length].concat(B).concat([C.pps.length]).concat(q))),ie=C.width,me=C.height;return P.box(P.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ie>>8&255,255&ie,me>>8&255,255&me,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),ee,P.box(P.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(C){var v=C.config.byteLength,x=new Uint8Array(26+v+3);return x.set([0,0,0,0,3,23+v,0,1,0,4,15+v,64,21,0,0,0,0,0,0,0,0,0,0,0,5,v]),x.set(C.config,26),x.set([6,1,2],26+v),x}},{key:"mp4a",value:function(C){var v=C.audiosamplerate;return P.box(P.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,C.channelCount,0,16,0,0,0,0,v>>8&255,255&v,0,0]),P.box(P.types.esds,P.esds(C)))}},{key:"stsd",value:function(C){return C.type==="audio"?P.box(P.types.stsd,P.STSD,P.mp4a(C)):P.box(P.types.stsd,P.STSD,P.avc1(C))}},{key:"tkhd",value:function(C){var v=C.id,x=C.duration*C.timescale,k=C.width,B=C.height,q=Math.floor(x/(Yn+1)),ee=Math.floor(x%(Yn+1));return P.box(P.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,v>>24&255,v>>16&255,v>>8&255,255&v,0,0,0,0,q>>24,q>>16&255,q>>8&255,255&q,ee>>24,ee>>16&255,ee>>8&255,255&ee,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,k>>8&255,255&k,0,0,B>>8&255,255&B,0,0]))}},{key:"traf",value:function(C,v){var x=P.sdtp(C),k=C.id,B=Math.floor(v/(Yn+1)),q=Math.floor(v%(Yn+1));return P.box(P.types.traf,P.box(P.types.tfhd,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,255&k])),P.box(P.types.tfdt,new Uint8Array([1,0,0,0,B>>24,B>>16&255,B>>8&255,255&B,q>>24,q>>16&255,q>>8&255,255&q])),P.trun(C,x.length+16+20+8+16+8+8),x)}},{key:"trak",value:function(C){return C.duration=C.duration||4294967295,P.box(P.types.trak,P.tkhd(C),P.mdia(C))}},{key:"trex",value:function(C){var v=C.id;return P.box(P.types.trex,new Uint8Array([0,0,0,0,v>>24,v>>16&255,v>>8&255,255&v,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(C,v){var x,k,B,q,ee,ie,me=C.samples||[],Re=me.length,Ve=12+16*Re,wt=new Uint8Array(Ve);for(v+=8+Ve,wt.set([0,0,15,1,Re>>>24&255,Re>>>16&255,Re>>>8&255,255&Re,v>>>24&255,v>>>16&255,v>>>8&255,255&v],0),x=0;x<Re;x++)B=(k=me[x]).duration,q=k.size,ee=k.flags,ie=k.cts,wt.set([B>>>24&255,B>>>16&255,B>>>8&255,255&B,q>>>24&255,q>>>16&255,q>>>8&255,255&q,ee.isLeading<<2|ee.dependsOn,ee.isDependedOn<<6|ee.hasRedundancy<<4|ee.paddingValue<<1|ee.isNonSync,61440&ee.degradPrio,15&ee.degradPrio,ie>>>24&255,ie>>>16&255,ie>>>8&255,255&ie],12+16*x);return P.box(P.types.trun,wt)}},{key:"initSegment",value:function(C,v,x){P.types||P.init();var k,B=P.moov(C,v,x);return(k=new Uint8Array(P.FTYP.byteLength+B.byteLength)).set(P.FTYP),k.set(B,P.FTYP.byteLength),k}}]),P}(),Pr=function(){function P(C){o()(this,P),this.remuxer=C,this.track=C.mp4track,this.aacHeader=null}return u()(P,[{key:"getHeaderLength",value:function(C){return 1&C[1]?7:9}},{key:"getFrameLength",value:function(C){return(3&C[3])<<11|C[4]<<3|(224&C[5])>>>5}},{key:"isAACPattern",value:function(C){return C[0]===255&&(240&C[1])==240&&(6&C[1])==0}},{key:"extractAAC",value:function(C){var v,x,k=0,B=C.byteLength,q=[];if(!this.isAACPattern(C))return ua("Invalid ADTS audio format"),q;for(v=this.getHeaderLength(C),this.aacHeader||(this.aacHeader=C.subarray(0,v));k<B;)x=this.getFrameLength(C),q.push(C.subarray(v,x)),C=C.slice(x),k+=x;return q}},{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getAACHeaderData",get:function(){return this.aacHeader}},{key:"setAACHeaderData",set:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.aacHeader=C}}]),u()(P,[{key:"setAACConfig",value:function(){var C,v,x,k=new Uint8Array(2),B=this.getAACHeaderData;B&&(C=1+((192&B[2])>>>6),v=(60&B[2])>>>2,x=(1&B[2])<<2,x|=(192&B[3])>>>6,k[0]=C<<3,k[0]|=(14&v)>>1,k[1]|=(1&v)<<7,k[1]|=x<<3,this.track.codec="mp4a.40."+C,this.track.channelCount=x,this.track.config=k,this.remuxer.readyToDecode=!0)}}]),P}(),_s=1,_r=function(){function P(){o()(this,P),this.seq=1}return u()(P,null,[{key:"getTrackID",value:function(){return _s++}}]),u()(P,[{key:"flush",value:function(){this.seq++,this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!(!this.readyToDecode||!this.samples.length)||null}}]),P}(),Gi=function(P){function C(){var v;return o()(this,C),(v=c()(this,h()(C).call(this))).readyToDecode=!1,v.nextDts=0,v.dts=0,v.timescale=1e3,v.mp4track={id:_r.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:v.timescale,duration:v.timescale,samples:[],config:"",codec:""},v.samples=[],v.aac=new Pr(p()(v)),v}return m()(C,P),u()(C,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale}},{key:"remux",value:function(v){var x,k,B=!0,q=!1,ee=void 0;try{for(var ie,me=v[Symbol.iterator]();!(B=(ie=me.next()).done);B=!0){var Re=ie.value;x=(k=Re.units).byteLength,this.samples.push({units:k,size:x,duration:Re.duration}),this.mp4track.len+=x,this.readyToDecode||this.aac.setAACConfig()}}catch(Ve){q=!0,ee=Ve}finally{try{B||me.return==null||me.return()}finally{if(q)throw ee}}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var v,x,k=new Uint8Array(this.mp4track.len),B=0,q=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var ee=this.samples.shift();(x=ee.duration)<=0?(Hi("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(x)),this.mp4track.len-=ee.size):(this.nextDts+=x,v={size:ee.size,duration:x,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.set(ee.units,B),B+=ee.size,q.push(v))}return q.length?new Uint8Array(k.buffer,0,this.mp4track.len):null}}]),C}(_r),Ao=function(P){function C(){var v;return o()(this,C),(v=c()(this,h()(C).call(this))).readyToDecode=!1,v.nextDts=0,v.dts=0,v.timescale=1e3,v.mp4track={id:_r.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",width:0,height:0,timescale:v.timescale,duration:v.timescale,samples:[]},v.samples=[],v.h264=new Pl(p()(v)),v}return m()(C,P),u()(C,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps=""}},{key:"remux",value:function(v){var x,k,B,q,ee,ie=!0,me=!1,Re=void 0;try{for(var Ve,wt=v[Symbol.iterator]();!(ie=(Ve=wt.next()).done);ie=!0){x=Ve.value,k=[],q=0,ee=!1;var $t=!0,Sn=!1,Cn=void 0;try{for(var Hn,Dr=x.units[Symbol.iterator]();!($t=(Hn=Dr.next()).done);$t=!0)B=Hn.value,this.h264.parseNAL(B)&&(k.push(B),q+=B.getSize(),ee||(ee=B.isKeyframe()))}catch(Ut){Sn=!0,Cn=Ut}finally{try{$t||Dr.return==null||Dr.return()}finally{if(Sn)throw Cn}}k.length>0&&this.readyToDecode&&(this.mp4track.len+=q,this.samples.push({units:k,size:q,keyFrame:ee,duration:x.duration}))}}catch(Ut){me=!0,Re=Ut}finally{try{ie||wt.return==null||wt.return()}finally{if(me)throw Re}}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var v,x,k=new Uint8Array(this.mp4track.len),B=0,q=this.mp4track.samples;for(this.dts=this.nextDts;this.samples.length;){var ee=this.samples.shift(),ie=ee.units;if((x=ee.duration)<=0)Hi("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(x)),this.mp4track.len-=ee.size;else{this.nextDts+=x,v={size:ee.size,duration:x,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:ee.keyFrame?0:1,dependsOn:ee.keyFrame?2:1}};var me=!0,Re=!1,Ve=void 0;try{for(var wt,$t=ie[Symbol.iterator]();!(me=(wt=$t.next()).done);me=!0){var Sn=wt.value;k.set(Sn.getData(),B),B+=Sn.getSize()}}catch(Cn){Re=!0,Ve=Cn}finally{try{me||$t.return==null||$t.return()}finally{if(Re)throw Ve}}q.push(v)}}return q.length?new Uint8Array(k.buffer,0,this.mp4track.len):null}}]),C}(_r);function Dl(P,C){var v=new Uint8Array((0|P.byteLength)+(0|C.byteLength));return v.set(P,0),v.set(C,0|P.byteLength),v}var ja=function(P){function C(v){var x;return o()(this,C),(x=c()(this,h()(C).call(this,"remuxer"))).initialized=!1,x.trackTypes=[],x.tracks={},x.mediaDuration=v?1/0:1e3,x}return m()(C,P),u()(C,[{key:"addTrack",value:function(v){v!=="video"&&v!=="both"||(this.tracks.video=new Ao,this.trackTypes.push("video")),v!=="audio"&&v!=="both"||(this.tracks.audio=new Gi,this.trackTypes.push("audio"))}},{key:"reset",value:function(){var v=!0,x=!1,k=void 0;try{for(var B,q=this.trackTypes[Symbol.iterator]();!(v=(B=q.next()).done);v=!0){var ee=B.value;this.tracks[ee].resetTrack()}}catch(ie){x=!0,k=ie}finally{try{v||q.return==null||q.return()}finally{if(x)throw k}}this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(this.initialized){var v=!0,x=!1,k=void 0;try{for(var B,q=this.trackTypes[Symbol.iterator]();!(v=(B=q.next()).done);v=!0){var ee=B.value,ie=this.tracks[ee],me=ie.getPayload();if(me&&me.byteLength){var Re={type:ee,payload:Dl(Bt.moof(ie.seq,ie.dts,ie.mp4track),Bt.mdat(me)),dts:ie.dts};this.dispatch("buffer",Re);var Ve=(ku=ie.dts/1e3,Xi=void 0,rp=void 0,lm=void 0,cm=void 0,cm="",Xi=Math.floor(ku),(rp=parseInt(Xi/3600,10)%24)>0&&(cm+=(rp<10?"0"+rp:rp)+":"),cm+=((lm=parseInt(Xi/60,10)%60)<10?"0"+lm:lm)+":"+((Xi=Xi<0?0:Xi%60)<10?"0"+Xi:Xi));Hi("put segment (".concat(ee,"): ").concat(ie.seq," dts: ").concat(ie.dts," samples: ").concat(ie.mp4track.samples.length," second: ").concat(Ve)),ie.flush()}}}catch(ax){x=!0,k=ax}finally{try{v||q.return==null||q.return()}finally{if(x)throw k}}}else if(this.isReady()){this.dispatch("ready");var wt=!0,$t=!1,Sn=void 0;try{for(var Cn,Hn=this.trackTypes[Symbol.iterator]();!(wt=(Cn=Hn.next()).done);wt=!0){var Dr=Cn.value,Ut=this.tracks[Dr],Wl={type:Dr,payload:Bt.initSegment([Ut.mp4track],this.mediaDuration,Ut.mp4track.timescale)};this.dispatch("buffer",Wl)}}catch(ax){$t=!0,Sn=ax}finally{try{wt||Hn.return==null||Hn.return()}finally{if($t)throw Sn}}Hi("Initial segment generated."),this.initialized=!0}var ku,Xi,rp,lm,cm}},{key:"isReady",value:function(){var v=!0,x=!1,k=void 0;try{for(var B,q=this.trackTypes[Symbol.iterator]();!(v=(B=q.next()).done);v=!0){var ee=B.value;if(!this.tracks[ee].readyToDecode||!this.tracks[ee].samples.length)return!1}}catch(ie){x=!0,k=ie}finally{try{v||q.return==null||q.return()}finally{if(x)throw k}}return!0}},{key:"remux",value:function(v){var x=!0,k=!1,B=void 0;try{for(var q,ee=this.trackTypes[Symbol.iterator]();!(x=(q=ee.next()).done);x=!0){var ie=q.value,me=v[ie];ie==="audio"&&this.tracks.video&&!this.tracks.video.readyToDecode||me.length>0&&this.tracks[ie].remux(me)}}catch(Re){k=!0,B=Re}finally{try{x||ee.return==null||ee.return()}finally{if(k)throw B}}this.flush()}}]),C}(ko),mu=function(P){function C(v,x){var k;return o()(this,C),(k=c()(this,h()(C).call(this,"buffer"))).type=x,k.queue=new Uint8Array,k.cleaning=!1,k.pendingCleaning=0,k.cleanOffset=30,k.cleanRanges=[],k.sourceBuffer=v,k.sourceBuffer.addEventListener("updateend",function(){k.dispatch("updateend",Date.now()),k.pendingCleaning>0&&(k.initCleanup(k.pendingCleaning),k.pendingCleaning=0),k.cleaning=!1,k.cleanRanges.length&&k.doCleanup()}),k.sourceBuffer.addEventListener("error",function(B){k.dispatch("error",{type:k.type,name:"buffer",error:B})}),k}return m()(C,P),u()(C,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(this.cleanRanges.length){var v=this.cleanRanges.shift();Hi("".concat(this.type," remove range [").concat(v[0]," - ").concat(v[1],")")),this.cleaning=!0,this.sourceBuffer.remove(v[0],v[1]),this.dispatch("clearBuffer")}else this.cleaning=!1}},{key:"initCleanup",value:function(v){if(this.sourceBuffer.updating)this.pendingCleaning=v;else if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var x=0;x<this.sourceBuffer.buffered.length;++x){var k=this.sourceBuffer.buffered.start(x),B=this.sourceBuffer.buffered.end(x);v-k>this.cleanOffset&&k<(B=v-this.cleanOffset)&&this.cleanRanges.push([k,B])}this.doCleanup()}}},{key:"doAppend",value:function(){if(this.queue.length&&!this.sourceBuffer.updating)try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(v){if(v.name==="QuotaExceededError")return Hi("".concat(this.type," buffer quota full")),void this.dispatch("error",{type:this.type,name:"QuotaExceeded",error:"buffer error"});ua("Error occured while appending ".concat(this.type," buffer -  ").concat(v.name,": ").concat(v.message)),this.dispatch("error",{type:this.type,name:"unexpectedError",error:"buffer error"})}}},{key:"feed",value:function(v){this.queue=Dl(this.queue,v)}}]),C}(ko);window.MediaSource=window.MediaSource||window.WebKitMediaSource;var $l=function(P){function C(v){var x;if(o()(this,C),x=c()(this,h()(C).call(this,"jmuxer")),window.MediaSource=window.MediaSource||window.WebKitMediaSource,x.options=Object.assign({},{node:"",mode:"both",flushingTime:1500,clearBuffer:!0,onReady:null,fps:30,debug:!1,onClearBuffer:null},v),x.options.debug&&(Dn=console.log,Kn=console.error),typeof x.options.node=="string"&&x.options.node==""&&ua("no video element were found to render, provide a valid video element"),x.options.fps||(x.options.fps=30),x.frameDuration=1e3/x.options.fps|0,x.node=typeof x.options.node=="string"?document.getElementById(x.options.node):x.options.node,x.sourceBuffers={},x.isMSESupported=!!window.MediaSource,!x.isMSESupported)throw"Oops! Browser does not support media source extension.";return x.setupMSE(),x.remuxController=new ja(x.options.clearBuffer),x.remuxController.addTrack(x.options.mode),x.options.mode==="audio"&&(x.aacParser=x.remuxController.tracks.audio.aac),x.mseReady=!1,x.lastCleaningTime=Date.now(),x.keyframeCache=[],x.frameCounter=0,x.remuxController.on("buffer",x.onBuffer.bind(p()(x))),x.remuxController.on("ready",x.createBuffer.bind(p()(x))),x.startInterval(),x}return m()(C,P),u()(C,null,[{key:"isSupported",value:function(v){return window.MediaSource&&window.MediaSource.isTypeSupported(v)}}]),u()(C,[{key:"setupMSE",value:function(){this.mediaSource=new MediaSource,this.node.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"feed",value:function(v){var x,k,B,q=!1,ee={video:[],audio:[]};v&&this.remuxController&&(B=v.duration?parseInt(v.duration):0,v.video&&(x=Pl.extractNALu(v.video)).length>0&&(ee.video=this.getVideoFrames(x,B),q=!0),v.audio&&(k=this.aacParser.extractAAC(v.audio)).length>0&&(ee.audio=this.getAudioFrames(k,B),q=!0),q?this.remuxController.remux(ee):ua("Input object must have video and/or audio property. Make sure it is not empty and valid typed array"))}},{key:"getVideoFrames",value:function(v,x){var k,B,q,ee=[],ie=[],me=0,Re=[],Ve=!0,wt=!1,$t=void 0;try{for(var Sn,Cn=v[Symbol.iterator]();!(Ve=(Sn=Cn.next()).done);Ve=!0)k=Sn.value,B=new fr(k),ee.push(B),B.type()!==fr.IDR&&B.type()!==fr.NDR||(ie.push({units:ee}),ee=[],this.options.clearBuffer&&(B.type()===fr.IDR&&Re.push(this.frameCounter),this.frameCounter++))}catch(Hn){wt=!0,$t=Hn}finally{try{Ve||Cn.return==null||Cn.return()}finally{if(wt)throw $t}}return x?(q=x/ie.length|0,me=x-q*ie.length):q=this.frameDuration,ie.map(function(Hn){Hn.duration=me>0?q+1:q,me!==0&&me--}),this.options.clearBuffer&&(Re=Re.map(function(Hn){return Hn*q/1e3}),this.keyframeCache=this.keyframeCache.concat(Re)),ie}},{key:"getAudioFrames",value:function(v,x){var k,B,q=[],ee=0,ie=!0,me=!1,Re=void 0;try{for(var Ve,wt=v[Symbol.iterator]();!(ie=(Ve=wt.next()).done);ie=!0)k=Ve.value,q.push({units:k})}catch($t){me=!0,Re=$t}finally{try{ie||wt.return==null||wt.return()}finally{if(me)throw Re}}return x?(B=x/q.length|0,ee=x-B*q.length):B=this.frameDuration,q.map(function($t){$t.duration=ee>0?B+1:B,ee!==0&&ee--}),q}},{key:"destroy",value:function(){if(this.aacParser=null,this.stopInterval(),this.mediaSource){try{this.bufferControllers&&(this.mediaSource.endOfStream(),this.removeSourceBuffer())}catch(x){ua("mediasource is not available to end ".concat(x.message))}this.mediaSource=null}if(this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var v in this.bufferControllers)this.bufferControllers[v].destroy();this.bufferControllers=null}this.node=!1,this.mseReady=!1,this.videoStarted=!1}},{key:"createBuffer",value:function(){if(this.mseReady&&this.remuxController&&this.remuxController.isReady()&&!this.bufferControllers)for(var v in this.bufferControllers={},this.remuxController.tracks){var x=this.remuxController.tracks[v];if(!C.isSupported("".concat(v,'/mp4; codecs="').concat(x.mp4track.codec,'"')))return ua("Browser does not support codec"),!1;var k=this.mediaSource.addSourceBuffer("".concat(v,'/mp4; codecs="').concat(x.mp4track.codec,'"'));this.bufferControllers[v]=new mu(k,v),this.sourceBuffers[v]=k,this.bufferControllers[v].on("error",this.onBufferError.bind(this)),this.bufferControllers[v].on("clearBuffer",this.onClearBuffer.bind(this)),this.bufferControllers[v].on("updateend",this.onUpdateEnd.bind(this))}}},{key:"onUpdateEnd",value:function(v){typeof this.options.onUpdateEnd=="function"&&this.options.onUpdateEnd(v)}},{key:"startInterval",value:function(){var v=this;this.interval=setInterval(function(){v.bufferControllers&&(v.releaseBuffer(),v.clearBuffer())},this.options.flushingTime)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"releaseBuffer",value:function(){for(var v in this.bufferControllers)this.bufferControllers[v].doAppend()}},{key:"getSafeBufferClearLimit",value:function(v){for(var x,k=this.options.mode==="audio"&&v||0,B=0;B<this.keyframeCache.length&&!(this.keyframeCache[B]>=v);B++)x=this.keyframeCache[B];return x&&(this.keyframeCache=this.keyframeCache.filter(function(q){return q<x&&(k=q),q>=x})),k}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var v in this.bufferControllers){var x=this.getSafeBufferClearLimit(this.node.currentTime);this.bufferControllers[v].initCleanup(x)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(v){this.bufferControllers&&this.bufferControllers[v.type]&&this.bufferControllers[v.type].feed(v.payload)}},{key:"onClearBuffer",value:function(){typeof this.options.onClearBuffer=="function"&&this.options.onClearBuffer()}},{key:"removeSourceBuffer",value:function(){if(this.mediaSource){var v=this.sourceBuffers;for(var x in v)this.mediaSource.removeSourceBuffer(v[x])}}},{key:"onMSEOpen",value:function(){this.mseReady=!0,this.createBuffer(),typeof this.options.onReady=="function"&&(this.options.onReady(),this.options.onReady=null)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(v){if(v.name!="QuotaExceeded"){if(this.mediaSource.sourceBuffers.length>0&&this.sourceBuffers[v.type]&&this.mediaSource.removeSourceBuffer(this.sourceBuffers[v.type]),this.mediaSource.sourceBuffers.length==0)try{this.mediaSource.endOfStream()}catch{ua("mediasource is not available to end")}}else this.bufferControllers[v.type].initCleanup(this.node.currentTime)}}]),C}(ko),yu=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"source",[]),b()(p()(x),"onPlay",void 0),x.source=v.source,x.onPlay=v.onPlay,x.init(),x}return m()(C,P),u()(C,[{key:"init",value:function(){}},{key:"extract",value:function(v,x){for(var k=this.provide(x),B=0;B<k.size;B++)v[2*B]=k.left[B],v[2*B+1]=k.right[B];return k.size}},{key:"provide",value:function(v){for(var x=v,k=new Float32Array(x),B=new Float32Array(x),q=0,ee=0,ie=0;this.source.length>0;){var me=this.source.shift(),Re=me.loadedPosition||0;ee=me.startTime+me.duration*Re/me.length;var Ve=Math.min(me.length-Re,x-q),wt=me.getChannelData(0),$t=me.numberOfChannels>1?me.getChannelData(1):me.getChannelData(0);if(k.set(wt.slice(Re,Re+Ve),q),B.set($t.slice(Re,Re+Ve),q),ie+=Ve,q+=Ve,(Re+=Ve)<me.length){me.loadedPosition=Re,this.source.unshift(me);break}}return this.onPlay&&this.onPlay(ee),{left:k,right:B,size:ie}}}]),C}(le);function Vr(P,C){if(!(P instanceof C))throw new TypeError("Cannot call a class as a function")}function Nl(P,C){for(var v=0;v<C.length;v++){var x=C[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(P,x.key,x)}}function hr(P,C,v){return C&&Nl(P.prototype,C),v&&Nl(P,v),P}function st(P,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(C&&C.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),C&&la(P,C)}function $e(P){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(P)}function la(P,C){return(la=Object.setPrototypeOf||function(v,x){return v.__proto__=x,v})(P,C)}function ws(P,C){return!C||z()(C)!=="object"&&typeof C!="function"?function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(P):C}function _n(P,C,v){return(_n=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(x,k,B){var q=function(ie,me){for(;!Object.prototype.hasOwnProperty.call(ie,me)&&(ie=$e(ie))!==null;);return ie}(x,k);if(q){var ee=Object.getOwnPropertyDescriptor(q,k);return ee.get?ee.get.call(B):ee.value}})(P,C,v||P)}var ar=function(){function P(){Vr(this,P),this._vector=new Float32Array,this._position=0,this._frameCount=0}return hr(P,[{key:"clear",value:function(){this.receive(this._frameCount),this.rewind()}},{key:"put",value:function(C){this._frameCount+=C}},{key:"putSamples",value:function(C,v){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,k=2*(v=v||0);x>=0||(x=(C.length-k)/2);var B=2*x;this.ensureCapacity(x+this._frameCount);var q=this.endIndex;this.vector.set(C.subarray(k,k+B),q),this._frameCount+=x}},{key:"putBuffer",value:function(C,v){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;v=v||0,x>=0||(x=C.frameCount-v),this.putSamples(C.vector,C.position+v,x)}},{key:"receive",value:function(C){C>=0&&!(C>this._frameCount)||(C=this.frameCount),this._frameCount-=C,this._position+=C}},{key:"receiveSamples",value:function(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=2*v,k=this.startIndex;C.set(this._vector.subarray(k,k+x)),this.receive(v)}},{key:"extract",value:function(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,k=this.startIndex+2*v,B=2*x;C.set(this._vector.subarray(k,k+B))}},{key:"ensureCapacity",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=parseInt(2*C);if(this._vector.length<v){var x=new Float32Array(v);x.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=x,this._position=0}else this.rewind()}},{key:"ensureAdditionalCapacity",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.ensureCapacity(this._frameCount+C)}},{key:"rewind",value:function(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},{key:"vector",get:function(){return this._vector}},{key:"position",get:function(){return this._position}},{key:"startIndex",get:function(){return 2*this._position}},{key:"frameCount",get:function(){return this._frameCount}},{key:"endIndex",get:function(){return 2*(this._position+this._frameCount)}}]),P}(),Ss=function(){function P(C){Vr(this,P),C?(this._inputBuffer=new ar,this._outputBuffer=new ar):this._inputBuffer=this._outputBuffer=null}return hr(P,[{key:"clear",value:function(){this._inputBuffer.clear(),this._outputBuffer.clear()}},{key:"inputBuffer",get:function(){return this._inputBuffer},set:function(C){this._inputBuffer=C}},{key:"outputBuffer",get:function(){return this._outputBuffer},set:function(C){this._outputBuffer=C}}]),P}(),Hd=function(P){function C(v){var x;return Vr(this,C),(x=ws(this,$e(C).call(this,v))).reset(),x._rate=1,x}return st(C,P),hr(C,[{key:"reset",value:function(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0}},{key:"clone",value:function(){var v=new C;return v.rate=this._rate,v}},{key:"process",value:function(){var v=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(v/this._rate+1);var x=this.transpose(v);this._inputBuffer.receive(),this._outputBuffer.put(x)}},{key:"transpose",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(v===0)return 0;for(var x=this._inputBuffer.vector,k=this._inputBuffer.startIndex,B=this._outputBuffer.vector,q=this._outputBuffer.endIndex,ee=0,ie=0;this.slopeCount<1;)B[q+2*ie]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*x[k],B[q+2*ie+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*x[k+1],ie+=1,this.slopeCount+=this._rate;if(this.slopeCount-=1,v!==1)e:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,(ee+=1)>=v-1)break e;var me=k+2*ee;B[q+2*ie]=(1-this.slopeCount)*x[me]+this.slopeCount*x[me+2],B[q+2*ie+1]=(1-this.slopeCount)*x[me+1]+this.slopeCount*x[me+3],ie+=1,this.slopeCount+=this._rate}return this.prevSampleL=x[k+2*v-2],this.prevSampleR=x[k+2*v-1],ie}},{key:"rate",set:function(v){this._rate=v}}]),C}(Ss),bu=function(){function P(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1024;Vr(this,P),this._pipe=C,this.inputSize=v}return hr(P,[{key:"fillInputBuffer",value:function(){throw new Error("fillInputBuffer() not overridden")}},{key:"fillOutputBuffer",value:function(){for(var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=this.inputSize;this.outputBuffer.frameCount<C;){var x=v-this.inputBuffer.frameCount;if(this.fillInputBuffer(x),this.inputBuffer.frameCount<v)break;this._pipe.process()}}},{key:"clear",value:function(){this._pipe.clear()}},{key:"pipe",get:function(){return this._pipe}},{key:"inputBuffer",get:function(){return this._pipe.inputBuffer}},{key:"outputBuffer",get:function(){return this._pipe.outputBuffer}}]),P}(),Cs=function(){},Ts=function(P){function C(v,x){var k,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1024,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cs;return Vr(this,C),(k=ws(this,$e(C).call(this,x,B))).callback=q,k.sourceSound=v,k.historyBufferSize=22050,k._sourcePosition=0,k.outputBufferPosition=0,k._position=0,k}return st(C,P),hr(C,[{key:"onEnd",value:function(){this.callback()}},{key:"fillInputBuffer",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=new Float32Array(2*v),k=this.sourceSound.extract(x,v,this._sourcePosition);this._sourcePosition+=k,this.inputBuffer.putSamples(x,0,k)}},{key:"extract",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.fillOutputBuffer(this.outputBufferPosition+x);var k=Math.min(x,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(v,this.outputBufferPosition,k);var B=this.outputBufferPosition+k;return this.outputBufferPosition=Math.min(this.historyBufferSize,B),this.outputBuffer.receive(Math.max(B-this.historyBufferSize,0)),this._position+=k,k}},{key:"handleSampleData",value:function(v){this.extract(v.data,4096)}},{key:"clear",value:function(){_n($e(C.prototype),"clear",this).call(this),this.outputBufferPosition=0}},{key:"position",get:function(){return this._position},set:function(v){if(v>this._position)throw new RangeError("New position may not be greater than current position");var x=this.outputBufferPosition-(this._position-v);if(x<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=x,this._position=v}},{key:"sourcePosition",get:function(){return this._sourcePosition},set:function(v){this.clear(),this._sourcePosition=v}}]),C}(bu),Ro=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],Pf=function(P){function C(v){var x;return Vr(this,C),(x=ws(this,$e(C).call(this,v)))._quickSeek=!0,x.midBufferDirty=!1,x.midBuffer=null,x.overlapLength=0,x.autoSeqSetting=!0,x.autoSeekSetting=!0,x._tempo=1,x.setParameters(44100,0,0,8),x}return st(C,P),hr(C,[{key:"clear",value:function(){_n($e(C.prototype),"clear",this).call(this),this.clearMidBuffer()}},{key:"clearMidBuffer",value:function(){this.midBufferDirty&&(this.midBufferDirty=!1,this.midBuffer=null)}},{key:"setParameters",value:function(v,x,k,B){v>0&&(this.sampleRate=v),B>0&&(this.overlapMs=B),x>0?(this.sequenceMs=x,this.autoSeqSetting=!1):this.autoSeqSetting=!0,k>0?(this.seekWindowMs=k,this.autoSeekSetting=!1):this.autoSeekSetting=!0,this.calculateSequenceParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo}},{key:"calculateOverlapLength",value:function(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;v=(v=this.sampleRate*x/1e3)<16?16:v,v-=v%8,this.overlapLength=v,this.refMidBuffer=new Float32Array(2*this.overlapLength),this.midBuffer=new Float32Array(2*this.overlapLength)}},{key:"checkLimits",value:function(v,x,k){return v<x?x:v>k?k:v}},{key:"calculateSequenceParameters",value:function(){var v,x;this.autoSeqSetting&&(v=150+-50*this._tempo,v=this.checkLimits(v,50,125),this.sequenceMs=Math.floor(v+.5)),this.autoSeekSetting&&(x=25- -10/1.5*.5+-10/1.5*this._tempo,x=this.checkLimits(x,15,25),this.seekWindowMs=Math.floor(x+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)}},{key:"clone",value:function(){var v=new C;return v.tempo=this._tempo,v.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),v}},{key:"seekBestOverlapPosition",value:function(){return this._quickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()}},{key:"seekBestOverlapPositionStereo",value:function(){var v,x,k,B=0;for(this.preCalculateCorrelationReferenceStereo(),v=0,x=Number.MIN_VALUE;B<this.seekLength;B+=1)(k=this.calculateCrossCorrelationStereo(2*B,this.refMidBuffer))>x&&(x=k,v=B);return v}},{key:"seekBestOverlapPositionStereoQuick",value:function(){var v,x,k,B,q,ee=0;for(this.preCalculateCorrelationReferenceStereo(),x=Number.MIN_VALUE,v=0,B=0,q=0;ee<4;ee+=1){for(var ie=0;Ro[ee][ie]&&!((q=B+Ro[ee][ie])>=this.seekLength);)(k=this.calculateCrossCorrelationStereo(2*q,this.refMidBuffer))>x&&(x=k,v=q),ie+=1;B=v}return v}},{key:"preCalculateCorrelationReferenceStereo",value:function(){for(var v,x,k=0;k<this.overlapLength;k+=1)x=k*(this.overlapLength-k),v=2*k,this.refMidBuffer[v]=this.midBuffer[v]*x,this.refMidBuffer[v+1]=this.midBuffer[v+1]*x}},{key:"calculateCrossCorrelationStereo",value:function(v,x){var k=this._inputBuffer.vector;v+=this._inputBuffer.startIndex;for(var B,q=0,ee=2,ie=2*this.overlapLength;ee<ie;ee+=2)q+=k[B=ee+v]*x[ee]+k[B+1]*x[ee+1];return q}},{key:"overlap",value:function(v){this.overlapStereo(2*v)}},{key:"overlapStereo",value:function(v){var x=this._inputBuffer.vector;v+=this._inputBuffer.startIndex;for(var k,B,q,ee,ie,me=this._outputBuffer.vector,Re=this._outputBuffer.endIndex,Ve=0,wt=1/this.overlapLength;Ve<this.overlapLength;Ve+=1)B=(this.overlapLength-Ve)*wt,q=Ve*wt,ee=(k=2*Ve)+v,me[(ie=k+Re)+0]=x[ee+0]*q+this.midBuffer[k+0]*B,me[ie+1]=x[ee+1]*q+this.midBuffer[k+1]*B}},{key:"process",value:function(){var v,x,k;if(this.midBuffer===null){if(this._inputBuffer.frameCount<this.overlapLength)return;this.midBuffer=new Float32Array(2*this.overlapLength),this._inputBuffer.receiveSamples(this.midBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){v=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(v)),this._outputBuffer.put(this.overlapLength),(x=this.seekWindowLength-2*this.overlapLength)>0&&this._outputBuffer.putBuffer(this._inputBuffer,v+this.overlapLength,x);var B=this._inputBuffer.startIndex+2*(v+this.seekWindowLength-this.overlapLength);this.midBuffer.set(this._inputBuffer.vector.subarray(B,B+2*this.overlapLength)),this.skipFract+=this.nominalSkip,k=Math.floor(this.skipFract),this.skipFract-=k,this._inputBuffer.receive(k)}}},{key:"tempo",set:function(v){var x;this._tempo=v,this.calculateSequenceParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,x=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(x+this.overlapLength,this.seekWindowLength)+this.seekLength},get:function(){return this._tempo}},{key:"inputChunkSize",get:function(){return this.sampleReq}},{key:"outputChunkSize",get:function(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)}},{key:"quickSeek",set:function(v){this._quickSeek=v}}]),C}(Ss),Es=function(P,C){return(P>C?P-C:C-P)>1e-10},ks=function(){function P(){Vr(this,P),this.transposer=new Hd(!1),this.stretch=new Pf(!1),this._inputBuffer=new ar,this._intermediateBuffer=new ar,this._outputBuffer=new ar,this._rate=0,this._tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this.calculateEffectiveRateAndTempo()}return hr(P,[{key:"clear",value:function(){this.transposer.clear(),this.stretch.clear()}},{key:"clone",value:function(){var C=new P;return C.rate=this.rate,C.tempo=this.tempo,C}},{key:"calculateEffectiveRateAndTempo",value:function(){var C=this._tempo,v=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,Es(this._tempo,C)&&(this.stretch.tempo=this._tempo),Es(this._rate,v)&&(this.transposer.rate=this._rate),this._rate>1?this._outputBuffer!=this.transposer.outputBuffer&&(this.stretch.inputBuffer=this._inputBuffer,this.stretch.outputBuffer=this._intermediateBuffer,this.transposer.inputBuffer=this._intermediateBuffer,this.transposer.outputBuffer=this._outputBuffer):this._outputBuffer!=this.stretch.outputBuffer&&(this.transposer.inputBuffer=this._inputBuffer,this.transposer.outputBuffer=this._intermediateBuffer,this.stretch.inputBuffer=this._intermediateBuffer,this.stretch.outputBuffer=this._outputBuffer)}},{key:"process",value:function(){this._rate>1?(this.stretch.process(),this.transposer.process()):(this.transposer.process(),this.stretch.process())}},{key:"rate",get:function(){return this._rate},set:function(C){this.virtualRate=C,this.calculateEffectiveRateAndTempo()}},{key:"rateChange",set:function(C){this._rate=1+.01*C}},{key:"tempo",get:function(){return this._tempo},set:function(C){this.virtualTempo=C,this.calculateEffectiveRateAndTempo()}},{key:"tempoChange",set:function(C){this.tempo=1+.01*C}},{key:"pitch",set:function(C){this.virtualPitch=C,this.calculateEffectiveRateAndTempo()}},{key:"pitchOctaves",set:function(C){this.pitch=Math.exp(.69314718056*C),this.calculateEffectiveRateAndTempo()}},{key:"pitchSemitones",set:function(C){this.pitchOctaves=C/12}},{key:"inputBuffer",get:function(){return this._inputBuffer}},{key:"outputBuffer",get:function(){return this._outputBuffer}}]),P}(),Ol=function(){function P(C){Vr(this,P),this.buffer=C,this._position=0}return hr(P,[{key:"extract",value:function(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;this.position=x;for(var k=this.buffer.getChannelData(0),B=this.dualChannel?this.buffer.getChannelData(1):this.buffer.getChannelData(0),q=0;q<v;q++)C[2*q]=k[q+x],C[2*q+1]=B[q+x];return Math.min(v,k.length-x)}},{key:"dualChannel",get:function(){return this.buffer.numberOfChannels>1}},{key:"position",get:function(){return this._position},set:function(C){this._position=C}}]),P}(),zr=function(P,C){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cs,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:4096,k=P.createScriptProcessor(x,2,2),B=new Float32Array(2*x);return k.onaudioprocess=function(q){var ee=q.outputBuffer.getChannelData(0),ie=q.outputBuffer.getChannelData(1),me=C.extract(B,x);v(C.sourcePosition),me===0&&C.onEnd();for(var Re=0;Re<me;Re++)ee[Re]=B[2*Re],ie[Re]=B[2*Re+1]},k},oi=function(P){var C,v,x,k=Math.floor(P/60),B=P-60*k;return"".concat(k,":").concat((C=parseInt(B),x=x||"0",(C+="").length>=(v=2)?C:new Array(v-C.length+1).join(x)+C))},Io=function(P){var C=this.timePlayed,v=this.sampleRate;if(this.sourcePosition=P,this.timePlayed=P/v,C!==this.timePlayed){var x=new CustomEvent("play",{detail:{timePlayed:this.timePlayed,formattedTimePlayed:this.formattedTimePlayed,percentagePlayed:this.percentagePlayed}});this._node.dispatchEvent(x)}},Ll=(function(){function P(C,v,x){var k=this,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Cs;Vr(this,P),this._soundtouch=new ks;var q=new Ol(v);this.timePlayed=0,this.sourcePosition=0,this._filter=new Ts(q,this._soundtouch,B),this._node=zr(C,this._filter,function(ee){return Io.call(k,ee)}),this.tempo=1,this.rate=1,this.duration=v.duration,this.sampleRate=C.sampleRate,this.listeners=[]}hr(P,[{key:"connect",value:function(C){this._node.connect(C)}},{key:"disconnect",value:function(){this._node.disconnect()}},{key:"on",value:function(C,v){this.listeners.push({name:C,cb:v}),this._node.addEventListener(C,function(x){return v(x.detail)})}},{key:"off",value:function(){var C=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,x=this.listeners;v&&(x=x.filter(function(k){return k.name===v})),x.forEach(function(k){C._node.removeEventListener(k.name,function(B){return k.cb(B.detail)})})}},{key:"formattedDuration",get:function(){return oi(this.duration)}},{key:"formattedTimePlayed",get:function(){return oi(this.timePlayed)}},{key:"percentagePlayed",get:function(){return 100*this._filter.sourcePosition/(this.duration*this.sampleRate)},set:function(C){this._filter.sourcePosition=parseInt(C*this.duration*this.sampleRate)}},{key:"node",get:function(){return this._node}},{key:"pitch",set:function(C){this._soundtouch.pitch=C}},{key:"pitchSemitones",set:function(C){this._soundtouch.pitchSemitones=C}},{key:"rate",set:function(C){this._soundtouch.rate=C}},{key:"tempo",set:function(C){this._soundtouch.tempo=C}}])}(),function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"soundTouch",void 0),b()(p()(x),"filter",void 0),x.init(v.source),x}return m()(C,P),u()(C,[{key:"init",value:function(v){this.soundTouch=new ks,this.soundTouch.tempo=1,this.soundTouch.rate=1,this.filter=new Ts(v,this.soundTouch,2048)}},{key:"provide",value:function(v){for(var x=new Float32Array(2*v),k=this.filter.extract(x,v),B=new Float32Array(k),q=new Float32Array(k),ee=0;ee<k;ee++)B[ee]=x[2*ee],q[ee]=x[2*ee+1];return{size:k,left:B,right:q}}},{key:"rate",set:function(v){this.soundTouch.tempo=v}}]),C}(le)),ae=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"currentRate",1),b()(p()(x),"source",[]),b()(p()(x),"commonProcessor",void 0),b()(p()(x),"rateProcessor",void 0),b()(p()(x),"audioTime",0),x.source=v.source,x.init(),x}return m()(C,P),u()(C,[{key:"init",value:function(){var v=this;this.commonProcessor=new yu({source:this.source,onPlay:function(x){v.audioTime=x}}),this.rateProcessor=new Ll({source:this.commonProcessor})}},{key:"provide",value:function(v){var x=(this.currentRate===1?this.commonProcessor:this.rateProcessor).provide(v);return x.audioTime=this.audioTime,x}},{key:"rate",set:function(v){this.currentRate=v,this.rateProcessor.rate=v}}]),C}(le),W="canplaythrough",M="seeked",V="waiting",te=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"audioContext",null),b()(p()(x),"scriptNode",null),b()(p()(x),"gainNode",null),b()(p()(x),"delay",0),b()(p()(x),"audioBuffer",new ArrayBuffer(0)),b()(p()(x),"decodedBuffer",[]),b()(p()(x),"isFirstPlay",!0),b()(p()(x),"defaultVolume",1),b()(p()(x),"currentRate",1),b()(p()(x),"eventListeners",{}),b()(p()(x),"canPlay",!1),b()(p()(x),"interval",void 0),b()(p()(x),"seekTimeDelta",0),b()(p()(x),"audioTime",0),b()(p()(x),"audioProvider",void 0),b()(p()(x),"isWaiting",!1),v=Object.assign({},v),x.flushTime=v.flushTime||1e3,x.onReady=v.onReady,x.init(),x}return m()(C,P),u()(C,[{key:"init",value:function(){this.audioProvider=new ae({source:this.decodedBuffer}),typeof this.onReady=="function"&&setTimeout(this.onReady,0)}},{key:"feed",value:function(v){var x=v.audio;this.audioBuffer=this.appendByteArray(this.audioBuffer,x),this.canPlay||(this.canPlay=!0,this.triggerEvent(W))}},{key:"appendByteArray",value:function(v,x){var k=new Uint8Array((0|v.byteLength)+(0|x.byteLength));return k.set(new Uint8Array(v),0),k.set(new Uint8Array(x),0|v.byteLength),k.buffer}},{key:"decodeAudioData",value:function(v){var x=this;this.audioBuffer&&this.audioBuffer.byteLength>0&&(this.audioContext.decodeAudioData(this.audioBuffer,function(k){k.startTime=x.delay,x.delay+=k.duration,x.decodedBuffer.push(k),v&&v.call()},function(k){x.logger.error("decodeAudioData",k)}),this.audioBuffer=new ArrayBuffer(0))}},{key:"play",value:function(){var v=this;return new Promise(function(x,k){v.isFirstPlay?(v.isFirstPlay=!1,v.logger.info("startPlay"),v.audioContext=new(window.AudioContext||window.webkitAudioContext),v.gainNode=v.audioContext.createGain(),v.gainNode.gain.value=v.defaultVolume,v.scriptNode=v.audioContext.createScriptProcessor(2048,2,2),v.scriptNode.onaudioprocess=function(B){var q=B.outputBuffer,ee=q.length,ie=v.audioProvider.provide(ee);if(ie.size!==0){v.isWaiting&&(v.isWaiting=!1,v.triggerEvent(W));var me=q.getChannelData(0),Re=q.getChannelData(1);if(ie.audioTime!=0&&(v.audioTime=ie.audioTime),me.set(ie.left),Re.set(ie.right),ie.size<ee){var Ve=new Float32Array(ee-ie.size);me.set(Ve,ie.size),Re.set(Ve,ie.size)}}else v.isWaiting||(v.isWaiting=!0,v.triggerEvent(V))},v.scriptNode.connect(v.gainNode),v.gainNode.connect(v.audioContext.destination),v.decodeAudioData.call(v,v.testAutoplay.bind(v,x,k)),v.interval=setInterval(v.decodeAudioData.bind(v),v.flushTime)):v.audioContext.state==="suspended"?v.audioContext.resume().then(function(){v.logger.info("play","Audio is resumed"),x()}):(v.logger.info("Audio resumed from waiting"),x())})}},{key:"pause",value:function(){var v=this;this.audioContext&&this.audioContext.suspend().then(function(){v.logger.info("pause","Audio is paused")})}},{key:"addEventListener",value:function(v,x){this.eventListeners[v]=x}},{key:"triggerEvent",value:function(v){var x=this.eventListeners[v];x&&x.call()}},{key:"buffer",value:function(){var v=0;return this.decodedBuffer.length>0&&(v=this.decodedBuffer[0].startTime),{start:1e3*v,end:parseInt(1e3*this.delay)}}},{key:"destroy",value:function(){this.delay=0,this.audioContext&&(clearInterval(this.interval),this.scriptNode.disconnect(),this.scriptNode=null,this.audioContext.close(),this.audioContext=null),this.gainNode=null,this.audioBuffer=new ArrayBuffer(0),this.canPlay=!1,this.isFirstPlay=!0,this.decodedBuffer.length=0,this.seekTimeDelta=0,this.audioTime=0}},{key:"testAutoplay",value:function(v,x){var k=G.createEl("audio"),B=k.play();k=null;var q=!1;B!==void 0?(B.catch(function(){q=!0}),setTimeout(function(){B=null,q?x("Autoplay is prevented"):v()},100)):x("Promise is undefined")}},{key:"currentTime",get:function(){return this.audioTime},set:function(v){var x=this;for(this.audioTime=v;this.decodedBuffer.length>0;){var k=this.decodedBuffer.shift();if(k.startTime<=v&&k.startTime+k.duration>v){k.loadedPosition=parseInt(k.length*(v-k.startTime)/k.duration),this.decodedBuffer.unshift(k);break}}setTimeout(function(){x.triggerEvent(M)},0)}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(v){this.gainNode?this.gainNode.gain.value=v:this.defaultVolume=v}},{key:"playbackRate",set:function(v){v!==this.currentRate&&(this.currentRate=v,this.audioProvider.rate=v)}}]),C}(le),he=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"first",!1),b()(p()(v),"offset",0),b()(p()(v),"currentPTS",0),b()(p()(v),"ready",!1),b()(p()(v),"end",!1),b()(p()(v),"lastData",null),b()(p()(v),"nodeParent",null),b()(p()(v),"useJMuxer",!1),v.player=x.audioNode,v.createAudioMuxer(),v.bindEvent(),v.logger.info("audioDecoder",v.useJMuxer?"JMuxer":"AudioContext"),v}return m()(C,P),u()(C,[{key:"bindEvent",value:function(){var v=this;this.bindNodeEvent(),this.events.on(se.PlayerMaxPTS,function(x){v.currentPTS===x&&(v.end=!0)})}},{key:"bindNodeEvent",value:function(){var v=this;this.addEventListener("seeked",function(){v.onSeekedHandler&&v.onSeekedHandler(),v.events.emit("AudioPlayer.seeked")}),this.addEventListener("canplaythrough",function(){v.logger.info("canplaythrough"),v.ready||(v.ready=!0,v.status="ready",v.logger.info("constructor","canplaythrough","ready"),v.events.emit(se.AudioPlayerDataReady))}),this.addEventListener("waiting",function(){v.ready=!1,v.end?(v.useJMuxer||v.player.destroy(),v.status="end",v.events.emit(se.AudioPlayerEnd,"audio"),v.logger.info("audioPlayer end")):(v.logger.warn("audioPlayer waiting",v.player.currentTime,v.currentPTS),v.status="waiting",v.events.emit(se.AudioPlayerWait,"audio"))})}},{key:"reset",value:function(){this.lastData=null,this.first=!1,this.offset=0,this.currentPTS=0,this.ready=!1,this.end=!1,this.clear(),this.createAudioMuxer(),this.bindNodeEvent(),this.stime=null}},{key:"createNode",value:function(){this.player=document.createElement("audio"),this.player.classList.add("goldplay__audio--player"),this.parentNode.appendChild(this.player)}},{key:"createAudioMuxer",value:function(){this.useJMuxer?this.audioDecoder=new $l({node:this.player,mode:"audio",debug:!1,clearBuffer:!0,flushingTime:10,onReady:this.onMSEReady.bind(this)}):(this.audioDecoder=new te({flushTime:100,onReady:this.onMSEReady.bind(this)}),this.player=this.audioDecoder)}},{key:"onMSEReady",value:function(){this.logger.info("onMSEReady","AudioPlayerReady"),this.events.emit(se.AudioPlayerReady)}},{key:"clear",value:function(){this.audioDecoder.destroy(),this.audioDecoder=null}},{key:"play",value:function(){var v=this;this.status!=="playing"&&(this.status="playing",this.player.play().then(function(){v.events.emit(se.AudioPlayerPlaySuccess)}).catch(function(x){v.logger.error("play","errorInfo:",x),v.events.emit(se.AudioPlayerPlayFail)}))}},{key:"pause",value:function(){this.status!=="pause"&&(this.status="pause",this.player.pause())}},{key:"send",value:function(v){if(this.audioDecoder){if(this.stime||(this.stime=Date.now()),(v=this.format(v)).audioEnd)return this.logger.info("push","audioEnd"),this.feed(this.lastData),void(this.lastData=null);if(this.first||(this.first=!0,this.offset=v.start),v.PTS>this.currentPTS){if(!this.lastData)return void(this.lastData=v);this.lastData.duration=v.PTS-this.lastData.PTS,this.feed(this.lastData),v.duration=this.lastData.duration,this.lastData=v}}else this.logger.error("send","audioDecoder is:",this.audioDecoder)}},{key:"feed",value:function(v){this.audioDecoder.feed({audio:v.data_byte,duration:v.duration}),this.currentPTS=v.PTS}},{key:"format",value:function(v){return v&&v.data_byte&&(v.start=v.PTS),v}},{key:"addEventListener",value:function(v,x){this.player.addEventListener(v,x)}},{key:"isBuffered",value:function(v){return[this.buffer()].findIndex(function(x){return v>=x.start&&v<x.end})!==-1}},{key:"buffer",value:function(){if(this.useJMuxer){for(var v=this.player.buffered,x=v.length,k={};x>0;)k.start=1e3*v.start(x-1)+this.offset,k.end=1e3*v.end(x-1)+this.offset,x--;return k}var B=this.player.buffer();return{start:B.start+this.offset,end:B.end+this.offset}}},{key:"muted",set:function(v){this.player.muted=!!v}},{key:"playbackRate",set:function(v){this.player.playbackRate=v}},{key:"volume",get:function(){return this.player.volume},set:function(v){this.player.volume=v,this.muted=v===0}},{key:"currentTime",get:function(){return parseInt(1e3*this.player.currentTime+this.offset)},set:function(v){this.player.currentTime=(v-this.offset)/1e3}},{key:"paused",get:function(){return this.player.paused}},{key:"offset",set:function(v){this.offset=v}}]),C}(le),ve={playerContainer:"goldplay__container",screenContainer:"goldplay__screen--container",screenCanvas:"goldplay__screen--canvas",audioContainer:"goldplay__audio--container",audioPlayer:"goldplay__audio--player",controlContainer:"goldplay__control--container",containerFullPage:"goldplay__container-fullpage",containerFullScreen:"goldplay__container-fullscreen",controlContainerFloat:"goldplay__control--container-float",bigPlayButton:"goldplay__screen--bigplay",poster:"goldplay__screen--poster",nearside:"goldplay__control--nearside",sidebar:"goldplay__control--sidebar",buttonBlock:"goldplay__control--button-block",playButton:"goldplay__control--play",pauseButton:"goldplay__control--pause",replayButton:"goldplay__control--replay",speedBar:"goldplay__speed-bar",speedBarBox:"goldplay__speed-bar--box",rateBar:"goldplay__rate-bar",rateBarBox:"goldplay__rate-bar--box",fullPage:"goldplay__control--fullpage",fullScreen:"goldplay__control--fullscreen",waitingBar:"goldplay__waiting-bar",progressBar:"goldplay__progress-bar",progressBarHover:"goldplay__progress-bar-hover",progressBarPlay:"goldplay__progressbar--play",progressBarPlayHover:"goldplay__progressbar--play-hover",progressBarLoad:"goldplay__progressbar--load",progressBarLoadHover:"goldplay__progressbar--load-hover",progressBarDot:"goldplay__progressbar--dot",progressBarDotHover:"goldplay__progressbar--dot-hover",volumeBar:"goldplay__volume-bar",volumeBarAudio:"goldplay__volume-bar--audio",volumeBarAudioOn:"goldplay__volume-bar--audio-on",volumeBarAudioOff:"goldplay__volume-bar--audio-off",volumeBarHandle:"goldplay__volume-bar--handle",volumeBarRod:"goldplay__volume-bar--rod",volumeBarRodHover:"goldplay__volume-bar--rod-hover",volumeBarSize:"goldplay__volume-bar--size",volumeBarColumn:"goldplay__volume-bar--column",alertBox:"goldplay__alter-box",alertClose:"goldplay__alter--close"},we=ve,Oe=function(){function P(){o()(this,P)}return u()(P,null,[{key:"createContainer",value:function(C){var v=function(k){function B(){return o()(this,B),c()(this,h()(B).apply(this,arguments))}return m()(B,k),B}(Vt()(HTMLDivElement));customElements.get("gp-container")||customElements.define("gp-container",v,{extends:"div"});var x=G.createEl("gp-container","div");return x.className=we.playerContainer,x.style.width=(C.options.width?C.options.width:C.el.offsetWidth)+"px",x.style.height=(C.options.height?C.options.height:C.el.offsetHeight)+"px",x}},{key:"createScreenContainer",value:function(C){var v=C.$container,x=function(q){function ee(){return o()(this,ee),c()(this,h()(ee).apply(this,arguments))}return m()(ee,q),ee}(Vt()(HTMLDivElement));customElements.get("gp-screen")||customElements.define("gp-screen",x,{extends:"div"});var k,B=G.createEl("gp-screen","div");return B.classList.add(we.screenContainer),k=C.controlBarAutoHide?v.offsetHeight:v.offsetHeight-C.controlBarHeight,B.style.height=k+"px",B}},{key:"createAudioContainer",value:function(){var C=G.createEl("gp-audio");return C.classList.add(we.audioContainer),C.style.display="none",C}},{key:"createAudio",value:function(){var C=G.createEl("audio");return C.classList.add(we.audioPlayer),C.controls=!0,C}},{key:"clearCavans",value:function(C){var v=C.getContext("webgl");v.clear(v.COLOR_BUFFER_BIT)}}]),P}();b()(Oe,"createCanvas",function(P){var C=G.createEl("canvas");return C.style.display="none",C.classList.add(we.screenCanvas),C.width=P.options.screenWidth||P.screenWidth,C.height=P.options.screenHeight||P.screenHeight,C});var He=A.a.get("Template.js"),We=function(){function P(){o()(this,P)}return u()(P,null,[{key:"mergeVar",value:function(C){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof C!="string"||C==="")return C;try{var x=new RegExp(`\\\${'?"?\\s*([.:a-z0-9_s]+?)\\s*'?"?}`,"ig");return C.replace(x,function(k,B){B=B.trim();var q=v[B];return q=(q=(q=q===null?"":q)===void 0?"":q)||""})}catch(k){return He.error("mergeVar","replace variable","error:",k),C}}},{key:"makeValue",value:function(C,v,x){if(typeof v!="string"&&typeof v!="function")return v;if(typeof v=="function"&&(v=v.call(this,this.data)),!x)return P.escapeHTML.call(this,v);var k,B=function(Re){var Ve="";return Re&&(Ve=" ".concat(P.slotReplaceName,'="true"')),'<gp-slot style="display:none"'.concat(Ve,"></gp-slot>")};if(P.isSoltType(x)){if(typeof this.getComponent!="function")return He.error("makeValue","the object is not support slot mode.",this.getComponent,v),v;switch(x){case P.slotTypeMap.component:k=v;var q=this.getComponent(k);z()(q)==="object"&&q.element?(q.element.setAttribute(P.slotReplaceName,"true"),v=q.element.outerHTML):v=B(k);break;case P.slotTypeMap.html:v=P.mergeVar.call(this,v,this.data)}var ee="";k!==void 0&&(ee=" ".concat(P.slotComName,'="').concat(k,'" '));var ie="$1 "+P.slotTypeName+'="'+x+'" '+P.slotKeyName+'="'+C+'"'+ee+"$2";return typeof v=="string"&&(v=(v=v===""?B():v).replace(/^\s*(<\s?[\w-]*)(.*[\r|\n|>])/,ie)),v}if(typeof x=="string"){var me=at[x];return typeof me=="function"&&(v=me.call(this,v)),v}return P.escapeHTML.call(this,v)}},{key:"escapeHTML",value:function(C){return typeof C!="string"?C:C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"generate",value:function(C,v,x){var k=this,B=x[x.length-1]||{},q=[C[0]];return v.forEach(function(ee,ie){if(ee){var me,Re,Ve=ee.split(P.pipSeparator);Ve.length>1&&(ee=Ve[0],Re=Ve[1]),me=Number.isInteger(ee)?x[ee]:B[ee],(me=P.makeValue.bind(k)(ee,me,Re))!==void 0&&q.push(me),C[ie+1]!==void 0&&q.push(C[ie+1])}}),q.join("")}},{key:"create",value:function(C){for(var v=arguments.length,x=new Array(v>1?v-1:0),k=1;k<v;k++)x[k-1]=arguments[k];var B;B=Array.isArray(C)?"array":typeof C=="function"?"function":"string";var q=this;if(z()(q)==="object"||typeof q=="function")if(C!==void 0&&C!=="")switch(q.data!==void 0&&q.data!==null||(He.info("create","this object.data is undefined or null",q),q.data={}),B){case"array":return function(){for(var ie=arguments.length,me=new Array(ie),Re=0;Re<ie;Re++)me[Re]=arguments[Re];var Ve=me[me.length-1]||{};z()(q)==="object"&&(q.__template__={tplObj:C,keys:x,dict:Ve});var wt=P.generate.bind(q);return wt(C,x,me)};case"function":var ee=P.create.bind(q);return C.call(q,q.data,ee,q);default:return function(ie){return ie=ie!==void 0?ie:q.data,P.mergeVar(C,ie)}}else He.error("create","have not give tplObj parameter.",C);else He.error("create","this is not an object.",q)}},{key:"isSoltType",value:function(C){return C=String(C).toLowerCase(),P.slotTypeMap[C]}}]),P}();We.pipSeparator="|",We.slotTypeName="gp-slot-type",We.slotKeyName="gp-slot-key",We.slotComName="gp-slot-com",We.slotReplaceName="gp-slot-replace",We.slotTypeMap={html:"html",component:"component"};var at={trim:function(P){return P.trim()},upperCase:function(P){return P.toUpperCase()},lowerCase:function(P){return P.toLowerCase()}},ot=We,zt=i(18),$n=i.n(zt),ft=i(28),_i=i.n(ft),kt=A.a.get("Observer.js"),ca=function(){function P(v){o()(this,P),b()(this,"object",null),this.setObject(v)}var C;return u()(P,[{key:"setObject",value:function(v){this.object=v}},{key:"watch",value:(C=_i()($n.a.mark(function v(x,k,B){var q;return $n.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(typeof(q=this.object).watch=="function"){ee.next=3;break}return ee.abrupt("return");case 3:return ee.next=5,q.watch(x,k,B);case 5:ee.sent!==!1&&typeof q.render=="function"&&q.render(x,k,B),typeof q.afterWatch=="function"&&q.afterWatch(x,k,B);case 8:case"end":return ee.stop()}},v,this)})),function(v,x,k){return C.apply(this,arguments)})},{key:"create",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=this,B=x.set,q=x.get;v=v||k.data;var ee=k.object,ie={set:function(me,Re,Ve){return typeof B=="function"?B.call(k,me,Re,Ve):(me[Re]!==Ve&&(me[Re]=Ve,ee.__template__&&Object.prototype.hasOwnProperty.call(ee.__template__.dict,Re)&&k.watch(me,Re,Ve)),!0)},get:function(me,Re){return typeof q=="function"?q.call(k,me,Re):z()(me[Re])==="object"&&me[Re]!==null?new Proxy(me[Re],ie):Reflect.get(me,Re)}};return new Proxy(v,ie)}}]),P}(),As=function(P){return z()(P)!=="object"&&kt.error("observer","this is not an object."),new ca(P)};function ji(P){if(P){var C=[],v=[];for(v.push(P);v.length;){var x=v.shift(),k=x.getAttribute(ot.slotTypeName);if(!ot.isSoltType(k)){C.push(x);for(var B=x.children,q=0,ee=B.length;q<ee;q++)v.push(B[q])}}return C}}var si=function(P){return P.getAttribute&&P.getAttribute(ot.slotTypeName)===ot.slotTypeMap.html},qi=function(P,C){return!(!(v=P).getAttribute||v.getAttribute(ot.slotTypeName)!==ot.slotTypeMap.component||P.getAttribute(ot.slotComName)===C.getAttribute(ot.slotComName));var v},xu=function(P,C,v){var x;(P||C)&&(!P&&C?v.appendChild(C):!C&&P?v.removeChild(P):P.tagName!==C.tagName||(x=C,si(P)&&si(x))||qi(P,C)?P.replaceWith(C.cloneNode(!0)):P.nodeType===Node.TEXT_NODE&&P.nodeValue!==C.nodeValue?P.nodeValue=C.nodeValue:P.setAttribute&&G.setAttributes(P,C))},gn=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"createTemplate",null),b()(p()(v),"template",""),b()(p()(v),"element",null),b()(p()(v),"eventsList",{}),b()(p()(v),"data",{}),b()(p()(v),"id",""),v.id=x.id||v.constructor.name,v.options=x,v.createTemplate=ot.create.bind(p()(v)),v}return m()(C,P),u()(C,[{key:"getTemplate",value:function(){return this.template}},{key:"setTemplate",value:function(v){this.template=v}},{key:"init",value:function(){this.data=As(this).create(this.data),this.render(),typeof this.afterInit=="function"&&this.afterInit()}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){}},{key:"watch",value:function(){}},{key:"render",value:function(){var v="";v=typeof this.template=="function"?this.template(this.data):this.template;var x=G.createEl("div");if(typeof v=="string"){x.innerHTML=v;var k=x.firstElementChild,B=k.querySelectorAll("["+ot.slotReplaceName+"]"),q=!0,ee=!1,ie=void 0;try{for(var me,Re=B[Symbol.iterator]();!(q=(me=Re.next()).done);q=!0){var Ve=me.value;if(Ve.getAttribute(ot.slotReplaceName)==="true"){var wt=Ve.getAttribute(ot.slotComName),$t=this.getComponent(wt);if(!$t)continue;var Sn=$t.element;G.isElement(this.element)?Ve.replaceWith(Sn.cloneNode(!0)):Ve.replaceWith(Sn),$t.element.removeAttribute(ot.slotReplaceName)}}}catch(Cn){ee=!0,ie=Cn}finally{try{q||Re.return==null||Re.return()}finally{if(ee)throw ie}}G.isElement(this.element)?this.replaceNode(this.element,k):this.element=k}else this.logger.error("render:","this template is not html string","html:",v)}},{key:"replaceNode",value:function(v,x){if(v&&x){var k=ji(v),B=ji(x),q=k.length,ee=B.length,ie=Math.max(q,ee);if(ie<=0||v.tagName!==x.tagName)return v.replaceWith(x),void(this.element=x);for(;ie--;){var me=k[ie],Re=B[ie];if(me)if(Re){if(me.tagName===Re.tagName&&G.syncAttributes(me,Re),!me.isEqualNode(Re)){var Ve=Math.max(me.childNodes.length,Re.childNodes.length);if(Ve<=0)xu(me,Re,me.parentNode);else for(var wt=0,$t=Ve;wt<$t;wt++){var Sn=me.childNodes[wt],Cn=Re.childNodes[wt];(Sn||Cn)&&xu(Sn,Cn,me)}}}else me.parentNode.removeChild(me);else v.appendChild(Re)}}}},{key:"show",value:function(){this.data.display="show",this.element&&(this.element.style.display="inline-block")}},{key:"hide",value:function(){this.data.display="hide",this.element&&(this.element.style.display="none")}},{key:"resetPosition",value:function(){var v=this.element.parentNode,x=v.offsetWidth,k=v.offsetHeight;this.element.style.marginTop=(k-this.element.offsetHeight)/2+"px",this.element.style.marginLeft=(x-this.element.offsetWidth)/2+"px"}},{key:"replace",value:function(v){this.element.replaceWith(v),this.element=v}},{key:"update",value:function(v){this.element.innerHTML=v}},{key:"addEventListener",value:function(v,x,k){var B=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return v.addEventListener(x,k,B),{destroy:function(){v.removeEventListener(x,k)}}}},{key:"removeEventListenerAll",value:function(){var v=this;Object.keys(this.eventsList).forEach(function(x){v.eventsList[x].destroy()})}},{key:"getComponent",value:function(v){if(v!==void 0)return this.options.componentsController?this.options.componentsController.getComponent(v):void 0}},{key:"getHTMLString",value:function(){return this.element.outerHTML}},{key:"destroy",value:function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.events.emit("Component_"+this.id+".destroy",this),this.removeEventListenerAll()}}]),C}(le),Po=i(8),on=i.n(Po),ui={formatHHMMSS:function(P){var C=parseInt(P,10),v=Math.floor(C/3600),x=Math.floor((C-3600*v)/60),k=C-3600*v-60*x;v<10&&(v="0"+v),x<10&&(x="0"+x),k<10&&(k="0"+k);var B="";return v!=="00"&&(B=v+":"),B+x+":"+k}},Do={formatBytes:function(P,C){if(P==0)return"0 Bytes";var v=C<=0?0:C||2,x=Math.floor(Math.log(P)/Math.log(1024));return parseFloat((P/Math.pow(1024,x)).toFixed(v))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][x]}};function Rs(){var P=on()([`
  <gp-poster class="goldplay__screen--poster">
  <img src="`,'" width="','" data-display="','" heigth="',`" class="goldplay__screen--poster-image">
  <gp-speed class="goldplay__screen--poster-speed">`,`</gp-speed>
  </gp-poster>
  `]);return Rs=function(){return P},P}var $o=`data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAA+CAYAAABuk1SaAAAZ2ElEQVR4nO2de1wV1fbA157ZcyTe
6sjj8FJeoqghiJAovsAHkJSUmpZl3bTHTe/NzO71k131Z97y9tJft9SrojdNLTQUH6iR4EcTUTRN
BERCRAQcURCUnNfvDzl2OMzrPDDsd75/wZ6ZvdfMnLX3XmuvtQfAjh07duzYsWPHjh07duzYsdMp
QFKFoig+aDnsAEC0F9UzxgNiORG4L8+y31pSh7czxiQBmBeAu9rEcbaW8f8DCP2mFvh3lOOhIc6H
Ch2tFxOeDeKn+TuDv8N/RD9b1e3tjPHUEJg6py8/pyAV/AEAlpwil2i9PlZPBQ/xEIdEdBcfjewu
RJ5NAy/aAcKYFiguTCMqL96C8tIGoqSsEZUV3YSi/KtsuaWyxvtSfRP1YsLzIfzzrjpwdV8vhlha
18NCh40g0V5UzxA3CO3pLPbEBOD6X1H91dtQff4mFBcxbJ3VDTwAwmnKY3EUvyStpzgRAGgAgMom
KPTfJEbZov4RflS/7xK4He46CDaUMS1QTG8Q+6hdOyaAilzwKL9guLcYb5BNA0xxAxR/V0FmbrqI
vjp7ja3RclGkJ+W/bBC/bKyvOMbQViGD9kdmCGM1tvtQYTyC2ExBBvSg9MO8YegT/vyTiT5iQmux
1Itjau9A3Yoi8rOMX9D24ussY3ZjD4AxAVTk/nFcNpjcw4KT5KylJ7jV1tY/zJcKO5zMHTatP72U
+NcLP/DzlK5dMZRcODtceMP0WjNh1pQQ/1l6Ci2taOCa5E6aGKyL3z6azTBta/YxPG3FT+xmK9rv
tBgrCGFtZalB1JCs8cT6MxO5nz5/jNua6CNOgXsPU+7l0Z6PQN+lUfyq4qe48wuj8WvWymBrIjwo
XynlAAC42IgsnqIY8HPFDlLKAQDwqwB3la7NeZzYagPlAACgX+4tvFMxhf8lpRcVK3VCrJ4KllIO
AIDyRrD6OTwMWKwgw3ypsIKJxN7MBC4zxV98ASx7YfTiSH7RkSeITEvl6Ai2jOK+Bpn7qWiCCmvr
fyYYTZWrn0Dy7yRrPLF+lF4cJXethdBZY7hdU3tTY0wPZCZwmXJtVTZBpQ1l6LRYpCBLBuPZh5O5
w9E9xHFgg54szlMcciCF+NrKemxChAflG+YGYXLHq5vFamvbyKuBvCWnyDktPFRpveaV/tRTKf5i
CthWOQzQm0dwm2K8qUBDQZwPFer5CHjInM/U3BY02S8PO2YrSHYysendgfy70P5FMeW34Pj8AvzS
+Gwc3X879g7ZhruGZ2DP+N04fHouTs6qROkAIGVz0Ik+YsKbEXi6BfdgU07XsVUTDuDUyiYolDou
iCBY28axarbs3ePcihF78EiQfh5tCOpKuX45hPsCOkY5DNDfjOK+Mfxz5ApbmvY9TmNaoFjq5Lpm
3urn8DBglpv39NPowFhfiIC2L4phWoCZeYSatb3sbt4H0pfWAUARAOyRM34BgP44hv/IzxVvu9zI
tZgjl63ZWc4eDelKjb4wibsARnJyAtSwvLKNYA7Hqtmy0imoNNRN+Yf/9gBhPnSscgAAgL8z+E8J
pRK2lLIHAQAyyti8CA8q8fST3Cnj9mvvQJ1nRwvTSdA8gmQnE5siurVXjk0Xic30BrHP9rK7eVrq
2X+JLYzZiWNAZiQZ7IEGa5WpI7lwg72ZXkqkG5edqUdnaps5m/act3m4rXZO9hUyO6cabQMNo42V
0DNC+BnGBafr2KrMS2incdm5G+jnDpaj06BJQRYMwjONfeCtMGtLiHXTDvJzzG00/ypbbvrjM+BK
gau59XUUZ2+is8b/19wBm8+7HUlwVDtne9ndvFG7hMlp3+M00KYkzOl6OLi2hPhwz2W0UeM1AAAw
1lccE9SVavMOTtcTp4z/r2uBh2IdyxaoTrEiPSn/wif4pWAyxBc3QPFLh/j5ljb8+Xni8xdChRdM
6mWOX4PjltZpa1gBtQnVaObUe/uOJKOMzetLU+FFadw5kJ9yMc/m4ue+Kmb3RbQWeDiRRKwnEftp
LPdJoAsEKlwLAEAHOENPADhjKLhr4nq+xSLZdZM/GqojyBdDeCnjkJmSg5+xpuGCGrbilaP4Vfit
d2OezcXPnetEq+wYiW06EB0But9LFgNFDFsXuws/BjKjwsoiYuVXxew+47K6Zl7YWc4eDdwsxmRX
of1qbXg5gpfx/yRq25F2IX//5/CgUFSQMQFUZIyH2M4mSC8l0k/XsZpdlHJ8eZb9dsB2/GjqQRwX
+g3ubfpiOxu0g+0NZQHM94odq2bL5KaoOyqI75Sufe4Qeg5UplxOWHna100ndlOT8Y+CooLM7cfP
BYnR44ti4gtbCXDmGludeZE9WlrP1tuqzo7iERIcfm8ZDKSXERukymtV7KS6Zl5YdIpcpHROIwuN
Sse7dKLn0NHI2iB9acqjKE1st7pafgvKrYkIfZjRkaLVU4sYbyowugcM9nUUfXu6CAFTAuUXJZW4
2CCWSZXzGtZpjtWhYwqHmfM3pNc+DHSGqaatmB5GJbnqwDXvKuSduca2WwSWVZBRepAMaUi/QG5Y
bGMhO4LQblS3QFcIDHKFwBu/ws2SBiiubhKrrcmRcFSZeigxOZQa9W4E927+BOgHNljT+JUX7zax
UOFMQU/jcqVQFQNNHMga2Udq0VGpH4oxLhQ4axa0FT9X7ODliLwCXSGwhwN4dCFFHSsgrv5XqP/l
FpRfuiVWVj3A9S+9C9btGcfv3jj8/tIFkxpEpWZeZI8anyerIIl6PlGq/Pg11Gm8TKZ4OmEitRd6
4qUQ/qXSp8XBYPJD5ASoWT4Ef7KtHG0rqGErzK3fCZv/w/B0wsTqYcKarSPFCabyWENdMy9UTkP1
pgqiBb0j6GUOMR+cIT/YKXPQgDkjaUovKvbZYH7a5WfuB7HKwawYSq5ceY5YceEGe1Nr/ZaSEoBS
IrpBglERvXUkt9XDiQwAI7tQsrfRu2BdaoA4QerY5U4apDYxWBd/7in+3Oo4LiPGQ0wCiZeBCfCa
15//oCCVK/jXEPyOuW2Y673xdcUOBU/wBakB4osS8jCbLhIrzInHshXJfkKyVHlONcrZWd62B5VC
60i6JZFYmTWG2zUlUPwzqHcO9OxwYdGFSdwF45iwjkK8NxVt46xwIMG3bzeir3GZpIL4OCE9SNxQ
9W04U98idjpj+u9ReOb20WwG7dBmPs/k16E9G8uIjzMvoXXVt+EM/PZA6Lf683N/noR+8HXFmg1O
ZwzOnk5Yc/RB1lh+l78zRJoUM5+fJxbrN5M+0w7yc4puoCKt9dmCAT0o/fRgQSrmjfnTYeJlLXVo
GUmzxhPrpwSqjhpS0EdSuCMeTqTqc/Z0wsTMftTE7GRiU+10dO700+jAlFAqQe06AIA159jvFhaS
70FbJWHumKx1SU6xertLG44XGlBZZ8tznjsQT/9ocJuFTObNfHJu5iX03cUbbGOM0bmj/KgBc8L5
Oa2jI92vK4w4+jh/BAA0ZQhiArxa5/iqhvDyIfjtef0hwqSYmfwDnry1lM15vbXAmRLNnrZZw3eJ
3A6QGM3id+Ph5TdZRe+VAbWRdEIgNWRnouWRx5gAr0lBxCQA2CJ3TqA7di2ZxJ80zsb0fAT6bhnJ
RczoQ81Yf57NUmtncQH379rp6HXPR+5ni1bmX2XLVXPSe7uKoTKC2yyHfUAPSh/rCbE6AnQ6QtRh
AmEAAF4UOVEE4ETE3RXgLi8AhxAQzlh0PnAF7TdOE43zoUKPpPAfgZFyROzAA0/XsVUfS7SZc5k9
AwAvvR1JvfhhNPcBAND+zuC/ZgS57OVD/N+0yI00GMGt0QfzwCRKIO17nJZRxmqKWesIDqQQXyf6
gOn0hUnZjx/Pq2I1j2QOKm7eVH8hFay0t1ptYFkF+Xa08I2xchhBr4/n1gNADy3trC8l17/zKL8c
AOBoHTrqb3Jc8gevdxR9pMrDu4p99S5YV32Lszqi9Xgql+9Agq8512RUoNUAMMvw/9ph3FowUo4R
e/BILQuYHxay69aOIHu/1Ft4G+5l1v1pmC+14XAVq+jeBNDmJXpvIP8emPxA0kuJ9N9LOcJpyiMj
gctI9IEwE7mYcdl4/L4K9oQ59akpiLej6KV0vIW/X48sSouyiQG6iAPjRNOpaxtSg6ghph4pKX6+
+VvgZQFDFEwxOS75sq+1oGtS5e46CPZ4BMkl0ZhF9W0wO/HoSjO6Yvg7pRcVa5zYlHkJ7Tx0mdUc
ZfpeITKef9J/G6BxBFE5Hk5THhIODubTc8RnWmWzBtN8ldmPUlPPpXHnwtxgKBgpRwsPVVGZOMpc
5TCgZCPk1pC5EsXMolPkG1GZOCD0G9Ip9BvSKexb3GNcNo6WCqjESH62Ek0L7TyUJtCDuouD1O4B
AODmr2DwmDFSHlrJmyxvks+7jqTbGZ0WkXoAp4J54dvMpz+jTw3/vNybfxmMHtKGMiy5sixHVSPX
sqUc3R/Ck/zEpAE9KDn3533UplhShmlxAxTbIjRHC/UtQj3AvXWX8qkof0Us95mJPEzmJbQucCsZ
dLKGtdQjSSOFriK9RExvdYrc5+0CPP+949z/nqxhKysbuNuVDdzt4usss6+CPZG0R3i+4Bpqo6ic
CLK2Li8iVTt4cA8hRu0cAAD3LuBu+FtqBiH5sssaQHKVFgDg1TD+VS0Nq3H2Gluz6SKhdVcMZuoh
PK38JtcIAODvhh1Nemnmp+viaXNl+L6a/N7oX3qYNwxVu4ZQCc+ZGcbPMi07VksorVzblKeDiKcy
xhKrto7ktga6gGlPy7xyFL+auk94ydppstJUs7aZE2J3ko+tKSH+CfcS6orTS4R0qXMjPCjfZ8Oo
cZ6PiJpnJj/Vt/FISjLWVxwT6I5VUyf6uYv9AAAOXEEHpY5LDmOtax0MSAxj0T3EQXE+VOiRK2yp
WuO24kgtOrq5hL0fhRrRHZkmbsHFG9o8MMZUNbddgxij58cCwDala6hWZ4IUUV6U/8nU9nnc136V
nrJ2BJ8/xm2VKGZyqlHOnGPkHK17YalB3nPYyPbklQ3cbQD4W1BXahkAQF0ze3/q19MNOyf6ooQn
A/gnTz8pvWalxL4K9gTMUpvsAj3UCw0FgD1KJ0XRQhQAQGYlmSm1Mi7ZC1y4wd78+QbIzefpVuPY
avq4iZrikFYUkW3m72ESbmi9CzY7PshN99vwCgAw+t6OIYqQCp68OM+283wDXQixQ4L7WnjQEprB
TM/Fz4/aJUy2lXIAKNsIxly8wTYaOq84Hyo0fSS5vGIK/8uaodyOJD9xOljo7Xr9R/w6qIwif4/g
VO3K1j3cmKO1IGnQyw6Te6vIvXLHwtwgbMVQcqFa40qEdKXcI2llT4SBssa2U76+boLpzoN0qDuS
dE0rMcRDGGL8vzMFziFdKXe58wEAKAUFGebJD5MqD3YVg8yVTQ1fV+zQmvwkB7PkFDnHexPpvbGY
VexFLYEkkOYF01g9FZw5jlh7JIU78kKo8BYYeR4LrqF9Lx7GqbG7cAiYYZN+fobdVn5LeW+uMDcI
Sw2ihsgdj/Cg7ntRC2ul7THZm8ypRjkgLzA9O1x4w5JwDQOz+oivgMbeg+XbDuUhbu3Xacb5iOPM
laF1AzZj6G4OoJjrYJo8ZEwfd+kRMclPTDJXNiUmh1Kj8lL4XEyAlDuVWVhIvh6yDYe8e5xb0VEL
u0rPwZiF0fi1Y49zP5qE2zAZFWh1XBaOi94ujF9XxO48Vs3K2r1yPJ2DnwZlpaI3xHOyzpvBHvds
tFXFhOxOmfIjSAV7oomVj/qE1nCN3AlERrQX1VPhvHakBVPxb/Xn52o938epbXCdlIv4nUf5+eaE
jcwdKL3FkMo9Kxqn11uQbBjOs2GUpAKbmzC1ZgS5zMgAb0fiPipxcQH3744O+NOyaJw1nli/OJJf
BCaOgjfzyblp2cIsa+3YkzVs5dzj5FxQUBJ3HbgvjcF/kTo2pRc/GQBgTxWxW+56xWFy2RlymYqM
9HBvcWJBKleQPpJcntKLilXyj3s6YWLBIDwzYzQnuZ2lHP8YyLdJ8Cm+SZyXkmV9vLBeS33je1KD
PhrcZgXeAKMWa0YqKEhxA5JbaKS/Gs79N5ym2hnwnCBv6Jry9yg88+Xewp9A4dldbBAeSK6O0nMA
AMgYS6yS2uguvZRI//g0t9FWcnx0ituYVYmyQGG2syCCXzC+J9VmXcTfDTu27lLJHKsRZb2Mije5
sRS07ohBvxAqvJU1hvuxdJJQsieJ2LBoMP7z9DAqKTFAFzExWBe/chi58NIz/KWlUfwqMNMwi/EQ
B68ZQS4zGOKn65GkSzfRR0zInUBkyK1neDtjPD+SenHvWG6vlAy5V1Ge2pREyUg/eZ04qXApfS6N
Ozf7UWpqWHeK9nTCRIw3FRjsKhkuIclYH2GslNzGdHdADyQdVmmKNT2MSjLeEd+YTeXkJlvLkrJX
mFF7R3GnFXrvWG6v8e8iwQclAACdUYG2K23lpDhMXm7kWuYOxHNleltJ3HUQnOQnBif58bbcJZF+
ubfwDoUIDADzTl4TC0HaDU0P9xYnnpnIxWeOI3buriJ3VzdDtasOXOM8hbir04TXlO4j+wqRPVxF
ECUj/VA1HJKR6758K2I5i38gq0rIVcO9uXgAoHOqEYzSt9+F3+UBbZukNNX8RyTXLtTGQAsvdkhS
1LAsPKz0aa5Erl0AoM9M5H7ydcV+VY1cy/9EcUsAgFlfSq5PU6hX1RPx0SluYyfZqJj5soRYBQBQ
0cA15V5FSnFNdGqA+OLqOC4jawz34+YRXPbrfYSFoJKwk3MV5agJodRzltaz9fl1HZdQtrmE3T/h
wD2Pz7OHiC5NbPtz3LsgRS+crZCbYg3oQemVvGvxXmK8ZLkv1VeqXCul9Wx9/G48HFSM9pwk/vu/
R+GZhqSxrF9YxUVcTa665P04WaXhjoCpvQNFTAsUrywi3tNvJn2MPR2tayM2kym/Dh039aQgibUo
tZX0f5xql2NgU3aWs0ePVbNlThg5OlPtjzti0eK0YDmklEFuBHHRgTModERLo/ilk0OpNutN0V5U
z7xkLtf4OnNsMwN5VWzRxO8pxc31Qt1gyPuD7k3zl58ll6vVqUlBzl5ja8Zn4/FKDdsYJi4Lx3lu
FMPpDWKfNw7zi01DIzLK2LzSBrDVaj4z/wTZbhM8qV0e1fz/eyvYE3JhC1rQujn2gO4wwNI2zMWV
Ets9B7mYtKvNYg2o9OJbR3Jbi6egwyuHkQu3JBIrC1K5AjBRKj9n0axIbwPby+7mzcjDM1RkAABg
NpUh1VAnzYs9eyvYE2raaSOY8dl4vBYX4DOH8DM2kIf55GfiE6lI4AAnMcC0DIGo+sxm5BFaXpAk
SkF6xgTJGPe22H3elECX9gudcrZY+U2uUcM0kw5zg6Fv9BUWyaXjBrpA4DBfyqIdX9afZ7NmH8Nz
QOEd5F5FeVoCSM36/MH2srt5w3bjYU2s9R+RkYEZl43H79UYgn2yhq2c8oNVSsJkV6H9fz3Cvy91
cEA3sV0vrSUfpKqRawnPwOGWPKdgF1GTV8vDQTq4T4t85jKwu2iaGanIh2fJD8D6jktzCoIUK35i
N79dgOfLyMF8VoQ1pR+Y/TAPV7HFQVvJoE9+JhbING4JTGUTFFqSn7CllD1o4fSP+fw88e+xu4Vp
cidIhcJojUE6x7B1od+QvVcVE++bI9tYX3GMFoPVTSe6SZWr2UjmonfBOn9nME20AwrJp91mlLF5
rTs/ar1vJr8O7TE9P8lPTDIOBzGXDwvZdVJKUnsH6rR+jcCih1nbzAl/PcK/H7EDDzT3ByABs+QU
ucR/kxhlaX7C3gr2hN/XpN8/fyLnaZCFyb2Kto/ag0e/nse/Z66sV+9oT/SqvsXdnZXLL4jKxFHL
z5LzWz9GoyYfnZfM5aptPnC5GV2Wlg9Z/QUsYzhBlJryMWo73b/wAz9v6WlyKWh4H68cxa/G7BCS
//wjfsP0/Faj32I+LGTXtdZ7v715x7HiR1KNsclXbv3dsOM4PzQu2ZdPHu4txsvkChvDVDZB5X/L
yP9uuIA22nLbUW9njOP1KH6opzA0yEUM8ncW/RvuosaKJlRReB2dPFCFDqptjGZgehiVtHE4twFa
NxZbcopc8u5xboU18oXTlIe/M/j7OoGvjgSd6U6IJALCz1H0L2DQcaUU3ZCulLvpB3466tPMr/Sn
njL6whUzvwDP/6CQXafl2tYMyydieggxAS6ivwMJDtdbUP3FW6js0FUid99lcZ+xA2ZhNH5tahD/
TFcddNv2C7H1jcO81fsUBnWlXC9O4hoAAG7ehTK177t3yGegDehdsK6XK+rp5wT+ekdRr3cEvQsl
ugAA1N1BtZXNqPJCI5SZkx77e+Lvhh31Tkh/6y40dqad5wHubQ/7VC/xKT8n0a+skbiwuUzc3FFf
5wp0x67eTsjregvUd9ZPd8tRmEZkR9LiGNC4cUaHKogdO52JTQnkZ9OChKkAQOfXoT0xO6Q3zTPG
pt9Jt2Ons7IwGr9mUA4AYF48TM5Qu8YUm+1zZcdOZ2JmP2ri6rj7ofbMm/nkXEumyPYplp0/HDP6
UCmtm8fRAAA51WjbqF3CZK3X220QO39YWreivR993sRCRcg2MsSczEq7DWLnoSfSk/K/OQNdeLEv
NQHg3o4ymeOItSapGcygTBxtTdqxfQSx81CyYBCe2Zp8Z+xybpPa23877m/JTi6qm1fbsdPZobuI
BmVolzadX4eOT84hJlc0sFZ/rto+xbLzUJJ/jTgO7cNYmPkFeH7MDiG5ooGzybfc7VMsOw8tS2Pw
X+YP4Oc3cdD0nxJy7epitNoWYUtIKlPOjh07duzYsWPHjh07dh4A/wcMRwRD90zgYwAAAABJRU5E
rkJggg==`,Df=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Rs(),"poster","width","display","height","speed")),b()(p()(v),"data",{poster:"",status:"",display:"show",speed:"",width:"",height:""}),b()(p()(v),"options",{}),v.options=x,x.player.poster?v.data.poster=x.player.poster:v.data.poster=$o,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"resetPosition",value:function(){if(this.element){var v=this.element.parentNode.offsetWidth,x=this.element.parentNode.offsetHeight;this.element.style.width=v+"px",this.element.style.marginTop=(x-this.element.offsetHeight-20)/2+"px"}}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.LoaderUpdateSpeed,function(x){v.data.display==="show"&&(v.data.speed=Do.formatBytes(x.speed)+" /s")})}},{key:"hide",value:function(){this.data.display!=="hide"&&(this.element.style.opacity=0,this.element.style.display="none",this.data.display="hide")}}]),C}(gn);function $f(){var P=on()([`
    <gp-control class="goldplay__control--container `,'" style="width:',"px;height:","px;opacity:",'" data-status="',`">
      `,`
      `,`
      `,`
    </gp-control>
  `]);return $f=function(){return P},P}var Nf=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate($f(),"containerFloatCss","width","height","opacity","status","progressBarName|component","sideControlBarName|component","nearControlBarName|component")),b()(p()(v),"hideDelayTime",void 0),b()(p()(v),"hideTimeCount",void 0),b()(p()(v),"data",{progressBarName:"progressBar",sideControlBarName:"sideControlBar",nearControlBarName:"nearControlBar",width:"",height:"",opacity:1,containerFloatCss:"",display:"show",status:""}),b()(p()(v),"options",{}),v.options=x,v.hideDelayTime=v.options.player.controlBarAutoHideTime||3,x.player.controlBarAutoHide&&(v.data.containerFloatCss=v.options.cssName.controlContainerFloat,v.resetPosition()),Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"initProps",value:function(){this.hideTimeCount=this.hideDelayTime}},{key:"bindEvent",value:function(){var v=this,x=this.options;x.player.controlBarAutoHide&&(x.$container.addEventListener("mousemove",function(){v.hideTimeCount<=0&&(v.data.display="show",v.show()),v.hideTimeCount=v.hideDelayTime}),setInterval(function(){v.hideTimeCount>0?v.hideTimeCount-=1:v.data.display!=="hide"&&(v.data.display="hide",v.hide())},100))}},{key:"setSize",value:function(v,x){v!==void 0&&(this.data.width=v),x!==void 0&&(this.data.height=x)}},{key:"show",value:function(){var v,x=this;this.options.player.controlBarAutoHide?(clearTimeout(v),v=setTimeout(function(){x.data.opacity=1},1)):this.data.opacity=1}},{key:"hide",value:function(){this.data.opacity=0}},{key:"resetPosition",value:function(){this.setSize(this.options.$container.offsetWidth,this.options.player.controlBarHeight)}}]),C}(gn),Of=A.a.get("Delegator.js");function Is(P){return typeof HTMLElement<"u"?P instanceof HTMLElement:z()(P)==="object"&&P.nodeType===1&&typeof P.nodeName=="string"}function Ps(P){P.preventDefault(),P.stopPropagation()}function Ml(P,C,v,x,k){var B=function(ee,ie){if(ee&&ee.matches){if(!Array.isArray(ie))return ee.matches(ie);for(var me=0,Re=ie.length;me<Re;me++)if(ee.matches(ie[me]))return!0}return!1};function q(ee){for(var ie=(ee=ee||window.event).target||ee.srcElement,me=ee.currentTarget,Re=!0;Re&&ie!==me&&ie;){if(B(ie,v)&&(Re=x.call(ie,ee)!==!1),!Re)return void Ps(ee);ie=ie.parentNode}}x.__delegateWrapper=q,function(ee,ie,me,Re){Re===void 0&&(Re=ie==="blur"||ie==="focus"),Is(ee)&&ee.addEventListener(ie,me,Re)}(P,C,q,k)}var Lf=function(){function P(C){return o()(this,P),b()(this,"element",null),Is(C)?this.element=C:Of.error("constructor","new instance","element:",this.element),this}return u()(P,[{key:"off",value:function(C,v,x){return v.__delegateWrapper&&delete(v=v.__delegateWrapper).__delegateWrapper,this.element.removeEventListener(C,v,x),this}},{key:"on",value:function(C,v,x,k){var B=this;return Array.isArray(v)?v.forEach(function(q){Ml(B.element,C,q,x,k)}):Ml(this.element,C,v,x,k),this}},{key:"once",value:function(C,v,x,k){return this.on(C,v,x,{capture:k,once:!0}),this}}]),P}(),Ds=null,Nn=function(P){return typeof P=="string"&&(P=document.querySelector(P)),Ds?Ds.element=P:Ds=new Lf(P),Ds},_u=function(){function P(C,v){var x=v.$container,k=v.type,B=v.scope,q=v.onStart,ee=v.onDrag,ie=v.onRelease;o()(this,P),b()(this,"$container",null),b()(this,"$ele",null),b()(this,"active",!1),b()(this,"offsetX",0),b()(this,"offsetY",0),b()(this,"offsetLeft",0),b()(this,"offsetTop",0),b()(this,"orginOffsetLeft",0),b()(this,"orginOffsetTop",0),b()(this,"orginOffsetWidth",0),b()(this,"orginOffsetHeight",0),b()(this,"initialX",0),b()(this,"initialY",0),b()(this,"type","default"),b()(this,"scope",{}),this.$container=x||document.body,this.$ele=C,this.type=k,this.scope=B,this.eventsList={},this.onStart=q,this.onDrag=ee,this.onRelease=ie,this.bindEvent()}return u()(P,[{key:"addEventListener",value:function(C,v,x){var k=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return C.addEventListener(v,x,k),{destroy:function(){C.removeEventListener(v,x)}}}},{key:"removeEventListenerAll",value:function(){var C=this;Object.keys(this.eventsList).forEach(function(v){C.eventsList[v].destroy()})}},{key:"bindEvent",value:function(){var C=this;this.eventsList.mousedown=this.addEventListener(this.$container,"mousedown",function(v){C.start(v)},!1),this.eventsList.mouseup=this.addEventListener(this.$container,"mouseup",function(v){C.release(v)},!1),this.eventsList.mousemove=this.addEventListener(this.$container,"mousemove",function(v){C.drag(v)},!1)}},{key:"start",value:function(C){C.target===this.$ele&&(this.scope===void 0&&this.$container!==void 0&&(this.scope={left:this.$container.offsetLeft,right:this.$container.offsetLeft+this.$container.offsetWidth,top:this.$container.offsetTop,bottom:this.$container.offsetTop+this.$container.offsetHeight}),this.offsetLeft=this.$ele.offsetLeft,this.offsetTop=this.$ele.offsetTop,this.active=!0,this.initialX=C.clientX,this.initialY=C.clientY,this.orginOffsetLeft=this.$ele.offsetLeft,this.orginOffsetTop=this.$ele.offsetTop,this.orginOffsetWidth=this.$ele.offsetWidth,this.orginOffsetHeight=this.$ele.offsetHeight,typeof this.onStart=="function"&&this.onStart.call(this,this.offsetX,this.offsetY,C,this))}},{key:"release",value:function(C){this.active=!1,typeof this.onRelease=="function"&&this.onRelease.call(this,this.offsetX,this.offsetY,C,this)}},{key:"drag",value:function(C){this.active&&(C.preventDefault(),C.stopPropagation(),this.offsetX=C.clientX-this.initialX+this.offsetLeft,this.offsetY=C.clientY-this.initialY+this.offsetTop,this.setPosition(C))}},{key:"setPosition",value:function(C){switch(this.type){case"vertical":this.offsetX=this.orginOffsetLeft,this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight);break;case"level":this.offsetY=this.orginOffsetTop,this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),this.offsetX<this.scope.left&&(this.offsetX=this.scope.left);break;default:isNaN(this.scope.right)||this.offsetX>this.scope.right-this.orginOffsetWidth&&(this.offsetX=this.scope.right-this.orginOffsetWidth),isNaN(this.scope.left)||this.offsetX<this.scope.left&&(this.offsetX=this.scope.left),isNaN(this.scope.top)||this.offsetY<this.scope.top&&(this.offsetY=this.scope.top),isNaN(this.scope.bottom)||this.offsetY>this.scope.bottom-this.orginOffsetHeight&&(this.offsetY=this.scope.bottom-this.orginOffsetHeight)}this.$ele.style.left=this.offsetX+"px",this.$ele.style.top=this.offsetY+"px",typeof this.onDrag=="function"&&this.onDrag.call(this,this.offsetX,this.offsetY,C,this)}},{key:"destroy",value:function(){this.$ele.parentNode.removeChild(this.$ele),this.removeEventListenerAll()}}]),P}(),wu=function(P,C){return new _u(P,C)};function Su(){var P=on()([`
    <gp-control-progressbar class="goldplay__progress-bar `,'" data-status="',`">
      <div class="goldplay__progressbar--load `,`">
      </div>
      <div class="goldplay__progressbar--play `,`">
      </div>
      <span class="goldplay__progressbar--dot `,'" title="',`"></span>
    </gp-control-progressbar>
  `]);return Su=function(){return P},P}var No=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Su(),"progressBarHoverCss","status","progressBarLoadHoverCss","progressBarPlayHoverCss","progressBarDotHoverCss","time")),b()(p()(v),"options",{}),b()(p()(v),"data",{playWidth:"",dot:"",time:"",status:""}),b()(p()(v),"setProgressBarSize",function(k){v.$progressBarPlay.style.width=k+"px"}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){var v=this.options.cssName;this.data.status==="dragstart"?(this.data.progressBarHoverCss=v.progressBarHover,this.data.progressBarLoadHoverCss=v.progressBarLoadHover,this.data.progressBarPlayHoverCss=v.progressBarPlayHover,this.data.progressBarDotHoverCss=v.progressBarDotHover):this.data.status==="dragend"&&(this.data.progressBarHoverCss="",this.data.progressBarLoadHoverCss="",this.data.progressBarPlayHoverCss="",this.data.progressBarDotHoverCss="")}},{key:"afterInit",value:function(){}},{key:"initProps",value:function(){var v=this.element,x=this.options.cssName;this.$progressDragDot=v.querySelector("."+x.progressBarDot),this.$progressBarPlay=v.querySelector("."+x.progressBarPlay),this.$progressBarLoad=v.querySelector("."+x.progressBarLoad),this.timer=this.getComponent("timer"),this.pauseButton=this.getComponent("pauseButton")}},{key:"bindEvent",value:function(){var v=this,x=this.options.cssName,k=!1;this.events.on(se.PlayerTimeUpdate,function(B){var q=v.options.loadData.sourceData.duration;if(!k&&B&&q){var ee=B/1e3/q*v.progressBarWidth;v.setProgressPosition(ee),v.timer.data.time=ui.formatHHMMSS(B/1e3)}}),this.events.on(se.PlayerbufferUpdate,function(B){!k&&B&&v.updateProgressLoad(B)}),Nn(this.options.$controlBarContainer).on("click","."+x.progressBar,function(B){if(B.target!==v.$progressDragDot){var q=(v.options.loadData.sourceData.duration||0)/v.progressBarWidth,ee=0;B.target.classList.contains(x.progressBarLoad)&&(ee=B.target.offsetLeft-B.target.parentNode.offsetLeft);var ie=ee+B.offsetX,me=ie*q*1e3;return v.setProgressPosition(ie),v.logger.info("bindEvent","click to seek","seekTime:",me,"offsetX:",ie),B.target!==v.$progressBarLoad&&v.clearLoadBar(B.offsetX),v.timer.data.time=ui.formatHHMMSS(me/1e3),v.events.emit(se.PlayerOnSeek,me),!1}}),this.progressDragEvent=wu(this.$progressDragDot,{$container:document.body,type:"level",scope:{left:this.progressBarLeft,right:this.progressBarLeft+this.progressBarWidth,top:this.$progressDragDot.offsetTop,bottom:this.$progressDragDot.offsetTop+this.$progressDragDot.offsetHeight},onStart:function(){k=!0,v.data.status="dragstart"},onDrag:function(B){var q;q=v.options.player.controlBarAutoHide?B:B-v.options.$controlBarContainer.offsetLeft;var ee=0,ie=v.$progressDragDot.offsetWidth;v.progressBarWidth-q<=ie&&(ee=ie),v.setProgressBarSize(q),v.data.status="draging";var me=v.getSeekTime(v.progressBarWidth-ee);v.timer.data.time=ui.formatHHMMSS(me/1e3),v.data.time=v.timer.data.time},onRelease:function(B,q,ee){if(k){var ie=v.getSeekTime();ee.target!==v.$progressBarLoad&&v.clearLoadBar(B),v.events.emit(se.PlayerOnSeek,ie),v.logger.info("bindEvent","onDrag release seek","seekTime:",ie),v.data.status="dragend",k=!1}}})}},{key:"setProgressPosition",value:function(v){var x=Math.min(v,this.progressBarWidth),k=this.$progressDragDot,B=this.progressBarWidth,q=0,ee=k.offsetWidth/2;x>B||B-x<=ee?q=ee-(B-x):x<=ee&&(q=-(ee-x));var ie=x-q-k.offsetWidth/2;this.setProgressPlayWidth(x),this.setProgressDragDotLeft(ie+this.progressBarLeft)}},{key:"setProgressPlayWidth",value:function(v){this.$progressBarPlay.style.width=v+"px"}},{key:"setProgressDragDotLeft",value:function(v){this.$progressDragDot.style.left=v+"px"}},{key:"getProgressPlayLeftWidth",value:function(){return{offsetLeft:this.$progressBarPlay.offsetLeft,offsetWidth:this.$progressBarPlay.offsetWidth}}},{key:"getProgressLoadLeftWidth",value:function(){return{offsetLeft:this.$progressBarLoad.offsetLeft,offsetWidth:this.$progressBarLoad.offsetWidth}}},{key:"setProgressLoadLeftWidth",value:function(v,x){var k=this.progressBarLeft+this.progressBarWidth;(v=Math.min(v,k))+x>k&&(x=k-v),this.$progressBarLoad.style.left=v+"px",this.$progressBarLoad.style.width=x+"px"}},{key:"updateProgressLoad",value:function(v){var x=this.options.loadData.sourceData.duration;if(x){var k=this.progressBarWidth,B=this.progressBarLeft,q=v[0]/1e3/x*k,ee=v[1]/1e3/x*k,ie=Math.floor(B+q),me=Math.floor(ee-q);this.setProgressLoadLeftWidth(ie,me)}}},{key:"getSeekTime",value:function(v,x){var k=this.progressBarWidth,B=(x=x||this.options.loadData.sourceData.duration||0)/(v||k);return this.$progressBarPlay.offsetWidth*B*1e3}},{key:"clearLoadBar",value:function(v){v<this.$progressBarLoad.offsetLeft-this.progressBarLeft&&(this.$progressBarLoad.style.width="0px")}},{key:"getDragDotPosition",value:function(){return{offsetLeft:this.$progressDragDot.offsetLeft,offsetTop:this.$progressDragDot.offsetTop,left:this.$progressDragDot.style.left,top:this.$progressDragDot.style.top}}},{key:"clearDragDotTop",value:function(){this.$progressDragDot.style.top=""}},{key:"progressBarWidth",get:function(){return this.element.offsetWidth}},{key:"progressBarLeft",get:function(){return this.element.offsetLeft}}]),C}(gn);function Ur(){var P=on()([`
  <gp-button class="goldplay__control--play" data-status="`,'" title="',`">
  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
  viewBox="0 0 232.153 232.153" width="20" height="20" style="enable-background:new 0 0 232.153 232.153;" xml:space="preserve">
  <g >
  <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M203.791,99.628L49.307,2.294c-4.567-2.719-10.238-2.266-14.521-2.266
    c-17.132,0-17.056,13.227-17.056,16.578v198.94c0,2.833-0.075,16.579,17.056,16.579c4.283,0,9.955,0.451,14.521-2.267
    l154.483-97.333c12.68-7.545,10.489-16.449,10.489-16.449S216.471,107.172,203.791,99.628z" fill="#f1f1f1"/>
  </g>
  </svg>
  </gp-button>
  `]);return Ur=function(){return P},P}var Gd=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Ur(),"status","title")),b()(p()(v),"data",{title:"play",play:">"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),C}(gn);function Bl(){var P=on()([`
  <gp-button class="goldplay__control--pause" title="`,'" status="',`">
  `,`
  </gp-button>
  `]);return Bl=function(){return P},P}function Fl(){var P=on()([`
<svg style="display:`,`" class="goldplay__control--pausing" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 26 26" style="background:none" xml:space="preserve">
<g>
<path d="M2.667,0h6v26h-6V0z M15.333,0v26h6V0H15.333z" fill="#f1f1f1"/>
</g>
</svg>
`]);return Fl=function(){return P},P}var Vl=ot.create(Fl(),"pauseHide"),zl=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(function(k,B){return B(Bl(),"title","status","icon|html")})),b()(p()(v),"data",{title:"pause",pauseHide:"",pauseLoadingHide:"none",icon:Vl,status:"",display:""}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){this.data.status==="pauseloading"?(this.data.pauseHide="none",this.data.pauseLoadingHide="inline-block",this.data.title="loading",this.data.icon=`
<svg version="1.1" class="goldplay__control--pause-loading" style="display:\${'pauseLoadingHide'}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 612 792" style="background:none;margin: -4px 0 0 -5px;" xml:space="preserve">
<linearGradient id="goldplay-pause-loading-gradient" gradientUnits="userSpaceOnUse" x1="1.98" y1="784.6123" x2="26.2101" y2="770.623" gradientTransform="matrix(21.8571 0 0 21.8571 -2.0895 -16600.5293)">
    <stop offset="0.1682" style="stop-color:#f1f1f1;stop-opacity:0"></stop>
    <stop offset="0.7502" style="stop-color:#f1f1f1"></stop>
    <stop offset="1" style="stop-color:#f1f1f1"></stop>
</linearGradient>
<path style="transform-origin: center center;animation: goldplay-rotate-360 .8s linear infinite;" fill="url(#goldplay-pause-loading-gradient)" d="M306,133.714c144.257,0,262.286,118.028,262.286,262.286c0,144.257-118.029,262.286-262.286,262.286
  C161.743,658.286,43.714,540.257,43.714,396C43.714,251.743,161.743,133.714,306,133.714 M306,90C137.7,90,0,227.7,0,396
  s137.7,306,306,306s306-137.7,306-306S474.3,90,306,90L306,90z">
    <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0" to="360" dur=".8s" repeatCount="indefinite" />
</path>
<g>
    <g>
        <path fill="#f1f1f1" d="M229.5,514.028L229.5,514.028c-13.114,0-21.857-8.742-21.857-21.856V295.457
        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.715
        C251.357,503.1,242.614,514.028,229.5,514.028z"></path>
        <path fill="#f1f1f1" d="M229.5,273.6c-13.114,0-21.857,8.743-21.857,21.857v196.715c0,10.928,8.743,21.856,21.857,21.856
        s21.857-10.929,21.857-21.856V295.457C251.357,282.343,242.614,273.6,229.5,273.6L229.5,273.6z"></path>
    </g>
    <g>
        <path fill="#f1f1f1" d="M382.5,518.4L382.5,518.4c-13.114,0-21.857-8.743-21.857-21.857V299.829
        c0-10.929,8.743-21.857,21.857-21.857l0,0c10.929,0,21.857,8.743,21.857,21.857v196.714
        C404.357,509.657,395.614,518.4,382.5,518.4z"></path>
        <path fill="#f1f1f1" d="M382.5,277.972c-10.929,0-21.857,8.743-21.857,21.857v196.714c0,10.929,10.929,21.857,21.857,21.857
        s21.857-10.929,21.857-21.857V299.829C404.357,288.9,393.429,277.972,382.5,277.972L382.5,277.972z"></path>
    </g>
</g>
</svg>
`):this.data.status==="pause"&&(this.data.pauseHide="inline-block",this.data.pauseLoadingHide="none",this.data.title="pause",this.data.icon=Vl)}}]),C}(gn);function Cu(){var P=on()([`
  <gp-button class="goldplay__control--replay" title="`,'" data-display="',`">
  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
  width="24px" height="24px" viewBox="0 0 245.000000 206.000000"
  preserveAspectRatio="xMidYMid meet">
 <g transform="translate(0.000000,206.000000) scale(0.100000,-0.100000)"
 fill="#f1f1f1" stroke="1">
 <path d="M1250 2046 c-286 -55 -525 -211 -681 -445 -91 -136 -152 -302 -167
 -453 -12 -119 3 -108 -143 -109 -70 -1 -156 -4 -192 -8 l-65 -6 262 -265 262
 -265 266 265 265 265 -62 6 c-35 4 -123 7 -197 8 l-134 1 7 69 c26 284 232
 543 504 635 201 69 404 53 596 -47 62 -32 103 -63 177 -137 83 -83 102 -108
 142 -190 63 -130 77 -193 77 -340 0 -178 -37 -298 -134 -435 -91 -126 -220
 -224 -369 -278 -72 -26 -99 -31 -218 -35 -117 -4 -146 -1 -215 17 -104 29
 -205 79 -283 142 l-63 52 -89 -89 c-49 -49 -89 -96 -89 -106 0 -24 154 -136
 253 -185 89 -44 177 -74 272 -95 84 -17 303 -15 391 5 403 91 691 371 795 772
 19 76 23 114 22 240 0 129 -4 164 -27 249 -99 377 -406 673 -778 751 -104 22
 -297 28 -385 11z"/>
 <path d="M1227 1418 c-9 -68 -7 -695 2 -770 l6 -57 240 200 c132 110 251 210
 264 223 l23 24 -257 213 c-141 118 -260 215 -264 217 -5 1 -11 -21 -14 -50z"/>
 </g>
 </svg>
  </gp-button>
  `]);return Cu=function(){return P},P}var Oo=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Cu(),"title","display")),b()(p()(v),"data",{title:"replay",display:"",replay:"->"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),C}(gn);function Ul(){var P=on()([`
  <gp-volume class="goldplay__volume-bar">
    <gp-overbox class="goldplay-hoverbox goldplay__volume-bar--handle">
      <span class="goldplay__volume-bar--precent">`,`</span>
      <span class="goldplay__volume-bar--rod `,`" title="adjust volume"></span>
      <span class="goldplay__volume-bar--size">&nbsp;</span>
      <span class="goldplay__volume-bar--column">&nbsp;</span>
    </gp-overbox>
    <gp-button class="goldplay__volume-bar--audio `,'" title="','" data-mute="','" data-volume-size="','"  data-last-volume="',`">
    `,`
    </gp-button>
  </gp-volume>
  `]);return Ul=function(){return P},P}function Tu(){var P=on()([`
<svg xmlns="http://www.w3.org/2000/svg" style="display:`,`" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">
<path d="M12.2 13.914v6.678a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2l.412-.353-2.558-2.558a.5.5 0 0 1 0-.707l.707-.707a.5.5 0 0 1 .707 0l16.849 16.849a.5.5 0 0 1 0 .707l-.707.707a.5.5 0 0 1-.707 0l-2.386-2.386a10 10 0 0 1-2.33 1.422c-.526.229-.583.284-.987.377v-2.375l.007-.003a8.332 8.332 0 0 0 1.717-1.014l-1.67-1.669a5.251 5.251 0 0 1-.054.034v-.089l-2-2zM8.373 4.96l3.002-2.572a.5.5 0 0 1 .825.38v6.019L8.373 4.959zm9.867 9.867c.48-.99.76-2.115.76-3.347 0-3.418-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48a9.954 9.954 0 0 1-1.326 4.98l-1.634-1.633zm-1.766-1.766L14.2 10.786V7.057a5.247 5.247 0 0 1 2.274 6.003z" fill="#f1f1f1"></path>
</svg>
`]);return Tu=function(){return P},P}function Mf(){var P=on()([`
<svg xmlns="http://www.w3.org/2000/svg" style="display:`,`" width="20px" height="20px" viewBox="0 0 24 24" style="margin-left: -5px;">
<path d="M5.2 7.68l6.175-5.293a.5.5 0 0 1 .825.38v17.825a.5.5 0 0 1-.825.38L5.2 15.679H3a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2.2zm9 13.35v-2.375l.007-.003C16.852 17.493 19 14.897 19 11.479s-2.148-6.014-4.793-7.173a4.11 4.11 0 0 0-.007-.003V2c.027.006.054.012.082.02.852.221 1.274.453 1.436.535A10 10 0 0 1 21.2 11.48c0 4.106-2.474 7.633-6.013 9.174-.526.229-.583.284-.987.377zm0-13.973c1.5.925 2.5 2.582 2.5 4.473 0 1.892-1 3.55-2.5 4.473V7.057z" fill="#f1f1f1"></path>
</svg>
`]);return Mf=function(){return P},P}var Bf=ot.create(Mf(),"audioOnHide"),$s=ot.create(Tu(),"audioOffHide"),Ff=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Ul(),"dataPrecent","volumeBarRodHoverCss","audioOffClass","title","dataMute","dataVolumeSize","dataLastVolume","icon|html")),b()(p()(v),"options",{}),b()(p()(v),"data",{audioONHide:"",audioOffHide:"",audioOffClass:"",dataVolumeSize:"",dataPrecent:"",dataLastVolume:"",dataMute:"",volumeBarRodHoverCss:"",icon:Bf,title:"turn off"}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){this.data.dataPrecent=Math.floor(100*this.data.dataVolumeSize),this.data.audioOffClass!==""?(this.data.dataMute="true",this.data.audioOffHide="inline-block",this.data.audioOnHide="none",this.data.icon=$s,this.data.title="turn on"):(this.data.dataMute="",this.data.audioOffHide="none",this.data.audioOnHide="inline-block",this.data.icon=Bf,this.data.title="turn off")}},{key:"initProps",value:function(){var v=this.element,x=this.options.cssName;this.INIT_VOLUME_SIZE=this.options.player.defaultVolumeSize===void 0?.5:this.options.player.defaultVolumeSize,this.$volumeBarHandle=v.querySelector("."+x.volumeBarHandle),this.$volumeBarRod=v.querySelector("."+x.volumeBarRod),this.$volumeBarAudio=v.querySelector("."+x.volumeBarAudio),this.$volumeBarSize=v.querySelector("."+x.volumeBarSize),this.$volumeBarColumn=v.querySelector("."+x.volumeBarColumn),this.volumeBarColumnHeight=this.$volumeBarColumn.offsetHeight,this.volumeBarColumnTop=this.$volumeBarColumn.offsetTop,this.volumeBarRodHeight=this.$volumeBarRod.offsetHeight,this.volumeBarRodHeightHalf=this.volumeBarRodHeight/2,this.volumeBarColumnRealTop=this.volumeBarColumnTop+this.volumeBarRodHeightHalf,this.volumeBarColumnMaxHeight=this.volumeBarColumnHeight-this.volumeBarRodHeight}},{key:"bindEvent",value:function(){var v,x=this,k=this.options.$controlBarContainer,B=this.options.cssName;Nn(k).on("mouseover","."+B.volumeBar,function(){clearTimeout(v),x.showVolumeBarHandle()}),Nn(k).on("mousewheel","."+B.volumeBarHandle,function(q){var ee=q.wheelDelta/500;ee=x.data.dataVolumeSize+ee,x.setVolumeSize(ee),q.preventDefault(),q.stopPropagation()}),Nn(k).on("click",["."+B.volumeBarColumn,"."+B.volumeBarSize],function(q){var ee=0;return q.target===x.$volumeBarColumn?ee=(x.$volumeBarColumn.offsetHeight-q.offsetY)/q.target.offsetHeight:q.target===x.$volumeBarSize&&(ee=x.$volumeBarColumn.offsetHeight-q.target.offsetHeight+q.offsetY,ee=x.$volumeBarColumn.offsetHeight-ee,ee/=x.$volumeBarColumn.offsetHeight),x.setVolumeSize(ee),!1}),Nn(k).on("click","."+B.volumeBarAudio,function(q){return x.$volumeBarAudio.classList.contains(B.volumeBarAudioOff)?x.setAudioOn(q.offsetY):x.setAudioOff(q.offsetY),!1}),Nn(k).on("mouseout","."+B.volumeBar,function(q){v=setTimeout(function(){(function(ee){var ie=x.element,me={y:ie.offsetTop+x.$volumeBarHandle.offsetTop,x:ie.offsetLeft};return me.width=ie.offsetWidth,me.height=x.$volumeBarHandle.offsetHeight,ee.pageX>me.x&&ee.pageX<me.x+me.width&&ee.pageY>me.y&&ee.pageY<me.y+me.height})(q)?clearTimeout(v):x.hideVolumeBarHandle()},ge.c.hideBarBoxTime)}),this.volumeDragEvent=wu(this.$volumeBarRod,{$container:this.element,type:"vertical",scope:{top:this.volumeBarColumnTop,right:0,bottom:this.volumeBarColumnTop+this.volumeBarColumnHeight,left:0},onStart:function(){x.data.volumeBarRodHoverCss=x.options.cssName.volumeBarRodHover},onDrag:function(q,ee){ee-=1,x.dragHandle(ee)},onRelease:function(){x.data.volumeBarRodHoverCss=""}})}},{key:"hideVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="hidden"}},{key:"showVolumeBarHandle",value:function(){this.$volumeBarHandle.style.visibility="visible"}},{key:"getVolume",value:function(){var v=(this.$volumeBarSize.offsetHeight-this.volumeBarRodHeight)/this.volumeBarColumnMaxHeight;return v=Math.min(v,1),(v=Math.max(v,0)).toFixed(2)}},{key:"setVolume",value:function(v){this.data.dataVolumeSize=Number(v),this.events.emit(se.PlayerOnVolume,v)}},{key:"initVolumeSize",value:function(){this.data.dataLastVolume=this.INIT_VOLUME_SIZE,this.setAudioOn()}},{key:"setAudioOn",value:function(){var v=this.data.dataLastVolume||0;this.setVolume(v);var x=parseFloat(v,10),k=Math.floor(x*this.volumeBarColumnMaxHeight),B=this.volumeBarColumnTop+(this.volumeBarColumnMaxHeight-k);this.$volumeBarSize.style.marginTop=B+"px",this.$volumeBarSize.style.height=k+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=B+"px",this.data.audioOffClass=""}},{key:"setAudioOff",value:function(){this.setVolume(0),this.data.audioOffClass=this.options.cssName.volumeBarAudioOff;var v=this.getVolume();v>0&&(this.data.dataLastVolume=v),this.$volumeBarSize.style.height=this.volumeBarRodHeight+"px",this.$volumeBarSize.style.marginTop=this.volumeBarColumnRealTop-this.volumeBarRodHeightHalf+this.volumeBarColumnMaxHeight+"px",this.$volumeBarRod.style.top=this.volumeBarColumnRealTop+this.volumeBarColumnMaxHeight-this.volumeBarRodHeightHalf+"px"}},{key:"dragHandle",value:function(v){this.$volumeBarSize.style.marginTop=v+1+"px",this.$volumeBarSize.style.height=this.volumeBarColumnHeight-v+this.volumeBarRodHeight+"px";var x=this.getVolume();x<=0?this.setAudioOff(v):this.data.dataMute=="true"&&this.setAudioOn(v),this.setVolume(x)}},{key:"setVolumeSize",value:function(v){if((v=v.toFixed(2))>=1?v=1:v<.001&&(v=0),v!==this.data.dataVolumeSize){this.setVolume(v);var x=this.volumeBarColumnMaxHeight,k=x-v*x+this.volumeBarColumnTop;this.$volumeBarSize.style.marginTop=k+"px",this.$volumeBarSize.style.height=v*x+this.volumeBarRodHeight+"px",this.$volumeBarRod.style.top=k+"px",v<=0?this.data.audioOffClass=this.options.cssName.volumeBarAudioOff:this.data.dataMute=="true"&&(this.data.audioOffClass="")}}}]),C}(gn);function jd(){var P=on()([`
  <gp-wait class="goldplay-tip goldplay__waiting-bar" title="`,'" data-status="',`">
    <span class="goldplay__waiting-bar--icon">
    <svg width="60px" height="60px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;opacity:0.8">
    <circle cx="50" cy="50" fill="none" stroke-linecap="round" r="40" stroke-width="8" stroke="#f6f6f6" stroke-dasharray="62.83185307179586 62.83185307179586" transform="rotate(17.8841 50 50)">
    <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="0.7s" begin="0s" repeatCount="indefinite">
    </animateTransform>
    </circle>
    </svg>
  </span>
  <gp-speed class="goldplay__waiting-bar--speed">`,`</gp-speed>
  </gp-wait>
  `]);return jd=function(){return P},P}var Zb=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(jd(),"title","status","speed")),b()(p()(v),"data",{title:"waiting",speed:"",status:"",display:"show"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"initProps",value:function(){}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.LoaderUpdateSpeed,function(x){v.data.display==="show"&&(v.data.speed=Do.formatBytes(x.speed)+" /s")})}},{key:"showWaiting",value:function(){var v=this.options.cssName,x=this.options.$screenContainer;x.querySelector("."+v.waitingBar)||x.prepend(this.element),this.data.display="show",this.show(),this.resetPosition()}},{key:"hideWaiting",value:function(){var v=this.options.cssName;this.options.$screenContainer.querySelector("."+v.waitingBar)&&(this.data.display="hide",this.data.speed="Loading...",this.hide())}}]),C}(gn);function Qg(){var P=on()([`
  <gp-alert class="goldplay-tip goldplay__alter-box" title="`,'" data-display="',`">
  <em title="close" class="goldplay__alter--close">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:none;opacity:0.6" xml:space="preserve" width="20px" height="20px" viewBox="0 0 496.158 496.158">
    <path style="fill:#ff3300;" d="M496.158,248.085c0-137.021-111.07-248.082-248.076-248.082C111.07,0.003,0,111.063,0,248.085
    c0,137.002,111.07,248.07,248.082,248.07C385.088,496.155,496.158,385.087,496.158,248.085z"/>
    <path style="fill:#FFFFFF;" d="M277.042,248.082l72.528-84.196c7.91-9.182,6.876-23.041-2.31-30.951
    c-9.172-7.904-23.032-6.876-30.947,2.306l-68.236,79.212l-68.229-79.212c-7.91-9.188-21.771-10.216-30.954-2.306
    c-9.186,7.91-10.214,21.77-2.304,30.951l72.522,84.196l-72.522,84.192c-7.91,9.182-6.882,23.041,2.304,30.951
    c4.143,3.569,9.241,5.318,14.316,5.318c6.161,0,12.294-2.586,16.638-7.624l68.229-79.212l68.236,79.212
    c4.338,5.041,10.47,7.624,16.637,7.624c5.069,0,10.168-1.749,14.311-5.318c9.186-7.91,10.22-21.77,2.31-30.951L277.042,248.082z"/>
    </svg>
  </em>
  <span class="goldplay__alter--warn">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
    width="30" height="30" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
    <path style="fill:#495A79;" d="M501.461,383.799L320.501,51.401C306.7,28.6,282.7,14.8,256,14.8s-50.7,13.8-64.501,36.601
      L10.539,383.799C-3.259,407.501-3.56,435.701,9.941,459.4c13.499,23.699,37.798,37.8,65.099,37.8h361.92
      c27.301,0,51.601-14.101,65.099-37.8C515.56,435.701,515.259,407.501,501.461,383.799z"/>
    <path style="fill:#42516D;" d="M502.059,459.4c-13.499,23.699-37.798,37.8-65.099,37.8H256V14.8c26.7,0,50.7,13.801,64.501,36.601
      L501.461,383.8C515.259,407.501,515.56,435.701,502.059,459.4z"/>
    <path style="fill:#FFDE33;" d="M475.661,399.1L294.699,66.699C286.601,52.9,271.901,44.8,256,44.8s-30.601,8.101-38.699,21.899
      L36.339,399.1c-8.399,14.101-8.399,31.199-0.298,45.3c8.099,14.399,22.798,22.8,39,22.8h361.92c16.201,0,30.901-8.401,39-22.8
      C484.06,430.299,484.06,413.201,475.661,399.1z"/>
    <path style="fill:#FFBC33;" d="M475.96,444.4c-8.099,14.399-22.798,22.8-39,22.8H256V44.8c15.901,0,30.601,8.101,38.699,21.899
      L475.661,399.1C484.06,413.201,484.06,430.299,475.96,444.4z"/>
    <g>
      <path style="fill:#495A79;" d="M256,437.2c-16.538,0-30-13.462-30-30s13.462-30,30-30s30,13.462,30,30S272.538,437.2,256,437.2z"/>
      <path style="fill:#495A79;" d="M286,317.2c0,16.538-13.462,30-30,30s-30-13.462-30-30v-150c0-16.538,13.462-30,30-30
        s30,13.462,30,30V317.2z"/>
    </g>
    <g>
      <path style="fill:#42516D;" d="M286,407.2c0-16.538-13.462-30-30-30v60C272.538,437.2,286,423.738,286,407.2z"/>
      <path style="fill:#42516D;" d="M286,317.2v-150c0-16.538-13.462-30-30-30v210C272.538,347.2,286,333.738,286,317.2z"/>
    </g>
    </svg>
  </span>
  <gp-content class="goldplay__alter--content">`,`</gp-content>
  </gp-alert>
  `]);return Qg=function(){return P},P}var Vf=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Qg(),"title","display","content|trim")),b()(p()(v),"data",{title:"alert",display:"default",content:""}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"bindEvent",value:function(){var v=this,x=this.options.$screenContainer,k=this.options.cssName;Nn(x).on("click","."+k.alertClose,function(){v.hide()})}},{key:"afterWatch",value:function(){this.data.display==="show"&&this.resetPosition()}},{key:"showBox",value:function(){var v=this.options.cssName,x=this.options.$screenContainer;x.querySelector("."+v.alertBox)||x.prepend(this.element),this.data.display="show",this.show()}},{key:"hideBox",value:function(){var v=this.options.cssName;this.options.$screenContainer.querySelector("."+v.alertBox)&&(this.data.display="hide",this.hide())}},{key:"show",value:function(){this.element.style.opacity=1,this.element.style.display="inline-block",this.resetPosition()}},{key:"hide",value:function(){this.element.style.opacity=0,this.element.style.display="none"}}]),C}(gn);function qd(){var P=on()([`
  <gp-time class="goldplay__control--timer">
  <span gid="time" class="goldplay__control--timer-play">`,`</span>
  <span gid="slash">`,`</span>
  <span gid="total-time" class="goldplay__control--timer-total">`,`</span>
  </gp-time>
  `]);return qd=function(){return P},P}var Qb=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(qd(),"time","slash","totalTime")),b()(p()(v),"data",{time:"00:00",totalTime:"",slash:"/"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"setTotalTime",value:function(v){var x=v.sourceData;this.data.totalTime=ui.formatHHMMSS(x.duration)}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.LoaderPlayListLoaded,function(x){v.setTotalTime(x.loadData)})}},{key:"updateTime",value:function(v){this.element.querySelector('[gid="time"]').innerHTML=v}},{key:"updateTotalTime",value:function(v){this.element.querySelector('[gid="total-time"]').innerHTML=v}}]),C}(gn);function Xd(){var P=on()([`
  <gp-speed class="goldplay__speed-bar" title="`,`">
  <gp-overbox class="goldplay-hoverbox goldplay__speed-bar--box">
  `,`
  </gp-overbox>
  <gp-button class="goldplay__speed-bar--link">
  `,`
  </gp-button>
  </gp-speed>
  `]);return Xd=function(){return P},P}var Jb=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Xd(),"title","speedListHTML|html","currentSpeedName")),b()(p()(v),"data",{title:"speed",currentSpeed:1,speedList:null,currentSpeedName:"",speedListHTML:""}),b()(p()(v),"options",{}),v.options=x,v.speedList=v.options.player.options.speedList||ge.c.speedList,v.updateSpeedListHTML(),Object.assign(v.data,x.data),v.init(),v.initProps(),v.showHideBar(),v}return m()(C,P),u()(C,[{key:"initProps",value:function(){var v=this.options.cssName;this.$barBox=this.element.querySelector("."+v.speedBarBox)}},{key:"bindEvent",value:function(){var v=this,x=this.options.cssName,k=this.options.$controlBarContainer;Nn(k).on("mouseover","."+x.speedBar,function(){clearTimeout(B),v.showBarBoxHandle()});var B;Nn(k).on("mouseout","."+x.speedBar,function(q){B=setTimeout(function(){(function(ee){var ie=v.element,me={y:v.$barBox.offsetTop,x:ie.offsetLeft};return me.width=ie.offsetWidth,me.height=v.$barBox.offsetHeight,ee.pageX>me.x&&ee.pageX<me.x+me.width&&ee.pageY>me.y&&ee.pageY<me.y+me.height})(q)?clearTimeout(B):v.hideBarBoxHandle()},ge.c.hideBarBoxTime)}),Nn(this.element).on("click","[gp-node-li]",function(q){var ee=q.target,ie=parseFloat(ee.getAttribute("value"),10);if(ie!==v.data.currentSpeed){v.data.currentSpeed=ie;var me=v.speedList.filter(function(Re){return Re.value===ie});v.events.emit(se.PlayerSpeedTo,me[0]),v.updateSpeedListHTML()}})}},{key:"showHideBar",value:function(){this.speedList.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var v=33+28*this.speedList.length,x=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-v+"px",this.$barBox.style.marginLeft=-x+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateSpeedListHTML",value:function(v){var x=this.speedList;if(!(x.length<=0)){v===void 0&&(v=this.data.currentSpeed);var k=x.slice(0,x.length).reverse(),B=!0,q=!1,ee=void 0;try{for(var ie,me=k[Symbol.iterator]();!(B=(ie=me.next()).done);B=!0){var Re=ie.value;Re.value===v?Re.selected=!0:delete Re.selected}}catch(Ve){q=!0,ee=Ve}finally{try{B||me.return==null||me.return()}finally{if(q)throw ee}}return this.data.speedListHTML=function(Ve){if(Ve){var wt=["<ul>"],$t=!0,Sn=!1,Cn=void 0;try{for(var Hn,Dr=Ve[Symbol.iterator]();!($t=(Hn=Dr.next()).done);$t=!0){var Ut=Hn.value,Wl="",ku="";Ut.selected&&(Wl="gp-selected",ku=" selected=".concat(Ut.selected)),wt.push(`
    <li class="`.concat(Wl,'" gp-node-li value="').concat(Ut.value,'" ').concat(ku,">").concat(Ut.name,`</li>
    `))}}catch(Xi){Sn=!0,Cn=Xi}finally{try{$t||Dr.return==null||Dr.return()}finally{if(Sn)throw Cn}}return wt.push("</ul>"),wt.join("")}}(k)}}}]),C}(gn);function Jg(){var P=on()([`
  <gp-subtitle class="goldplay__subtitle">
  </gp-subtitle>
  `]);return Jg=function(){return P},P}var Kd=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(Jg())),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),C}(gn);function Yd(){var P=on()([`
  <gp-rate class="goldplay__rate-bar" title="`,`">
  <gp-overbox class="goldplay-hoverbox goldplay__rate-bar--box">
  `,`
  </gp-overbox>
  <gp-button class="goldplay__rate-bar--link">
  `,`
  </gp-button>
  </gp-rate>
  `]);return Yd=function(){return P},P}var ex=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"rateList",[]),b()(p()(v),"defaultRate",{value:"600",name:""}),b()(p()(v),"template",v.createTemplate(Yd(),"title","rateListHTML|html","currentRateName")),b()(p()(v),"data",{title:"stream rate",currentRate:"600",currentRateName:"",rateListHTML:""}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.rateList=v.options.player.options.rateList||v.rateList,v.defaultRate=v.options.player.options.defaultRate||v.defaultRate,v.setDefaultRate(),v.updateRateListHTML(),v.init(),v.initProps(),v.showHideBar(),v}return m()(C,P),u()(C,[{key:"initProps",value:function(){var v=this.options.cssName;this.$barBox=this.element.querySelector("."+v.rateBarBox)}},{key:"setDefaultRate",value:function(){var v=this;if(!(this.rateList.length<=0)){var x=this.rateList.find(function(k){return String(k.value)===String(v.defaultRate.value)});x?(this.data.currentRateName=x.name,this.data.currentRate=x.value):(this.data.currentRateName=this.rateList[0].name,this.data.currentRate=this.rateList[0].value)}}},{key:"bindEvent",value:function(){var v=this,x=this.options.cssName,k=this.options.$controlBarContainer;Nn(k).on("mouseover","."+x.rateBar,function(){clearTimeout(B),v.showBarBoxHandle()});var B;Nn(k).on("mouseout","."+x.rateBar,function(q){B=setTimeout(function(){(function(ee){var ie=v.element,me={y:v.$barBox.offsetTop,x:ie.offsetLeft};return me.width=ie.offsetWidth,me.height=v.$barBox.offsetHeight,ee.pageX>me.x&&ee.pageX<me.x+me.width&&ee.pageY>me.y&&ee.pageY<me.y+me.height})(q)?clearTimeout(B):v.hideBarBoxHandle()},ge.c.hideBarBoxTime)}),Nn(this.element).on("click","[gp-node-li]",function(q){var ee=q.target.getAttribute("value");if(ee!==v.data.currentRate){v.data.currentRate=ee;var ie=v.rateList.filter(function(me){return me.value===ee});v.events.emit(se.PlayerChangeRate,ie[0]),v.data.currentRateName=ie[0].name,v.updateRateListHTML(),v.hideBarBoxHandle()}})}},{key:"showHideBar",value:function(){var v=this.rateList;v&&v.length<=0&&this.hide()}},{key:"resetBoxPosition",value:function(){var v=33+28*this.rateList.length,x=(this.$barBox.offsetWidth-this.element.offsetWidth)/2;this.$barBox.style.marginTop=-v+"px",this.$barBox.style.marginLeft=-x+"px"}},{key:"hideBarBoxHandle",value:function(){this.$barBox.style.visibility="hidden"}},{key:"showBarBoxHandle",value:function(){this.$barBox.style.visibility="visible"}},{key:"updateRateListHTML",value:function(v){var x=this.rateList;if(!(x.length<=0)){v===void 0&&(v=this.data.currentRate);var k=x.slice(0,x.length).reverse(),B=!0,q=!1,ee=void 0;try{for(var ie,me=k[Symbol.iterator]();!(B=(ie=me.next()).done);B=!0){var Re=ie.value;Re.value===v?Re.selected=!0:delete Re.selected}}catch(Ve){q=!0,ee=Ve}finally{try{B||me.return==null||me.return()}finally{if(q)throw ee}}return this.data.rateListHTML=function(Ve){if(Ve){var wt=["<ul>"],$t=!0,Sn=!1,Cn=void 0;try{for(var Hn,Dr=Ve[Symbol.iterator]();!($t=(Hn=Dr.next()).done);$t=!0){var Ut=Hn.value,Wl="",ku="";Ut.selected&&(Wl="gp-selected",ku=" selected=".concat(Ut.selected)),wt.push(`
    <li class="`.concat(Wl,'" gp-node-li value="').concat(Ut.value,'" ').concat(ku,">").concat(Ut.name,`</li>
    `))}}catch(Xi){Sn=!0,Cn=Xi}finally{try{$t||Dr.return==null||Dr.return()}finally{if(Sn)throw Cn}}return wt.push("</ul>"),wt.join("")}}(k)}}}]),C}(gn);function em(){var P=on()([`
  <gp-setting class="goldplay__setting-bar">
  </gp-setting>
  `]);return em=function(){return P},P}var tx=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(em())),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),C}(gn);function tm(){var P=on()([`
  <gp-button class="goldplay__control--fullpage" title="`,'" data-status="',`">
  `,`
  </gp-button>
  `]);return tm=function(){return P},P}function Zd(){var P=on()([`
<svg xmlns="http://www.w3.org/2000/svg" style="display:`,`" width="20" height="20" viewBox="0 0 24 24">
<path d="M3.5 6h17a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-17a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5zM6 9v6h12V9H6z" fill="#f1f1f1"></path>
</svg>
`]);return Zd=function(){return P},P}function nm(){var P=on()([`
<svg xmlns="http://www.w3.org/2000/svg" style="display:`,`" width="20" height="20" viewBox="0 0 24 24">
  <path d="M2.5 4h19a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-19a.5.5 0 0 1-.5-.5v-15a.5.5 0 0 1 .5-.5zM5 7v10h14V7H5z" fill="#f1f1f1"></path>
</svg>
`]);return nm=function(){return P},P}var rm=ot.create(nm(),"fullpageHide"),Qd=ot.create(Zd(),"fullpageExitHide"),nx=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"containerOriginStyle",""),b()(p()(v),"template",v.createTemplate(tm(),"title","status","icon|html")),b()(p()(v),"data",{fullpageHide:"",fullpageExitHide:"none",status:"",icon:rm,title:"fullpage"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){this.data.status==="fullpage"?(this.data.fullpageHide="none",this.data.fullpageExitHide="inline-block",this.data.title="exit fullspage",this.data.icon=Qd):(this.data.fullpageHide="inline-block",this.data.fullpageExitHide="none",this.data.title="fullpage",this.data.icon=rm)}},{key:"initProps",value:function(){var v=this.options;this.$container=this.options.$container,this.$screenContainer=v.$screenContainer,this.$controlBarContainer=this.getComponent("controlBarContainer").element,this.originWidth=v.$container.offsetWidth,this.originHeight=v.$container.offsetHeight,this.containerOriginStyle=v.$container.getAttribute("style"),this.screenContainerOrginStyle=this.$screenContainer.getAttribute("style"),this.controlContainerOrginWidth=this.$controlBarContainer.style.width}},{key:"bindEvent",value:function(){var v=this,x=this.options.cssName,k=document,B=window;Nn(this.$controlBarContainer).on("click","."+x.fullPage,function(){var q=v.data.status;v.getComponent("fullScreen").data.status==="fullscreen"&&et.exitFullscreen(),q==="fullpage"?v.exitFullPage():v.fullPage()}),this.eventsList.esckeyup=this.addEventListener(k,"keyup",function(q){q.keyCode===27&&v.data.status==="fullpage"&&v.exitFullPage()}),this.eventsList.windowresize=this.addEventListener(B,"resize",function(){if(v.data.status==="fullpage"){var q=et.getInnerWidthHeight();v.resizeTo(q.width,q.height),v.resetPosition()}})}},{key:"fullPage",value:function(){this.data.status="fullpage";var v=this.options,x=this.options.cssName,k=et.getInnerWidthHeight();this.saveOriginPosition(),v.$container.classList.add(x.containerFullPage),this.resizeTo(k.width,k.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){var v=this.getComponent("progressBar");this.posterOriginStyle=this.getComponent("poster").element.getAttribute("style"),this.originScroll={scrollX,scrollY},this.progressBarOriginLeft=v.progressBarLeft,this.progressBarOriginWidth=v.progressBarWidth,this.progressBarPlayWidthRate=v.getProgressPlayLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadWidthRate=v.getProgressLoadLeftWidth().offsetWidth/this.progressBarOriginWidth,this.progressBarLoadLeftRate=(v.getProgressLoadLeftWidth().offsetLeft-this.progressBarOriginLeft)/this.progressBarOriginWidth}},{key:"setProgressBarPosition",value:function(){var v=this.getComponent("progressBar"),x=v.progressBarWidth,k=v.progressBarLeft,B=x*this.progressBarPlayWidthRate,q=x*this.progressBarLoadWidthRate,ee=x*this.progressBarLoadLeftRate;v.setProgressPosition(B),v.setProgressLoadLeftWidth(ee+k,q),this.getComponent("progressBar").clearDragDotTop()}},{key:"resizeTo",value:function(v,x){var k=this.options,B=k.player,q=B.controlBarAutoHide?x:x-B.controlBarHeight;B.$screenContainer.style.width=v+"px",B.$screenContainer.style.height=q+"px",k.$container.style.width=v+"px",k.$container.style.height=x+"px"}},{key:"resetPosition",value:function(){var v=this.options;this.setProgressBarPosition(),v.player.resizeScreen(),this.getComponent("bigPlayButton").resetPosition(),this.getComponent("poster").resetPosition(),this.getComponent("waitingBar").resetPosition(),this.getComponent("controlBarContainer").resetPosition()}},{key:"exitFullPage",value:function(){this.data.status="exitfullpage";var v=this.options.cssName;this.saveOriginPosition(),this.$container.classList.remove(v.containerFullPage),this.resetScreen()}},{key:"resetScreen",value:function(){this.$container.setAttribute("style",this.containerOriginStyle),this.$screenContainer.setAttribute("style",this.screenContainerOrginStyle),this.$controlBarContainer.style.width=this.controlContainerOrginWidth,this.getComponent("poster").element.setAttribute("style",this.posterOriginStyle),scrollTo(this.originScroll.scrollX,this.originScroll.scrollY),this.resetPosition()}}]),C}(gn);function im(){var P=on()([`
  <gp-button class="goldplay__control--fullscreen" title="`,'" data-status="',`">
  `,`
  </gp-button>
  `]);return im=function(){return P},P}var am=`
<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreen" style="display:\${'fullscreenHide'}" width="20" height="20" viewBox="0 0 24 24">
<path d="M15 5.057V2h6.5a.5.5 0 0 1 .5.5V9h-2.943V5.057H15zm-6 0H5.057V9H2V2.5a.5.5 0 0 1 .5-.5H9v3.057zM15 22v-2.943h4.057V15H22v6.5a.5.5 0 0 1-.5.5H15zm-6 0H2.5a.5.5 0 0 1-.5-.5V15h3.057v4.057H9V22z" fill="#f1f1f1"></path>
</svg>
`,zf=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(im(),"title","status","icon|html")),b()(p()(v),"data",{fullscreenHide:"inline-block",fullscreenExitHide:"none",status:"",icon:am,title:"fullscreen"}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){this.data.status==="fullscreen"?(this.data.fullscreenHide="none",this.data.fullscreenExitHide="inline-block",this.data.title="exit fullscreen",this.data.icon=`
<svg xmlns="http://www.w3.org/2000/svg" gid="fullscreenExit" style="display:\${'fullscreenExitHide'}"  width="20" height="20" viewBox="0 0 24 24">
<path d="M22 5.943V9h-6.5a.5.5 0 0 1-.5-.5V2h2.943v3.943H22zm-20 0h3.943V2H9v6.5a.5.5 0 0 1-.5.5H2V5.943zM22 15v2.943h-4.057V22H15v-6.5a.5.5 0 0 1 .5-.5H22zM2 15h6.5a.5.5 0 0 1 .5.5V22H5.943v-4.057H2V15z" fill="#f1f1f1"></path>
</svg>
`):(this.data.fullscreenHide="inline-block",this.data.fullscreenExitHide="none",this.data.title="fullscreen",this.data.icon=am)}},{key:"initProps",value:function(){this.getComponent("fullPage").initProps.call(this)}},{key:"bindEvent",value:function(){var v=this,x=this.options.$container,k=this.options.cssName,B=document,q=window;this.eventsList.fullscreenchange=this.addEventListener(B,"fullscreenchange",function(){if(document.fullscreenElement||document.webkitFullscreenElement)v.fullScreen();else{var ee=v.getComponent("fullPage");ee.data.status==="fullpage"?(x.classList.remove(k.containerFullScreen),v.data.status="exitfullscreen",ee.fullPage()):v.exitFullScreen()}}),this.eventsList.windowresize=this.addEventListener(q,"resize",function(){document.fullscreenElement&&(v.resizeTo(screen.width,screen.height-(window.outerHeight-window.innerHeight)),v.resetPosition())}),Nn(this.$controlBarContainer).on("click","."+k.fullScreen,function(){var ee=v.data.status;v.saveOriginPosition(),ee==="fullscreen"?et.exitFullscreen():et.Fullscreen()})}},{key:"fullScreen",value:function(){this.data.status="fullscreen";var v=this.options,x=this.options.cssName,k={width:screen.width,height:screen.height-(outerHeight-innerHeight)};et.isSafari()&&(k.height=k.height+38),v.$container.classList.add(x.containerFullScreen),this.resizeTo(k.width,k.height),this.resetPosition(),scrollTo(0,0)}},{key:"saveOriginPosition",value:function(){this.getComponent("fullPage").saveOriginPosition.call(this)}},{key:"resizeTo",value:function(v,x){this.getComponent("fullPage").resizeTo.call(this,v,x)}},{key:"resetPosition",value:function(){this.getComponent("fullPage").resetPosition.call(this)}},{key:"setProgressBarPosition",value:function(){this.getComponent("fullPage").setProgressBarPosition.call(this)}},{key:"exitFullScreen",value:function(){this.data.status="exitfullscreen";var v=this.options.cssName;this.saveOriginPosition(),this.options.$container.classList.remove(v.containerFullScreen),this.resetScreen(),this.saveOriginPosition()}},{key:"resetScreen",value:function(){this.getComponent("fullPage").resetScreen.call(this)}}]),C}(gn);function om(){var P=on()([`
  <gp-button class="goldplay__screen--bigplay" title="`,'" data-status="',`">
  `,`
  </gp-button>
  `]);return om=function(){return P},P}function sm(){var P=on()([`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
width="`,'" height="','" viewBox="0 0 438.533 438.533" style="',`" xml:space="preserve">
<g>
<path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0
 c-39.781,0-76.466,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267
 s9.804,76.463,29.407,110.062c19.607,33.585,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407
 s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.599,29.403-70.287,29.403-110.062
 C438.533,179.489,428.732,142.795,409.133,109.203z M328.904,234.966L173.588,326.33c-2.856,1.711-5.902,2.567-9.136,2.567
 c-3.045,0-6.09-0.764-9.135-2.286c-6.09-3.614-9.136-8.939-9.136-15.985V127.907c0-7.041,3.046-12.371,9.136-15.987
 c6.28-3.427,12.369-3.333,18.271,0.284l155.316,91.36c6.088,3.424,9.134,8.663,9.134,15.703
 C338.038,226.308,334.992,231.537,328.904,234.966z" fill="`,`">
</g>
</svg>
`]);return sm=function(){return P},P}var rx=ot.create(sm(),"width","height","iconStyle","fillColor"),um=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"template",v.createTemplate(om(),"title","status","icon|html")),b()(p()(v),"data",{titie:"click to play",iconStyle:"opacity:0.5",display:"hide",status:"",width:100,height:100,fillColor:"#999",icon:rx}),b()(p()(v),"options",{}),v.options=x,Object.assign(v.data,x.data),v.init(),v}return m()(C,P),u()(C,[{key:"watch",value:function(){if(this.data.display==="show"){var v=(this.element.parentNode.offsetHeight-this.data.height)/2;this.data.iconStyle="opacity:0.7;margin-top:".concat(v,"px")}}},{key:"resetPosition",value:function(){if(this.data.display==="show"){var v=this.element.parentNode,x=v.offsetWidth,k=v.offsetHeight;this.options.player.controlBarAutoHide===!0&&(k-=this.options.player.controlBarHeight);var B=v.offsetTop,q=v.offsetLeft;this.element.style.width=x+"px",this.element.style.height=k+"px",this.element.style.top=B+"px",this.element.style.left=q+"px"}}},{key:"bindEvent",value:function(){var v=this,x=this.options.$screenContainer,k=this.options.cssName;Nn(x).on("click","."+k.bigPlayButton,function(){v.events.emit(se.PlayerOnPlay,v),v.events.emit(se.ControlBarPlay,v),v.hide()}),Nn(x).on("mouseover","."+k.bigPlayButton,function(){v.data.fillColor=v.options.bigPlayButtonColor||"#fff"}),Nn(x).on("mouseout","."+k.bigPlayButton,function(B){var q=v.element,ee={y:q.offsetTop,x:q.offsetLeft};ee.width=q.offsetWidth,ee.height=q.offsetHeight,B.pageX>ee.x&&B.pageX<ee.x+ee.width&&B.pageY>ee.y&&B.pageY<ee.y+ee.height||(v.data.fillColor="#999")})}},{key:"show",value:function(){var v=this;this.data.display!=="show"&&(this.data.display="show",this.element.style.opacity="1",setTimeout(function(){v.element.style.display="inline-block"},1))}},{key:"hide",value:function(){this.data.display!=="hide"&&(this.element.style.opacity="0",this.data.display="hide",this.element.style.display="none")}}]),C}(gn),Jd=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),(v=c()(this,h()(C).call(this,x))).options=Object.assign(v.options,x),v.componentsController=v.options.componentsController,v.init(),v}return m()(C,P),u()(C,[{key:"render",value:function(){var v=this,x=G.createEl("gp-button-block");x.classList.add("goldplay__control--button-block"),C.componentList.forEach(function(k){var B=v.componentsController.getComponent(k);x.appendChild(B.element)}),this.element=x}}],[{key:"addCustomControl",value:function(v){C.componentList.push(v)}}]),C}(gn);b()(Jd,"componentList",["playButton","pauseButton","replayButton"]);var S=Jd,R=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),(v=c()(this,h()(C).call(this,x))).options=Object.assign(v.options,x),v.componentsController=v.options.componentsController,v.init(),v}return m()(C,P),u()(C,[{key:"render",value:function(){var v=this,x=G.createEl("gp-control-sidebar");x.classList.add("goldplay__control--sidebar"),C.componentList.forEach(function(k){var B=v.componentsController.getComponent(k);x.appendChild(B.element)}),this.element=x}}],[{key:"addCustomControl",value:function(v,x){(x<0||x>C.componentList.length)&&(x=C.componentList.length),C.componentList.splice(x,0,v)}}]),C}(gn);b()(R,"componentList",["speedBar","rateBar","volumeBar","fullPage","fullScreen"]);var O=R,j=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),(v=c()(this,h()(C).call(this,x))).options=Object.assign(v.options,x),v.componentsController=v.options.componentsController,v.init(),v}return m()(C,P),u()(C,[{key:"render",value:function(){var v=this,x=G.createEl("gp-control-nearside");x.classList.add("goldplay__control--button-block"),C.componentList.forEach(function(k){var B=v.componentsController.getComponent(k);x.appendChild(B.element)}),this.element=x}}],[{key:"addCustomControl",value:function(v,x){(x<0||x>C.componentList.length)&&(x=C.componentList.length),C.componentList.splice(x,0,v)}}]),C}(gn);b()(j,"componentList",["playControl","timer"]);var re=j,oe={BaseComponent:gn,controlBarContainer:Nf,bigPlayButton:um,poster:Df,progressBar:No,playButton:Gd,pauseButton:zl,replayButton:Oo,volumeBar:Ff,waitingBar:Zb,alertBox:Vf,timer:Qb,speedBar:Jb,subtitle:Kd,rateBar:ex,settingBar:tx,fullPage:nx,fullScreen:zf,playControl:S,sideControlBar:O,nearControlBar:re},ue=ve,pe=function(P){return P.substr(0,1).toUpperCase()+P.substr(1)},Se=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"allComponents",{}),b()(p()(v),"controlBarController",null),b()(p()(v),"options",{cssName:ue}),v.options=Object.assign(v.options,x),v.options.componentsController=p()(v),v.initComponents(),v.$container=v.options.$container,v.$screenContainer=v.options.$screenContainer,v.$canvas=v.options.$canvas,v.$audioContainer=v.options.$audioContainer,v.$audio=v.options.$audio,v.options.$controlBarContainer=v.controlBarContainer.element,v.bindEvent(),v}return m()(C,P),u()(C,[{key:"run",value:function(){for(var v in this.controlBarController.run(),oe)this[v]&&typeof this[v].registerMethod=="function"&&this[v].registerMethod()}},{key:"initComponents",value:function(){for(var v in oe){var x=oe[v];this.allComponents[v]||this.createComponent(x,v)}}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.PlayerLoadedMetaData,function(){v.poster.hide()}),this.events.on(se.AudioPlayerPlayFail,function(){v.drawBigPlayButton(),v.getComponent("poster").hide(),v.events.emit(se.PlayerOnPause,v),v.events.emit(se.ControlBarPause,v)}),this.bindAlertBoxEvent(),this.bindWaitingBarEvent()}},{key:"bindWaitingBarEvent",value:function(){this.waitingBar.initProps(),this.waitingBar.bindEvent()}},{key:"drawBigPlayButton",value:function(){this.$screenContainer.prepend(this.bigPlayButton.element),this.bigPlayButton.show(),this.bigPlayButton.bindEvent(),this.bigPlayButton.resetPosition()}},{key:"setControlBarController",value:function(v){this.controlBarController=v}},{key:"getControlBarController",value:function(){return this.controlBarController||this.options.player.controlBarContainer}},{key:"bindAlertBoxEvent",value:function(){this.alertBox.initProps(),this.alertBox.bindEvent()}},{key:"drawPoster",value:function(){this.$screenContainer.prepend(this.poster.element),this.poster.data.display="show",this.poster.bindEvent(),this.poster.resetPosition()}},{key:"createComponent",value:function(v,x){var k=pe(x);this["set"+k](new v(this.options)),this[x]=this["get"+k](),this.allComponents[x]||(this.allComponents[x]=this[x])}},{key:"getComponent",value:function(v){return this.allComponents[v]||oe[v]&&this.createComponent(oe[v],v),this.allComponents[v]}},{key:"resetAllComponents",value:function(){var v=this,x=Object.getOwnPropertyNames(this),k={};x.forEach(function(B){oe[B]&&(k[B]=v[B])}),this.allComponents=k}},{key:"getAllComponents",value:function(){return this.allComponents}}]),C}(X);for(var Fe in Se.addComponet=function(P){var C=pe(P);Se.prototype["set"+C]=function(v){this[P]=v},Se.prototype["get"+C]=function(){return this[P]}},oe)Se.addComponet(Fe);var Ge=Se,gt=ve,ct=function(P){function C(){var v,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o()(this,C),v=c()(this,h()(C).call(this,x)),b()(p()(v),"player",null),b()(p()(v),"loadData",null),b()(p()(v),"options",{cssName:gt}),v.options=Object.assign(v.options,x),v.player=v.options.player,v.loadData=v.player.loadData,v.componentsController=v.player.componentsController,v.$screenContainer=v.player.$screenContainer,v.initComponents(),v}return m()(C,P),u()(C,[{key:"initComponents",value:function(){var v=this.componentsController;Object.assign(this,v.getAllComponents()),this.container=this.controlBarContainer}},{key:"run",value:function(){this.timer.setTotalTime(this.loadData),this.drawLayout(),this.bindEvent(),this.player.autoPlay?this.events.emit(se.ControlBarPlay):this.events.emit(se.ControlBarPause)}},{key:"bindEvent",value:function(){this.bindContainerEvent(),this.bindTimerEvent(),this.bindPlayEvent(),this.bindProgressEvent(),this.bindSpeedEvent(),this.bindRateEvent(),this.bindVolumeEvent(),this.bindFullPage(),this.bindFullScreen()}},{key:"bindContainerEvent",value:function(){this.container.initProps(),this.container.bindEvent()}},{key:"bindTimerEvent",value:function(){this.timer.initProps(),this.timer.bindEvent()}},{key:"bindSpeedEvent",value:function(){this.speedBar.bindEvent(),this.speedBar.resetBoxPosition()}},{key:"bindRateEvent",value:function(){this.rateBar.bindEvent(),this.rateBar.resetBoxPosition()}},{key:"bindFullPage",value:function(){this.fullPage.initProps(),this.fullPage.bindEvent()}},{key:"bindFullScreen",value:function(){this.fullScreen.initProps(),this.fullScreen.bindEvent()}},{key:"bindPlayEvent",value:function(){var v=this;this.events.on(se.ControlBarPlay,function(){v.pauseButton.data.status!=="pause"&&(v.pauseButton.data.status="pause"),v.replayButton.hide(),v.playButton.hide(),v.pauseButton.show(),v.bigPlayButton.hide()}),this.events.on(se.ControlBarPause,function(){v.player.status!=="pause"&&(v.pauseButton.data.status="pause"),v.playButton.show(),v.pauseButton.hide()}),this.events.on(se.PlayerEnd,function(){v.replayButton.show(),v.pauseButton.hide(),v.playButton.hide()}),[se.PlayerWait,se.PlayerSeeking,se.PlayerReset,se.PlayerChangeRate,se.PlayerChangeSrc].forEach(function(x){v.events.on(x,function(){v.waitingBar.showWaiting()})}),this.events.on(se.PlayerSeekEnd,function(){v.waitingBar.hideWaiting()}),this.events.on(se.PlayerPlay,function(){v.waitingBar.hideWaiting(),v.events.emit(se.ControlBarPlay,v)}),this.events.on(se.PlayerPause,function(){v.events.emit(se.ControlBarPause,v)}),this.events.on(se.PlayerPlaying,function(){v.waitingBar.hideWaiting()}),this.events.on(se.PlayerOnSeek,function(x){x<1e3*v.loadData.sourceData.duration&&v.events.emit(se.ControlBarPauseLoading)}),this.events.on(se.ControlBarPauseLoading,function(){v.pauseButton.data.status!=="pauseloading"&&(v.pauseButton.data.status="pauseloading"),v.replayButton.hide(),v.playButton.hide(),v.pauseButton.show()}),Nn(this.options.$container).on("click","."+gt.playButton,function(){v.player.status!=="play"&&v.events.emit(se.PlayerOnPlay,v)}),Nn(this.options.$container).on("click","."+gt.pauseButton,function(){v.player.status!=="pause"&&v.events.emit(se.PlayerOnPause,v)}),Nn(this.options.$container).on("click","."+gt.replayButton,function(){v.events.emit(se.PlayerOnSeek,v.player.startTime)})}},{key:"bindProgressEvent",value:function(){this.progressBar.initProps(),this.progressBar.bindEvent()}},{key:"bindVolumeEvent",value:function(){this.volumeBar.initProps(),this.volumeBar.initVolumeSize(),this.volumeBar.bindEvent()}},{key:"drawLayout",value:function(){var v=this.options.$container,x=this.container.element;v.append(x)}},{key:"destroy",value:function(){this.removeEventListenerGlobal(),this.container.destroy()}},{key:"removeEventListenerGlobal",value:function(){this.progressBar.progressDragEvent&&this.progressBar.progressDragEvent.removeEventListenerAll(),this.volumeBar.volumeDragEvent&&this.volumeBar.volumeDragEvent.removeEventListenerAll(),this.fullPage.removeEventListenerAll(),this.fullScreen.removeEventListenerAll()}}]),C}(X),Qe=i(44),_t=i.n(Qe),Dt=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"isLast",!1),x.type=v.type,x.libPath=v.libPath,x.player=v.player,x.init(),x}return m()(C,P),u()(C,[{key:"init",value:function(){this.type=="ts"&&this.initNornalWorker(),this.bindEvent(),this.loadjs()}},{key:"initNornalWorker",value:function(){this.processor=this.initWorker()}},{key:"initWorker",value:function(){var v=this,x=_t()(128);return x.onmessage=function(k){var B=k.data,q=B.type,ee=B.data;switch(q){case"dataProcessorReady":v.onDataProcessorReady();break;case"decoded":v.onDecoded(ee);break;case"demuxedAAC":v.onDemuxedAAC(ee);break;case"partEnd":v.onPartEnd(ee);break;case"resetEnd":v.onResetEnd();break;case"maxPTS":v.onMaxPTS(ee);break;case"flushEnd":v.onFlushEnd(ee)}},x}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.DemuxStartDemux,this.onStartDemux.bind(this)),this.events.on(se.DemuxLast,function(){v.isLast=!0}),this.events.on(se.DecodeFlush,function(){v.flush()})}},{key:"flush",value:function(){this.processor.postMessage({type:"flush"})}},{key:"loadjs",value:function(){this.processor.postMessage({type:"loadwasm",libPath:this.libPath})}},{key:"reset",value:function(){this.isLast=!1,this.processor.terminate(),this.initNornalWorker(),this.loadjs()}},{key:"onFlushEnd",value:function(v){this.events.emit(se.DecodeFlushEnd,v)}},{key:"onMaxPTS",value:function(v){this.events.emit(se.PlayerMaxPTS,v.maxAudioPTS,v.maxVideoPTS)}},{key:"onDemuxedAAC",value:function(v){this.events.emit(se.DemuxAAC,v)}},{key:"onDataProcessorReady",value:function(){this.player.seeking||this.player.reseting?this.events.emit(se.ProcessorResetEnd):this.events.emit(se.DataProcessorReady)}},{key:"onStartDemux",value:function(v){this.player.reseting||(this.logger.info("onStartDemux","postMessage to demux"),v&&v.arrayBuffer?this.processor.postMessage({type:"startDemux",data:v.arrayBuffer,isLast:this.isLast},[v.arrayBuffer.buffer]):this.logger.error("onStartDemux","data is null","data:",v))}},{key:"onDecoded",value:function(v){this.player.reseting||this.events.emit(se.DecodeDecoded,v)}},{key:"onPartEnd",value:function(v){this.events.emit(se.DecodeApppendEnd,v)}},{key:"onResetEnd",value:function(){this.events.emit(se.ProcessorResetEnd)}},{key:"destroy",value:function(){this.processor&&this.processor.terminate()}}]),C}(le),An=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"currentIndex",null),b()(p()(x),"retryTime",0),b()(p()(x),"dataReady",{audioReady:!1,imageReady:!1}),b()(p()(x),"hasInit",!1),b()(p()(x),"loadDataStatus","loading"),b()(p()(x),"duration",0),b()(p()(x),"tsNumber",0),x.loadData=v.loadData,x.imagePlayer=v.imagePlayer,x.audioPlayer=v.audioPlayer,x.player=v.player,x.bindEvent(),x}return m()(C,P),u()(C,[{key:"bindEvent",value:function(){var v=this;this.events.on(se.LoadDataRead,function(x){v.onRead(x)}),this.events.on(se.DemuxVideo,function(x,k){v.onVideoDemuxed(x,k)}),this.events.on(se.DemuxAAC,function(x){v.onAACDemuxed(x)}),this.events.on(se.DecodeDecoded,function(x){v.onDecoded(x)}),this.events.on(se.DecodeApppendEnd,function(x){v.onAppendEnd(x)}),this.events.on(se.ImagePlayerReady,function(){v.logger.info("bindevent","Events.ImagePlayerReady"),v.checkDataReady("imageReady")}),this.events.on(se.AudioPlayerDataReady,function(){v.logger.info("bindevent","Events.AudioPlayerDataReady"),v.player.receiveAACTime=null,v.checkDataReady("audioReady")}),this.events.on(se.AudioPlayerWait,function(){v.dataReady.audioReady=!1,v.events.emit(se.PlayerWait,"audioPlayer")}),this.events.on(se.ImagePlayerWait,function(){v.dataReady.imageReady=!1,v.events.emit(se.PlayerWait,"imagePlayer")}),this.events.on(se.ImagePlayerEnd,function(){v.logger.info("bindevent","........imageplayer end"),v.events.emit(se.PlayerEnd)}),this.events.on(se.PlayerWait,function(){v.logger.warn("player status wait"),v.player.status="wait",v.loadDataStatus==="loadend"&&(v.loadDataStatus="loading",v.loadNext())}),this.events.on(se.PlayerLoadNext,function(){v.loadDataStatus==="loadend"&&(v.loadDataStatus="loading",v.loadNext())}),this.events.on(se.DecodeFlushEnd,function(x){v.logger.info("flushend>>>>>>>>>>>>>>>",x),v.imagePlayer.maxPTS=x})}},{key:"checkDataReady",value:function(v){var x=this.dataReady;x[v]=!0;for(var k=Object.keys(x),B=0,q=0;q<k.length&&x[k[q]];q++)B++;B==k.length&&this.events.emit(se.StreamDataReady)}},{key:"setBaseInfo",value:function(v){this.duration=v.duration,this.tsNumber=v.tsNumber}},{key:"reset",value:function(){this.dataReady={audioReady:!1,imageReady:!1},this.currentIndex=null,this.loadDataStatus="loading"}},{key:"startLoad",value:function(v){this.logger.info("startLoad","index:",v),this.currentIndex=v,this.player.currentIndex=v,this.events.emit(se.LoadDataReadBufferByNo,v)}},{key:"loadNext",value:function(){this.player.reseting||(this.currentIndex>=this.tsNumber?this.logger.info("loadNext","load end","currentIndex",this.currentIndex,"tsNumber:",this.tsNumber):(this.currentIndex+=1,this.player.currentIndex=this.currentIndex,this.logger.info("loadNext","load next ts","tsno:",this.currentIndex),this.events.emit(se.LoadDataReadBufferByNo,this.currentIndex)))}},{key:"onDecoded",value:function(v){var x=this;v.forEach(function(k){x.player.reseting||k.pts>=x.player.currentTime&&x.imagePlayer.push(k)})}},{key:"onAppendEnd",value:function(v){return v?(this.logger.info("onAppendEnd","events.decodeFlush",v),void this.events.emit(se.DecodeFlush)):(this.logger.info("onAppendEnd","start load next ts condition",this.checkBuffer(),this.currentIndex),this.checkBuffer()&&this.currentIndex!==null?(this.logger.info("onAppendEnd","load next ts. currentIndex:",this.currentIndex),void this.loadNext()):(this.loadDataStatus="loadend",void this.logger.info("onAppendEnd","load ts stop")))}},{key:"onAACDemuxed",value:function(v){var x=this;this.player.reseting||v.forEach(function(k){(k.PTS>=x.player.currentTime||k.audioEnd)&&(!x.player.receiveAACTime&&x.player.seeking&&(x.player.receiveAACTime=Date.now()),x.audioPlayer.send(k))})}},{key:"onVideoDemuxed",value:function(v){this.player.reseting||this.events.emit(se.DecodeStartDecode,v)}},{key:"checkBuffer",value:function(){var v=this.player,x=v.currentTime;return!((v.buffer()[1]||0)-x>=v.maxBufferLength)}},{key:"onRead",value:function(v){this.player.reseting?console.error("onRead reseting"):v&&v.arrayBuffer&&v.no===this.currentIndex?(this.retryTime=0,this.logger.warn("onRead","get stream data"),v.no===this.tsNumber&&(this.logger.info("onRead","the last ts"),this.events.emit(se.DemuxLast)),this.events.emit(se.DemuxStartDemux,v)):this.logger.error("onRead","load ts failred","tsno:",this.currentIndex)}}]),C}(le),wn=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"maxBufferLength",0),b()(p()(x),"duration",0),b()(p()(x),"pool",[]),b()(p()(x),"start",0),b()(p()(x),"end",0),b()(p()(x),"offset",0),b()(p()(x),"fps",25),x.maxBufferLength=v.maxBufferLength,x}return m()(C,P),u()(C,[{key:"push",value:function(v){var x=this.pool,k=x.length;k===0&&(this.offset=v.pts,this.start=v.pts,this.fps=v.fps);var B=this.insertSort(x,v);x[B-1]&&(x[B-1].duration=x[B].pts-x[B-1].pts),x[B+1]&&(x[B].duration=x[B+1].pts-x[B].pts),this.end=this.pool[k].pts+this.pool[k].duration,this.duration=this.end-this.start}},{key:"insertSort",value:function(v,x){var k=v.length;if(k===0)return v.push(x),0;for(var B=0;B<k;B++)if(x.pts<v[B].pts){for(var q=k;q>B;)v[q]=v[q-1],q--;return v[B]=x,B}return v.push(x),v.length-1}},{key:"reset",value:function(){this.duration=0,this.pool=[],this.start=0,this.end=0,this.offset=0}},{key:"findByIndex",value:function(v){var x=this.buffer.length;return v<x?(this.currentIndex=v,this.buffer[v]):(this.logger.error("input index ".concat(v,"is not found, current maxIndex is ").concat(x-1)),null)}},{key:"find",value:function(v){var x=this.pool,k=x.length;if(this.isBuffered(v)&&k!==0){var B=this.findIndex(v);if(B!==-1){var q=x[B];return this.checkBuffer(v),q}}}},{key:"findIndex",value:function(v){return this.pool.findIndex(function(x){var k=parseInt(x.pts);return v>=k&&v<k+x.duration})}},{key:"isBuffered",value:function(v){return v>=this.start&&v<this.end}},{key:"checkBuffer",value:function(v){if(this.duration>this.maxBufferLength){if(v>this.start){var x=this.findIndex(v),k=this.pool.splice(0,x);k.forEach(function(B){}),k=null,this.start=this.pool[0].pts,this.duration=this.end-this.start}return!1}return this.events.emit(se.PlayerLoadNext),!0}},{key:"buffer",value:function(){return{start:this.start,end:this.end}}}]),C}(le),dr=i(72),wi=i.n(dr),Wr=i(60),qt=i.n(Wr),pr=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this)),b()(p()(x),"canvas",null),x.setCanvas(v.canvas),x.setRender(),x}return m()(C,P),u()(C,[{key:"setCanvas",value:function(v){this.canvas=v}},{key:"setRender",value:function(v){this.render=wi.a.attach(v||this.canvas)}},{key:"clear",value:function(){this.render.clear()}},{key:"drawFrame",value:function(v){var x,k,B,q,ee,ie=Date.now(),me=v.buf_y,Re=v.buf_u,Ve=v.buf_v,wt=v.width,$t=v.height,Sn=wt/2,Cn=$t/2;x={bytes:me,stride:v.stride_y},k={bytes:Re,stride:v.stride_u},B={bytes:Ve,stride:v.stride_v},q=qt.a.format({width:wt,height:$t,chromaWidth:Sn,chromaHeight:Cn}),ee=qt.a.frame(q,x,k,B),this.render.drawFrame(ee);var Hn=Date.now();Hn-ie>10&&this.logger.warn("drawFrame","reandertime:",Hn-ie)}}]),C}(le),Lo=function(P){function C(v){var x;return o()(this,C),x=c()(this,h()(C).call(this,v)),b()(p()(x),"status","pause"),b()(p()(x),"_currentTime",0),b()(p()(x),"maxPTS",null),b()(p()(x),"ready",!1),b()(p()(x),"firstRender",!1),x.imageData=new wn({events:v.events,maxBufferLength:v.maxBufferLength}),x.screen=new pr({canvas:v.canvas}),x.playHandler=null,x.player=v.player,x.debug=v.debug||!1,x}return m()(C,P),u()(C,[{key:"setScreenRender",value:function(v){this.screen.setCanvas(v),this.screen.setRender(v)}},{key:"clear",value:function(){this.screen.clear()}},{key:"play",value:function(v){this.status!=="play"&&(this.status="play",this.render(v))}},{key:"pause",value:function(){this.status!=="pause"&&(this.status="pause",clearTimeout(this.playHandler),this.playHandler=null)}},{key:"checkBuffer",value:function(){return this.imageData.checkBuffer(this.currentTime)}},{key:"push",value:function(v){this.player.reseting||(this.imageData.push(v),this.end-this.player.currentTime>ge.d.READYBUFFERLENGTH&&!this.ready&&(this.ready=!0,this.status="ready",this.events.emit(se.ImagePlayerReady)),this.events.emit(se.ImagePlayerBuffeUpdate))}},{key:"find",value:function(v){return this.imageData.find(v)}},{key:"buffer",value:function(){return this.imageData.buffer()}},{key:"isBuffered",value:function(v){return this.imageData.isBuffered(v)}},{key:"render",value:function(v){if(!(v<this.imageData.offset)){var x=this.find(v);return x?(this.firstRender||(this.firstRender=!0,this.events.emit(se.PlayerLoadedMetaData,x.width,x.height)),this.screen.drawFrame(x),this.currentTime=x.pts,this.events.emit(se.ImagePlayerRenderEnd,v),x):this.maxPTS&&v>=this.maxPTS+this.fragDuration?(this.status="end",void this.events.emit(se.ImagePlayerEnd,this.maxPTS)):(this.logger.warn("Events.ImagePlayerWait",v,this.start,this.end,this.maxPTS),this.logger.warn("render","not yuv data"),this.status="wait",this.ready=!1,this.events.emit(se.ImagePlayerWait,"image","this"),!1)}}},{key:"reset",value:function(){this.status="pause",this.ready=!1,this.imageData.reset(),this.maxPTS=null,this.currentTime=0}},{key:"currentTime",set:function(v){this._currentTime=v},get:function(){return this._currentTime}},{key:"offset",get:function(){return this.imageData.offset}},{key:"fragDuration",get:function(){return Math.ceil(1e3/this.imageData.fps)}},{key:"start",get:function(){return this.imageData.start}},{key:"end",get:function(){return this.imageData.end}},{key:"duration",get:function(){return this.imageData.duration}}]),C}(le),ix=function(P){function C(v){var x,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o()(this,C),x=c()(this,h()(C).call(this)),b()(p()(x),"mode",ge.c.mode),b()(p()(x),"$container",null),b()(p()(x),"componentsController",null),b()(p()(x),"controlBarController",null),b()(p()(x),"controlBarHeight",50),b()(p()(x),"alertError",null),b()(p()(x),"dataController",null),b()(p()(x),"demuxer",null),b()(p()(x),"decoder",null),b()(p()(x),"preload",!0),b()(p()(x),"startTime",0),b()(p()(x),"screenWidth",null),b()(p()(x),"screenHeight",null),b()(p()(x),"options",{}),Uf.set(p()(x),{writable:!0,value:ge.c.libPath}),b()(p()(x),"readyStatus",{dataProcessor:!1,firstData:!1,audioPlayer:!1}),b()(p()(x),"reseting",!1),ep.set(p()(x),{writable:!0,value:0}),tp.set(p()(x),{writable:!0,value:!1}),np.set(p()(x),{writable:!0,value:1}),Eu.set(p()(x),{writable:!0,value:!1}),b()(p()(x),"maxBufferLength",ge.d.MAXBUFFERLENGTH),b()(p()(x),"seekSegmentNo",-1),b()(p()(x),"status","init"),b()(p()(x),"loader",null),b()(p()(x),"currentIndex",null),b()(p()(x),"startIndex",1),b()(p()(x),"loadData",null),b()(p()(x),"paused",!1),b()(p()(x),"autoPlay",!0),b()(p()(x),"duration",0),b()(p()(x),"tsNumber",0),v||x.logger.error("Please pass in a dom object as the display container"),x.el=v,Object.assign(x.options,k),x.options.sourceURL=x.options.sourceURL||x.options.source,x.options.streamList=x.options.streamList||[],x.options.events=D(),x.maxBufferLength=k.maxBufferLength!==void 0?k.maxBufferLength:x.maxBufferLength,x.autoPlay=k.autoPlay!==void 0?k.autoPlay:x.autoPlay,x.controlBarAutoHide=k.controlBarAutoHide!==void 0?k.controlBarAutoHide:x.controlBarAutoHide,E()(p()(x),Uf,k.libPath!==void 0?k.libPath:w()(p()(x),Uf)),x.preload=k.preload===void 0?x.preload:k.preload,x.startTime=k.startTime===void 0?x.startTime:k.startTime,x.originStartTime=x.startTime,x.playbackRate=k.playbackRate===void 0?x.playbackRate:k.playbackRate,x}return m()(C,P),u()(C,[{key:"setAlertError",value:function(){this.options.alertError=this.alertError=Z.getInstance({player:this,component:this.componentsController.alertBox,events:this.options.events})}},{key:"setDataController",value:function(){this.dataController=Ga.getInstance({player:this,events:this.options.events})}},{key:"setLoadData",value:function(){this.dataController.setLoadData({player:this,events:this.options.events}),this.loadData=this.dataController.loadData}},{key:"setComponentsController",value:function(){this.componentsController=Ge.getInstance({$container:this.$container,$screenContainer:this.$screenContainer,$canvas:this.$canvas,$audioContainer:this.$audioContainer,$audio:this.$audio,loadData:this.loadData,bigPlayButtonColor:this.bigPlayButtonColor,player:this,events:this.options.events})}},{key:"setControlBarController",value:function(){var v=Object.assign({},this.options,{$container:this.$container,$screenContainer:this.$screenContainer,controlBarAutoHide:this.controlBarAutoHide,player:this});this.controlBarController=ct.getInstance(v)}},{key:"setLoadController",value:function(){this.loaderController=xi.getInstance(this.options.type,{player:this,events:this.options.events})}},{key:"setProcessorController",value:function(){this.processController=new Dt({type:"ts",libPath:w()(this,Uf),events:this.options.events,player:this})}},{key:"setStreamController",value:function(){this.streamController=new An({events:this.options.events,loadData:this.loadData,imagePlayer:this.imagePlayer,audioPlayer:this.audioPlayer,player:this})}},{key:"setImagerPlayer",value:function(){this.imagePlayer=new Lo({events:this.options.events,canvas:this.$canvas,maxBufferLength:this.maxBufferLength,player:this})}},{key:"setAudioPlayer",value:function(){this.audioPlayer=new he({player:this,events:this.options.events,audioNode:this.$audio})}},{key:"setAction",value:function(){this.action=new Wd({player:this,screen:this.screen,imagePlayer:this.imagePlayer,loadData:this.loadData,audioPlayer:this.audioPlayer,events:this.options.events})}},{key:"init",value:function(){this.controlBarHeight=this.options.controlBarHeight||this.controlBarHeight,this.options.httpWorker=_t()(94,{name:"httpWorker"}),this.currentTime=this.startTime,this.addEl(),this.setDataController(),this.setLoadData(),this.setComponentsController(),this.setLoadController(),this.setControlBarController(),this.componentsController.setControlBarController(this.controlBarController),this.setAlertError(),this.setProcessorController(),this.setImagerPlayer(),this.setAudioPlayer(),this.setAction(),this.setStreamController(),this.componentsController.drawPoster(),this.preload&&this.run(),this.bindEvent()}},{key:"bindEvent",value:function(){var v=this;this.events.on(se.PlayerOnPlay,function(){v.play()}),this.events.on(se.PlayerOnPause,function(){v.pause()}),this.events.on(se.PlayerOnVolume,function(x){v.volume=x}),this.events.on(se.DataProcessorReady,function(){v.logger.info("bindEvent","decoder ready"),v.checkReady("dataProcessor")}),this.events.on(se.AudioPlayerReady,function(){v.logger.info("bindEvent","audioPlayer ready"),v.seeking||v.checkReady("audioPlayer")}),this.events.on(se.PlayerReady,function(){v.logger.info("bindEvent","player ready"),v.onReady()}),this.events.on(se.PlayerSpeedTo,function(x){v.changeSpeed(x)}),this.events.on(se.PlayerChangeRate,function(x){v.changeRate(x)}),this.events.on(se.PlayerWait,function(){v.onWait()}),this.events.on(se.PlayerPlay,function(){v.onPlay()}),this.events.on(se.LoaderPlayListLoaded,function(x){typeof v.options.afterLoadPlaylist=="function"&&v.options.afterLoadPlaylist(v.laodData.sourceData);var k=x.loadData.sourceData;v.duration=k.duration,v.tsNumber=k.length,v.streamController.setBaseInfo({duration:v.duration,tsNumber:v.tsNumber}),v.dataController.startLoad(v.startTime),v.setStartTime(v.originStartTime)}),this.events.on(se.LoadDataFirstLoaded,function(x){v.logger.info("bindEvent","first data ready"),v.startIndex=x.no,v.streamController.currentIndex=x.no,v.checkReady("firstData")}),this.events.on(se.StreamDataReady,function(){v.logger.info("bindEvent","dataReady"),v.onDataReady()}),this.events.on(se.PlayerLoadedMetaData,function(x,k){v.setCanvas(),v.resizeScreen(x,k)}),this.events.on(se.PlayerEnd,function(){v.status="end"}),this.events.on(se.ImagePlayerBuffeUpdate,function(){var x=v.buffer();v.events.emit(se.PlayerbufferUpdate,x)}),this.events.on(se.PlayerOnSeek,function(x){v.seek(Math.floor(x))}),this.events.on(se.PlayerAlert,function(x){v.alertError.show(x)}),this.events.on(se.PlayerThrowError,function(x){Q.a.apply(v,x)})}},{key:"reset",value:function(v){this.action&&this.action.reset(v)}},{key:"switchPlaylist",value:function(v,x){this.loaderController.switchPlaylist(v,x)}},{key:"changeSpeed",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.playbackRate=v.value||1}},{key:"setStartTime",value:function(v){this.startTime=v}},{key:"changeRate",value:function(v){this.pause(),this.events.emit(se.ControlBarPauseLoading,this),this.setStartTime((this.currentTime-5e3)/1e3),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.reset(!0),this.switchPlaylist(v.url)}},{key:"changeSrc",value:function(v,x){this.pause(),this.events.emit(se.ControlBarPauseLoading,this),this.events.emit(se.PlayerChangeSrc,this),this.changing=!0,this.seeking=!1,this.imagePlayer.firstRender=!1,this.readyStatus={dataProcessor:!1,firstData:!1,audioPlayer:!1},this.currentTime=this.startTime,this.imagePlayer.clear(),this.reset(!0),this.switchPlaylist(v,x)}},{key:"setCanvas",value:function(){var v=Oe.createCanvas(this);if(G.isElement(this.$canvas)){if(this.$canvas.width&&this.$canvas.height)return this.imagePlayer.setScreenRender(v),this.$canvas.replaceWith(v),void(this.$canvas=v)}else this.$screen.appendChild(v),this.$canvas=v}},{key:"destroy",value:function(){this.controlBarController&&(this.controlBarController.destroy(),delete this.controlBarController),this.$container&&(this.el.removeChild(this.$container),delete this.$container),this.processController.destroy(),this.loaderController.destroy()}},{key:"run",value:function(){this.loaderController.run()}},{key:"checkReady",value:function(v){var x=this.readyStatus;if(v&&typeof v=="string"){x[v]=!0;for(var k=Object.keys(x),B=0;B<k.length;B++)if(!x[k[B]])return!1;return this.logger.info("checkReady","player ready"),this.events.emit(se.PlayerReady),!0}return this.logger.error("checkReady","check ready","type is no correct, type:",v),!1}},{key:"addEl",value:function(){var v,x,k,B;this.el?(v=Oe.createContainer(this),this.el.appendChild(v),this.$container=v,x=Oe.createScreenContainer(this),this.$screen=x,v.appendChild(x),this.$screenContainer=x,this.setCanvas(),B=Oe.createAudio(this),this.$audio=B,(k=Oe.createAudioContainer(this)).appendChild(B),this.$audioContainer=k,v.appendChild(k)):this.logger.error("addEl","not found el.","el:",this.options.el)}},{key:"onWait",value:function(){this.logger.info("onWait","wait,wait,wait")}},{key:"onPlay",value:function(){this.logger.info("onPlay","play, play, play")}},{key:"onReady",value:function(){this.changing||this.componentsController.run(),this.changing&&this.logger.info("onReady","change ready","startIndex:",this.startIndex),this.streamController.startLoad(this.startIndex)}},{key:"onDataReady",value:function(){this.changing&&(this.changing=!1,this.play()),(this.seeking||this.autoPlay&&!this.paused)&&this.play()}},{key:"buffer",value:function(){var v=this.imagePlayer.buffer(),x=this.audioPlayer.buffer(),k=Math.max(v.start,x.start),B=Math.min(v.end,x.end);return k<B?[k,B]:[0,0]}},{key:"play",value:function(){this.logger.info("play",this.status),this.status!=="playing"&&(this.logger.info("start play"),this.status="playing",this.paused=!1,this.action.play(this.currentTime),this.events.emit(se.PlayerPlay,this))}},{key:"on",value:function(v,x){this.events.on("Player."+v,x)}},{key:"off",value:function(v,x){this.events.off("Player."+v,x)}},{key:"once",value:function(v,x){this.events.once("Player."+v,x)}},{key:"pause",value:function(){this.status!="pause"&&(this.logger.info("pause"),this.status="pause",this.action.pause(),this.paused=!0,this.events.emit(se.PlayerPause,this))}},{key:"seek",value:function(v){v<this.startTime||(v>=1e3*this.duration?this.logger.info("seek","seek to time:",v):(this.seekTime=Date.now(),this.seeking=!0,this.currentTime=v,this.action.seek(v)))}},{key:"resizeScreen",value:function(v,x){G.adaptSizeElement(v,x,this.$screenContainer,this.$canvas)}},{key:"muted",get:function(){return w()(this,Eu)},set:function(v){E()(this,Eu,!!v)}},{key:"playbackRate",set:function(v){E()(this,np,v)},get:function(){return w()(this,np)}},{key:"seeking",set:function(v){E()(this,tp,v),v?this.events.emit(se.PlayerSeeking):this.events.emit(se.PlayerSeekEnd)},get:function(){return w()(this,tp)}},{key:"currentTime",get:function(){return w()(this,ep)},set:function(v){E()(this,ep,v)}},{key:"volume",get:function(){return this.audioPlayer.volume},set:function(v){this.audioPlayer.volume=v}}]),C}(le),Uf=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,Eu=new WeakMap,v9=function(P){function C(v,x){var k;return o()(this,C),k=c()(this,h()(C).call(this,v,x)),b()(p()(k),"libPath",null),k.options.processURL=x.processURL,k.libPath=x.libPath,k.options.needInit!==!1&&k.init(),k}return m()(C,P),u()(C,null,[{key:"getComponent",value:function(v){return oe[v]}},{key:"registerComponent",value:function(v,x){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"right",B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1;if(typeof v!="string"||!v)throw new Error('Illegal component name, "'.concat(v,'"; must be a non-empty string.'));var q=Object.prototype.isPrototypeOf.call(gn,x.prototype);if(!q)throw new Error('Illegal component, "'.concat(v,'"; must be a BaseComponent subclass.'));oe[v]=x,Ge.addComponet(v),k==="left"?re.addCustomControl(v,B):O.addCustomControl(v,B)}}]),C}(ix);r.default=v9},function(t,r){t.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}},function(t,r){t.exports=function(i){return Function.toString.call(i).indexOf("[native code]")!==-1}},function(t,r,i){var a=function(o){var s=Object.prototype,u=s.hasOwnProperty,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",f=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function d(U,H,X,Z){var Q=H&&H.prototype instanceof m?H:m,le=Object.create(Q.prototype),ge=new z(Z||[]);return le._invoke=function(be,ke,Ae){var de="suspendedStart";return function(Ce,ye){if(de==="executing")throw new Error("Generator is already running");if(de==="completed"){if(Ce==="throw")throw ye;return G()}for(Ae.method=Ce,Ae.arg=ye;;){var Ee=Ae.delegate;if(Ee){var De=$(Ee,Ae);if(De){if(De===g)continue;return De}}if(Ae.method==="next")Ae.sent=Ae._sent=Ae.arg;else if(Ae.method==="throw"){if(de==="suspendedStart")throw de="completed",Ae.arg;Ae.dispatchException(Ae.arg)}else Ae.method==="return"&&Ae.abrupt("return",Ae.arg);de="executing";var Me=p(be,ke,Ae);if(Me.type==="normal"){if(de=Ae.done?"completed":"suspendedYield",Me.arg===g)continue;return{value:Me.arg,done:Ae.done}}Me.type==="throw"&&(de="completed",Ae.method="throw",Ae.arg=Me.arg)}}}(U,X,ge),le}function p(U,H,X){try{return{type:"normal",arg:U.call(H,X)}}catch(Z){return{type:"throw",arg:Z}}}o.wrap=d;var g={};function m(){}function y(){}function b(){}var _={};_[c]=function(){return this};var w=Object.getPrototypeOf,T=w&&w(w(F([])));T&&T!==s&&u.call(T,c)&&(_=T);var E=b.prototype=m.prototype=Object.create(_);function A(U){["next","throw","return"].forEach(function(H){U[H]=function(X){return this._invoke(H,X)}})}function I(U,H){var X;this._invoke=function(Z,Q){function le(){return new H(function(ge,be){(function ke(Ae,de,Ce,ye){var Ee=p(U[Ae],U,de);if(Ee.type!=="throw"){var De=Ee.arg,Me=De.value;return Me&&typeof Me=="object"&&u.call(Me,"__await")?H.resolve(Me.__await).then(function(Ie){ke("next",Ie,Ce,ye)},function(Ie){ke("throw",Ie,Ce,ye)}):H.resolve(Me).then(function(Ie){De.value=Ie,Ce(De)},function(Ie){return ke("throw",Ie,Ce,ye)})}ye(Ee.arg)})(Z,Q,ge,be)})}return X=X?X.then(le,le):le()}}function $(U,H){var X=U.iterator[H.method];if(X===void 0){if(H.delegate=null,H.method==="throw"){if(U.iterator.return&&(H.method="return",H.arg=void 0,$(U,H),H.method==="throw"))return g;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var Z=p(X,U.iterator,H.arg);if(Z.type==="throw")return H.method="throw",H.arg=Z.arg,H.delegate=null,g;var Q=Z.arg;return Q?Q.done?(H[U.resultName]=Q.value,H.next=U.nextLoc,H.method!=="return"&&(H.method="next",H.arg=void 0),H.delegate=null,g):Q:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,g)}function D(U){var H={tryLoc:U[0]};1 in U&&(H.catchLoc=U[1]),2 in U&&(H.finallyLoc=U[2],H.afterLoc=U[3]),this.tryEntries.push(H)}function N(U){var H=U.completion||{};H.type="normal",delete H.arg,U.completion=H}function z(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(D,this),this.reset(!0)}function F(U){if(U){var H=U[c];if(H)return H.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var X=-1,Z=function Q(){for(;++X<U.length;)if(u.call(U,X))return Q.value=U[X],Q.done=!1,Q;return Q.value=void 0,Q.done=!0,Q};return Z.next=Z}}return{next:G}}function G(){return{value:void 0,done:!0}}return y.prototype=E.constructor=b,b.constructor=y,b[h]=y.displayName="GeneratorFunction",o.isGeneratorFunction=function(U){var H=typeof U=="function"&&U.constructor;return!!H&&(H===y||(H.displayName||H.name)==="GeneratorFunction")},o.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,b):(U.__proto__=b,h in U||(U[h]="GeneratorFunction")),U.prototype=Object.create(E),U},o.awrap=function(U){return{__await:U}},A(I.prototype),I.prototype[f]=function(){return this},o.AsyncIterator=I,o.async=function(U,H,X,Z,Q){Q===void 0&&(Q=Promise);var le=new I(d(U,H,X,Z),Q);return o.isGeneratorFunction(H)?le:le.next().then(function(ge){return ge.done?ge.value:le.next()})},A(E),E[h]="Generator",E[c]=function(){return this},E.toString=function(){return"[object Generator]"},o.keys=function(U){var H=[];for(var X in U)H.push(X);return H.reverse(),function Z(){for(;H.length;){var Q=H.pop();if(Q in U)return Z.value=Q,Z.done=!1,Z}return Z.done=!0,Z}},o.values=F,z.prototype={constructor:z,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!U)for(var H in this)H.charAt(0)==="t"&&u.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=void 0)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var H=this;function X(ke,Ae){return le.type="throw",le.arg=U,H.next=ke,Ae&&(H.method="next",H.arg=void 0),!!Ae}for(var Z=this.tryEntries.length-1;Z>=0;--Z){var Q=this.tryEntries[Z],le=Q.completion;if(Q.tryLoc==="root")return X("end");if(Q.tryLoc<=this.prev){var ge=u.call(Q,"catchLoc"),be=u.call(Q,"finallyLoc");if(ge&&be){if(this.prev<Q.catchLoc)return X(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return X(Q.finallyLoc)}else if(ge){if(this.prev<Q.catchLoc)return X(Q.catchLoc,!0)}else{if(!be)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return X(Q.finallyLoc)}}}},abrupt:function(U,H){for(var X=this.tryEntries.length-1;X>=0;--X){var Z=this.tryEntries[X];if(Z.tryLoc<=this.prev&&u.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var Q=Z;break}}Q&&(U==="break"||U==="continue")&&Q.tryLoc<=H&&H<=Q.finallyLoc&&(Q=null);var le=Q?Q.completion:{};return le.type=U,le.arg=H,Q?(this.method="next",this.next=Q.finallyLoc,g):this.complete(le)},complete:function(U,H){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&H&&(this.next=H),g},finish:function(U){for(var H=this.tryEntries.length-1;H>=0;--H){var X=this.tryEntries[H];if(X.finallyLoc===U)return this.complete(X.completion,X.afterLoc),N(X),g}},catch:function(U){for(var H=this.tryEntries.length-1;H>=0;--H){var X=this.tryEntries[H];if(X.tryLoc===U){var Z=X.completion;if(Z.type==="throw"){var Q=Z.arg;N(X)}return Q}}throw new Error("illegal catch attempt")},delegateYield:function(U,H,X){return this.delegate={iterator:F(U),resultName:H,nextLoc:X},this.method==="next"&&(this.arg=void 0),g}},o}(t.exports);try{regeneratorRuntime=a}catch{Function("r","regeneratorRuntime = r")(a)}},function(t,r,i){(function(){var a=i(49),o=i(90);function s(u){var l=u.getContext("2d"),c=null,f=null,h=null;return this.drawFrame=function(d){var p=d.format;u.width===p.displayWidth&&u.height===p.displayHeight||(u.width=p.displayWidth,u.height=p.displayHeight),c!==null&&c.width==p.width&&c.height==p.height||function(_,w){for(var T=(c=l.createImageData(_,w)).data,E=_*w*4,A=0;A<E;A+=4)T[A+3]=255}(p.width,p.height),o.convertYCbCr(d,c.data);var g,m,y,b=p.cropWidth!=p.displayWidth||p.cropHeight!=p.displayHeight;b?(f||(m=p.cropWidth,y=p.cropHeight,(f=document.createElement("canvas")).width=m,f.height=y,h=f.getContext("2d")),g=h):g=l,g.putImageData(c,-p.cropLeft,-p.cropTop,p.cropLeft,p.cropTop,p.cropWidth,p.cropHeight),b&&l.drawImage(f,0,0,p.displayWidth,p.displayHeight)},this.clear=function(){l.clearRect(0,0,u.width,u.height)},this}s.prototype=Object.create(a.prototype),t.exports=s})()},function(t,r,i){(function(){var a=i(91);/**
	 * Basic YCbCr->RGB conversion
	 *
	 * @author Brion Vibber <brion@pobox.com>
	 * @copyright 2014-2019
	 * @license MIT-style
	 *
	 * @param {YUVFrame} buffer - input frame buffer
	 * @param {Uint8ClampedArray} output - array to draw RGBA into
	 * Assumes that the output array already has alpha channel set to opaque.
	 */t.exports={convertYCbCr:function(o,s){var u=0|o.format.width,l=0|o.format.height,c=0|a(o.format.width/o.format.chromaWidth),f=0|a(o.format.height/o.format.chromaHeight),h=o.y.bytes,d=o.u.bytes,p=o.v.bytes,g=0|o.y.stride,m=0|o.u.stride,y=0|o.v.stride,b=u<<2,_=0,w=0,T=0,E=0,A=0,I=0,$=0,D=0,N=0,z=0,F=0,G=0,U=0,H=0,X=0,Z=0,Q=0,le=0;if(c==1&&f==1)for($=0,D=b,le=0,Z=0;Z<l;Z+=2){for(T=(w=Z*g|0)+g|0,E=le*m|0,A=le*y|0,X=0;X<u;X+=2)N=0|d[E++],G=(409*(z=0|p[A++])|0)-57088|0,U=(100*N|0)+(208*z|0)-34816|0,H=(516*N|0)-70912|0,F=298*h[w++]|0,s[$]=F+G>>8,s[$+1]=F-U>>8,s[$+2]=F+H>>8,$+=4,F=298*h[w++]|0,s[$]=F+G>>8,s[$+1]=F-U>>8,s[$+2]=F+H>>8,$+=4,F=298*h[T++]|0,s[D]=F+G>>8,s[D+1]=F-U>>8,s[D+2]=F+H>>8,D+=4,F=298*h[T++]|0,s[D]=F+G>>8,s[D+1]=F-U>>8,s[D+2]=F+H>>8,D+=4;$+=b,D+=b,le++}else for(I=0,Z=0;Z<l;Z++)for(Q=0,_=Z*g|0,E=(le=Z>>f)*m|0,A=le*y|0,X=0;X<u;X++)N=0|d[E+(Q=X>>c)],G=(409*(z=0|p[A+Q])|0)-57088|0,U=(100*N|0)+(208*z|0)-34816|0,H=(516*N|0)-70912|0,F=298*h[_++]|0,s[I]=F+G>>8,s[I+1]=F-U>>8,s[I+2]=F+H>>8,I+=4}}})()},function(t,r){(function(){/**
* Convert a ratio into a bit-shift count; for instance a ratio of 2
* becomes a bit-shift of 1, while a ratio of 1 is a bit-shift of 0.
*
* @author Brion Vibber <brion@pobox.com>
* @copyright 2016
* @license MIT-style
*
* @param {number} ratio - the integer ratio to convert.
* @returns {number} - number of bits to shift to multiply/divide by the ratio.
* @throws exception if given a non-power-of-two
*/t.exports=function(i){for(var a=0,o=i>>1;o!=0;)o>>=1,a++;if(i!==1<<a)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+i;return a}})()},function(t,r,i){(function(){var a=i(49),o=i(93);function s(u){var l,c,f=this,h=s.contextForCanvas(u);if(h===null)throw new Error("WebGL unavailable");function d(X,Z){var Q=h.createShader(X);if(h.shaderSource(Q,Z),h.compileShader(Q),!h.getShaderParameter(Q,h.COMPILE_STATUS)){var le=h.getShaderInfoLog(Q);throw h.deleteShader(Q),new Error("GL shader compilation for "+X+" failed: "+le)}return Q}var p,g,m,y,b,_,w,T,E,A,I=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),$={},D={},N={};function z(X){return $[X]||($[X]=h.createTexture()),$[X]}function F(X,Z,Q,le){var ge=z(X);if(h.activeTexture(h.TEXTURE0),s.stripe){var be=!$[X+"_temp"],ke=z(X+"_temp");h.bindTexture(h.TEXTURE_2D,ke),be?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,Z/4,Q,0,h.RGBA,h.UNSIGNED_BYTE,le)):h.texSubImage2D(h.TEXTURE_2D,0,0,0,Z/4,Q,h.RGBA,h.UNSIGNED_BYTE,le);var Ae=$[X+"_stripe"],de=!Ae;de&&(Ae=z(X+"_stripe")),h.bindTexture(h.TEXTURE_2D,Ae),de&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,Z,1,0,h.RGBA,h.UNSIGNED_BYTE,function(Ce){if(N[Ce])return N[Ce];for(var ye=Ce,Ee=new Uint32Array(ye),De=0;De<ye;De+=4)Ee[De]=255,Ee[De+1]=65280,Ee[De+2]=16711680,Ee[De+3]=4278190080;return N[Ce]=new Uint8Array(Ee.buffer)}(Z)))}else h.bindTexture(h.TEXTURE_2D,ge),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.LUMINANCE,Z,Q,0,h.LUMINANCE,h.UNSIGNED_BYTE,le)}function G(X,Z,Q){var le=$[X];h.useProgram(c);var ge=D[X];ge||(h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,le),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,Z,Q,0,h.RGBA,h.UNSIGNED_BYTE,null),ge=D[X]=h.createFramebuffer()),h.bindFramebuffer(h.FRAMEBUFFER,ge),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,le,0);var be=$[X+"_temp"];h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,be),h.uniform1i(_,1);var ke=$[X+"_stripe"];h.activeTexture(h.TEXTURE2),h.bindTexture(h.TEXTURE_2D,ke),h.uniform1i(b,2),h.bindBuffer(h.ARRAY_BUFFER,p),h.enableVertexAttribArray(g),h.vertexAttribPointer(g,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,m),h.enableVertexAttribArray(y),h.vertexAttribPointer(y,2,h.FLOAT,!1,0,0),h.viewport(0,0,Z,Q),h.drawArrays(h.TRIANGLES,0,I.length/2),h.bindFramebuffer(h.FRAMEBUFFER,null)}function U(X,Z,Q){h.activeTexture(Z),h.bindTexture(h.TEXTURE_2D,$[X]),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.uniform1i(h.getUniformLocation(l,X),Q)}function H(X,Z){var Q=d(h.VERTEX_SHADER,X),le=d(h.FRAGMENT_SHADER,Z),ge=h.createProgram();if(h.attachShader(ge,Q),h.attachShader(ge,le),h.linkProgram(ge),!h.getProgramParameter(ge,h.LINK_STATUS)){var be=h.getProgramInfoLog(ge);throw h.deleteProgram(ge),new Error("GL program linking failed: "+be)}return ge}return f.drawFrame=function(X){var Z=X.format,Q=!l||u.width!==Z.displayWidth||u.height!==Z.displayHeight;if(Q&&(u.width=Z.displayWidth,u.height=Z.displayHeight,f.clear()),l||function(){if(s.stripe){c=H(o.vertexStripe,o.fragmentStripe),h.getAttribLocation(c,"aPosition"),m=h.createBuffer();var ge=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);h.bindBuffer(h.ARRAY_BUFFER,m),h.bufferData(h.ARRAY_BUFFER,ge,h.STATIC_DRAW),y=h.getAttribLocation(c,"aTexturePosition"),b=h.getUniformLocation(c,"uStripe"),_=h.getUniformLocation(c,"uTexture")}l=H(o.vertex,o.fragment),p=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,p),h.bufferData(h.ARRAY_BUFFER,I,h.STATIC_DRAW),g=h.getAttribLocation(l,"aPosition"),w=h.createBuffer(),T=h.getAttribLocation(l,"aLumaPosition"),E=h.createBuffer(),A=h.getAttribLocation(l,"aChromaPosition")}(),Q){var le=function(ge,be,ke){var Ae=Z.cropLeft/ke,de=(Z.cropLeft+Z.cropWidth)/ke,Ce=(Z.cropTop+Z.cropHeight)/Z.height,ye=Z.cropTop/Z.height,Ee=new Float32Array([Ae,Ce,de,Ce,Ae,ye,Ae,ye,de,Ce,de,ye]);h.bindBuffer(h.ARRAY_BUFFER,ge),h.bufferData(h.ARRAY_BUFFER,Ee,h.STATIC_DRAW)};le(w,0,X.y.stride),le(E,0,X.u.stride*Z.width/Z.chromaWidth)}F("uTextureY",X.y.stride,Z.height,X.y.bytes),F("uTextureCb",X.u.stride,Z.chromaHeight,X.u.bytes),F("uTextureCr",X.v.stride,Z.chromaHeight,X.v.bytes),s.stripe&&(G("uTextureY",X.y.stride,Z.height),G("uTextureCb",X.u.stride,Z.chromaHeight),G("uTextureCr",X.v.stride,Z.chromaHeight)),h.useProgram(l),h.viewport(0,0,u.width,u.height),U("uTextureY",h.TEXTURE0,0),U("uTextureCb",h.TEXTURE1,1),U("uTextureCr",h.TEXTURE2,2),h.bindBuffer(h.ARRAY_BUFFER,p),h.enableVertexAttribArray(g),h.vertexAttribPointer(g,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,w),h.enableVertexAttribArray(T),h.vertexAttribPointer(T,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,E),h.enableVertexAttribArray(A),h.vertexAttribPointer(A,2,h.FLOAT,!1,0,0),h.drawArrays(h.TRIANGLES,0,I.length/2)},f.clear=function(){h.viewport(0,0,u.width,u.height),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT)},f.clear(),f}s.stripe=navigator.userAgent.indexOf("Windows")!==-1,s.contextForCanvas=function(u){var l={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return u.getContext("webgl",l)||u.getContext("experimental-webgl",l)},s.isAvailable=function(){var u,l=document.createElement("canvas");l.width=1,l.height=1;try{u=s.contextForCanvas(l)}catch{return!1}if(u){var c=u.TEXTURE0,f=u.createTexture(),h=new Uint8Array(16),d=s.stripe?1:4,p=s.stripe?u.RGBA:u.LUMINANCE,g=s.stripe?u.NEAREST:u.LINEAR;return u.activeTexture(c),u.bindTexture(u.TEXTURE_2D,f),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,g),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,g),u.texImage2D(u.TEXTURE_2D,0,p,d,4,0,p,u.UNSIGNED_BYTE,h),!u.getError()}return!1},s.prototype=Object.create(a.prototype),t.exports=s})()},function(t,r){t.exports={vertex:`precision lowp float;

attribute vec2 aPosition;
attribute vec2 aLumaPosition;
attribute vec2 aChromaPosition;
varying vec2 vLumaPosition;
varying vec2 vChromaPosition;
void main() {
    gl_Position = vec4(aPosition, 0, 1);
    vLumaPosition = aLumaPosition;
    vChromaPosition = aChromaPosition;
}
`,fragment:`// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js

precision lowp float;

uniform sampler2D uTextureY;
uniform sampler2D uTextureCb;
uniform sampler2D uTextureCr;
varying vec2 vLumaPosition;
varying vec2 vChromaPosition;
void main() {
   // Y, Cb, and Cr planes are uploaded as LUMINANCE textures.
   float fY = texture2D(uTextureY, vLumaPosition).x;
   float fCb = texture2D(uTextureCb, vChromaPosition).x;
   float fCr = texture2D(uTextureCr, vChromaPosition).x;

   // Premultipy the Y...
   float fYmul = fY * 1.1643828125;

   // And convert that to RGB!
   gl_FragColor = vec4(
     fYmul + 1.59602734375 * fCr - 0.87078515625,
     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,
     fYmul + 2.017234375   * fCb - 1.081390625,
     1
   );
}
`,vertexStripe:`precision lowp float;

attribute vec2 aPosition;
attribute vec2 aTexturePosition;
varying vec2 vTexturePosition;

void main() {
    gl_Position = vec4(aPosition, 0, 1);
    vTexturePosition = aTexturePosition;
}
`,fragmentStripe:`// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures

precision lowp float;

uniform sampler2D uStripe;
uniform sampler2D uTexture;
varying vec2 vTexturePosition;
void main() {
   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture
   // so we can upload them without expanding the bytes on IE 11
   // which doesn't allow LUMINANCE or ALPHA textures
   // The stripe textures mark which channel to keep for each pixel.
   // Each texture extraction will contain the relevant value in one
   // channel only.

   float fLuminance = dot(
      texture2D(uStripe, vTexturePosition),
      texture2D(uTexture, vTexturePosition)
   );

   gl_FragColor = vec4(fLuminance, fLuminance, fLuminance, 1);
}
`}},function(t,r,i){i.r(r);var a=i(2),o=i.n(a),s=i(3),u=i.n(s),l=i(0),c=i.n(l),f=i(61),h=i.n(f),d=i(11),p=i.n(d),g=i(18),m=i.n(g),y=i(28),b=i.n(y),_=i(10),w=i(23),T=_.a.get("HTTP.js",{level:2}),E=function(){var z=b()(m.a.mark(function F(G){var U;return m.a.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(G instanceof Blob)){H.next=5;break}return H.next=3,new Response(G).arrayBuffer();case 3:return U=H.sent,H.abrupt("return",new Uint8Array(U,0));case 5:case"end":return H.stop()}},F)}));return function(F){return z.apply(this,arguments)}}(),A=function(z){if(z)return Object.entries(z).reduce(function(F,G,U){var H=h()(G,2),X=H[0],Z=H[1];return F+(U===0?X+"="+encodeURIComponent(Z):"&"+X+"="+encodeURIComponent(Z))},"")};function I(z,F){var G=(typeof z.clone=="function"?z.clone():void 0)||z,U=function(H,X){var Z={body:X,headers:function(Q){return Q.headers.entries?function(le){var ge=Object.create(Object.getPrototypeOf(le.headers)),be=!0,ke=!1,Ae=void 0;try{for(var de,Ce=le.headers.entries()[Symbol.iterator]();!(be=(de=Ce.next()).done);be=!0){var ye=h()(de.value,2),Ee=ye[0],De=ye[1];ge[Ee]=De}}catch(Me){ke=!0,Ae=Me}finally{try{be||Ce.return==null||Ce.return()}finally{if(ke)throw Ae}}return ge}(Q):function(le){var ge={},be=le.headers.__headers__;for(var ke in be)ge[ke]=be[ke].join("");return ge}(Q)}(H),response:H,status:H.status,statusText:H.statusText};return H.ok?Promise.resolve(Z):Promise.reject(Z)};return z[F]().then(function(H){return U(G,H)})}function $(z,F){var G=z.headers.get("content-type"),U=z.clone().body.getReader(),H=0,X=H,Z=setInterval(function(){var Q=50*(H-X);Q<=1||(T.info("HTTP>handleResponse","".concat(X," | ").concat(H),"".concat(Q.toFixed(2)," Bytes/s")),self.postMessage({type:"notice",method:"fetch",noticeType:"speed",data:{speed:Q,intervalValue:20,lastReceived:X,bytesReceived:H}}),X=H)},20);return U.read().then(function Q(le){return le.done?(clearInterval(Z),function(){if(F==="ts"||F==="video")return I(z,"blob");if(G.includes("json"))return I(z,"json");if(G.includes("text"))return I(z,"text");if(G.includes("form"))return I(z,"formData");if(G.includes("video")||G.includes("image")||G.includes("octet-stream"))return I(z,"blob");try{return I(z,"text")}catch(ge){return Object(w.a)(ge,"[HTTP>handleResponse:unknow content-type]",G,z),Promise.resolve(z)}}()):(H+=le.value.length,U.read().then(Q))})}var D=null,N=(D||(D=new(function(){function z(G){o()(this,z),c()(this,"options",{"content-type":"application/json;charset=UTF-8",cache:"no-cache",mode:"cors"}),Object.assign(this.options,G)}var F;return u()(z,[{key:"setOptions",value:function(G){var U=Object.assign(this.options,G);U.url=function(H){var X=H.url,Z=H.params;return Z?X+"?"+A(Z):X}(U),U.method=U.method||"get",U.headers=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=H.headers,Z=X===void 0?{}:X,Q=H.method,le=Q===void 0?"get":Q,ge=H.username,be=H.password,ke=H.token,Ae=new Headers(Z);if(ge||be){if(!ge)throw new TypeError("username required for basic authentication");if(!be)throw new TypeError("password required for basic authentication");var de=(typeof win>"u"?"undefined":p()(win))==="object"&&win.btoa?btoa:function(Ce){return Ce};Ae.set("Authorization","Basic "+de(ge+":"+be))}return ke&&Ae.set("Authorization","Bearer "+ke),le==="get"||Ae.get("content-type")||Ae.set("content-type","application/json"),Ae}(U),U.body=function(H){var X=H.headers.get("content-type");if(X)return X.includes("json")?JSON.stringify(H.body):X.includes("x-www-form-urlencoded")?A(H.body):H.body}(U),delete U.username,delete U.password,delete U.token,this.options=U}},{key:"request",value:function(G){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=arguments.length>2?arguments[2]:void 0;if(G)return this.setOptions(Object.assign({url:G},U)),fetch(this.options.url,this.options).then(function(X){return $(X,H)});T.error("[HTTP>request]","url is undefined","url:",G,"options:",U)}},{key:"fetch",value:function(G){function U(H){return G.apply(this,arguments)}return U.toString=function(){return G.toString()},U}(function(){var G=b()(m.a.mark(function U(H){var X,Z,Q,le,ge=arguments;return m.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(X=ge.length>1&&ge[1]!==void 0?ge[1]:{},Z=ge.length>2?ge[2]:void 0,Q=ge.length>3?ge[3]:void 0,H){be.next=6;break}return T.wran("[HTTP>fetch]","url is undefined","url:",H,"options:",X),be.abrupt("return");case 6:return this.setOptions(Object.assign({url:H},X)),T.info("[HTTP>fetch]","http fetch","url:",H,"options:",X),be.next=10,fetch(H,X);case 10:(le=be.sent).ok?le.text().then(function(ke){self.postMessage({type:"invoke",method:"fetch",fileType:Q,name:Z,data:ke})}):self.postMessage({result:"failed"});case 12:case"end":return be.stop()}},U,this)}));return function(U){return G.apply(this,arguments)}}())},{key:"get",value:(F=b()(m.a.mark(function G(U){var H,X,Z,Q,le,ge=arguments;return m.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return H=ge.length>1&&ge[1]!==void 0?ge[1]:{},X=ge.length>2?ge[2]:void 0,Z=ge.length>3?ge[3]:void 0,H.method="get",T.info("[HTTP>get]","http get","url:",U,"options:",H,"name:",X,"fileType:",Z),le={type:"invoke",method:"get",fileType:Z,name:X,url:U},be.prev=6,be.next=9,this.request.call(this,U,H,Z);case 9:Q=be.sent,be.next=15;break;case 12:be.prev=12,be.t0=be.catch(6),T.error("[HTTP>get]","networks error","url:",U,"options:",H,"name:",X,"fileType:",Z,"ex:",be.t0);case 15:if(!Q||!Q.body){be.next=24;break}if(le.data=Q.body,Z!=="ts"&&Z!=="video"){be.next=21;break}return be.next=20,E(le.data);case 20:le.arrayBuffer=be.sent;case 21:le.arrayBuffer?self.postMessage(le,[le.arrayBuffer.buffer]):self.postMessage(le),be.next=27;break;case 24:le.type="error",le.data=Q,self.postMessage(le);case 27:case"end":return be.stop()}},G,this,[[6,12]])})),function(G){return F.apply(this,arguments)})}]),z}())({})),D);r.default=function(z){z.onmessage=function(F){var G=F.data,U=G.type,H=G.method;switch(U){case"invoke":N[H].call(N,G.url,G.options,G.name,G.fileType)}}}},function(t,r){t.exports=function(i){if(Array.isArray(i))return i}},function(t,r){t.exports=function(i,a){if(typeof Symbol<"u"&&Symbol.iterator in Object(i)){var o=[],s=!0,u=!1,l=void 0;try{for(var c,f=i[Symbol.iterator]();!(s=(c=f.next()).done)&&(o.push(c.value),!a||o.length!==a);s=!0);}catch(h){u=!0,l=h}finally{try{s||f.return==null||f.return()}finally{if(u)throw l}}return o}}},function(t,r,i){var a=i(98);t.exports=function(o,s){if(o){if(typeof o=="string")return a(o,s);var u=Object.prototype.toString.call(o).slice(8,-1);return u==="Object"&&o.constructor&&(u=o.constructor.name),u==="Map"||u==="Set"?Array.from(o):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?a(o,s):void 0}}},function(t,r){t.exports=function(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,s=new Array(a);o<a;o++)s[o]=i[o];return s}},function(t,r){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,r,i){i.r(r);var a,o=i(2),s=i.n(o),u=i(3),l=i.n(u),c=i(9),f=function(){function ae(W){s()(this,ae),this.decode=W,this.result=[]}return l()(ae,[{key:"openDecode",value:function(){var W=this,M=Module.addFunction(function(V,te,he,ve,we,Oe,He,We,at){var ot=HEAPU8.subarray(V,V+ve*We),zt=HEAPU8.subarray(te,te+we*We/2),$n=HEAPU8.subarray(he,he+Oe*We/2),ft={stride_y:ve,stride_u:we,stride_v:Oe,width:He,height:We,buf_y:new Uint8Array(ot),buf_u:new Uint8Array(zt),buf_v:new Uint8Array($n),pts:at};W.result.push(ft)});Module._openDecoder(M,1)}},{key:"decodeData",value:function(W,M){var V=W.length,te=Module._malloc(V);Module.HEAPU8.set(W,te),Module._decodeData(te,V,M),Module._free(te)}},{key:"flush",value:function(){for(Module._flushDecoder();this.checkData();)this.decode.getDecodeYUV()}},{key:"closeDecode",value:function(){Module._closeDecoder()}},{key:"getYUV",value:function(){var W=null;return this.result.length>0&&(W=this.result.shift()),W}},{key:"checkData",value:function(){return this.result.length>0}}]),ae}(),h=function(){function ae(W){s()(this,ae),this.decode=W}return l()(ae,[{key:"openDecode",value:function(){return _web_decoder_open()}},{key:"closeDecode",value:function(W){_web_decoder_close(W)}},{key:"decodeData",value:function(W,M,V){var te=W.length||0;Module.ccall("web_decoder_decode_frame","number",["number","array","number","number"],[V,W,te,M])}},{key:"flush",value:function(W){var M=this.decode;if(_web_decoder_decode_frame)for(;!(_web_decoder_decode_frame(W,null,0,0)<0||!_web_got_frame(W));)M.getDecodeYUV(W)}},{key:"getYUV",value:function(W){var M=_web_get_stride_y(W),V=_web_get_stride_u(W),te=_web_get_stride_v(W),he=_web_get_width(W),ve=_web_get_height(W),we=_web_get_frame_y(W),Oe=_web_get_frame_u(W),He=_web_get_frame_v(W),We=parseInt(_web_got_frame_pts(W)*c.a*1e3),at=HEAPU8.subarray(we,we+M*ve),ot=HEAPU8.subarray(Oe,Oe+V*ve/2),zt=HEAPU8.subarray(He,He+te*ve/2);return{stride_y:M,stride_u:V,stride_v:te,width:he,height:ve,buf_y:new Uint8Array(at),buf_u:new Uint8Array(ot),buf_v:new Uint8Array(zt),pts:We}}},{key:"checkData",value:function(W){return _web_got_frame(W)}}]),ae}(),d=function(){function ae(){s()(this,ae),this.p=null,this.ptsList=[],this.ptsOffset=0,this.fps=0,this.lastDuration=0,this.previousPTS=0,this.status=!1,this.yuvArray=[],this.decodeTool=null}return l()(ae,[{key:"loadWASM",value:function(W){var M=W.data.libPath;self.Module={locateFile:function(V){return M+V}},self.importScripts(M+"libffmpeg.js"),self.Module.onRuntimeInitialized=function(){console.log("wasm loaded"),Module._web_decoder_open?self.decode.decodeTool=new h(self.decode,this.event):self.decode.decodeTool=new f(self.decode,this.event),self.decode.openDecode(),self.decode.onWasmLoaded()}}},{key:"openDecode",value:function(){try{this.status||(this.p=this.decodeTool.openDecode(),this.status=!0),console.log("opendecode")}catch(W){console.error(W)}}},{key:"closeDecode",value:function(){this.status&&(this.decodeTool.closeDecode(this.p),this.status=!1)}},{key:"push",value:function(W){var M=this;W.forEach(function(V){var te=V.PTS,he=V.data_byte,ve=V.partEnd,we=V.lastTS,Oe=M.ptsList;M.insertSort(Oe,parseInt(te*c.a*1e3)),M.decodeTool.decodeData(he,te,M.p),M.decodeTool.checkData(M.p)&&M.getDecodeYUV(M.p,ve,we)})}},{key:"getDecodeYUV",value:function(W,M,V){if(!this.reseting){var te=0;this.fps||(this.fps=this.getFPS());var he=this.decodeTool.getYUV(W),ve=this.ptsList.shift();he.pts=ve,this.previousPTS&&ve?(te=parseInt(ve-this.previousPTS),this.lastDuration=te):te=this.lastDuration,he.duration=te,he.fps=this.fps,ve&&(this.previousPTS=ve,this.yuvArray.push(he),this.yuvArray.length>10&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[])),M&&(this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),self.postMessage({type:"partEnd",data:V}))}}},{key:"reset",value:function(){this.reseting=!0,this.ptsList=[],this.ptsOffset=0,this.previousPTS=0,this.fps=0,this.yuvArray=[],this.closeDecode(),this.openDecode(),self.postMessage({type:"resetEnd",data:Date.now()}),this.reseting=!1}},{key:"flush",value:function(){this.decodeTool.flush(this.p),this.yuvArray.length&&(self.postMessage({type:"decoded",data:this.yuvArray}),this.yuvArray=[]),this.closeDecode(),self.postMessage({type:"flushEnd",data:this.previousPTS})}},{key:"getFPS",value:function(){var W=this.ptsList;return W.length>=2?Math.round(1e3/(W[1]-W[0])):null}},{key:"onWasmLoaded",value:function(){self.postMessage({type:"dataProcessorReady"})}},{key:"insertSort",value:function(W,M){var V=W.length;if(V!==0){for(var te=0;te<V;te++)if(M<W[te]){for(var he=V;he>te;)W[he]=W[he-1],he--;return void(W[te]=M)}W.push(M)}else W.push(M)}}]),ae}(),p=i(0),g=i.n(p);function m(ae,W,M){return(m=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(V,te,he){var ve=function(Oe,He){for(;!Object.prototype.hasOwnProperty.call(Oe,He)&&(Oe=D(Oe))!==null;);return Oe}(V,te);if(ve){var we=Object.getOwnPropertyDescriptor(ve,te);return we.get?we.get.call(he):we.value}})(ae,W,M||ae)}function y(ae){return function(W){if(Array.isArray(W)){for(var M=0,V=new Array(W.length);M<W.length;M++)V[M]=W[M];return V}}(ae)||function(W){if(Symbol.iterator in Object(W)||Object.prototype.toString.call(W)==="[object Arguments]")return Array.from(W)}(ae)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(ae){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(ae)}function _(ae,W){return!W||b(W)!=="object"&&typeof W!="function"?w(ae):W}function w(ae){if(ae===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae}function T(ae,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");ae.prototype=Object.create(W&&W.prototype,{constructor:{value:ae,writable:!0,configurable:!0}}),W&&$(ae,W)}function E(ae){var W=typeof Map=="function"?new Map:void 0;return(E=function(M){if(M===null||(V=M,Function.toString.call(V).indexOf("[native code]")===-1))return M;var V;if(typeof M!="function")throw new TypeError("Super expression must either be null or a function");if(W!==void 0){if(W.has(M))return W.get(M);W.set(M,te)}function te(){return I(M,arguments,D(this).constructor)}return te.prototype=Object.create(M.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),$(te,M)})(ae)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(ae,W,M){return(I=A()?Reflect.construct:function(V,te,he){var ve=[null];ve.push.apply(ve,te);var we=new(Function.bind.apply(V,ve));return he&&$(we,he.prototype),we}).apply(null,arguments)}function $(ae,W){return($=Object.setPrototypeOf||function(M,V){return M.__proto__=V,M})(ae,W)}function D(ae){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(W){return W.__proto__||Object.getPrototypeOf(W)})(ae)}function N(ae,W){if(!(ae instanceof W))throw new TypeError("Cannot call a class as a function")}function z(ae,W){for(var M=0;M<W.length;M++){var V=W[M];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(ae,V.key,V)}}function F(ae,W,M){return W&&z(ae.prototype,W),M&&z(ae,M),ae}(function(ae){ae.ERROR="ERROR",ae.INFO="INFO",ae.DATA="DATA",ae.DEMUX_DATA="DEMUX_DATA",ae.DONE="DONE"})(a||(a={}));var G,U=Object.create||function(ae){var W=function(){};return W.prototype=ae,new W},H=Object.keys||function(ae){for(var W in ae)Object.prototype.hasOwnProperty.call(ae,W);return W},X=Function.prototype.bind||function(ae){var W=this;return function(){return W.apply(ae,arguments)}},Z=10,Q=function(){function ae(){N(this,ae),this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=U(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}return F(ae,[{key:"emit",value:function(W){for(var M=arguments.length,V=new Array(M>1?M-1:0),te=1;te<M;te++)V[te-1]=arguments[te];var he,ve,we,Oe,He,We,at=W==="error";if(We=this._events)at=at&&We.error==null;else if(!at)return!1;if(at){if(arguments.length>1&&(he=arguments[1]),he instanceof Error)throw he;var ot=new Error('Unhandled "error" event. ('+he+")");throw ot.context=he,ot}if(!(ve=We[W]))return!1;var zt=typeof ve=="function";switch(we=arguments.length){case 1:ge(ve,zt,this);break;case 2:be(ve,zt,this,arguments[1]);break;case 3:ke(ve,zt,this,arguments[1],arguments[2]);break;case 4:Ae(ve,zt,this,arguments[1],arguments[2],arguments[3]);break;default:for(Oe=new Array(we-1),He=1;He<we;He++)Oe[He-1]=arguments[He];de(ve,zt,this,Oe)}return!0}},{key:"on",value:function(W,M){return function(V,te,he){var ve,we,Oe;if(typeof he!="function")throw new TypeError('"listener" argument must be a function');if((we=V._events)?(we.newListener&&(V.emit("newListener",te,he.listener?he.listener:he),we=V._events),Oe=we[te]):(we=V._events=U(null),V._eventsCount=0),Oe){if(typeof Oe=="function"?Oe=we[te]=[Oe,he]:Oe.push(he),!Oe.warned&&(ve=function(We){return We._maxListeners===void 0?ae.defaultMaxListeners:We._maxListeners}(V))&&ve>0&&Oe.length>ve){Oe.warned=!0;var He=new(function(We){function at(){return N(this,at),_(this,D(at).apply(this,arguments))}return T(at,We),at}(E(Error)))("Possible Dispatcher memory leak detected. "+Oe.length+' "'+String(te)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');He.name="MaxListenersExceededWarning",He.emitter=V,He.type=te,He.count=Oe.length,(typeof console>"u"?"undefined":b(console))==="object"&&console.warn&&console.warn("%s: %s",He.name,He.message)}}else Oe=we[te]=he,++V._eventsCount;return V}(this,W,M)}},{key:"once",value:function(W,M){if(typeof M!="function")throw new TypeError('"listener" argument must be a function');return this.on(W,function(V,te,he){var ve={fired:!1,wrapFn:void 0,target:V,type:te,listener:he},we=X.call(ye,ve);return we.listener=he,ve.wrapFn=we,we}(this,W,M)),this}},{key:"off",value:function(W,M){return Ce.call(this,W,M)}},{key:"removeAllListeners",value:function(W){var M,V,te;if(!(V=this._events))return this;if(!V.off)return arguments.length===0?(this._events=U(null),this._eventsCount=0):V[W]&&(--this._eventsCount==0?this._events=U(null):delete V[W]),this;if(arguments.length===0){var he,ve=H(V);for(te=0;te<ve.length;++te)(he=ve[te])!=="off"&&this.removeAllListeners(he);return this.removeAllListeners("off"),this._events=U(null),this._eventsCount=0,this}if(typeof(M=V[W])=="function")this.off(W,M);else if(M)for(te=M.length-1;te>=0;te--)this.off(W,M[te]);return this}},{key:"listeners",value:function(W){return Ee(this,W,!0)}},{key:"rawListeners",value:function(W){return Ee(this,W,!1)}},{key:"listenerCount",value:function(){return ae.listenerCount.apply(this,arguments)}}],[{key:"listenerCount",value:function(W,M){return typeof W.listenerCount=="function"?W.listenerCount(M):De.call(W,M)}}]),ae}();try{var le={};Object.defineProperty&&Object.defineProperty(le,"x",{value:0}),G=le.x===0}catch{G=!1}function ge(ae,W,M){if(W)ae.call(M);else for(var V=ae.length,te=Me(ae,V),he=0;he<V;++he)try{te[he].call(M)}catch(ve){console.error(ve)}}function be(ae,W,M,V){if(W)ae.call(M,V);else for(var te=ae.length,he=Me(ae,te),ve=0;ve<te;++ve)try{he[ve].call(M,V)}catch(we){console.error(we)}}function ke(ae,W,M,V,te){if(W)ae.call(M,V,te);else for(var he=ae.length,ve=Me(ae,he),we=0;we<he;++we)try{ve[we].call(M,V,te)}catch(Oe){console.error(Oe)}}function Ae(ae,W,M,V,te,he){if(W)ae.call(M,V,te,he);else for(var ve=ae.length,we=Me(ae,ve),Oe=0;Oe<ve;++Oe)try{we[Oe].call(M,V,te,he)}catch(He){console.error(He)}}function de(ae,W,M,V){if(W)ae.apply(M,V);else for(var te=ae.length,he=Me(ae,te),ve=0;ve<te;++ve)try{he[ve].apply(M,V)}catch(we){console.error(we)}}function Ce(ae,W){var M,V,te,he,ve;if(typeof W!="function")throw new TypeError('"listener" argument must be a function');if(!(V=this._events))return this;if(!(M=V[ae]))return this;if(M===W||M.listener===W)--this._eventsCount==0?this._events=U(null):(delete V[ae],V.off&&this.emit("off",ae,M.listener||W));else if(typeof M!="function"){for(te=-1,he=M.length-1;he>=0;he--)if(M[he]===W||M[he].listener===W){ve=M[he].listener,te=he;break}if(te<0)return this;te===0?M.shift():function(we,Oe){for(var He=Oe,We=He+1,at=we.length;We<at;He+=1,We+=1)we[He]=we[We];we.pop()}(M,te),M.length===1&&(V[ae]=M[0]),V.off&&this.emit("off",ae,ve||W)}return this}function ye(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var ae=new Array(arguments.length),W=0;W<ae.length;++W)ae[W]=arguments[W];this.listener.apply(this.target,ae)}}function Ee(ae,W,M){var V=ae._events;if(!V)return[];var te=V[W];return te?typeof te=="function"?M?[te.listener||te]:[te]:M?function(he){for(var ve=new Array(he.length),we=0;we<ve.length;++we)ve[we]=he[we].listener||he[we];return ve}(te):Me(te,te.length):[]}function De(ae){var W=this._events;if(W){var M=W[ae];if(typeof M=="function")return 1;if(M)return M.length}return 0}function Me(ae,W){for(var M=new Array(W),V=0;V<W;++V)M[V]=ae[V];return M}G?Object.defineProperty(Q,"defaultMaxListeners",{enumerable:!0,get:function(){return Z},set:function(ae){if(typeof ae!="number"||ae<0||ae!=ae)throw new TypeError('"defaultMaxListeners" must be a positive number');Z=ae}}):Q.defaultMaxListeners=Z;var Ie=function(ae){function W(){return N(this,W),_(this,D(W).apply(this,arguments))}return T(W,ae),W}(Q),Be=Object.prototype.toString;function et(ae){return!!ae&&b(ae)=="object"}function xt(ae){return typeof ae=="number"&&!isNaN(ae)}function Vt(ae){return et(ae)&&Be.call(ae).toLowerCase()==="[object arraybuffer]"}var Xn,ir=function(){function ae(){N(this,ae),this.list_=[]}return F(ae,[{key:"clear",value:function(){var W=this.list_.length;W>0&&this.list_.splice(0,W),this.byteLength_=null}},{key:"toNewBytes",value:function(){for(var W=null,M=0;W===null;)try{M++,W=new Uint8Array(this.byteLength)}catch(ve){if(M>50)throw ve}for(var V=0,te=0;V<this.list_.length;V++){var he=this.list_[V];W.set(he,te),te+=he.byteLength}return W}},{key:"append",value:function(W){W instanceof ae?this.list_=this.list_.concat(W.bufferList):this.list_.push(W),this.byteLength_=null}},{key:"cut",value:function(W){var M=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],V=null;if(W>0&&!this.empty){for(var te=this.list_,he=0,ve=0;te.length>0;){var we=te.shift();if(ve!==0){var Oe=W-he;if(we.byteLength>=Oe){M&&V.set(we.subarray(0,Oe),he),(we=we.subarray(Oe)).byteLength>0&&te.unshift(we);break}M&&V.set(we,he),he+=we.byteLength;break}if(we.byteLength>=W){M&&(V=we.subarray(0,W)),we.byteLength>W&&(we=we.subarray(W),te.unshift(we));break}if(M){try{V=new Uint8Array(W)}catch(He){throw"alloc_memory_error@ cache buffer: ".concat(W," ").concat(He.message)}V.set(we,0)}he+=we.byteLength,ve++}this.byteLength_=null}return V}},{key:"byteLength",get:function(){if(!xt(this.byteLength_)){for(var W=0,M=0;M<this.list_.length;M++)W+=this.list_[M].byteLength;this.byteLength_=W}return this.byteLength_}},{key:"bytes",get:function(){var W=this.bufferList,M=null;return W.length>0&&(M=W.length===0?W[0]:this.toNewBytes()),M}},{key:"empty",get:function(){return this.list_.length===0}},{key:"bufferList",get:function(){return this.list_}}]),ae}(),bi=function(){function ae(){N(this,ae),this.map_={}}return F(ae,[{key:"push",value:function(W,M){Object.prototype.hasOwnProperty.call(this.map_,W)?this.map_[W].push(M):this.map_[W]=[M]}},{key:"get",value:function(W){var M=this.map_[W];return M?M.slice():null}},{key:"getAll",value:function(){var W=[];for(var M in this.map_)W.push.apply(W,this.map_[M]);return W}},{key:"remove",value:function(W,M){var V=this.map_[W];if(V)for(var te=0;te<V.length;++te)V[te]==M&&(V.splice(te,1),--te)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(W){for(var M in this.map_)W(M,this.map_[M])}}]),ae}(),xr=function(){function ae(W,M,V){N(this,ae),this.target=W,this.type=M,this.listener=V,this.target.addEventListener?this.target.addEventListener(M,V,!1):this.target.on&&this.target.on(M,V,!1)}return F(ae,[{key:"off",value:function(){this.target.removeEventListener?this.target.removeEventListener(this.type,this.listener,!1):this.target.off&&this.target.off(this.type,this.listener,!1),this.target=null,this.listener=null}}]),ae}(),se=function(){function ae(){N(this,ae),this.bindingMap_=new bi}return F(ae,[{key:"destroy",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"on",value:function(W,M,V){if(this.bindingMap_){var te=new xr(W,M,V);return this.bindingMap_.push(M,te),this}}},{key:"once",value:function(W,M,V){this.on(W,M,function(te){this.off(W,M),V(te)}.bind(this))}},{key:"off",value:function(W,M){if(this.bindingMap_)for(var V=this.bindingMap_.get(M)||[],te=0;te<V.length;++te){var he=V[te];he.target==W&&(he.off(),this.bindingMap_.remove(M,he))}}},{key:"removeAll",value:function(){if(this.bindingMap_){for(var W=this.bindingMap_.getAll(),M=0;M<W.length;++M)W[M].off();this.bindingMap_.clear()}}}]),ae}(),dt=(typeof window>"u"?self:window).console,Dn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof importScripts<"u",Kn=">>>",un=new(function(ae){function W(){var M;return N(this,W),(M=_(this,D(W).call(this)))._enable=!1,M}return T(W,ae),F(W,[{key:"log",value:function(){for(var M=arguments.length,V=new Array(M),te=0;te<M;te++)V[te]=arguments[te];var he;Dn?un.emit(this.MSG_NAME,"log",[].concat(V).join("")):this._enable&&(he=dt.log).call.apply(he,[dt,Kn].concat(V))}},{key:"debug",value:function(){for(var M=arguments.length,V=new Array(M),te=0;te<M;te++)V[te]=arguments[te];var he;Dn?un.emit(this.MSG_NAME,"debug",[].concat(V).join("")):this._enable&&dt.debug&&(he=dt.debug).call.apply(he,[dt,Kn].concat(V))}},{key:"assert",value:function(){if(this._enable&&dt.assert){for(var M,V=arguments.length,te=new Array(V),he=0;he<V;he++)te[he]=arguments[he];var ve=te[0],we=Array.prototype.slice.call(te,1);we.unshift(Kn),(M=dt.assert).call.apply(M,[dt,ve].concat(y(we)))}}},{key:"warn",value:function(){for(var M=arguments.length,V=new Array(M),te=0;te<M;te++)V[te]=arguments[te];var he;Dn?un.emit(this.MSG_NAME,"warn",[].concat(V).join("")):this._enable&&(he=dt.warn).call.apply(he,[dt,Kn].concat(V))}},{key:"error",value:function(){for(var M=arguments.length,V=new Array(M),te=0;te<M;te++)V[te]=arguments[te];var he;Dn?un.emit(this.MSG_NAME,"error",[].concat(V).join("")):this._enable&&(he=dt.error).call.apply(he,[dt,Kn].concat(V))}},{key:"enable",get:function(){return this._enable},set:function(M){this._enable=M,this.MSG_NAME="__log__"}}]),W}(Q)),xi=function(ae){function W(){return N(this,W),_(this,D(W).call(this))}return T(W,ae),F(W,[{key:"pipe",value:function(M){return this.on("reset",function(){M.reset()}),this.on("data",function(V){M.push(V)}),this.on("done",function(V){M.flush(V)}),M}},{key:"unpipe",value:function(){return this.removeAllListeners("reset"),this.removeAllListeners("data"),this.removeAllListeners("done"),this}},{key:"push",value:function(M,V){this.emit("data",M)}},{key:"flush",value:function(M){this.emit("done",M)}},{key:"reset",value:function(){this.emit("reset")}}]),W}(Q),Wi=function(ae){function W(){var M,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return N(this,W),M=_(this,D(W).call(this)),V.debug&&(un.enable=!0),M.ctx_=new Ie,M.options_=V,M.cache_buffer_=new ir,M}return T(W,ae),F(W,[{key:"listenEndStream_",value:function(){var M=this;this.eventManager_=new se,this.eventManager_.on(this.endStream,"data",function(V){M.emit(a.DEMUX_DATA,V)}).on(this.endStream,"done",function(V){M.emit(a.DONE,V)}).on(this.ctx_,"error",function(V){M.emit(a.ERROR,V)})}},{key:"constraintPushData_",value:function(M){var V,te=null;return Vt(M)||et(V=M)&&Be.call(V).toLowerCase()==="[object uint8array]"?te=Vt(M)?new Uint8Array(M):M:(un.error("Data pushed is not an ArrayBuffer or Uint8Array: ".concat(M)),te)}},{key:"reset",value:function(){}},{key:"destroy",value:function(){this.unpipe(),this.endStream.unpipe(),this.eventManager_.removeAll()}}]),W}(xi);(function(ae){ae[ae.WORKER_EXCEPTION=0]="WORKER_EXCEPTION",ae[ae.WORKER_MSG_EXCEPTION=1]="WORKER_MSG_EXCEPTION",ae[ae.TS_SYNC_BYTE=2]="TS_SYNC_BYTE",ae[ae.FLV_HEAD_SIGNATURE=3]="FLV_HEAD_SIGNATURE",ae[ae.FLV_NOT_EXPECTED_ADJACENT_DATA=4]="FLV_NOT_EXPECTED_ADJACENT_DATA"})(Xn||(Xn={}));var To=Xn;function Eo(ae){var W=0;return ArrayBuffer.isView(ae)&&(W=ae.byteOffset,ae=ae.buffer),new DataView(ae,W)}var Ga=function(){function ae(){N(this,ae)}return F(ae,[{key:"readUint8",value:function(W,M){return Eo(W).getUint8(M)}},{key:"readUint16",value:function(W,M){var V=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return Eo(W).getUint16(M,V)}},{key:"readUint32",value:function(W,M){var V=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return Eo(W).getUint32(M,V)}}]),ae}(),Wd=function(ae){function W(M){var V;N(this,W),(V=_(this,D(W).call(this))).table_id=M[0],V.section_syntax_indicator=M[1]>>7,V.section_length=(15&M[1])<<8|M[2],V.transport_stream_id=V.readUint16(M,3),V.version_number=M[5]>>1&31,V.current_next_indicator=M[5]&&1,V.section_number=M[6],V.last_section_number=M[7],V.network_PID=0;var te,he=0,ve=V.section_length-4-5;for(V.pmtTable=[];he<ve;he+=4)(te=V.readUint16(M,8+he))==0?(V.network_PID=(31&M[10+he])<<8|M[11+he],un.log("packet->network_PID %0x /n/n",V.network_PID)):V.pmtTable.push({programNum:te,program_map_PID:(31&M[10+he])<<8|M[11+he]});var we=V.section_length+3;return V.CRC_32=(255&M[we-4])<<24|(255&M[we-3])<<16|(255&M[we-2])<<8|255&M[we-1],V}return T(W,ae),W}(Ga),Hi=function(ae){function W(M){var V;if(N(this,W),(V=_(this,D(W).call(this))).table_id=M[0],V.section_syntax_indicator=M[1]>>7,V.section_length=(15&M[1])<<8|M[2],V.program_number=V.readUint16(M,3),V.version_number=M[5]>>1&31,V.current_next_indicator=M[5]&&1,V.section_number=M[6],V.last_section_number=M[7],V.PCR_PID=(31&M[8])<<8|M[9],V.program_info_length=(15&M[10])<<8|M[11],V.program_info_length<0)return _(V);if(V.program_info_length>2)for(var te=0;te<V.program_info_length;)te+=M[13+te];var he=12+V.program_info_length,ve=V.section_length-V.program_info_length-9-4,we=he+ve;if(he>=we)return un.warn("es_section_pos < es_section_end ".concat(he,", ").concat(we)),_(V);V.pes_table=[];for(var Oe=0;Oe<ve;){var He=M[he+Oe],We=8191&V.readUint16(M,he+Oe+1),at=4095&V.readUint16(M,he+Oe+3);if(V.pes_table.push({streamType:He,PID:We}),at>2)for(var ot=0,zt=he+Oe+5;ot<at;)ot+=M[zt+ot];Oe+=at+5}var $n=V.section_length+3;return V.CRC_32=(255&M[$n-4])<<24|(255&M[$n-3])<<16|(255&M[$n-2])<<8|255&M[$n-1],V}return T(W,ae),F(W,[{key:"parse",value:function(){}}]),W}(Ga),ua=function(ae){function W(M){var V;N(this,W),(V=_(this,D(W).call(this))).table_id=M[0],V.section_syntax_indicator=M[1]>>7,V.section_length=(15&M[1])<<8|M[2],V.transport_stream_id=V.readUint16(M,3),V.version_number=M[5]>>1&31,V.current_next_indicator=1&M[5],V.section_number=M[6],V.last_section_number=M[7],V.original_network_id=V.readUint16(M,8);var te=V.section_length-8-4;V.service_table=[];for(var he=0;he<te;){for(var ve=0,we={service_id:V.readUint16(M,11),EIT_schedule_flag:2&M[13],EIT_present_following_flag:1&M[13],running_status:M[14]>>5,free_CA_mode:M[14]>>4&1,descriptors_loop_length:(15&M[14])<<8|M[15],provider_name:"",name:""};ve<we.descriptors_loop_length;){var Oe=16+ve,He=M[Oe],We=M[Oe+1];switch(He){case 72:var at=[],ot=M[Oe+3],zt=0,$n=0,ft=Oe+4;for(zt=0;zt<ot;zt++)at.push(String.fromCharCode(M[ft])),ft+=1;we.provider_name=at.join("");var _i=[],kt=M[ft];for(ft+=1,$n=0;$n<kt;$n++)_i.push(String.fromCharCode(M[ft])),ft+=1;we.name=_i.join("");break;default:un.warn("sdt section unhandled descriptor_tag ".concat(He))}ve+=2+We}V.service_table.push(we),he+=5+we.descriptors_loop_length}return V}return T(W,ae),W}(Ga),fr=function ae(){N(this,ae)},Il=function(){function ae(W){N(this,ae),this.context=W,this.metadata=new fr,this.pat_table=[],this.pes_streams=[]}return F(ae,[{key:"reset",value:function(){this.metadata=new fr,this.pat_table.splice(0,this.pat_table.length),this.pes_streams.splice(0,this.pes_streams.length)}},{key:"parse",value:function(W){W.PID===0?this._parsePat(W):W.PID===1||W.PID===2||3<=W.PID&&W.PID<=15||(W.PID===17?this._parseSdt(W):W.PID===this.currentProgramPID&&this._parsePmt(W))}},{key:"findTrack",value:function(W){for(var M=null,V=this.pes_streams,te=0;te<V.length;te++)if(V[te].id===W){M=V[te];break}return M}},{key:"_parsePat",value:function(W){var M;if(W.payload_unit_start_indicator){var V=W.payload[0];M=W.payload.subarray(V+1)}else M=W.payload;for(var te=new Wd(M),he=0;he<te.pmtTable.length;he++)this._add_pid_to_pmt(te.pmtTable[he].programNum,te.pmtTable[he].program_map_PID);return te}},{key:"_add_pid_to_pmt",value:function(W,M){var V=this.pat_table;(function(te){for(var he,ve=0;ve<V.length;ve++)if((he=V[ve]).id===te)return{idx:ve,item:he};return null})(W)||V.push({id:W,pid:M})}},{key:"_parsePmt",value:function(W){var M;if(W.payload_unit_start_indicator){var V=W.payload[0];M=W.payload.subarray(V+1)}else M=W.payload;for(var te=new Hi(M),he=0;he<te.pes_table.length;he++)this._add_pes_stream(te.pes_table[he],te);return te}},{key:"_add_pes_stream",value:function(W,M){var V=this.pes_streams;(function(te){for(var he,ve=0;ve<V.length;ve++)if((he=V[ve]).id===te)return{idx:ve,item:he};return null})(W.PID)||V.push({id:W.PID,stream_type:W.streamType,pcr_pid:M.PCR_PID,duration:0,sps:[],pps:[],pixelRatio:[1,1],timescale:9e4,width:0,height:0})}},{key:"_parseSdt",value:function(W){var M;if(W.payload_unit_start_indicator){var V=W.payload[0];M=W.payload.subarray(V+1)}else M=W.payload;var te=new ua(M);return te.service_table.length>0&&(this.metadata.service_name=te.service_table[0].name,this.metadata.service_provider=te.service_table[0].provider_name),te}},{key:"currentProgramPID",get:function(){for(var W=[],M=0;M<this.pat_table.length;M++)W.push(this.pat_table[M].pid);return W.length>0?W[0]:-1}}]),ae}(),Pl=function(ae){function W(M,V){var te;return N(this,W),(te=_(this,D(W).call(this))).context=M,te.PSI=V,te.videoTrack=null,te.audioTrack=null,te.captionTrack=null,te}return T(W,ae),F(W,[{key:"push",value:function(M){for(var V,te=M,he=0;he<te.length;he++)switch((V=te[he]).type){case"video":this._complexVideo(V);break;case"audio":this._complexAudio(V);break;case"caption":this._complexCaption(V)}}},{key:"flush",value:function(){this.emit("done"),this._clearStream()}},{key:"reset",value:function(){this._clearStream()}},{key:"_clearStream",value:function(){this.videoTrack=null,this.audioTrack=null,this.captionTrack=null}},{key:"_complexVideo",value:function(M){var V=this.PSI.findTrack(M.trackId);V&&(V.type="video",V.gops=M,V.firstDTS=M[0][0].dts,V.firstPTS=M[0][0].pts,V.duration=Number.POSITIVE_INFINITY,this.videoTrack=V,this.emit("data",{videoTrack:this.videoTrack}))}},{key:"_complexAudio",value:function(M){var V=this.PSI.findTrack(M.trackId);V&&(V.type="audio",V.frames=M,V.firstPTS=V.firstDTS=M[0].dts,V.duration=Number.POSITIVE_INFINITY,this.audioTrack=V,this.emit("data",{audioTrack:this.audioTrack}))}},{key:"_complexCaption",value:function(){}}]),W}(xi),ko={mac:!1,iphone:!1,android:!1},Yn={version:!1,CHROME:!1,SAFARI:!1,FIREFOX:!1,IE11:!1,IE:!1,EDGE:!1,WECHAT:!1},Bt=navigator.userAgent.toLowerCase(),Pr=/(edge)\/([\w.]+)/.exec(Bt)||/(opr)[/]([\w.]+)/.exec(Bt)||/(chrome)[ /]([\w.]+)/.exec(Bt)||/(firefox)[ /]([\w.]+)/.exec(Bt)||/(iemobile)[/]([\w.]+)/.exec(Bt)||/(version)(applewebkit)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Bt)||/(webkit)[ /]([\w.]+).*(version)[ /]([\w.]+).*(safari)[ /]([\w.]+)/.exec(Bt)||/(webkit)[ /]([\w.]+)/.exec(Bt)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(Bt)||/(msie) ([\w.]+)/.exec(Bt)||Bt.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(Bt)||Bt.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(Bt)||[],_s=/(ipad)/.exec(Bt)||/(ipod)/.exec(Bt)||/(windows phone)/.exec(Bt)||/(iphone)/.exec(Bt)||/(kindle)/.exec(Bt)||/(silk)/.exec(Bt)||/(android)/.exec(Bt)||/(win)/.exec(Bt)||/(mac)/.exec(Bt)||/(linux)/.exec(Bt)||/(cros)/.exec(Bt)||/(playbook)/.exec(Bt)||/(bb)/.exec(Bt)||/(blackberry)/.exec(Bt)||[],_r={version:void 0},Gi={browser:Pr[5]||Pr[3]||Pr[1]||"",version:Pr[2]||Pr[4]||"0",versionNumber:Pr[4]||Pr[2]||"0",platform:_s[0]||""};if(Gi.browser){_r[Gi.browser]=!0;var Ao=Gi.versionNumber.split(".");_r.version={major:parseInt(Gi.versionNumber,10),string:Gi.version},Ao.length>1&&(_r.version.minor=parseInt(Ao[1],10)),Ao.length>2&&(_r.version.build=parseInt(Ao[2],10))}Yn.version=_r.version,Yn.CHROME=!!_r.chrome,Yn.SAFARI=!!_r.safari&&!Yn.CHROME,Yn.FIREFOX=!!_r.firefox,Yn.IE11=/rv:11/.test(Bt),Yn.IE=!!_r.msie||Yn.IE11,Yn.EDGE=!!_r.edge,Yn.WECHAT=/(wechat)|(micromessenger)/.test(Bt),ko.mac=!!Gi.platform.mac,ko.iphone=!!Gi.platform.iphone,ko.android=!!Gi.platform.android;var Dl=Yn,ja=ko,mu=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],$l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],yu=function(ae){function W(){return N(this,W),_(this,D(W).call(this))}return T(W,ae),F(W,[{key:"push",value:function(M){for(var V,te,he,ve,we,Oe=M.pts,He=M.dts,We=M.payload,at=0,ot=0;at+5<We.length;)if(We[at]===255&&(246&We[at+1])==240){if(te=2*(1&~We[at+1]),V=(3&We[at+3])<<11|We[at+4]<<3|(224&We[at+5])>>5,we=9e4*(ve=1024*(1+(3&We[at+6])))/$l[(60&We[at+2])>>>2],he=at+V,We.byteLength<he)return;var zt={pts:Oe+ot*we,dts:He+ot*we,sampleCount:ve,audioObjectType:1+(We[at+2]>>>6&3),channelCount:(1&We[at+2])<<2|(192&We[at+3])>>>6,sampleRate:$l[(60&We[at+2])>>>2],samplingFrequencyIndex:(60&We[at+2])>>>2,sampleSize:16,data:We.subarray(at+7+te,he)};if(this.emit("frame",zt),We.byteLength===he)return We=void 0,void this.emit("done");ot++,We=We.subarray(he)}else at++}}]),W}(Q),Vr=function(ae){function W(M){var V;return N(this,W),(V=_(this,D(W).call(this))).PSI=M,V.trackId=null,V.codec=new yu,V.codec.on("frame",function(te){V.frames.push(te),V.frames.byteLength+=te.data.byteLength,V.frames.trackId=V.trackId}),V._newFrames(),V}return T(W,ae),F(W,[{key:"push",value:function(M){M.stream_type===15&&(this.trackId=M.pid,this.codec.push({dts:M.pes.DTS,pts:M.pes.PTS,payload:M.pes.data_byte}))}},{key:"flush",value:function(){if(this.frames.length>0){var M=this.frames.length,V=this.frames[0],te=this.frames[M-1],he=te.sampleRate*te.sampleCount/9e4;this.frames.firstDTS=V.dts,this.frames.firstPTS=V.pts,this.frames.duration=M===1?he:he+(te.pts-V.pts),this._updateTrackMeta(V),this.emit("data",this.frames),this.reset(),this.emit("done")}}},{key:"reset",value:function(){this.trackId=null,this._newFrames()}},{key:"_newFrames",value:function(){this.frames=[],this.frames.type="audio",this.frames.byteLength=0,this.frames.duration=0,this.frames.firstDTS=0,this.frames.firstPTS=0}},{key:"_updateTrackMeta",value:function(M){var V=this.PSI.findTrack(this.trackId),te=function(he,ve,we){var Oe,He,We=he;if(!(ve>mu.length-1))return Dl.FIREFOX?ve>=6?(he=5,He=new Array(4),Oe=ve-3):(he=2,He=new Array(2),Oe=ve):ja.android?(he=2,He=new Array(2),Oe=ve):(he=5,He=new Array(4),ve>=6?Oe=ve-3:(we===1&&(he=2,He=new Array(2)),Oe=ve)),He[0]=he<<3,He[0]|=(14&ve)>>1,He[1]|=(1&ve)<<7,He[1]|=we<<3,he===5&&(He[1]|=(14&Oe)>>1,He[2]=(1&Oe)<<7,He[2]|=8,He[3]=0),{config:He,sampleRate:mu[ve],channelCount:we,codec:"mp4a.40."+he,realCodec:"mp4a.40."+We};un.error("invalid sampling index:".concat(ve))}(M.audioObjectType,M.samplingFrequencyIndex,M.channelCount);V.config=te.config,V.sampleRate=te.sampleRate,V.inputTimeScale=V.inputTimeScale||V.timescale,V.timescale=te.sampleRate,V.channelCount=te.channelCount,V.codec=te.codec,V.realCodec=te.realCodec,V.isAAC=!0}}]),W}(xi);function Nl(ae){for(var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,V=0,te="",he=W;he<W+M;he++)V=7-he%8,te+=ae[Math.floor(he/8)]>>V&1;return parseInt(te,2)}function hr(ae){for(var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=[],V=8*ae.byteLength,te=!1,he=0,ve=0,we="",Oe=W;Oe<V;Oe++)if(he=7-Oe%8,ve=ae[Math.floor(Oe/8)]>>he&1,!te){if(ve!==0){te=!0,W=Oe;break}M.push(0)}for(var He=M.length+1,We=W;We<W+He;We++)he=7-We%8,we+=ve=ae[Math.floor(We/8)]>>he&1;return{bitLength:M.length+He,value:parseInt(we,2)-1}}var st={readUEV:hr,readSEV:function(ae){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=hr(ae,W),V=M.value,te=Math.pow(-1,V+1)*Math.ceil(V/2);return{bitLength:M.bitLength,value:te}},readBit:Nl,readByte:function(ae){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Nl(ae,W,8)}},$e=0;function la(ae,W){for(var M,V=8,te=8,he=0;he<W;he++)te!=0&&(M=st.readUEV(ae,$e),$e+=M.bitLength,te=(V+M.value+256)%256),V=ae[he]}var ws,_n,ar=function(ae){function W(M){var V;switch(N(this,W),(V=_(this,D(W).call(this))).forbidden_zero_bit=M[0]>>7,V.ref_idc=M[0]>>5&3,V.unit_type=31&M[0],V.data=function(te){for(var he,ve=te.byteLength,we=[],Oe=1,He=new Uint8Array(0);Oe<ve-2;)te[Oe]===0&&te[Oe+1]===0&&te[Oe+2]===3?(we.push(Oe+2),Oe+=2):Oe++;if(we.length===0)return te;he=ve-we.length;try{He=new Uint8Array(he)}catch{throw"epsb alloc mem error ".concat(he)}var We=0;for(Oe=0;Oe<he;We++,Oe++)We===we[0]&&(We++,we.shift()),He[Oe]=te[We];return He}(M.subarray(1)),V.rawData=M,V.unit_type){case 1:break;case 2:case 3:case 4:case 5:break;case 7:V.sps=function(te){$e=0;var he,ve,we,Oe,He,We,at,ot=te[0],zt=te[1],$n=te[2],ft=te.subarray(3),_i=0,kt=[1,1],ca=1,As=0,ji=!0,si=st.readUEV(ft,$e);if($e+=si.bitLength,ot==100||ot==110||ot==122||ot==244||ot==44||ot==83||ot==86||ot==118||ot==128){var qi=st.readUEV(ft,$e);$e+=qi.bitLength,qi.value==3&&($e+=1);var xu=st.readUEV(ft,$e);$e+=xu.bitLength;var gn=st.readUEV(ft,$e);if($e+=gn.bitLength,$e+=1,_i=st.readBit(ft,$e),$e+=1,_i)for(var Po=0;Po<(qi.value!=3?8:12);Po++){var on=st.readBit(ft,$e);$e+=1,on&&la(ft,Po<6?16:64)}}var ui=st.readUEV(ft,$e);$e+=ui.bitLength;var Do=st.readUEV(ft,$e),Rs=Do.value;if($e+=Do.bitLength,Rs===0)he=st.readUEV(ft,$e),$e+=he.bitLength;else if(Rs===1){$e+=1,ve=st.readSEV(ft,$e),$e+=ve.bitLength,we=st.readSEV(ft,$e),$e+=we.bitLength,Oe=st.readUEV(ft,$e),$e+=Oe.bitLength;for(var $o,Df=0;Df<Oe.value;Df++)$o=st.readSEV(ft,$e),$e+=$o.bitLength}var $f=st.readUEV(ft,$e);$e+=$f.bitLength,$e+=1;var Nf=st.readUEV(ft,$e);$e+=Nf.bitLength;var Of=st.readUEV(ft,$e);$e+=Of.bitLength;var Is=st.readBit(ft,$e);$e+=1,Is||($e+=1),$e+=1;var Ps=st.readBit(ft,$e);$e+=1;var Ml=0,Lf=0,Ds=0,Nn=0;if(Ps){var _u=st.readUEV(ft,$e);$e+=_u.bitLength,Ml=_u.value;var wu=st.readUEV(ft,$e);$e+=wu.bitLength,Lf=wu.value;var Su=st.readUEV(ft,$e);$e+=Su.bitLength,Ds=Su.value;var No=st.readUEV(ft,$e);$e+=No.bitLength,Nn=No.value}var Ur=st.readBit(ft,$e);if($e+=1,Ur){var Gd=st.readBit(ft,$e);if($e+=1,Gd){var Bl=st.readByte(ft,$e);switch($e+=8,Bl){case 1:kt=[1,1];break;case 2:kt=[12,11];break;case 3:kt=[10,11];break;case 4:kt=[16,11];break;case 5:kt=[40,33];break;case 6:kt=[24,11];break;case 7:kt=[20,11];break;case 8:kt=[32,11];break;case 9:kt=[80,33];break;case 10:kt=[18,11];break;case 11:kt=[15,11];break;case 12:kt=[64,33];break;case 13:kt=[160,99];break;case 14:kt=[4,3];break;case 15:kt=[3,2];break;case 16:kt=[2,1];break;case 255:var Fl=st.readByte(ft,$e);$e+=8;var Vl=st.readByte(ft,$e);$e+=8;var zl=st.readByte(ft,$e);$e+=8;var Cu=st.readByte(ft,$e);$e+=8,kt=[Fl<<8|Vl,zl<<8|Cu]}kt&&(ca=kt[0]/kt[1]),Bl===255&&($e+=16,$e+=16)}var Oo=st.readBit(ft,$e);$e+=1,Oo&&($e+=1);var Ul=st.readBit(ft,$e);if($e+=1,Ul){He=st.readBit(ft,$e,3),$e+=3,$e+=1;var Tu=st.readBit(ft,$e);$e+=1,Tu&&($e+=24)}var Mf=st.readBit(ft,$e);if($e+=1,Mf){var Bf=st.readUEV(ft,$e);$e+=Bf.bitLength;var $s=st.readUEV(ft,$e);$e+=$s.bitLength}var Ff=st.readBit(ft,$e);$e+=1,Ff&&(We=st.readBit(ft,$e,32),$e+=32,at=st.readBit(ft,$e,32),$e+=32,ji=!!st.readBit(ft,$e),$e+=1,As=at/(2*We))}return{payload:ft,profile_idc:ot,profile_compatibility:zt,level_idc:$n,sps_id:si.value,log2_max_frame_num_minus4:Do.value,pic_order_cnt_type:Rs,log2_max_pic_order_cnt_lsb_minus4:he?he.value:0,width:Math.ceil((16*(Nf.value+1)-2*Ml-2*Lf)*ca),height:(2-Is)*(Of.value+1)*16-2*Ds-2*Nn,pixelRatio:kt,video_format:He,fps:As,fixedFPS:ji}}(V.data);break;case 8:V.pps=function(te){var he,ve=0,we=te,Oe=[],He=0;ve+=st.readUEV(we,ve).bitLength,ve+=st.readUEV(we,ve).bitLength,ve+=1,ve+=1;var We=st.readUEV(we,ve);if(ve+=We.bitLength,We.value>0){var at=st.readUEV(we,ve);ve+=at.bitLength;var ot=0;switch(at.value){case 0:for(ot=0;ot<=at.value;ot++)ve+=st.readUEV(we,ve).bitLength;break;case 2:for(ot=0;ot<=at.value;ot++)ve+=st.readUEV(we,ve).bitLength,ve+=st.readUEV(we,ve).bitLength;break;case 3:case 4:case 5:ve+=1,ve+=st.readUEV(we,ve).bitLength;break;case 6:ve+=(he=st.readUEV(we,ve)).bitLength;var zt=Math.ceil(Math.log2(We.value+1));for(He=0;He<=he.value;He++)Oe.push(st.readBit(we,ve,zt)),ve+=zt}}return ve+=st.readUEV(we,ve).bitLength,ve+=st.readUEV(we,ve).bitLength,ve+=1,ve+=1,ve+=st.readSEV(we,ve).bitLength,ve+=st.readSEV(we,ve).bitLength,ve+=st.readSEV(we,ve).bitLength,ve+=1,ve+=1,ve+=1,{sliceGroupNum:We.value+1}}(V.data);break;case 6:V.sei=(V.data,{});break;case 9:V.primary_pic_type=V.data[0]>>5}return V}return T(W,ae),W}(Ga),Ss=function(ae){function W(){var M;return N(this,W),(M=_(this,D(W).call(this))).cachedBytes=null,M}return T(W,ae),F(W,[{key:"push",value:function(M){var V,te=0,he=0,ve=0,we=M.pts,Oe=M.dts,He=M.payload,We=M.naluSizeLength;if(this.cachedBytes){try{V=new Uint8Array(this.cachedBytes.byteLength+He.byteLength)}catch{throw"h264 alloc mem error ".concat(this.cachedBytes.byteLength,"/").concat(He.byteLength)}V.set(this.cachedBytes),V.set(He,this.cachedBytes.byteLength)}else V=He;if(We){var at=0,ot=0,zt=0;do{ot=0;for(var $n=0;$n<We;$n++)ot|=V[at+$n]<<8*(We-$n-1);(zt=(at+=We)+ot)>V.length&&(zt=V.length);var ft=V.subarray(at,zt),_i=new ar(ft);_i.pts=we,_i.dts=Oe,this.emit("nalu",_i),at=zt}while(at<V.length)}else{var kt=V.byteLength-1,ca=0;do{if(V[kt]!==0)break;ca++,kt--}while(kt>0);ca>=3&&(V=V.subarray(0,kt+1));do{var As=V[te]<<24|V[te+1]<<16|V[te+2]<<8|V[te+3],ji=V.length-te>=4?As:-1,si=0,qi=te===V.length-1;if(ji>>8==1?si=3:ji===1&&(si=4),si===3||si===4||qi){var xu=he+ve,gn=qi&&ca>=3;if(te>he&&(!qi||gn)){var Po=V.subarray(xu,gn?te+1:te),on=new ar(Po);on.pts=we,on.dts=Oe,this.emit("nalu",on),he=te}qi&&(ca<3?(this.cachedBytes=V.subarray(he),this.cachedBytes.pts=we,this.cachedBytes.dts=Oe,this.cachedBytes.startCodeLength=ve):this.cachedBytes=null),te===he&&(ve=si),te+=si||1}else te++}while(te<V.length)}if(this.cachedBytes){var ui=new ar(this.cachedBytes.subarray(this.cachedBytes.startCodeLength));ui.pts=this.cachedBytes.pts,ui.dts=this.cachedBytes.dts,this.emit("nalu",ui),this.cachedBytes=null}this.emit("done")}},{key:"reset",value:function(){this.cachedBytes=null}}]),W}(Q),Hd=function(ae){function W(M){var V;return N(this,W),(V=_(this,D(W).call(this))).PSI=M,V.trackId=null,V.currentFrame=[],V.codec=new Ss,V._newGop(),V._newGops(),V.codec.on("nalu",function(te){if(te.unit_type===7){var he=V.PSI.findTrack(V.trackId),ve=function(we){for(var Oe="avc1.",He=[we.profile_idc,we.profile_compatibility,we.level_idc],We=0;We<He.length;We++){var at=He[We].toString(16);at.length<2&&(at="0"+at),Oe+=at}return{codec:Oe}}(te.sps);he.codec=ve.codec,he.width=te.sps.width,he.height=te.sps.height,he.profileIdc=te.sps.profile_idc,he.profileCompatibility=te.sps.profile_compatibility,he.levelIdc=te.sps.level_idc,he.pixelRatio=te.sps.pixelRatio,he.sps=[te.rawData]}else te.unit_type===8&&(V.PSI.findTrack(V.trackId).pps=[te.rawData]);V._grouping(te)}),V}return T(W,ae),F(W,[{key:"push",value:function(M){var V=M.stream_type,te=M.pes,he=M.pid;if(V===27||V===36){this.trackId=he;var ve={pts:te.PTS,dts:te.DTS,payload:te.data_byte};this.codec.push(ve)}}},{key:"flush",value:function(){this.currentFrame.length>0&&((!this.currentFrame.duration||this.currentFrame.duration<=0)&&(this.currentFrame.duration=this.prevFrame.duration||0),this._pushFrameIntoGop(),this.currentFrame=[]),this.gop.length>0&&this._pushGopIntoGroup()}},{key:"reset",value:function(){this.codec.reset(),this.currentFrame=[],this._newGop(),this._newGops()}},{key:"_grouping",value:function(M){M.unit_type===9?(this.currentFrame.length>0&&(this.currentFrame.duration=M.dts-this.currentFrame.dts,this.gop.length>0&&this.currentFrame.keyframe&&(this.gop.trackId=this.trackId,this._pushGopIntoGroup()),this.currentFrame.keyframe||this.gop.length>0?this._pushFrameIntoGop():un.warn("h264 codec drop frame")),this.prevFrame=this.currentFrame,this.currentFrame=[],this.currentFrame.keyframe=!1,this.currentFrame.byteLength=0,this.currentFrame.naluCount=0,this.currentFrame.pts=M.pts,this.currentFrame.dts=M.dts):(M.unit_type===5&&(this.currentFrame.keyframe=!0),this.currentFrame.byteLength+=M.rawData.byteLength,this.currentFrame.naluCount++,this.currentFrame.push(M)),this.currentFrame.duration=M.dts-this.currentFrame.dts}},{key:"_newGop",value:function(){this.gop=[],this.gop.duration=0,this.gop.naluCount=0,this.gop.byteLength=0}},{key:"_pushFrameIntoGop",value:function(){this.gop.push(this.currentFrame),this.gop.duration+=this.currentFrame.duration,this.gop.byteLength+=this.currentFrame.byteLength,this.gop.naluCount+=this.currentFrame.naluCount}},{key:"_newGops",value:function(){this.gops=[],this.gops.type="video",this.gops.duration=0,this.gops.naluCount=0,this.gops.byteLength=0,this.gops.frameLength=0,this.gops.firstDTS=0}},{key:"_pushGopIntoGroup",value:function(){var M=this.gop[0];this.gops.trackId=this.trackId,this.gops.duration+=this.gop.duration,this.gops.byteLength+=this.gop.byteLength,this.gops.naluCount+=this.gop.naluCount,this.gops.frameLength+=this.gop.length,this.gops.firstDTS=M.dts,this.gops.firstPTS=M.pts,this.gops.push(this.gop),this.emit("data",this.gops),this._newGop(),this._newGops(),this.emit("done")}}]),W}(xi),bu=function(ae){function W(M,V){var te,he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N(this,W),(te=_(this,D(W).call(this))).context=M,te.PSI=V,te.options=he,te.tracks=[],te.adtsStream=new Vr(V),te.avcStream=new Hd(V),te.streams=[te.adtsStream,te.avcStream],he.decodeCodec&&(te.avcStream.on("data",function(ve){var we=he.config.stubTime;if(xt(we)){var Oe=(ve.firstPTS+ve.duration)/9e4;if(Oe<we)return void un.warn("drop avc gop, start/end/stubTime(".concat(ve.firstPTS,"/").concat(Oe,"/").concat(we,")"))}te.tracks.push(ve),te.emit("data",te.tracks),te.tracks=[],te.adtsStream.flush()}),te.adtsStream.on("data",function(ve){var we=he.config.stubTime;if(xt(we)){var Oe=(ve.firstPTS+ve.duration)/9e4;if(Oe<we)return void un.warn("drop adts, start/end/stubTime(".concat(ve.firstPTS,"/").concat(Oe,"/").concat(we,")"))}te.tracks.push(ve),te.emit("data",te.tracks),te.tracks=[]})),te}return T(W,ae),F(W,[{key:"push",value:function(M){var V=this.options,te=this.adtsStream,he=this.avcStream,ve=M.stream_type;if(V.decodeCodec)switch(ve){case 27:case 36:he.push(M);break;case 15:te.push(M);break;default:un.warn("ts elementary encounter unknown stream type ".concat(ve))}else this.emit("data",M)}},{key:"flush",value:function(){for(var M=this.streams,V=this.tracks,te=0;te<this.streams.length;te++)M[te].flush();V.length>0&&this.emit("data",V),this.emit("done"),V.splice(0,V.length)}},{key:"reset",value:function(){this.tracks=[];for(var M=0;M<this.streams.length;M++)this.streams[M].reset();this.emit("reset")}}]),W}(xi),Cs=function(ae){function W(M){var V;return N(this,W),(V=_(this,D(W).call(this))).start_code_prefix=V.readUint16(M,0)<<8|M[2],V.stream_id=M[3],V.packet_length=V.readUint16(M,4),V.data_alignment_indicator=4&M[6],V.copyright=2&M[6],V.PTS_DTS_flags=M[7]>>6,V.ESCR_flag=32&M[7],V.ES_rate_flag=16&M[7],V.trick_mode_flag=8&M[7],V.additional_copy_info_flag=4&M[7],V.CRC_flag=2&M[7],V.extension_flag=1&M[7],V.header_data_length=M[8],V.PTS=0,(2&V.PTS_DTS_flags)==2&&(V.PTS=V.calcTimestamp_(M,9)),V.DTS=V.PTS,(1&V.PTS_DTS_flags)==1&&(V.DTS=V.calcTimestamp_(M,14)),V.data_byte=M.subarray(9+V.header_data_length),V}return T(W,ae),F(W,[{key:"calcTimestamp_",value:function(M,V){return 536870912*(14&M[V])+(M[V+1]<<22)+(M[V+2]>>1<<15)+(M[V+3]<<7)+(M[V+4]>>1)}},{key:"valid",value:function(){var M=this.start_code_prefix;return M[0]===0&&M[1]===0&&M[2]===1}}]),W}(Ga),Ts=function(ae){function W(M,V){var te;return N(this,W),(te=_(this,D(W).call(this))).context=M,te.PSI=V,te.PID=null,te.cache_buffer=new ir,te}return T(W,ae),F(W,[{key:"push",value:function(M){M.PID>255&&M.PID<8191&&(this.PSI.currentProgramPID==-1?this._pushPacket(M):this.PSI.currentProgramPID!==M.PID&&(M.payload_unit_start_indicator===1&&this._assembleOnePES(),this._pushPacket(M)))}},{key:"flush",value:function(){this._assembleOnePES(),this.emit("done")}},{key:"reset",value:function(){this._clearCached(),this.emit("reset")}},{key:"_clearCached",value:function(){this.PID=null,this.cache_buffer.clear()}},{key:"_pushPacket",value:function(M){var V=this.cache_buffer.empty;V&&M.payload_unit_start_indicator===0||(V&&(this.PID=M.PID),this.cache_buffer.append(M.payload))}},{key:"_assembleOnePES",value:function(){if(!this.cache_buffer.empty){var M;try{M=this.cache_buffer.toNewBytes()}catch{throw"pes alloc mem err ".concat(this.cache_buffer.byteLength)}var V=new Cs(M),te=this.PSI.findTrack(this.PID);if(te){var he={pid:te.id,stream_type:te.stream_type,pcr_pid:te.pcr_pid,pes:V};this.emit("data",he)}this._clearCached()}}}]),W}(xi),Ro=function(ae){function W(M){var V;if(N(this,W),(V=_(this,D(W).call(this))).sync_byte=M[0],V.transport_error_indicator=M[1]>>7,V.payload_unit_start_indicator=M[1]>>6&1,V.transport_priority=M[1]>>>5&1,V.PID=8191&V.readUint16(M,1),V.tsc=M[3]>>6,V.afc=M[3]>>4&3,V.continuity_counter=15&M[3],V.has_payload=1&V.afc,V.has_adaptation=2&V.afc,V.has_payload)if(V.has_adaptation){var te=M[4];V.payload=M.subarray(5+te)}else V.payload=M.subarray(4);return V}return T(W,ae),F(W,[{key:"valid",value:function(){return this.sync_byte===71&&this.has_payload===1}}]),W}(Ga),Pf=function(ae){function W(){var M,V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return N(this,W),(M=_(this,D(W).call(this,V))).psi_=new Il(M.ctx_),M.pesStream_=new Ts(M.ctx_,M.psi_),M.elementaryStream_=new bu(M.ctx_,M.psi_,V),M.complexStream_=new Pl(M.ctx_,M.psi_),M.pipe(M.pesStream_),M.pesStream_.pipe(M.elementaryStream_),M.elementaryStream_.pipe(M.complexStream_),m(D(W.prototype),"listenEndStream_",w(M)).call(w(M)),M}return T(W,ae),F(W,[{key:"push",value:function(M,V){var te=V.done,he=this.options_,ve=this.ctx_,we=this.cache_buffer_,Oe=this.psi_,He=m(D(W.prototype),"constraintPushData_",this).call(this,M),We=we.byteLength,at=null;for(he.config=V,un.log("hls demux received ".concat(He.byteLength," bytes, cache ").concat(We," bytes. ").concat(te?"chunk done":"")),we.append(He);we.byteLength>=188;){var ot=we.cut(188);if(ot){var zt=new Ro(ot);if(!zt.valid()){var $n="Encounter invalid ts packet, packet_length(".concat(ot.length,"), cache_length(").concat(this.cache_buffer_.byteLength,"), has_payload(").concat(zt.has_payload,"), data(").concat(ot,")");un.error($n),this.reset(),ve.emit("error",To.TS_SYNC_BYTE,$n,{startByte:at,endByte:at+ot.byteLength});break}Oe.parse(zt),this.emit("data",zt),at+=ot.byteLength}}we.empty&&te&&this.emit("done")}},{key:"reset",value:function(){this.cache_buffer_.clear(),this.emit("reset")}},{key:"endStream",get:function(){var M=this.elementaryStream_;return this.options_.decodeCodec&&(M=this.complexStream_),M}}]),W}(Wi);(function(ae){ae[ae.HEAD=0]="HEAD",ae[ae.BODY=1]="BODY"})(ws||(ws={})),function(ae){ae[ae.SCRIPT_DATA=18]="SCRIPT_DATA",ae[ae.VIDEO=9]="VIDEO",ae[ae.AUDIO=8]="AUDIO"}(_n||(_n={}));var Es,ks;(function(ae){ae[ae.AAC=10]="AAC"})(Es||(Es={})),function(ae){ae[ae.MONO=0]="MONO",ae[ae.STEREO=1]="STEREO"}(ks||(ks={}));var Ol;(function(ae){ae[ae.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",ae[ae.AAC_RAW=1]="AAC_RAW"})(Ol||(Ol={}));var zr;(function(ae){ae[ae.SEQUENCE_HEAD=0]="SEQUENCE_HEAD",ae[ae.NALU=1]="NALU",ae[ae.SEQUENCE_END=2]="SEQUENCE_END"})(zr||(zr={}));var oi=new Ss;oi.on("nalu",function(ae){});var Io;(function(ae){ae[ae.AVC=7]="AVC"})(Io||(Io={}));var Ll=function(){function ae(W){s()(this,ae),g()(this,"previousPes",null),g()(this,"maxAudioPTS",0),g()(this,"maxVideoPTS",0),W?(this.init(),this.dataArray=[],this.videoArray=[],this.audioArray=[],this.decode=W):console.error("class TsDemux need pass decode parmas")}return l()(ae,[{key:"init",value:function(){var W=this;try{this.demuxer=new Pf({enableWorker:!1,debug:!1,onlyDemuxElementary:!0}),this.demuxer.on(a.DEMUX_DATA,function(M){M instanceof Array?(W.dataArray.push(M),W.demuxed(W.dataArray),W.dataArray=[]):W.dataArray.push(M)}),this.demuxer.on(a.DONE,function(M){var V={};W.demuxed(W.dataArray),W.dataArray=[],W.previousPes.partEnd=!0,W.previousPes.lastTS=W.isLast,W.isLast?(W.maxPTS=Math.min(W.maxAudioPTS,W.maxVideoPTS),V.audioEnd=!0,W.audioQueue(V),self.postMessage({type:"demuxedAAC",data:W.audioArray}),W.audioArray=[],self.postMessage({type:"maxPTS",data:{maxAudioPTS:W.maxAudioPTS,maxVideoPTS:W.maxVideoPTS}})):(self.postMessage({type:"demuxedAAC",data:W.audioArray}),W.audioArray=[]),W.decode.push(W.videoArray),W.videoArray=[],W.previousPes=null})}catch{console.error("init demuxer failed.")}}},{key:"push",value:function(W){this.demuxer.push(W,{done:!0})}},{key:"demuxed",value:function(W){var M=this;W.forEach(function(V){M.tsDemuxed(V)})}},{key:"tsDemuxed",value:function(W){var M=W.stream_type,V=W.pes||{};switch(M){case 36:this.videoQueue(V);break;case 3:case 15:case 17:V.PTS=Math.round(V.PTS*c.a*1e3),this.maxAudioPTS=Math.max(V.PTS,this.maxAudioPTS),this.audioQueue(V)}}},{key:"audioQueue",value:function(W){this.audioArray.push(W)}},{key:"videoQueue",value:function(W){this.previousPes=W,this.maxVideoPTS=Math.max(this.maxVideoPTS,W.PTS),this.videoArray.push(W)}},{key:"destroy",value:function(){this.demuxer.destroy()}}]),ae}();self.decode=new d,self.demuxer=new Ll(self.decode),r.default=function(ae){ae.onmessage=function(W){var M=W.data,V=M.type,te=M.data,he=M.isLast;switch(V){case"startDemux":ae.demuxer.isLast=he,ae.demuxer.push(te);break;case"loadwasm":ae.decode.loadWASM(W);break;case"flush":ae.decode.flush()}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,r,i){t.exports=i(163)},function(t,r,i){t.exports=i(85).default}])})})(sxe);const xVe=Sne(_C);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uxe=1e-7,lxe=1e-4;class FU{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class CE{refCount(e){return Ti("refCount")}incRef(e){return Ti("incRef")}timerAvailable(){return!0}time(e){return Ti("time")}read(e){return Ti("read")}readSync(e){return Ti("readSync")}readToGPU(e,t){return Ti("readToGPU")}numDataIds(){return Ti("numDataIds")}disposeData(e,t){return Ti("disposeData")}write(e,t,r){return Ti("write")}move(e,t,r,i,a){return Ti("move")}createTensorFromGPUData(e,t,r){return Ti("createTensorFromGPUData")}memory(){return Ti("memory")}floatPrecision(){return Ti("floatPrecision")}epsilon(){return this.floatPrecision()===32?uxe:lxe}dispose(){return Ti("dispose")}}function Ti(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VU(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Hs(n,e,t)}function cxe(n,e){if(n.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${e.length}`);let t=n.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,Hs(n,t,r),Hs(e,t,r)}function Qv(n,e,t){return Math.max(n,Math.min(e,t))}function _b(n){return n%2===0?n:n+1}function Hs(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function zU(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function fxe(n,e){const t=Math.random();return e*t+(1-t)*n}function hxe(n,e){let t=0;for(let r=0;r<n.length;r++){const i=Number(n[r])-Number(e[r]);t+=i*i}return t}function J(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function Br(n,e,t=""){J(Un(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function wf(n){J(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ze(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function dxe(n){return n.length===0}function Un(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Jc(n){return n%1===0}function pxe(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{const e=Math.exp(2*n);return(e-1)/(e+1)}}function i1(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function vxe(n){const e=new Uint32Array(n);for(let t=0;t<n;++t)e[t]=t;return VU(e),e}function Fc(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function wC(n,e=i=>0,t,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(n()){i();return}o++;const u=e(o);if(t!=null&&o>=t){a();return}r!=null?r(s,u):setTimeout(s,u)};s()})}function UU(n,e){let t=1,r=-1;for(let a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(n[a]<0)throw Error(`Shapes can not be < 0. Found ${n[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const i=n.slice();return i[r]=e/t,i}function cr(n,e){const t=e.length;return n=n==null?e.map((r,i)=>i):[].concat(n),J(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),J(n.every(r=>Jc(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function pu(n,e){const t=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:cr(e,n).sort();let o=0;for(let s=0;s<n.length;++s){if(a!=null){if(a[o]===s&&n[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${n[s]}' is not 1`);(a[o]==null||a[o]>s)&&n[s]===1&&(t.push(n[s]),r.push(s)),a[o]<=s&&o++}n[s]!==1&&(t.push(n[s]),r.push(s))}return{newShape:t,keptDims:r}}function fs(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else throw new Error(`Unknown data type ${n}`);return t}function Er(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function WU(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function HU(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function GU(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function Jv(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function jU(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function Ys(n){return typeof n=="string"||n instanceof String}function qU(n){return typeof n=="boolean"}function XU(n){return typeof n=="number"}function $g(n){return Array.isArray(n)?$g(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":XU(n)?"float32":Ys(n)?"string":qU(n)?"bool":"float32"}function dl(n){return!!(n&&n.constructor&&n.call&&n.apply)}function a1(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function mr(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function KU(n,e,t,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=t[n+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((u,l)=>u*l)*(r?2:1);for(let u=0;u<a;u++)i[u]=KU(n+u*s,o,t,r)}return i}function Vc(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((i,a)=>i*a)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return KU(0,n,e,t)}function gxe(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function TE(n,e){const t=su(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function su(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function mxe(n,e){const t=n.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Vc(n,new Float32Array(t));if(e==="int32")return Vc(n,new Int32Array(t));if(e==="bool")return Vc(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function Vi(n){n.forEach(e=>{J(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function o1(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let i=0;i<n.length-1;++i)r+=t[i]*n[i];return r}function wb(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(n/t[i]),n-=r[i]*t[i];return r[r.length-1]=n,r}function pl(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xM="tfjsflags";class YU{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=yxe,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(pl(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);xM in e&&e[xM].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=xxe(i,a)})}}function yxe(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(bxe(e,r[0],r[1]),r.join("="))),e}function bxe(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function xxe(n,e){if(e=e.toLowerCase(),e==="true"||e==="false")return e==="true";if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${n}.`)}function xe(){return EE}let EE=null;function _xe(n){EE=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Q_;function ZU(){if(Q_==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");Q_=n}return Q_}function wxe(){const n=ZU();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function kE(n,e){const t=wxe();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const AE="Abs",RE="Acos",IE="Acosh",Sb="Add",PE="AddN",DE="All",$E="Any",NE="ArgMax",OE="ArgMin",LE="Asin",ME="Asinh",BE="Atan",FE="Atanh",VE="Atan2",zE="AvgPool",QU="AvgPoolGrad",UE="AvgPool3D",JU="AvgPool3DGrad",WE="BatchMatMul",HE="BatchToSpaceND",GE="Bincount",Sxe="BroadcastTo",jE="BroadcastArgs",Cb="Cast",qE="Ceil",XE="ClipByValue",KE="Complex",YE="ComplexAbs",ZE="Concat",QE="Conv2D",JE="Conv2DBackpropFilter",ek="Conv2DBackpropInput",tk="Conv3D",e8="Conv3DBackpropFilterV2",nk="Conv3DBackpropInputV2",rk="Cos",ik="Cosh",ak="Cumprod",ok="Cumsum",sk="CropAndResize",uk="DenseBincount",lk="DepthToSpace",ck="DepthwiseConv2dNative",fk="DepthwiseConv2dNativeBackpropFilter",hk="DepthwiseConv2dNativeBackpropInput",dk="Diag",pk="Dilation2D",Cxe="Dilation2DBackpropInput",Txe="Dilation2DBackpropFilter",vk="RealDiv",gk="Einsum",mk="Elu",t8="EluGrad",yk="Erf",bk="Equal",xk="Exp",_k="ExpandDims",wk="Expm1",Sk="FFT",Ck="Fill",Tk="FlipLeftRight",Ek="Floor",kk="FloorDiv",Ak="FusedBatchNorm",Rk="GatherV2",Ik="GatherNd",Pk="Greater",Dk="GreaterEqual",Tb="Identity",$k="IFFT",Nk="Imag",Ok="IsFinite",Lk="IsInf",Mk="IsNan",Bk="LeakyRelu",Fk="Less",Vk="LessEqual",zk="LinSpace",Uk="Log",Wk="Log1p",Hk="LogicalAnd",Gk="LogicalNot",jk="LogicalOr",Exe="LogicalXor",kxe="LogSoftmax",Axe="LowerBound",qk="LRN",n8="LRNGrad",Xk="Max",Kk="Maximum",Yk="MaxPool",r8="MaxPoolGrad",Zk="MaxPool3D",i8="MaxPool3DGrad",Qk="MaxPoolWithArgmax",Jk="Mean",eA="Min",tA="Minimum",nA="MirrorPad",rA="Mod",iA="Multinomial",aA="Multiply",oA="Neg",sA="NotEqual",uA="NonMaxSuppressionV3",lA="NonMaxSuppressionV4",cA="NonMaxSuppressionV5",fA="OnesLike",hA="OneHot",dA="Pack",pA="PadV2",Rxe="Pool",vA="Pow",gA="Prelu",mA="Prod",yA="RaggedGather",bA="RaggedRange",xA="RaggedTensorToTensor",_A="Range",wA="Real",SA="Reciprocal",CA="Relu",TA="Reshape",EA="ResizeNearestNeighbor",a8="ResizeNearestNeighborGrad",kA="ResizeBilinear",o8="ResizeBilinearGrad",AA="Relu6",RA="Reverse",IA="Round",PA="Rsqrt",DA="ScatterNd",$A="SearchSorted",NA="Select",OA="Selu",LA="Slice",MA="Sin",BA="Sinh",FA="Sign",VA="Sigmoid",zA="Softplus",UA="Sqrt",WA="Sum",HA="SpaceToBatchND",GA="SplitV",jA="Softmax",qA="SparseFillEmptyRows",XA="SparseReshape",KA="SparseSegmentMean",YA="SparseSegmentSum",ZA="SparseToDense",QA="SquaredDifference",s8="Square",JA="StridedSlice",eR="StringNGrams",tR="StringSplit",nR="StringToHashBucketFast",rR="Sub",iR="Tan",aR="Tanh",Eb="Tile",oR="TopK",sR="Transform",wv="Transpose",uR="Unique",lR="Unpack",cR="UnsortedSegmentSum",Ixe="UpperBound",fR="ZerosLike",hR="Step",s1="FromPixels",dR="RotateWithOffset",u1="_FusedMatMul",l1="FusedConv2D",c1="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(...n){xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(...n)}function Pxe(...n){xe().getBool("IS_TEST")||xe().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cd=kE("kernelRegistry",()=>new Map),eg=kE("gradRegistry",()=>new Map);function f1(n,e){const t=vR(n,e);return cd.get(t)}function SC(n){return eg.get(n)}function h1(n){const e=cd.entries(),t=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===n&&t.push(o)}return t}function pR(n){const{kernelName:e,backendName:t}=n,r=vR(e,t);cd.has(r)&&Ca(`The kernel '${e}' for backend '${t}' is already registered`),cd.set(r,n)}function Dxe(n){const{kernelName:e}=n;eg.has(e)&&xe().getBool("DEBUG")&&Ca(`Overriding the gradient for '${e}'`),eg.set(e,n)}function $xe(n,e){const t=vR(n,e);if(!cd.has(t))throw new Error(`The kernel '${n}' for backend '${e}' is not registered`);cd.delete(t)}function Nxe(n){if(!eg.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);eg.delete(n)}function Oxe(n,e){h1(n).forEach(r=>{const i=Object.assign({},r,{backendName:e});pR(i)})}function vR(n,e){return`${e}_${n}`}var CC=Mn,Ta=null;try{Ta=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Mn(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}Mn.prototype.__isLong__;Object.defineProperty(Mn.prototype,"__isLong__",{value:!0});function zi(n){return(n&&n.__isLong__)===!0}Mn.isLong=zi;var _M={},wM={};function Sf(n,e){var t,r,i;return e?(n>>>=0,(i=0<=n&&n<256)&&(r=wM[n],r)?r:(t=Bn(n,(n|0)<0?-1:0,!0),i&&(wM[n]=t),t)):(n|=0,(i=-128<=n&&n<128)&&(r=_M[n],r)?r:(t=Bn(n,n<0?-1:0,!1),i&&(_M[n]=t),t))}Mn.fromInt=Sf;function Ea(n,e){if(isNaN(n))return e?Ic:ka;if(e){if(n<0)return Ic;if(n>=u8)return f8}else{if(n<=-CM)return Oi;if(n+1>=CM)return c8}return n<0?Ea(-n,e).neg():Bn(n%fd|0,n/fd|0,e)}Mn.fromNumber=Ea;function Bn(n,e,t){return new Mn(n,e,t)}Mn.fromBits=Bn;var d1=Math.pow;function gR(n,e,t){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return ka;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return gR(n.substring(1),e,t).neg();for(var i=Ea(d1(t,8)),a=ka,o=0;o<n.length;o+=8){var s=Math.min(8,n.length-o),u=parseInt(n.substring(o,o+s),t);if(s<8){var l=Ea(d1(t,s));a=a.mul(l).add(Ea(u))}else a=a.mul(i),a=a.add(Ea(u))}return a.unsigned=e,a}Mn.fromString=gR;function So(n,e){return typeof n=="number"?Ea(n,e):typeof n=="string"?gR(n,e):Bn(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}Mn.fromValue=So;var SM=1<<16,Lxe=1<<24,fd=SM*SM,u8=fd*fd,CM=u8/2,TM=Sf(Lxe),ka=Sf(0);Mn.ZERO=ka;var Ic=Sf(0,!0);Mn.UZERO=Ic;var Ah=Sf(1);Mn.ONE=Ah;var l8=Sf(1,!0);Mn.UONE=l8;var TC=Sf(-1);Mn.NEG_ONE=TC;var c8=Bn(-1,2147483647,!1);Mn.MAX_VALUE=c8;var f8=Bn(-1,-1,!0);Mn.MAX_UNSIGNED_VALUE=f8;var Oi=Bn(0,-2147483648,!1);Mn.MIN_VALUE=Oi;var qe=Mn.prototype;qe.toInt=function(){return this.unsigned?this.low>>>0:this.low};qe.toNumber=function(){return this.unsigned?(this.high>>>0)*fd+(this.low>>>0):this.high*fd+(this.low>>>0)};qe.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Oi)){var t=Ea(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var a=Ea(d1(e,6),this.unsigned),o=this,s="";;){var u=o.div(a),l=o.sub(u.mul(a)).toInt()>>>0,c=l.toString(e);if(o=u,o.isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}};qe.getHighBits=function(){return this.high};qe.getHighBitsUnsigned=function(){return this.high>>>0};qe.getLowBits=function(){return this.low};qe.getLowBitsUnsigned=function(){return this.low>>>0};qe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Oi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};qe.isZero=function(){return this.high===0&&this.low===0};qe.eqz=qe.isZero;qe.isNegative=function(){return!this.unsigned&&this.high<0};qe.isPositive=function(){return this.unsigned||this.high>=0};qe.isOdd=function(){return(this.low&1)===1};qe.isEven=function(){return(this.low&1)===0};qe.equals=function(e){return zi(e)||(e=So(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};qe.eq=qe.equals;qe.notEquals=function(e){return!this.eq(e)};qe.neq=qe.notEquals;qe.ne=qe.notEquals;qe.lessThan=function(e){return this.comp(e)<0};qe.lt=qe.lessThan;qe.lessThanOrEqual=function(e){return this.comp(e)<=0};qe.lte=qe.lessThanOrEqual;qe.le=qe.lessThanOrEqual;qe.greaterThan=function(e){return this.comp(e)>0};qe.gt=qe.greaterThan;qe.greaterThanOrEqual=function(e){return this.comp(e)>=0};qe.gte=qe.greaterThanOrEqual;qe.ge=qe.greaterThanOrEqual;qe.compare=function(e){if(zi(e)||(e=So(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};qe.comp=qe.compare;qe.negate=function(){return!this.unsigned&&this.eq(Oi)?Oi:this.not().add(Ah)};qe.neg=qe.negate;qe.add=function(e){zi(e)||(e=So(e));var t=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,u=e.low>>>16,l=e.low&65535,c=0,f=0,h=0,d=0;return d+=a+l,h+=d>>>16,d&=65535,h+=i+u,f+=h>>>16,h&=65535,f+=r+s,c+=f>>>16,f&=65535,c+=t+o,c&=65535,Bn(h<<16|d,c<<16|f,this.unsigned)};qe.subtract=function(e){return zi(e)||(e=So(e)),this.add(e.neg())};qe.sub=qe.subtract;qe.multiply=function(e){if(this.isZero())return ka;if(zi(e)||(e=So(e)),Ta){var t=Ta.mul(this.low,this.high,e.low,e.high);return Bn(t,Ta.get_high(),this.unsigned)}if(e.isZero())return ka;if(this.eq(Oi))return e.isOdd()?Oi:ka;if(e.eq(Oi))return this.isOdd()?Oi:ka;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TM)&&e.lt(TM))return Ea(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,o=this.low&65535,s=e.high>>>16,u=e.high&65535,l=e.low>>>16,c=e.low&65535,f=0,h=0,d=0,p=0;return p+=o*c,d+=p>>>16,p&=65535,d+=a*c,h+=d>>>16,d&=65535,d+=o*l,h+=d>>>16,d&=65535,h+=i*c,f+=h>>>16,h&=65535,h+=a*l,f+=h>>>16,h&=65535,h+=o*u,f+=h>>>16,h&=65535,f+=r*c+i*l+a*u+o*s,f&=65535,Bn(d<<16|p,f<<16|h,this.unsigned)};qe.mul=qe.multiply;qe.divide=function(e){if(zi(e)||(e=So(e)),e.isZero())throw Error("division by zero");if(Ta){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Ta.div_u:Ta.div_s)(this.low,this.high,e.low,e.high);return Bn(t,Ta.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ic:ka;var r,i,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ic;if(e.gt(this.shru(1)))return l8;a=Ic}else{if(this.eq(Oi)){if(e.eq(Ah)||e.eq(TC))return Oi;if(e.eq(Oi))return Ah;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(ka)?e.isNegative()?Ah:TC:(i=this.sub(e.mul(r)),a=r.add(i.div(e)),a)}else if(e.eq(Oi))return this.unsigned?Ic:ka;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=ka}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),u=s<=48?1:d1(2,s-48),l=Ea(r),c=l.mul(e);c.isNegative()||c.gt(i);)r-=u,l=Ea(r,this.unsigned),c=l.mul(e);l.isZero()&&(l=Ah),a=a.add(l),i=i.sub(c)}return a};qe.div=qe.divide;qe.modulo=function(e){if(zi(e)||(e=So(e)),Ta){var t=(this.unsigned?Ta.rem_u:Ta.rem_s)(this.low,this.high,e.low,e.high);return Bn(t,Ta.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};qe.mod=qe.modulo;qe.rem=qe.modulo;qe.not=function(){return Bn(~this.low,~this.high,this.unsigned)};qe.and=function(e){return zi(e)||(e=So(e)),Bn(this.low&e.low,this.high&e.high,this.unsigned)};qe.or=function(e){return zi(e)||(e=So(e)),Bn(this.low|e.low,this.high|e.high,this.unsigned)};qe.xor=function(e){return zi(e)||(e=So(e)),Bn(this.low^e.low,this.high^e.high,this.unsigned)};qe.shiftLeft=function(e){return zi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Bn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Bn(0,this.low<<e-32,this.unsigned)};qe.shl=qe.shiftLeft;qe.shiftRight=function(e){return zi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Bn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Bn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};qe.shr=qe.shiftRight;qe.shiftRightUnsigned=function(e){if(zi(e)&&(e=e.toInt()),e&=63,e===0)return this;var t=this.high;if(e<32){var r=this.low;return Bn(r>>>e|t<<32-e,t>>>e,this.unsigned)}else return e===32?Bn(t,0,this.unsigned):Bn(t>>>e-32,0,this.unsigned)};qe.shru=qe.shiftRightUnsigned;qe.shr_u=qe.shiftRightUnsigned;qe.toSigned=function(){return this.unsigned?Bn(this.low,this.high,!1):this};qe.toUnsigned=function(){return this.unsigned?this:Bn(this.low,this.high,!0)};qe.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};qe.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};qe.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Mn.fromBytes=function(e,t,r){return r?Mn.fromBytesLE(e,t):Mn.fromBytesBE(e,t)};Mn.fromBytesLE=function(e,t){return new Mn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Mn.fromBytesBE=function(e,t){return new Mn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Mxe=HB({__proto__:null,default:CC},[CC]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sc=CC||Mxe;function Ng(n){return Sc.fromString(n,!0,16)}const h8=Ng("c3a5c85c97cb3127"),xc=Ng("b492b66fbe98f273"),Yr=Ng("9ae16a3b2f90404f");function EC(n){return n.xor(n.shru(47))}function d8(n,e,t){const r=n.slice(e,e+t);return Sc.fromBytes(Array.from(r),!0,!0)}function Rn(n,e){return d8(n,e,8)}function EM(n,e){return d8(n,e,4)}function gr(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function il(n,e,t=Ng("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let i=e.xor(r).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function Bxe(n,e,t,r,i,a){i=i.add(n),a=gr(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(t),a=a.add(gr(i,44)),[i.add(r),a.add(o)]}function gy(n,e,t,r){return Bxe(Rn(n,e),Rn(n,e+8),Rn(n,e+16),Rn(n,e+24),t,r)}function Fxe(n,e=n.length){if(e>=8){const t=Yr.add(e*2),r=Rn(n,0).add(Yr),i=Rn(n,e-8),a=gr(i,37).mul(t).add(r),o=gr(r,25).add(i).mul(t);return il(a,o,t)}if(e>=4){const t=Yr.add(e*2),r=EM(n,0);return il(r.shl(3).add(e),EM(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],i=n[e-1],a=t+(r<<8),o=e+(i<<2);return EC(Yr.mul(a).xor(h8.mul(o))).mul(Yr)}return Yr}function Vxe(n,e=n.length){const t=Yr.add(e*2),r=Rn(n,0).mul(xc),i=Rn(n,8),a=Rn(n,e-8).mul(t),o=Rn(n,e-16).mul(Yr);return il(gr(r.add(i),43).add(gr(a,30)).add(o),r.add(gr(i.add(Yr),18)).add(a),t)}function zxe(n,e=n.length){const t=Yr.add(e*2),r=Rn(n,0).mul(Yr),i=Rn(n,8),a=Rn(n,e-8).mul(t),o=Rn(n,e-16).mul(Yr),s=gr(r.add(i),43).add(gr(a,30)).add(o),u=il(s,r.add(gr(i.add(Yr),18)).add(a),t),l=Rn(n,16).mul(t),c=Rn(n,24),f=s.add(Rn(n,e-32)).mul(t),h=u.add(Rn(n,e-24)).mul(t);return il(gr(l.add(c),43).add(gr(f,30)).add(h),l.add(gr(c.add(r),18)).add(f),t)}function p8(n,e=n.length){const t=Sc.fromNumber(81,!0);if(e<=32)return e<=16?Fxe(n,e):Vxe(n,e);if(e<=64)return zxe(n,e);let r=t,i=t.mul(xc).add(113),a=EC(i.mul(Yr).add(113)).mul(Yr),o=[Sc.UZERO,Sc.UZERO],s=[Sc.UZERO,Sc.UZERO];r=r.mul(Yr).add(Rn(n,0));let u=0;const l=(e-1>>6)*64,c=l+(e-1&63)-63;do r=gr(r.add(i).add(o[0]).add(Rn(n,u+8)),37).mul(xc),i=gr(i.add(o[1]).add(Rn(n,u+48)),42).mul(xc),r=r.xor(s[1]),i=i.add(o[0]).add(Rn(n,u+40)),a=gr(a.add(s[0]),33).mul(xc),o=gy(n,u,o[1].mul(xc),r.add(s[0])),s=gy(n,u+32,a.add(s[1]),i.add(Rn(n,u+16))),[a,r]=[r,a],u+=64;while(u!==l);const f=xc.add(a.and(255).shl(1));return u=c,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=gr(r.add(i).add(o[0]).add(Rn(n,u+8)),37).mul(f),i=gr(i.add(o[1]).add(Rn(n,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(Rn(n,u+40))),a=gr(a.add(s[0]),33).mul(f),o=gy(n,u,o[1].mul(f),r.add(s[0])),s=gy(n,u+32,a.add(s[1]),i.add(Rn(n,u+16))),[a,r]=[r,a],il(il(o[0],s[0],f).add(EC(i).mul(h8)).add(a),il(o[1],s[1],f).add(r),f)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cf(n,e){return e==="string"?Qs(n):Og([n],e)}function Uxe(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function Og(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=hs(n)),xe().getBool("DEBUG")&&WU(n,e),Uxe(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function xa(){return xe().platform.now()}function Wxe(n,e){return xe().platform.fetch(n,e)}function Qs(n,e="utf-8"){return e=e||"utf-8",xe().platform.encode(n,e)}function ef(n,e="utf-8"){return e=e||"utf-8",xe().platform.decode(n,e)}function Sr(n){return xe().platform.isTypedArray(n)}function hs(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||pl(n)||n==null||Sr(n)&&t)e.push(n);else if(Array.isArray(n)||Sr(n))for(let r=0;r<n.length;++r)hs(n[r],e,t);else{let r=-1;for(const i of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)hs(n[i],e,t)}return e}const Hxe=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Un,assert:J,assertNonNegativeIntegerDimensions:Vi,assertNonNull:wf,assertShapesMatch:Br,bytesFromStringArray:jU,bytesPerElement:Jv,checkConversionForErrors:WU,clamp:Qv,computeStrides:mr,convertBackendValuesAndArrayBuffer:gxe,createScalarValue:Cf,createShuffledIndices:vxe,decodeString:ef,distSquared:hxe,encodeString:Qs,fetch:Wxe,fingerPrint64:p8,flatten:hs,getArrayFromDType:Er,getTypedArrayFromDType:fs,hasEncodingLoss:GU,hexToLong:Ng,indexToLoc:wb,inferDtype:$g,inferFromImplicitShape:UU,isBoolean:qU,isFunction:dl,isInt:Jc,isNumber:XU,isPromise:pl,isScalarShape:dxe,isString:Ys,isTypedArray:Sr,isValidDtype:HU,locToIndex:o1,makeOnesTypedArray:TE,makeZerosNestedTypedArray:mxe,makeZerosTypedArray:su,nearestDivisor:a1,nearestLargerEven:_b,now:xa,parseAxisParam:cr,randUniform:fxe,repeatedTry:wC,rightPad:Fc,shuffle:VU,shuffleCombo:cxe,sizeFromShape:ze,sizeToSquarishShape:i1,squeezeShape:pu,sum:zU,swap:Hs,tanh:pxe,toNestedArray:Vc,toTypedArray:Og},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gxe{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new qxe)}profileKernel(e,t,r){let i;const a=()=>{i=r()};let o;const s=xa();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const l of i)l.dataSync();o=Promise.resolve({kernelMs:xa()-s})}if(xe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<i.length;l++){const c=i[l];c.data().then(f=>{jxe(f,c.dtype,e)})}return{kernelName:e,outputs:i,inputs:t,timeMs:o.then(l=>l.kernelMs),extraInfo:o.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(u=>{this.logger.logKernelProfile(t,s,u[0],u[1],a,u[2])})})}}function jxe(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const i=n[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}class qxe{logKernelProfile(e,t,r,i,a,o){const s=typeof i=="number"?Fc(`${i}ms`,9):i.error,u=Fc(e,25),l=t.rank,c=t.size,f=Fc(t.shape.toString(),14);let h="";for(const d in a){const p=a[d];if(p!=null){const g=p.shape||t.shape,m=g.length;h+=`${d}: ${m}D ${m>0?g:""} `}}console.log(`%c${u}	%c${s}	%c${l}D ${f}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(n,e,t){const r={},i={};for(let u=0;u<e.length;u++)r[e[u].id]=!0;for(let u=0;u<n.length;u++){const l=n[u],c=l.inputs;for(const f in c){const h=c[f];let d=!1;for(let p=0;p<e.length;p++)if(r[h.id]){l.outputs.forEach(g=>r[g.id]=!0),d=!0,i[l.id]=!0;break}if(d)break}}const a={};a[t.id]=!0;const o={};for(let u=n.length-1;u>=0;u--){const l=n[u],c=l.inputs;for(let f=0;f<l.outputs.length;f++)if(a[l.outputs[f].id]){for(const h in c)a[c[h].id]=!0,o[l.id]=!0;break}}const s=[];for(let u=0;u<n.length;u++){const l=n[u];if(i[l.id]&&o[l.id]){const c={};for(const h in l.inputs){const d=l.inputs[h];r[d.id]&&(c[h]=d)}const f=Object.assign({},l);f.inputs=c,f.outputs=l.outputs,s.push(f)}}return s}function Kxe(n,e,t,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(u=>{const l=n[u.id];l!=null?o.push(l):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const u in a.inputs){if(!(u in s))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(s)}.`);const l=t(()=>s[u]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${l.dtype}'`);const c=a.inputs[u];if(!Un(l.shape,c.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${u}' has shape '${l.shape}', which does not match the shape of the input '${c.shape}'`);if(n[c.id]==null)n[c.id]=l;else{const f=n[c.id];n[c.id]=r(f,l),f.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kM=20,$p=3,J_=7;function Yxe(n,e,t,r){const i=mr(e),a=Zxe(n,e,t,i),o=e.length,s=f0(n,e,t,i,a),u=["Tensor"];return r&&(u.push(`  dtype: ${t}`),u.push(`  rank: ${o}`),u.push(`  shape: [${e}]`),u.push("  values:")),u.push(s.map(l=>"    "+l).join(`
`)),u.join(`
`)}function Zxe(n,e,t,r){const i=ze(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,u=t==="complex64"?Kp(n):n;if(s>1)for(let l=0;l<i/a;l++){const c=l*a;for(let f=0;f<a;f++)o[f]=Math.max(o[f],Xp(u[c+f],0,t).length)}return o}function Xp(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(J_))} + ${parseFloat(n[1].toFixed(J_))}j`:Ys(n)?r=`'${n}'`:t==="bool"?r=v8(n):r=parseFloat(n.toFixed(J_)).toString(),Fc(r,e)}function v8(n){return n===0?"false":"true"}function f0(n,e,t,r,i,a=!0){const o=t==="complex64"?2:1,s=e[0],u=e.length;if(u===0){if(t==="complex64"){const g=Kp(n);return[Xp(g[0],0,t)]}return t==="bool"?[v8(n[0])]:[n[0].toString()]}if(u===1){if(s>kM){const m=$p*o;let y=Array.from(n.slice(0,m)),b=Array.from(n.slice((s-$p)*o,s*o));return t==="complex64"&&(y=Kp(y),b=Kp(b)),["["+y.map((_,w)=>Xp(_,i[w],t)).join(", ")+", ..., "+b.map((_,w)=>Xp(_,i[s-$p+w],t)).join(", ")+"]"]}return["["+(t==="complex64"?Kp(n):Array.from(n)).map((m,y)=>Xp(m,i[y],t)).join(", ")+"]"]}const l=e.slice(1),c=r.slice(1),f=r[0]*o,h=[];if(s>kM){for(let g=0;g<$p;g++){const m=g*f,y=m+f;h.push(...f0(n.slice(m,y),l,t,c,i,!1))}h.push("...");for(let g=s-$p;g<s;g++){const m=g*f,y=m+f;h.push(...f0(n.slice(m,y),l,t,c,i,g===s-1))}}else for(let g=0;g<s;g++){const m=g*f,y=m+f;h.push(...f0(n.slice(m,y),l,t,c,i,g===s-1))}const d=u===2?",":"";h[0]="["+(s>0?h[0]+d:"");for(let g=1;g<h.length-1;g++)h[g]=" "+h[g]+d;let p=`,
`;for(let g=2;g<u;g++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":p),h}function Kp(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hd{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=ze(e),r!=null){const i=r.length;J(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Er(t,this.size),this.strides=mr(e)}set(e,...t){t.length===0&&(t=[0]),J(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const i of e){if(i<0||i>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return io().makeTensor(this.values,this.shape,this.dtype)}}let io=null,yh=null;function Qxe(n){io=n}function Jxe(n){yh=n}class cn{constructor(e,t,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=ze(e),this.strides=mr(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return yh.buffer(this.shape,this.dtype,e)}bufferSync(){return yh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Vc(this.shape,e,this.dtype==="complex64")}arraySync(){return Vc(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=io().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>ef(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),io().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=io().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>ef(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await io().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(io().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return yh.print(this,e)}clone(){return this.throwIfDisposed(),yh.clone(this)}toString(e=!1){const t=this.dataSync();return Yxe(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),yh.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),io().makeVariable(this,e,t,r)}}Object.defineProperty(cn,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function e_e(){return kE("Tensor",()=>cn)}e_e();class tg extends cn{constructor(e,t,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Un(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);io().disposeTensor(this),this.dataId=e.dataId,io().incRef(this,null)}dispose(){io().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(tg,Symbol.hasInstance,{value:n=>n instanceof cn&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kC;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(kC||(kC={}));var AC;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(AC||(AC={}));var RC;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(RC||(RC={}));var IC;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(IC||(IC={}));var PC;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(PC||(PC={}));const t_e={float32:IC,int32:AC,bool:RC,complex64:PC};function ho(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return t_e[n][e]}function kb(n){return ho(n,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qn(n,e){if(n.dtype===e.dtype)return[n,e];const t=ho(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function g8(n,e){J(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function n_e(n,e){return e.some(t=>t.id===n.id)}function mR(n){const e=[];return m8(n,e,new Set),e}function m8(n,e,t){if(n==null)return;if(n instanceof cn){e.push(n);return}if(!r_e(n))return;const r=n;for(const i in r){const a=r[i];t.has(a)||(t.add(a),m8(a,e,t))}}function r_e(n){return Array.isArray(n)||typeof n=="object"}const i_e=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:g8,getTensorsInContainer:mR,isTensorInList:n_e,makeTypesMatch:qn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ew(n){return n.kernelName!=null}class AM{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class dd{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new AM}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(Ca(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Gxe(this.backendInstance),!0}setupRegisteredKernels(){h1(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){h1(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof CE)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Ca(`Initialization of backend ${e} failed`),Ca(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ca(`Initialization of backend ${e} failed`),Ca(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),i=r.backend,a=this.readSync(t),o=i.refCount(t);i.disposeData(t,!0),r.backend=e,e.move(t,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,t,r){e();try{const i=r();return t(),i}catch(i){throw t(),i}}nextTensorId(){return dd.nextTensorId++}nextVariableId(){return dd.nextVariableId++}clone(e){const t=fe.runKernel(Tb,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",u={x:o},l={dtype:s};return fe.runKernel(Cb,u,l)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[t],i,a,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(f1(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const i=this.backend.numDataIds();let a=0;r.forEach(u=>{a+=u.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-t-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let u;const l=ew(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(ew(e)){const{kernelName:p,inputs:g,attrs:m}=e;this.backendName==null&&this.backend;const y=f1(p,this.backendName);J(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),s=()=>{const b=this.backend.numDataIds();u=y.kernelFunc({inputs:g,attrs:m,backend:this.backend});const _=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,_);const w=_.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(i){const T=this.getTensorsForGradient(p,g,w);r=this.saveTensorsForBackwardMode(T)}return w}}else{const{forwardFunc:p}=e,g=m=>{i&&(r=m.map(y=>this.keep(this.clone(y))))};s=()=>{const m=this.backend.numDataIds();u=this.tidy(()=>p(this.backend,g));const y=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,m,y),y}}const{inputs:c,attrs:f}=e,h=ew(e)?null:e.backwardsFunc;let d;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=s():(d=this.profiler.profileKernel(l,c,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs)}),i&&this.addTapeNode(l,c,t,h,r,f),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:t.map(p=>p.shape),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(u)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const i=SC(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(J(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(t).map(l=>t[l])):s=a.map(l=>t[l]);const u=r.filter((l,c)=>o[c]);return s.concat(u)}return[]}makeTensor(e,t,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&Ys(e[0])&&(a=e.map(u=>Qs(u)));const o=i.write(a,t,r),s=new cn(t,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const u=this.state.tensorInfo.get(o),l=jU(a);this.state.numBytes+=l-u.bytes,u.bytes=l}return s}makeTensorFromDataId(e,t,r,i){r=r||"float32";const a={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:i,dtype:a}=e,o=new cn(i,a,r,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new tg(e,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Jv(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof tg||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Jv(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},u=SC(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=l=>(l=l.map((c,f)=>{if(c==null){const h=r[f],d=su(h.size,h.dtype);return this.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=mR(e),r=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,t,r,i=!1){if(J(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));J(a instanceof cn,()=>"The result y returned by f() must be a tensor.");const o=Xxe(this.state.activeTape,t,a);if(!i&&o.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??a_e(a.shape),Kxe(s,o,l=>this.tidy(l),o_e);const u=t.map(l=>s[l.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(l=>{for(const c of l.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:u}})}customGrad(e){return J(dl(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{J(t.every(s=>s instanceof cn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};t.forEach((s,u)=>{i[u]=s});const a=(s,u)=>(r=e(...t,u),J(r.value instanceof cn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),J(dl(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,u)=>{const l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];J(c.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),J(c.every(h=>h instanceof cn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const f={};return c.forEach((h,d)=>{f[d]=()=>h}),f};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=xa(),r=await this.backend.time(e);return r.wallMs=xa()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new AM;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}dd.nextTensorId=0;dd.nextVariableId=0;function a_e(n){const e=TE(ze(n),"float32");return fe.makeTensor(e,n,"float32")}function y8(){const n=ZU();if(n._tfengine==null){const e=new YU(n);n._tfengine=new dd(e)}return _xe(n._tfengine.ENV),Qxe(()=>n._tfengine),n._tfengine}const fe=y8();function o_e(n,e){const t={a:n,b:e};return fe.runKernel(Sb,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s_e(){return typeof navigator<"u"&&navigator!=null}let DC;function u_e(n){DC=n}function yR(n){if(DC!==void 0)return DC;if(n||s_e()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function bR(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const l_e=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:bR,isMobile:yR,mockIsMobile:u_e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ia=xe();ia.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ia.registerFlag("IS_BROWSER",()=>bR());ia.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ia.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ia.registerFlag("PROD",()=>!1);ia.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ia.getBool("DEBUG"));ia.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ia.registerFlag("IS_TEST",()=>!1);ia.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);ia.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ia.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ia.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ds(n,e){let t=n;if(Sr(n))return e==="string"?[]:[n.length];if(typeof n=="object"){if("texture"in n){const a=n.channels||"RGBA";return[n.height,n.width*a.length]}else if("buffer"in n&&!(n.buffer instanceof ArrayBuffer))return[n.buffer.size/(e==null?4:Jv(e))]}if(!Array.isArray(n))return[];const i=[];for(;Array.isArray(t)||Sr(t)&&e!=="string";)i.push(t.length),t=t[0];return Array.isArray(n)&&xe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&b8(n,i,[]),i}function b8(n,e,t){if(t=t||[],!Array.isArray(n)&&!Sr(n)){J(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}J(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),J(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let i=0;i<n.length;++i)b8(n[i],r,t.concat(i))}function RM(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function Y(n,e,t,r="numeric"){if(n instanceof cn)return RM(r,n.dtype,e,t),n;let i=$g(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),RM(r,i,e,t),n==null||!Sr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const u=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${u}'`)}const a=ds(n,i);!Sr(n)&&!Array.isArray(n)&&(n=[n]);const s=i!=="string"?Og(n,i):hs(n,[],!0);return fe.makeTensor(s,a,i)}function ng(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,o)=>Y(a,`${e}[${o}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xR="__op";function ce(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+xR;const i=(...a)=>{fe.startScope(t);try{const o=r(...a);return pl(o)&&console.error("Cannot return a Promise inside of tidy."),fe.endScope(o),o}catch(o){throw fe.endScope(null),o}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_e(n,e){const t=Y(n,"real","complex"),r=Y(e,"imag","complex");Br(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:t,imag:r};return fe.runKernel(KE,i)}const uu=ce({complex_:c_e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(n,e,t,r){if(r==null)r=$g(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(typeof n=="object"&&("texture"in n||"buffer"in n&&!(n.buffer instanceof ArrayBuffer))){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return fe.backend.createTensorFromGPUData(n,e||t,r)}if(!Sr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Vi(e);const i=ze(e),a=ze(t);J(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<t.length;++o){const s=t[o],u=o===t.length-1?s!==ze(e.slice(o)):!0;J(t[o]===e[o]||!u,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!Sr(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?Og(n,r):hs(n,[],!0),fe.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Na(n,e,t){const r=ds(n,t);return Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $C={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1=4;async function f_e(n,e){const t=[],r=[],i=Array.isArray(n)?n.map(o=>o.name):Object.keys(n);for(let o=0;o<i.length;++o){const s=i[o],u=Array.isArray(n)?n[o].tensor:n[s];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${u.dtype}`);const l={name:s,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const c=new Promise(async f=>{const h=await u.bytes(),d=h.reduce((m,y)=>m+y.length,0)+p1*h.length,p=new Uint8Array(d);let g=0;for(let m=0;m<h.length;m++){const y=h[m],b=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(b,g),g+=p1,p.set(y,g),g+=y.length}f(p)});r.push(c)}else r.push(u.data());e!=null&&(l.group=e),t.push(l)}const a=await Promise.all(r);return{data:h_e(a),specs:t}}function x8(n,e){const t={};let r,i=0;for(const a of e){const o=a.name,s=a.dtype,u=a.shape,l=ze(u);let c;if("quantization"in a){const f=a.quantization;if(f.dtype==="uint8"||f.dtype==="uint16"){if(!("min"in f&&"scale"in f))throw new Error(`Weight ${a.name} with quantization ${f.dtype} doesn't have corresponding metadata min and scale.`)}else if(f.dtype==="float16"){if(s!=="float32")throw new Error(`Weight ${a.name} is quantized with ${f.dtype} which only supports weights of type float32 not ${s}.`)}else throw new Error(`Weight ${a.name} has unknown quantization dtype ${f.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const h=$C[f.dtype],d=n.slice(i,i+l*h),p=f.dtype==="uint8"?new Uint8Array(d):new Uint16Array(d);if(s==="float32")if(f.dtype==="uint8"||f.dtype==="uint16"){c=new Float32Array(p.length);for(let g=0;g<p.length;g++){const m=p[g];c[g]=m*f.scale+f.min}}else if(f.dtype==="float16")r===void 0&&(r=y_e()),c=r(p);else throw new Error(`Unsupported quantization type ${f.dtype} for weight type float32.`);else if(s==="int32"){if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error(`Unsupported quantization type ${f.dtype} for weight type int32.`);c=new Int32Array(p.length);for(let g=0;g<p.length;g++){const m=p[g];c[g]=Math.round(m*f.scale+f.min)}}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);i+=l*h}else if(s==="string"){const f=ze(a.shape);c=[];for(let h=0;h<f;h++){const d=new Uint32Array(n.slice(i,i+p1))[0];i+=p1;const p=new Uint8Array(n.slice(i,i+d));c.push(p),i+=d}}else{const f=$C[s],h=n.slice(i,i+l*f);if(s==="float32")c=new Float32Array(h);else if(s==="int32")c=new Int32Array(h);else if(s==="bool")c=new Uint8Array(h);else if(s==="complex64"){c=new Float32Array(h);const d=new Float32Array(c.length/2),p=new Float32Array(c.length/2);for(let y=0;y<d.length;y++)d[y]=c[y*2],p[y]=c[y*2+1];const g=Na(d,u,"float32"),m=Na(p,u,"float32");t[o]=uu(g,m),g.dispose(),m.dispose()}else throw new Error(`Unsupported dtype in weight '${o}': ${s}`);i+=l*f}s!=="complex64"&&(t[o]=Na(c,u,s))}return t}function h_e(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return t.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const _R=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function IM(n){return _R?Buffer.byteLength(n):new Blob([n]).size}function d_e(n){if(_R)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function p_e(n){if(_R){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function wR(n){if(n.length===1)return n[0];let e=0;n.forEach(i=>{e+=i.byteLength});const t=new Uint8Array(e);let r=0;return n.forEach(i=>{t.set(new Uint8Array(i),r),r+=i.byteLength}),t.buffer}function PM(n){const e="/";for(n=n.trim();n.endsWith(e);)n=n.slice(0,n.length-1);const t=n.split(e);return t[t.length-1]}function _8(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function w8(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function SR(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),w8(n,t,r)}function Lg(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:IM(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:IM(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}function S8(n){const e=[];for(const t of n)e.push(...t.weights);return e}function v_e(){const n=t=>{let r=t<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function g_e(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function m_e(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function y_e(){const n=v_e(),e=g_e(),t=m_e();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const s=r[o],u=n[t[s>>10]+(s&1023)]+e[s>>10];a[o]=u}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return jn.instance==null&&(jn.instance=new jn),jn.instance}static registerSaveRouter(e){jn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){jn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return jn.getHandlers(e,"save")}static getLoadHandlers(e,t){return jn.getHandlers(e,"load",t)}static getHandlers(e,t,r){const i=[];return(t==="load"?jn.getInstance().loadRouters:jn.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const b_e=n=>jn.registerSaveRouter(n),x_e=n=>jn.registerLoadRouter(n),__e=n=>jn.getSaveHandlers(n),w_e=(n,e)=>jn.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NC="tensorflowjs",OC=1,Pc="models_store",Qu="model_info_store";function C8(){if(!xe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function LC(n){const e=n.result;e.createObjectStore(Pc,{keyPath:"modelPath"}),e.createObjectStore(Qu,{keyPath:"modelPath"})}class tf{constructor(e){if(this.indexedDB=C8(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,i)=>{const a=this.indexedDB.open(NC,OC);a.onupgradeneeded=()=>LC(a),a.onsuccess=()=>{const o=a.result;if(t==null){const s=o.transaction(Pc,"readonly"),l=s.objectStore(Pc).get(this.modelPath);l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(l.result.modelArtifacts)},l.onerror=c=>(o.close(),i(l.error)),s.oncomplete=()=>o.close()}else{const s=Lg(t),u=o.transaction(Qu,"readwrite");let l=u.objectStore(Qu);const c=l.put({modelPath:this.modelPath,modelArtifactsInfo:s});let f;c.onsuccess=()=>{f=o.transaction(Pc,"readwrite");const d=f.objectStore(Pc).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s});d.onsuccess=()=>r({modelArtifactsInfo:s}),d.onerror=p=>{l=u.objectStore(Qu);const g=l.delete(this.modelPath);g.onsuccess=()=>(o.close(),i(d.error)),g.onerror=m=>(o.close(),i(d.error))}},c.onerror=h=>(o.close(),i(c.error)),u.oncomplete=()=>{f==null?o.close():f.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}tf.URL_SCHEME="indexeddb://";const T8=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(tf.URL_SCHEME)?S_e(n.slice(tf.URL_SCHEME.length)):null;jn.registerSaveRouter(T8);jn.registerLoadRouter(T8);function S_e(n){return new tf(n)}function C_e(n){return n.startsWith(tf.URL_SCHEME)?n.slice(tf.URL_SCHEME.length):n}class T_e{constructor(){this.indexedDB=C8()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(NC,OC);r.onupgradeneeded=()=>LC(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(Qu,"readonly"),s=a.objectStore(Qu).getAll();s.onsuccess=()=>{const u={};for(const l of s.result)u[l.modelPath]=l.modelArtifactsInfo;e(u)},s.onerror=u=>(i.close(),t(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>t(r.error)})}async removeModel(e){return e=C_e(e),new Promise((t,r)=>{const i=this.indexedDB.open(NC,OC);i.onupgradeneeded=()=>LC(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(Qu,"readwrite"),s=o.objectStore(Qu),u=s.get(e);let l;u.onsuccess=()=>{if(u.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=s.delete(e),f=()=>{l=a.transaction(Pc,"readwrite");const d=l.objectStore(Pc).delete(e);d.onsuccess=()=>t(u.result.modelArtifactsInfo),d.onerror=p=>r(u.error)};c.onsuccess=f,c.onerror=h=>(f(),a.close(),r(u.error))}},u.onerror=c=>(a.close(),r(u.error)),o.oncomplete=()=>{l==null?a.close():l.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gs="/",bh="tensorflowjs_models",E8="info",E_e="model_topology",k_e="weight_specs",A_e="weight_data",R_e="model_metadata";function k8(n){return{info:[bh,n,E8].join(Gs),topology:[bh,n,E_e].join(Gs),weightSpecs:[bh,n,k_e].join(Gs),weightData:[bh,n,A_e].join(Gs),modelMetadata:[bh,n,R_e].join(Gs)}}function A8(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function I_e(n){const e=n.split(Gs);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Gs)}function P_e(n){return n.startsWith(nf.URL_SCHEME)?n.slice(nf.URL_SCHEME.length):n}class nf{constructor(e){if(!xe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=k8(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Lg(e);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,d_e(e.weightData));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw A8(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);t.format=s.format,t.generatedBy=s.generatedBy,t.convertedBy=s.convertedBy,s.signature!=null&&(t.signature=s.signature),s.userDefinedMetadata!=null&&(t.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(t.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(t.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(t.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=p_e(o),t}}nf.URL_SCHEME="localstorage://";const R8=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(nf.URL_SCHEME)?D_e(n.slice(nf.URL_SCHEME.length)):null;jn.registerSaveRouter(R8);jn.registerLoadRouter(R8);function D_e(n){return new nf(n)}class $_e{constructor(){J(xe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),J(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=bh+Gs,r=Gs+E8;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(t)&&a.endsWith(r)){const o=I_e(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=P_e(e);const t=k8(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return A8(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zh="://";class Kr{constructor(){this.managers={}}static getInstance(){return Kr.instance==null&&(Kr.instance=new Kr),Kr.instance}static registerManager(e,t){J(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(zh)&&(e=e.slice(0,e.indexOf(zh))),J(e.length>0,()=>"scheme must not be an empty string.");const r=Kr.getInstance();J(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Kr.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Kr.getInstance().managers)}}function h0(n){if(n.indexOf(zh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Kr.getSchemes().join(",")}`);return{scheme:n.split(zh)[0],path:n.split(zh)[1]}}async function I8(n,e,t=!1){J(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=jn.getLoadHandlers(n);J(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),J(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const i=r[0],a=jn.getSaveHandlers(e);J(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),J(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=a[0],s=h0(n).scheme,u=h0(n).path,l=s===h0(n).scheme,c=await i.load();t&&l&&await Kr.getManager(s).removeModel(u);const f=await o.save(c);return t&&!l&&await Kr.getManager(s).removeModel(u),f.modelArtifactsInfo}async function N_e(){const n=Kr.getSchemes(),e={};for(const t of n){const r=await Kr.getManager(t).listModels();for(const i in r){const a=t+zh+i;e[a]=r[i]}}return e}async function O_e(n){const e=h0(n);return Kr.getManager(e.scheme).removeModel(e.path)}async function L_e(n,e){return I8(n,e,!1)}async function M_e(n,e){return I8(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B_e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!xe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}}if(xe().get("IS_BROWSER")){xe().setPlatform("browser",new B_e);try{Kr.registerManager(nf.URL_SCHEME,new $_e)}catch{}try{Kr.registerManager(tf.URL_SCHEME,new T_e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F_e={importFetch:()=>require("node-fetch")};let tw;class V_e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return xe().global.fetch!=null?xe().global.fetch(e,t):(tw==null&&(tw=F_e.importFetch()),tw(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}xe().get("IS_NODE")&&!xe().get("IS_BROWSER")&&xe().setPlatform("node",new V_e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(n,e="float32",t){return e=e||"float32",Vi(n),new hd(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_e(n,e){const t=Y(n,"x","cast");if(!HU(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},i={dtype:e};return fe.runKernel(Cb,r,i)}const sn=ce({cast_:z_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U_e(n){const t={x:Y(n,"x","clone","string_or_numeric")};return fe.runKernel(Tb,t)}const Js=ce({clone_:U_e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CR(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */y8();const W_e={buffer:Wn,cast:sn,clone:Js,print:CR};Jxe(W_e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H_e(){xe().set("PROD",!0)}function G_e(){xe().set("DEBUG",!0)}function j_e(){xe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function q_e(n){xe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function X_e(){fe.disposeVariables()}function to(){return fe}function K_e(){return fe.memory()}function Y_e(n){return fe.profile(n)}function yt(n,e){return fe.tidy(n,e)}function vi(n){mR(n).forEach(t=>t.dispose())}function Zo(n){return fe.keep(n)}function Z_e(n){return fe.time(n)}function Q_e(n){return fe.setBackend(n)}function J_e(){return fe.ready()}function P8(){return fe.backendName}function ewe(n){fe.removeBackend(n)}function twe(n){return fe.findBackend(n)}function nwe(n){return fe.findBackendFactory(n)}function D8(n,e,t=1){return fe.registerBackend(n,e,t)}function $8(){return fe.backend}function rwe(n,e){xe().setPlatform(n,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwe(n,e){let t=Y(n,"a","add"),r=Y(e,"b","add");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(Sb,i)}const mt=ce({add_:iwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awe(n,e){let t=Y(n,"a","floorDiv"),r=Y(e,"b","floorDiv");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(kk,i)}const TR=ce({floorDiv_:awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(n,e){let t=Y(n,"a","div"),r=Y(e,"b","div");if([t,r]=qn(t,r),t.dtype==="int32"&&r.dtype==="int32")return TR(t,r);const i={a:t,b:r},a={};return fe.runKernel(vk,i,a)}const En=ce({div_:owe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function swe(n,e){let t=Y(n,"a","mul"),r=Y(e,"b","mul");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(aA,i)}const je=ce({mul_:swe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(n){const e=Y(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return fe.runKernel(YE,t)}else{const t={x:e};return fe.runKernel(AE,t)}}const Ai=ce({abs_:uwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(n){const t={x:Y(n,"x","acos")};return fe.runKernel(RE,t)}const N8=ce({acos_:lwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cwe(n){const t={x:Y(n,"x","acosh")};return fe.runKernel(IE,t)}const O8=ce({acosh_:cwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwe(n){J(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),J(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((i,a)=>Y(i,`tensors${a}`,"addN")),t=e[0];e.forEach(i=>{if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Un(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return fe.runKernel(PE,r)}const L8=ce({addN_:fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hwe(n,e=null,t=!1){const i={x:Y(n,"x","all","bool")},a={axis:e,keepDims:t};return fe.runKernel(DE,i,a)}const M8=ce({all_:hwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(n,e=null,t=!1){const i={x:Y(n,"x","any","bool")},a={axis:e,keepDims:t};return fe.runKernel($E,i,a)}const B8=ce({any_:dwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwe(n,e=0){const r={x:Y(n,"x","argMax")},i={axis:e};return fe.runKernel(NE,r,i)}const ER=ce({argMax_:pwe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(n,e=0){const r={x:Y(n,"x","argMin")},i={axis:e};return fe.runKernel(OE,r,i)}const F8=ce({argMin_:vwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwe(n){const t={x:Y(n,"x","asin")};return fe.runKernel(LE,t)}const V8=ce({asin_:gwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(n){const t={x:Y(n,"x","asinh")};return fe.runKernel(ME,t)}const z8=ce({asinh_:mwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(n){const t={x:Y(n,"x","atan")};return fe.runKernel(BE,t)}const U8=ce({atan_:ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bwe(n,e){let t=Y(n,"a","atan2"),r=Y(e,"b","atan2");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(VE,i)}const W8=ce({atan2_:bwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(n){const t={x:Y(n,"x","atanh")};return fe.runKernel(FE,t)}const H8=ce({atanh_:xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(n,e,t,r,i="NHWC",a){const o=n[3],s=[...e,o],u=Dd(i);return aa(n,s,t,a,r,null,null,u)}function Tf(n,e,t,r,i,a,o="channelsLast"){const[s,u]=rg(e);let l;if(o==="channelsLast")l=[s,u,n[3],n[3]];else if(o==="channelsFirst")l=[s,u,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return aa(n,l,t,r,i,a,!1,o)}function Mg(n,e,t,r,i,a,o="NDHWC"){const[s,u,l]=MC(e);let c,f;if(o==="NDHWC")f="channelsLast",c=[s,u,l,n[4],n[4]];else if(o==="NCDHW")f="channelsFirst",c=[s,u,l,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return Bg(n,c,t,r,i,!1,f,a)}function aa(n,e,t,r,i,a,o=!1,s="channelsLast"){let[u,l,c,f]=[-1,-1,-1,-1];if(s==="channelsLast")[u,l,c,f]=n;else if(s==="channelsFirst")[u,f,l,c]=n;else throw new Error(`Unknown dataFormat ${s}`);const[h,d,,p]=e,[g,m]=rg(t),[y,b]=rg(r),_=Uh(h,y),w=Uh(d,b),{padInfo:T,outHeight:E,outWidth:A}=Swe(i,l,c,g,m,_,w,a,s),I=o?p*f:p;let $;return s==="channelsFirst"?$=[u,I,E,A]:s==="channelsLast"&&($=[u,E,A,I]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:f,outHeight:E,outWidth:A,outChannels:I,padInfo:T,strideHeight:g,strideWidth:m,filterHeight:h,filterWidth:d,effectiveFilterHeight:_,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:b,inShape:n,outShape:$,filterShape:e}}function Bg(n,e,t,r,i,a=!1,o="channelsLast",s){let[u,l,c,f,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[u,l,c,f,h]=n;else if(o==="channelsFirst")[u,h,l,c,f]=n;else throw new Error(`Unknown dataFormat ${o}`);const[d,p,g,,m]=e,[y,b,_]=MC(t),[w,T,E]=MC(r),A=Uh(d,w),I=Uh(p,T),$=Uh(g,E),{padInfo:D,outDepth:N,outHeight:z,outWidth:F}=Cwe(i,l,c,f,y,b,_,A,I,$,s),G=a?m*h:m;let U;return o==="channelsFirst"?U=[u,G,N,z,F]:o==="channelsLast"&&(U=[u,N,z,F,G]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:f,inChannels:h,outDepth:N,outHeight:z,outWidth:F,outChannels:G,padInfo:D,strideDepth:y,strideHeight:b,strideWidth:_,filterDepth:d,filterHeight:p,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:I,effectiveFilterWidth:$,dilationDepth:w,dilationHeight:T,dilationWidth:E,inShape:n,outShape:U,filterShape:e}}function _we(n,e,t,r,i){r==null&&(r=kR(n,e,t));const a=n[0],o=n[1],s=ig((a-e+2*r)/t+1,i),u=ig((o-e+2*r)/t+1,i);return[s,u]}function wwe(n,e,t,r,i,a){i==null&&(i=kR(n,e[0],r[0]));const o=[0,0,0,t];for(let s=0;s<3;s++)n[s]+2*i>=e[s]&&(o[s]=ig((n[s]-e[s]+2*i)/r[s]+1,a));return o}function kR(n,e,t,r=1){const i=Uh(e,r);return Math.floor((n[0]*(t-1)-t+i)/2)}function rg(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function MC(n){return typeof n=="number"?[n,n,n]:n}function Uh(n,e){return e<=1?n:n+(n-1)*(e-1)}function Swe(n,e,t,r,i,a,o,s,u){let l,c,f;if(typeof n=="number"){l={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const d=_we([e,t],a,r,n,s);c=d[0],f=d[1]}else if(n==="same"){c=Math.ceil(e/r),f=Math.ceil(t/i);const h=Math.max(0,(c-1)*r+a-e),d=Math.max(0,(f-1)*i+o-t),p=Math.floor(h/2),g=h-p,m=Math.floor(d/2),y=d-m;l={top:p,bottom:g,left:m,right:y,type:"SAME"}}else if(n==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),f=Math.ceil((t-o+1)/i);else if(typeof n=="object"){const h=u==="channelsLast"?n[1][0]:n[2][0],d=u==="channelsLast"?n[1][1]:n[2][1],p=u==="channelsLast"?n[2][0]:n[3][0],g=u==="channelsLast"?n[2][1]:n[3][1];l={top:h,bottom:d,left:p,right:g,type:h===0&&d===0&&p===0&&g===0?"VALID":"EXPLICIT"},c=ig((e-a+h+d)/r+1,s),f=ig((t-o+p+g)/i+1,s)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:l,outHeight:c,outWidth:f}}function Cwe(n,e,t,r,i,a,o,s,u,l,c){let f,h,d,p;if(n==="valid"&&(n=0),typeof n=="number"){f={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const m=wwe([e,t,r,1],[s,u,l],1,[i,a,o],n,c);h=m[0],d=m[1],p=m[2]}else if(n==="same"){h=Math.ceil(e/i),d=Math.ceil(t/a),p=Math.ceil(r/o);const g=(h-1)*i+s-e,m=(d-1)*a+u-t,y=(p-1)*o+l-r,b=Math.floor(g/2),_=g-b,w=Math.floor(m/2),T=m-w,E=Math.floor(y/2),A=y-E;f={top:w,bottom:T,left:E,right:A,front:b,back:_,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}function ig(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function ag(n){const[e,t,r]=rg(n);return e===1&&t===1&&r===1}function Ui(n,e){return ag(n)||ag(e)}function rf(n){return rg(n).every(e=>e>0)}function Dd(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function za(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")J(Jc(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{J(Jc(i),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Twe(n,e){const r={x:Y(n,"x","reshape","string_or_numeric")},i={shape:e};return fe.runKernel(TA,r,i)}const Pe=ce({reshape_:Twe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ewe(n,e,t,r,i){const a=Y(n,"x","avgPool","float32"),o=1;J(Ui(t,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`);let s=a,u=!1;a.rank===3&&(u=!0,s=Pe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),J(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),za("avgPool",r,i);const l={x:s},c={filterSize:e,strides:t,pad:r,dimRoundingMode:i};let f=fe.runKernel(zE,l,c);return f=sn(f,a.dtype),u?Pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const AR=ce({avgPool_:Ewe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwe(n,e,t,r,i,a="NDHWC"){const o=Y(n,"x","avgPool3d","float32");let s=o,u=!1;o.rank===4&&(u=!0,s=Pe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),J(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),J(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),J(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),za("avgPool3d",r,i);const l={x:s},c={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:a};let f=fe.runKernel(UE,l,c);return f=sn(f,s.dtype),u?Pe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const j8=ce({avgPool3d_:kwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(n,e=0){J(n.length>=1,()=>"Pass at least one tensor to concat");const t=ng(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return Js(t[0]);const r=t,i={axis:e};return fe.runKernel(ZE,r,i)}const Mr=ce({concat_:Awe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rwe(n,e,t=!1,r=!1){let i=Y(n,"a","matMul"),a=Y(e,"b","matMul");[i,a]=qn(i,a);const o={a:i,b:a},s={transposeA:t,transposeB:r};return fe.runKernel(WE,o,s)}const nn=ce({matMul_:Rwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwe(n){const t={x:Y(n,"x","sigmoid","float32")};return fe.runKernel(VA,t)}const as=ce({sigmoid_:Iwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(n,e,t){const r=Y(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:t};return fe.runKernel(LA,i,a)}const xn=ce({slice_:Pwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dwe(n){const t={x:Y(n,"x","tanh","float32")};return fe.runKernel(aR,t)}const v1=ce({tanh_:Dwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $we(n,e,t,r,i,a){const o=Y(n,"forgetBias","basicLSTMCell"),s=Y(e,"lstmKernel","basicLSTMCell"),u=Y(t,"lstmBias","basicLSTMCell"),l=Y(r,"data","basicLSTMCell"),c=Y(i,"c","basicLSTMCell"),f=Y(a,"h","basicLSTMCell"),h=Mr([l,f],1),d=nn(h,s),p=mt(d,u),g=p.shape[0],m=p.shape[1]/4,y=[g,m],b=xn(p,[0,0],y),_=xn(p,[0,m],y),w=xn(p,[0,m*2],y),T=xn(p,[0,m*3],y),E=mt(je(as(b),v1(_)),je(c,as(mt(o,w)))),A=je(v1(E),as(T));return[E,A]}const q8=ce({basicLSTMCell_:$we});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nwe(n,e,t){const r=Y(n,"x","batchToSpaceND"),i=e.reduce((s,u)=>s*u);J(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),J(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),J(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:t};return fe.runKernel(HE,a,o)}const RR=ce({batchToSpaceND_:Nwe});function Owe(n){let e;return n.rank===0||n.rank===1?e=Pe(n,[1,1,1,n.size]):n.rank===2?e=Pe(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=Pe(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwe(n,e,t,r,i,a){a==null&&(a=.001);const o=Y(n,"x","batchNorm"),s=Y(e,"mean","batchNorm"),u=Y(t,"variance","batchNorm");let l;i!=null&&(l=Y(i,"scale","batchNorm"));let c;r!=null&&(c=Y(r,"offset","batchNorm")),J(s.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(l==null||s.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:Owe(o),scale:l,offset:c,mean:s,variance:u},d={varianceEpsilon:a},p=fe.runKernel(Ak,h,d);return Pe(p,o.shape)}const Fg=ce({batchNorm_:Lwe});function Mwe(n,e,t,r,i,a){const o=Y(n,"x","batchNorm"),s=Y(e,"mean","batchNorm"),u=Y(t,"variance","batchNorm");let l;i!=null&&(l=Y(i,"scale","batchNorm"));let c;return r!=null&&(c=Y(r,"offset","batchNorm")),J(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),J(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),J(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),l!=null&&J(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&J(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Fg(o,s,u,c,l,a)}const X8=ce({batchNorm2d_:Mwe});function Bwe(n,e,t,r,i,a){const o=Y(n,"x","batchNorm"),s=Y(e,"mean","batchNorm"),u=Y(t,"variance","batchNorm");let l;i!=null&&(l=Y(i,"scale","batchNorm"));let c;return r!=null&&(c=Y(r,"offset","batchNorm")),J(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),J(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),J(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),l!=null&&J(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&J(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Fg(o,s,u,c,l,a)}const K8=ce({batchNorm3d_:Bwe});function Fwe(n,e,t,r,i,a){const o=Y(n,"x","batchNorm"),s=Y(e,"mean","batchNorm"),u=Y(t,"variance","batchNorm");let l;i!=null&&(l=Y(i,"scale","batchNorm"));let c;return r!=null&&(c=Y(r,"offset","batchNorm")),J(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),J(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),J(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),l!=null&&J(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&J(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Fg(o,s,u,c,l,a)}const Y8=ce({batchNorm4d_:Fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(n,e,t){const r=Y(n,"x","bincount"),i=Y(e,"weights","bincount");J(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),J(t>=0,()=>`size must be non-negative, but got ${t}.`),J(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:t};return fe.runKernel(GE,a,o)}const IR=ce({bincount_:Vwe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwe(n,e){const t=Y(n,"s0","broadcastArgs","int32"),r=Y(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:t,s1:r};return fe.runKernel(jE,i)}const Z8=ce({broadcastArgs_:zwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(n,e){let t=Y(n,"broadcastTo","x");const r=t.shape;if(Vi(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const l=t.shape.slice();for(;l.length<e.length;)l.unshift(1);t=Pe(t,l)}const i=t.shape,a=Array.from(e);for(let l=e.length-1;l>=0;l--)if(i[l]===e[l])a[l]=1;else if(t.shape[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length===0)return Js(t);const s={x:t},u={reps:a};return fe.runKernel(Eb,s,u)}const Wh=ce({broadcastTo_:Uwe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwe(n){const t={x:Y(n,"x","ceil","float32")};return fe.runKernel(qE,t)}const Q8=ce({ceil_:Wwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $d(n,e,t){Vi(n);const r={shape:n,value:e,dtype:t};return fe.runKernel(Ck,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwe(n,e,t){const r=Y(n,"x","clipByValue");if(J(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return $d(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:t};return fe.runKernel(XE,i,a)}const J8=ce({clipByValue_:Hwe});function Gwe(n){return Mr(n,0)}const eW=ce({concat1d_:Gwe});function jwe(n,e){return Mr(n,e)}const tW=ce({concat2d_:jwe});function qwe(n,e){return Mr(n,e)}const nW=ce({concat3d_:qwe});function Xwe(n,e){return Mr(n,e)}const rW=ce({concat4d_:Xwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(n,e,t,r,i="NHWC",a=[1,1],o){const s=Y(n,"x","conv2d","float32"),u=Y(e,"filter","conv2d","float32");let l=s,c=!1;s.rank===3&&(c=!0,l=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),J(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),za("conv2d",r,o);const f=i==="NHWC"?l.shape[3]:l.shape[1];J(f===u.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${u.shape[2]}.`),J(Ui(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),J(rf(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),J(rf(t),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:l,filter:u},d={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=fe.runKernel(QE,h,d);return c?Pe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Vg=ce({conv2d_:Kwe});function Ywe(n,e,t,r,i="NWC",a=1,o){const s=Y(n,"x","conv1d"),u=Y(e,"filter","conv1d");let l=s,c=!1;s.rank===2&&(c=!0,l=Pe(s,[1,s.shape[0],s.shape[1]])),J(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),J(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),za("conv1d",r,o),J(l.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${u.shape[1]}.`),J(Ui(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),J(rf(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),J(rf(t),()=>"Error in conv1D: Stride should be larger than 0."),J(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const f=Pe(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=Pe(l,[l.shape[0],1,l.shape[1],l.shape[2]]),m=Vg(h,f,[1,t],r,"NHWC",[1,a],o);return c?Pe(m,[m.shape[2],m.shape[3]]):Pe(m,[m.shape[0],m.shape[2],m.shape[3]])}const iW=ce({conv1d_:Ywe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(n,e,t,r,i,a="NHWC",o){J(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let s=n,u=e,l=!1;e.rank===3&&(l=!0,u=Pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,n[0],n[1],n[2]]),J(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),J(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),J(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const c=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];J(c===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${t.shape[2]}.`),J(f===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${t.shape[3]}.`),za("conv2dDerInput",i,o);const h={dy:u,filter:t},d={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},p=fe.runKernel(ek,h,d);return l?Pe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const aW=ce({conv2DBackpropInput_:Zwe});function Qwe(n,e,t,r,i,a){const o=Y(n,"x","conv2dTranspose"),s=Y(e,"filter","conv2dTranspose");return aW(t,o,s,r,i,"NHWC",a)}const oW=ce({conv2dTranspose_:Qwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jwe(n,e,t,r,i="NDHWC",a=[1,1,1]){const o=Y(n,"x","conv3d"),s=Y(e,"filter","conv3d");let u=o,l=!1;o.rank===4&&(l=!0,u=Pe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),J(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),J(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),J(u.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${s.shape[3]}.`),J(Ui(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),J(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),J(rf(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),J(rf(t),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:u,filter:s},f={strides:t,pad:r,dataFormat:i,dilations:a},h=fe.runKernel(tk,c,f);return l?Pe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const sW=ce({conv3d_:Jwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eSe(n,e,t,r,i){J(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,o=e,s=!1;e.rank===4&&(s=!0,o=Pe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const u=a[4],l=o.shape[4];J(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),J(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),J(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),J(u===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[3]}.`),J(l===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${t.shape[4]}.`);const c={dy:o,filter:t},f={pad:i,strides:r,inputShape:a},h=fe.runKernel(nk,c,f);return s?Pe(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const tSe=ce({conv3DBackpropInput_:eSe});function nSe(n,e,t,r,i){const a=Y(n,"x","conv3dTranspose"),o=Y(e,"filter","conv3dTranspose");return tSe(t,a,o,r,i)}const uW=ce({conv3dTranspose_:nSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(n){const t={x:Y(n,"x","cos","float32")};return fe.runKernel(rk,t)}const lW=ce({cos_:rSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSe(n){const t={x:Y(n,"x","cosh","float32")};return fe.runKernel(ik,t)}const cW=ce({cosh_:iSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSe(n,e=0,t=!1,r=!1){const a={x:Y(n,"x","cumprod")},o={axis:e,exclusive:t,reverse:r};return fe.runKernel(ak,a,o)}const fW=ce({cumprod_:aSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSe(n,e=0,t=!1,r=!1){const a={x:Y(n,"x","cumsum")},o={axis:e,exclusive:t,reverse:r};return fe.runKernel(ok,a,o)}const hW=ce({cumsum_:oSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sSe(n,e,t,r=!1){const i=Y(n,"x","denseBincount"),a=Y(e,"weights","denseBincount");J(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),J(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),J(t>=0,()=>`size must be non-negative, but got ${t}.`),J(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:t,binaryOutput:r};return fe.runKernel(uk,o,s)}const dW=ce({denseBincount_:sSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uSe(n,e,t="NHWC"){const r=Y(n,"x","depthToSpace","float32"),i=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];J(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),J(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),J(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),J(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},u={blockSize:e,dataFormat:t};return fe.runKernel(lk,s,u)}const pW=ce({depthToSpace_:uSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSe(n,e,t,r,i="NHWC",a=[1,1],o){const s=Y(n,"x","depthwiseConv2d","float32"),u=Y(e,"filter","depthwiseConv2d","float32");let l=s,c=!1;s.rank===3&&(c=!0,l=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),J(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const f=i==="NHWC"?l.shape[3]:l.shape[1];J(f===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${u.shape[2]}.`),za("depthwiseConv2d",r,o);const h={x:l,filter:u},d={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=fe.runKernel(ck,h,d);return c?Pe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ab=ce({depthwiseConv2d_:lSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cSe(n){const t={x:Y(n,"x","diag")};return fe.runKernel(dk,t)}const vW=ce({diag_:cSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fSe(n,e,t,r,i=[1,1],a="NHWC"){const o=Y(n,"x","dilation2d"),s=Y(e,"filter","dilation2d");J(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),J(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),J(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let u=o,l=!1;o.rank===3&&(u=Pe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0),J(u.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${s.shape[2]}`);const c={x:u,filter:s},f={strides:t,pad:r,dilations:i},h=fe.runKernel(pk,c,f);return l?Pe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const gW=ce({dilation2d_:fSe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function og(n,e){const t=n.length,r=[];for(let i=0;i<t;i++){const a=t-1-i,o=n[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function PR(n,e){const t=[];for(let r=0;r<e.length;r++){const i=n[n.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&t.unshift(a)}return t}function Yt(n,e){const t=[],r=Math.max(n.length,e.length);for(let i=0;i<r;i++){let a=n[n.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)t.unshift(o);else if(o===1)t.unshift(a);else if(a!==o){const s=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(s)}else t.unshift(a)}return t}const hSe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:Yt,getBroadcastDims:og,getReductionAxes:PR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dSe(n,e){let t=Y(n,"a","equal","string_or_numeric"),r=Y(e,"b","equal","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(bk,i)}const zg=ce({equal_:dSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pSe(n,e,t){const r=Y(e,"a","where"),i=Y(t,"b","where"),a=Y(n,"condition","where","bool"),o=Yt(Yt(a.shape,r.shape),i.shape),s=Wh(a,o),u=Wh(r,o),l=Wh(i,o),c={condition:s,t:u,e:l};return fe.runKernel(NA,c)}const af=ce({where_:pSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vSe(n){const t={x:Y(n,"x","zerosLike")};return fe.runKernel(fR,t)}const Bi=ce({zerosLike_:vSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gSe(n,e){let t=Y(n,"a","div"),r=Y(e,"b","div");[t,r]=qn(t,r);const i=En(t,r),a=Bi(i),o=zg(r,a);return af(o,a,i)}const mW=ce({divNoNan_:gSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mSe(n,e){const t=Y(n,"t1","dot"),r=Y(e,"t2","dot");J((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const i=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];if(J(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),t.rank===1&&r.rank===1){const o=Pe(t,[1,-1]),s=Pe(r,[-1,1]),u=nn(o,s);return Pe(u,[])}else if(t.rank===1&&r.rank===2){const o=Pe(t,[1,-1]),s=Pe(r,[r.shape[0],r.shape[1]]),u=nn(o,s);return Pe(u,[u.size])}else if(t.rank===2&&r.rank===1){const o=Pe(r,[-1,1]),s=nn(t,o);return Pe(s,[s.size])}else{const o=Pe(r,[r.shape[0],r.shape[1]]);return nn(t,o)}}const yW=ce({dot_:mSe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySe(n,...e){const t=e.map((i,a)=>Y(i,`tensors${a}`,"einsum")),r={equation:n};return fe.runKernel(gk,t,r)}const bW=ce({einsum_:ySe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSe(n){const t={x:Y(n,"x","elu","float32")};return fe.runKernel(mk,t)}const DR=ce({elu_:bSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xSe(n){let e=Y(n,"x","erf");J(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=sn(e,"float32"));const t={x:e};return fe.runKernel(yk,t)}const xW=ce({erf_:xSe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $R(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function _W(n,e,t){const r=n.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?i.push(n[a++]):i.push(e[o++]);return i}function xs(n,e){const t=[],r=n.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);const i=e.map(a=>n[a]);return[t,i]}function oa(n,e){const t=e.map(r=>1);return _W(n,t,e)}function Co(n,e,t){J($R(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function Ua(n,e){if($R(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function NR(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Wa(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Se(n,e=null,t=!1){const i={x:Y(n,"x","max")},a={reductionIndices:e,keepDims:t};return fe.runKernel(Xk,i,a)}const zc=ce({max_:_Se});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wSe(n,e=null,t=!1){const i={x:Y(n,"x","min")},a={axis:e,keepDims:t};return fe.runKernel(eA,i,a)}const g1=ce({min_:wSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSe(n,e){let t=Y(n,"base","pow"),r=Y(e,"exp","pow");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(vA,i)}const pd=ce({pow_:SSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(n,e){if((Sr(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Sr(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Tl(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSe(n){const t={x:Y(n,"x","sqrt","float32")};return fe.runKernel(UA,t)}const ps=ce({sqrt_:CSe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TSe(n){const e=Y(n,"x","square"),t={};return fe.runKernel("Square",{x:e},t)}const Oa=ce({square_:TSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ESe(n,e=null,t=!1){let r=Y(n,"x","sum");r.dtype==="bool"&&(r=sn(r,"int32"));const i={x:r},a={axis:e,keepDims:t};return fe.runKernel(WA,i,a)}const In=ce({sum_:ESe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSe(n,e="euclidean",t=null,r=!1){n=Y(n,"x","norm");const i=wW(n,e,t);let a=i.shape;if(r){const o=cr(t,n.shape);a=oa(i.shape,o)}return Pe(i,a)}function wW(n,e,t=null){if(n.rank===0)return Ai(n);if(n.rank!==1&&t===null)return wW(Pe(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return In(Ai(n),t);if(e===1/0)return zc(Ai(n),t);if(e===-1/0)return g1(Ai(n),t);if(e==="euclidean"||e===2)return ps(In(pd(Ai(n),At(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return zc(In(Ai(n),t[0]),t[1]-1);if(e===1/0)return zc(In(Ai(n),t[1]),t[0]);if(e===-1/0)return g1(In(Ai(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return ps(In(Oa(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const Ug=ce({norm_:kSe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASe(n,e=null,t=!1){return Ug(n,"euclidean",e,t)}const SW=ce({euclideanNorm_:ASe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSe(n){const t={x:Y(n,"x","exp")};return fe.runKernel(xk,t)}const vl=ce({exp_:RSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ISe(n,e=0){const t=Y(n,"x","expandDims","string_or_numeric");J(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},i={dim:e};return fe.runKernel(_k,r,i)}const Pi=ce({expandDims_:ISe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSe(n){const t={x:Y(n,"x","expm1")};return fe.runKernel(wk,t)}const CW=ce({expm1_:PSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSe(n,e){const t=Y(n,"x","tile","string_or_numeric");J(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},i={reps:e};return fe.runKernel(Eb,r,i)}const Hh=ce({tile_:DSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Se(n,e,t,r="float32"){e==null&&(e=n);const i=Wn([n,e],r),a=n<=e?n:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=Pe(i.toTensor(),[n,e]);if(t==null)return o;if(t.length===1)return Hh(Pi(o,0),[t[0],1,1]);if(t.length===2)return Hh(Pi(Pi(o,0),0),[t[0],t[1],1,1]);if(t.length===3)return Hh(Pi(Pi(Pi(o,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const OR=ce({eye_:$Se});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSe(n){const t={x:Y(n,"x","floor","float32")};return fe.runKernel(Ek,t)}const LR=ce({floor_:NSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSe(n,e,t=0,r=0){const i=Y(n,"x","gather"),a=Y(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:t,batchDims:r};return fe.runKernel(Rk,o,s)}const MR=ce({gather_:OSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LSe(n,e){let t=Y(n,"a","greater","string_or_numeric"),r=Y(e,"b","greater","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Pk,i)}const Nd=ce({greater_:LSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSe(n,e){let t=Y(n,"a","greaterEqual","string_or_numeric"),r=Y(e,"b","greaterEqual","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Dk,i)}const BR=ce({greaterEqual_:MSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSe(n){const t={input:Y(n,"input","imag")};return fe.runKernel(Nk,t)}const Wg=ce({imag_:BSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSe(n){const t={x:Y(n,"x","isFinite")};return fe.runKernel(Ok,t)}const TW=ce({isFinite_:FSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSe(n){const t={x:Y(n,"x","isInf")};return fe.runKernel(Lk,t)}const EW=ce({isInf_:VSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSe(n){const t={x:Y(n,"x","isNaN")};return fe.runKernel(Mk,t)}const kW=ce({isNaN_:zSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function USe(n,e=.2){const r={x:Y(n,"x","leakyRelu")},i={alpha:e};return fe.runKernel(Bk,r,i)}const FR=ce({leakyRelu_:USe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSe(n,e){let t=Y(n,"a","less","string_or_numeric"),r=Y(e,"b","less","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Fk,i)}const AW=ce({less_:WSe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSe(n,e){let t=Y(n,"a","lessEqual","string_or_numeric"),r=Y(e,"b","lessEqual","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Vk,i)}const Rb=ce({lessEqual_:HSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RW(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return fe.runKernel(zk,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GSe(n,e=5,t=1,r=1,i=.5){const a=Y(n,"x","localResponseNormalization");J(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),J(Jc(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=Pe(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const u={x:o},l={depthRadius:e,bias:t,alpha:r,beta:i},c=fe.runKernel(qk,u,l);return s?Pe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const IW=ce({localResponseNormalization_:GSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jSe(n){const t={x:Y(n,"x","log","float32")};return fe.runKernel(Uk,t)}const vd=ce({log_:jSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qSe(n){const t={x:Y(n,"x","log1p")};return fe.runKernel(Wk,t)}const VR=ce({log1p_:qSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XSe(n){return J(dl(n),()=>"The f passed in grad(f) must be a function"),(e,t)=>{const r=Y(e,"x","tf.grad","string_or_numeric"),i=t!=null?Y(t,"dy","tf.grad"):null;return fe.tidy(()=>{const{value:a,grads:o}=fe.gradients(()=>n(r),[r],i);return i!=null&&Br(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Ib(o),o[0]})}}function KSe(n){return J(dl(n),()=>"The f passed in grads(f) must be a function"),(e,t)=>{J(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=ng(e,"args","tf.grads","string_or_numeric"),i=t!=null?Y(t,"dy","tf.grads"):null;return fe.tidy(()=>{const{value:a,grads:o}=fe.gradients(()=>n(...r),r,i);return i!=null&&Br(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ib(o),o})}}function YSe(n){return J(dl(n),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{J(e instanceof cn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),J(t==null||t instanceof cn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=fe.gradients(()=>n(e),[e],t);return Ib(r),{grad:r[0],value:i}}}function ZSe(n){return J(dl(n),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{J(Array.isArray(e)&&e.every(i=>i instanceof cn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),J(t==null||t instanceof cn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=fe.gradients(()=>n(...e),e,t);return t!=null&&Br(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ib(r.grads),r}}function PW(n,e){J(dl(n),()=>"The f passed in variableGrads(f) must be a function"),J(e==null||Array.isArray(e)&&e.every(l=>l instanceof tg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const l in fe.registeredVariables)e.push(fe.registeredVariables[l])}const r=t?e.filter(l=>!l.trainable):null,i=e.length;e=e.filter(l=>l.trainable),J(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=fe.gradients(n,e,null,a);J(s.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),J(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const u={};return e.forEach((l,c)=>{s[c]!=null&&(u[l.name]=s[c])}),r!=null&&r.forEach(l=>u[l.name]=null),{value:o,grads:u}}function vs(n){return fe.customGrad(n)}function Ib(n){if(n.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QSe(n){const t={x:Y(n,"x","neg")};return fe.runKernel(oA,t)}const os=ce({neg_:QSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSe(n){const t={x:Y(n,"x","softplus")};return fe.runKernel(zA,t)}const zR=ce({softplus_:JSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(n){const e=Y(n,"x","logSigmoid");return vs(r=>({value:os(zR(os(r))),gradFunc:o=>je(o,as(os(r)))}))(e)}const DW=ce({logSigmoid_:eCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCe(n,e){let t=Y(n,"a","sub"),r=Y(e,"b","sub");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(rR,i)}const It=ce({sub_:tCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(n,e=-1){const t=Y(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return vs((i,a)=>{const s=zc(i,e,!0),u=It(i,s),l=It(sn(u,"float32"),vd(In(vl(u),e,!0)));return a([l]),{value:l,gradFunc:(f,h)=>{const[d]=h,p=!0,g=vl(d);return It(f,je(In(f,e,p),g))}}})(t)}const $W=ce({logSoftmax_:nCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rCe(n,e=null,t=!1){const r=Y(n,"x","logSumExp"),i=cr(e,r.shape),a=zc(r,i,!0),o=It(r,a),s=vl(o),u=In(s,i),l=vd(u),c=mt(Pe(a,l.shape),l);if(t){const f=oa(c.shape,i);return Pe(c,f)}return c}const UR=ce({logSumExp_:rCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(n,e){const t=Y(n,"a","logicalAnd","bool"),r=Y(e,"b","logicalAnd","bool");Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Hk,i)}const sg=ce({logicalAnd_:iCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aCe(n){const t={x:Y(n,"x","logicalNot","bool")};return fe.runKernel(Gk,t)}const WR=ce({logicalNot_:aCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oCe(n,e){const t=Y(n,"a","logicalOr","bool"),r=Y(e,"b","logicalOr","bool");Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(jk,i)}const HR=ce({logicalOr_:oCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe(n,e){const t=Y(n,"a","logicalXor","bool"),r=Y(e,"b","logicalXor","bool");return Yt(t.shape,r.shape),sg(HR(n,e),WR(sg(n,e)))}const NW=ce({logicalXor_:sCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const my=2147483648;function uCe(n,e,t="left"){const r=Y(n,"sortedSequence","searchSorted"),i=Y(e,"values","searchSorted"),a=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],s=Pe(r,[-1,a]),u=Pe(i,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ze(u.shape)>=my)throw new Error(`values tensor size must less than ${my}`);if(s.shape[1]>=my)throw new Error(`trailing dim_size must less than ${my} for int32 output type, was ${s.shape[1]}`);const l={sortedSequence:s,values:u},c={side:t};return fe.runKernel($A,l,c)}const Pb=ce({searchSorted_:uCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(n,e){return Pb(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(n,e,t,r,i){const a=Y(n,"x","maxPool"),o=1;let s=a,u=!1;a.rank===3&&(u=!0,s=Pe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),J(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),J(Ui(t,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),za("maxPool",r,i);const l={x:s},c={filterSize:e,strides:t,pad:r,dimRoundingMode:i},f=fe.runKernel(Yk,l,c);return u?Pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const GR=ce({maxPool_:lCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cCe(n,e=[1,1,1],t,r,i,a="NDHWC"){const o=Y(n,"x","maxPool3d");let s=o,u=!1;o.rank===4&&(u=!0,s=Pe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),J(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),J(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),za("maxPool3d",r,i);const l={x:s},c={filterSize:e,strides:t,pad:r,dimRoundingMode:i,dataFormat:a},f=fe.runKernel(Zk,l,c);return u?Pe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const LW=ce({maxPool3d_:cCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(n,e,t,r,i=!1){const o={x:Y(n,"x","maxPoolWithArgmax")},s={filterSize:e,strides:t,pad:r,includeBatchInIndex:i},u=fe.runKernel(Qk,o,s);return{result:u[0],indexes:u[1]}}const MW=ce({maxPoolWithArgmax_:fCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hCe(n,e){let t=Y(n,"a","maximum"),r=Y(e,"b","maximum");[t,r]=qn(t,r),t.dtype==="bool"&&(t=sn(t,"int32"),r=sn(r,"int32")),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(Kk,i)}const jR=ce({maximum_:hCe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(n,e=null,t=!1){const i={x:Y(n,"x","mean")},a={axis:e,keepDims:t};return fe.runKernel(Jk,i,a)}const ug=ce({mean_:dCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(n,e="float32"){if(Vi(n),e==="complex64"){const r=gl(n,"float32"),i=gl(n,"float32");return uu(r,i)}const t=su(ze(n),e);return fe.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(n,e="float32"){if(Vi(n),e==="complex64"){const r=Ju(n,"float32"),i=gl(n,"float32");return uu(r,i)}const t=TE(ze(n),e);return fe.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BW(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=Y(n,"x","meshgrid",n instanceof cn?n.dtype:"float32");if(e===void 0)return[r];let i=Y(e,"y","meshgrid",e instanceof cn?e.dtype:"float32");const a=ze(r.shape),o=ze(i.shape);return t==="xy"?(r=Pe(r,[1,-1]),i=Pe(i,[-1,1]),[nn(Ju([o,1],r.dtype),r),nn(i,Ju([1,a],i.dtype))]):(r=Pe(r,[-1,1]),i=Pe(i,[1,-1]),[nn(r,Ju([1,o],r.dtype)),nn(Ju([a,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pCe(n,e){let t=Y(n,"a","minimum"),r=Y(e,"b","minimum");[t,r]=qn(t,r),t.dtype==="bool"&&(t=sn(t,"int32"),r=sn(r,"int32")),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(tA,i)}const qR=ce({minimum_:pCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vCe(n,e,t){J(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=Y(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");J(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=t==="reflect"?1:0;for(let s=0;s<r.rank;s++)J(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),J(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:t},o={x:r};return fe.runKernel(nA,o,a)}const XR=ce({mirrorPad_:vCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gCe(n,e){let t=Y(n,"a","mod"),r=Y(e,"b","mod");[t,r]=qn(t,r);const i={a:t,b:r};return fe.runKernel(rA,i)}const FW=ce({mod_:gCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(n,e=null,t=!1){n=Y(n,"x","moments");const r=cr(e,n.shape),i=ug(n,r,t);let a=i.shape;t||(a=oa(i.shape,r));const o=Oa(It(sn(n,"float32"),Pe(i,a))),s=ug(o,r,t);return{mean:i,variance:s}}const VW=ce({moments_:mCe});function yCe(n,e,t,r){const i=Y(e,"data","multiRNNCell"),a=ng(t,"c","multiRNNCell"),o=ng(r,"h","multiRNNCell");let s=i;const u=[];for(let f=0;f<n.length;f++){const h=n[f](s,a[f],o[f]);u.push(h[0]),u.push(h[1]),s=h[1]}const l=[],c=[];for(let f=0;f<u.length;f+=2)l.push(u[f]),c.push(u[f+1]);return[l,c]}const zW=ce({multiRNNCell_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(n,e,t,r=!1){const i=Y(n,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);t=t||Math.random();const u={logits:o===1?Pe(i,[1,-1]):i},l={numSamples:e,seed:t,normalized:r},c=fe.runKernel(iA,u,l);return o===1?Pe(c,[c.size]):c}const UW=ce({multinomial_:bCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xCe(n,e){let t=Y(n,"a","notEqual","string_or_numeric"),r=Y(e,"b","notEqual","string_or_numeric");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r};return fe.runKernel(sA,i)}const KR=ce({notEqual_:xCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ce(n,e,t=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:Y(n,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:t,offValue:r};return fe.runKernel(hA,o,s)}const lg=ce({oneHot_:_Ce});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wCe(n){const t={x:Y(n,"x","onesLike")};return fe.runKernel(fA,t)}const WW=ce({onesLike_:wCe});function SCe(n,e){const t=Y(n,"v1","outerProduct"),r=Y(e,"v2","outerProduct");J(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const i=Pe(t,[-1,1]),a=Pe(r,[1,-1]);return nn(i,a)}const HW=ce({outerProduct_:SCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(n,e,t=0){const r=Y(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:t},a={x:r};return fe.runKernel(pA,a,i)}const Ef=ce({pad_:CCe});function TCe(n,e,t=0){return J(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ef(n,[e],t)}const GW=ce({pad1d_:TCe});function ECe(n,e,t=0){return J(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ef(n,e,t)}const jW=ce({pad2d_:ECe});function kCe(n,e,t=0){return J(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ef(n,e,t)}const YR=ce({pad3d_:kCe});function ACe(n,e,t=0){return J(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ef(n,e,t)}const qW=ce({pad4d_:ACe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RCe(n,e,t){const r=Y(n,"x","spaceToBatchND");J(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),J(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),J(r.shape.reduce((o,s,u)=>u>0&&u<=e.length?o&&(s+t[u-1][0]+t[u-1][1])%e[u-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:t};return fe.runKernel(HA,i,a)}const ZR=ce({spaceToBatchND_:RCe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ICe(n,e,t,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=Y(n,"x","maxPool");let u=s,l=!1;s.rank===3&&(l=!0,u=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),J(Ui(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const c=Tf(u.shape,e,a,i,r),f=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=DCe([c.filterHeight,c.filterWidth],f):h=[[0,0],[0,0]];const d=f[0]===1&&f[1]===1,[p,g]=PCe([c.inHeight,c.inWidth],f,h),m=d?r:"valid",y=d?u:ZR(u,f,p),_=(t==="avg"?()=>AR(y,e,a,m,o):()=>GR(y,e,a,m,o))(),w=d?_:RR(_,f,g);return l?Pe(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function PCe(n,e,t){const r=t.map(c=>c[0]),i=t.map(c=>c[1]),a=n.concat(r,i),o=e.map((c,f)=>(c-a[f]%c)%c),s=i.map((c,f)=>c+o[f]),u=e.map((c,f)=>[r[f],s[f]]),l=e.map((c,f)=>[0,o[f]]);return[u,l]}function DCe(n,e){const r=n.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const XW=ce({pool_:ICe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(n,e){const t=Y(n,"x","prelu"),r=Y(e,"alpha","prelu"),i={x:t,alpha:r};return fe.runKernel(gA,i)}const QR=ce({prelu_:$Ce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NCe(n,e=null,t=!1){let r=Y(n,"x","prod");r.dtype==="bool"&&(r=sn(r,"int32"));const i={x:r},a={axis:e,keepDims:t};return fe.runKernel(mA,i,a)}const KW=ce({prod_:NCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OCe(n,e,t,r){const i=n.map((c,f)=>Y(c,`tensors${f}`,"raggedGather","int32")),a=Y(e,"paramsDenseValues","raggedGather"),o=Y(t,"indices","raggedGather","int32"),s={paramsNestedSplits:i,paramsDenseValues:a,indices:o},u={outputRaggedRank:r},l=fe.runKernel(yA,s,u);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}const YW=ce({raggedGather_:OCe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LCe(n,e,t){const r=Y(n,"starts","raggedRange"),i=Y(e,"limits","raggedRange",r.dtype),a=Y(t,"deltas","raggedRange",r.dtype),o={starts:r,limits:i,deltas:a},s=fe.runKernel(bA,o);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}const ZW=ce({raggedRange_:LCe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MCe(n,e,t,r,i){const a=Y(n,"shape","raggedTensorToTensor","int32"),o=Y(e,"values","raggedTensorToTensor"),s=Y(t,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((f,h)=>Y(f,`tensors${h}`,"raggedTensorToTensor","int32")),l={shape:a,values:o,defaultValue:s,rowPartitionTensors:u},c={rowPartitionTypes:i};return fe.runKernel(xA,l,c)}const QW=ce({raggedTensorToTensor_:MCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(n,e,t){Vi(n);const r=ze(n);let i=null;if(t==null||t==="float32")i=new Float32Array(r);else if(t==="int32")i=new Int32Array(r);else if(t==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<r;a++)i[a]=e();return fe.makeTensor(i,n,t)}const JW=ce({rand_:BCe});var BC={},FCe={get exports(){return BC},set exports(n){BC=n}};(function(n){(function(e,t,r){function i(u){var l=this,c=s();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var c=new i(u),f=l&&l.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function s(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var h=.02519603282416938*u;u=h>>>0,h-=u,h*=u,u=h>>>0,h-=u,u+=h*4294967296}return(u>>>0)*23283064365386963e-26};return l}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Da,n,!1)})(FCe);var FC={},VCe={get exports(){return FC},set exports(n){FC=n}};(function(n){(function(e,t,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Da,n,!1)})(VCe);var VC={},zCe={get exports(){return VC},set exports(n){VC=n}};(function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Da,n,!1)})(zCe);var zC={},UCe={get exports(){return zC},set exports(n){zC=n}};(function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var c=u.x,f=u.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,u.i=f+1&7,d};function l(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Da,n,!1)})(UCe);var UC={},WCe={get exports(){return UC},set exports(n){UC=n}};(function(n){(function(e,t,r){function i(s){var u=this;u.next=function(){var c=u.w,f=u.X,h=u.i,d,p;return u.w=c=c+1640531527|0,p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=f[h]=p^d,u.i=h,p+(c^c>>>16)|0};function l(c,f){var h,d,p,g,m,y=[],b=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,b=Math.max(b,f.length)),p=0,g=-32;g<b;++g)f&&(d^=f.charCodeAt((g+32)%f.length)),g===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,g>=0&&(m=m+1640531527|0,h=y[g&127]^=d+m,p=h==0?p+1:0);for(p>=128&&(y[(f&&f.length||0)&127]=-1),p=127,g=4*128;g>0;--g)d=y[p+34&127],h=y[p=p+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,y[p]=d^h;c.w=m,c.X=y,c.i=p}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Da,n,!1)})(WCe);var WC={},HCe={get exports(){return WC},set exports(n){WC=n}};(function(n){(function(e,t,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,p=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,p=(h+d)/(1<<21);while(p===0);return p},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}t&&t.exports?t.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Da,n,!1)})(HCe);var HC={},GCe={get exports(){return HC},set exports(n){HC=n}};const jCe={},qCe=Object.freeze(Object.defineProperty({__proto__:null,default:jCe},Symbol.toStringTag,{value:"Module"})),XCe=Cne(qCe);(function(n){(function(e,t,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),c=l*2,f=i-1,h;function d(w,T,E){var A=[];T=T==!0?{entropy:!0}:T||{};var I=y(m(T.entropy?[w,_(t)]:w??b(),3),A),$=new p(A),D=function(){for(var N=$.g(a),z=u,F=0;N<l;)N=(N+F)*i,z*=i,F=$.g(1);for(;N>=c;)N/=2,z/=2,F>>>=1;return(N+F)/z};return D.int32=function(){return $.g(4)|0},D.quick=function(){return $.g(4)/4294967296},D.double=D,y(_($.S),t),(T.pass||E||function(N,z,F,G){return G&&(G.S&&g(G,$),N.state=function(){return g($,{})}),F?(r[s]=N,z):N})(D,I,"global"in T?T.global:this==r,T.state)}function p(w){var T,E=w.length,A=this,I=0,$=A.i=A.j=0,D=A.S=[];for(E||(w=[E++]);I<i;)D[I]=I++;for(I=0;I<i;I++)D[I]=D[$=f&$+w[I%E]+(T=D[I])],D[$]=T;(A.g=function(N){for(var z,F=0,G=A.i,U=A.j,H=A.S;N--;)z=H[G=f&G+1],F=F*i+H[f&(H[G]=H[U=f&U+z])+(H[U]=z)];return A.i=G,A.j=U,F})(i)}function g(w,T){return T.i=w.i,T.j=w.j,T.S=w.S.slice(),T}function m(w,T){var E=[],A=typeof w,I;if(T&&A=="object")for(I in w)try{E.push(m(w[I],T-1))}catch{}return E.length?E:A=="string"?w:w+"\0"}function y(w,T){for(var E=w+"",A,I=0;I<E.length;)T[f&I]=f&(A^=T[f&I]*19)+E.charCodeAt(I++);return _(T)}function b(){try{var w;return h&&(w=h.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),_(w)}catch{var T=e.navigator,E=T&&T.plugins;return[+new Date,e,E,e.screen,_(t)]}}function _(w){return String.fromCharCode.apply(0,w)}if(y(r.random(),t),n.exports){n.exports=d;try{h=XCe}catch{}}else r["seed"+s]=d})(typeof self<"u"?self:Da,[],Math)})(GCe);var KCe=BC,YCe=FC,ZCe=VC,QCe=zC,JCe=UC,eTe=WC,kf=HC;kf.alea=KCe;kf.xor128=YCe;kf.xorwow=ZCe;kf.xorshift7=QCe;kf.xor4096=JCe;kf.tychei=eTe;var JR=kf;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tTe=.001,eH=.1;function nTe(n,e,t){return t==null&&(t=eI()),GC(n,e,(r,i)=>tI(r,i,t))}function eI(){return fe.backend.floatPrecision()===32?tTe:eH}function GC(n,e,t){let r=!0;if((Sr(n)||Sr(e))&&(r=!1),Sr(n)&&Sr(e)&&(r=!0),r){const o=n.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(n)&&Array.isArray(e)){const o=ds(n),s=ds(e);if(!Un(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const i=Sr(n)?n:hs(n),a=Sr(e)?e:hs(e);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.
Actual:   ${i}.
Expected: ${a}.`);for(let o=0;o<a.length;++o){const s=i[o],u=a[o];if(!t(s,u))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${u}.
Actual:   ${i}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function rTe(n,e){n().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function iTe(n,e){const t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Ys(n)||Ys(n[0])||Ys(e)||Ys(e[0])?GC(n,t,(r,i)=>r==i):GC(n,e,(r,i)=>tI(r,i,0))}function aTe(n,e,t){if(t==null&&(t=eI()),!tI(n,e,t))throw new Error(`Numbers differ: actual === ${n}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function tI(n,e,t){return!isFinite(n)&&!isFinite(e)?!0:!(isNaN(n)||isNaN(e)||Math.abs(n-e)>t)}function oTe(n,e,t){for(let r=0;r<n.length;r++)if(n[r]<e||n[r]>t)throw new Error(`Value out of range:${n[r]} low: ${e}, high: ${t}`)}function sTe(n,e){const t=new Float32Array(n),r=new Float32Array(e);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let i=0;i<r.length;i++)if(t[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${t[i]} instead`)}function tH(n){for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?tH(t):n[e]=Qs(t)}return n}function uTe(n){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(n),new Promise(t=>{e.addEventListener("loadeddata",r=>t(e)),e.load()})}async function lTe(n){await n.play(),"requestVideoFrameCallback"in n&&await new Promise(e=>{n.requestVideoFrameCallback(e)})}const cTe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:eH,createVideoElement:uTe,encodeStrings:tH,expectArrayBuffersEqual:sTe,expectArraysClose:nTe,expectArraysEqual:iTe,expectNumbersClose:aTe,expectPromiseToFail:rTe,expectValuesInRange:oTe,play:lTe,testEpsilon:eI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nI{constructor(e,t,r,i,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=JR.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,t,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,t=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class fTe{constructor(e,t,r,i){this.alpha=e,this.beta=1/t,this.dtype=r;const a=i||Math.random();this.randu=JR.alea(a.toString()),this.randn=new nI(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,i,a,o;for(;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,e=i*i,t=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),a=this.randu(),a<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class hTe{constructor(e=0,t=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=JR.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dTe(n,e,t=1,r="float32",i){if(Vi(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new fTe(e,t,r,i),o=Wn(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const nH=ce({randomGamma_:dTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(n,e=0,t=1,r,i){if(Vi(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new nI(e,t,r,!1,i),o=Wn(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const rI=ce({randomNormal_:pTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return rI(n,0,1,e,t)}const rH=ce({randomStandardNormal_:vTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(n,e=0,t=1,r="float32",i){Vi(n);const a=Wn(n,r),o=new hTe(e,t,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const iI=ce({randomUniform_:gTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const i={start:n,stop:e,step:t,dtype:r};return fe.runKernel(_A,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mTe(n){const t={input:Y(n,"input","real")};return fe.runKernel(wA,t)}const gd=ce({real_:mTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(n){const t={x:Y(n,"x","reciprocal")};return fe.runKernel(SA,t)}const iH=ce({reciprocal_:yTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(n){const t={x:Y(n,"x","relu")};return fe.runKernel(CA,t)}const Hg=ce({relu_:bTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xTe(n){const t={x:Y(n,"x","relu6")};return fe.runKernel(AA,t)}const aI=ce({relu6_:xTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Te(n,e){const r={x:Y(n,"x","reverse")},i={dims:e};return fe.runKernel(RA,r,i)}const yl=ce({reverse_:_Te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wTe(n){const e=Y(n,"x","reverse");return J(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),yl(e,0)}const aH=ce({reverse1d_:wTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function STe(n,e){const t=Y(n,"x","reverse");return J(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),yl(t,e)}const oH=ce({reverse2d_:STe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTe(n,e){const t=Y(n,"x","reverse");return J(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),yl(t,e)}const sH=ce({reverse3d_:CTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(n,e){const t=Y(n,"x","reverse");return J(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),yl(t,e)}const uH=ce({reverse4d_:TTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(n){const t={x:Y(n,"x","round")};return fe.runKernel(IA,t)}const oI=ce({round_:ETe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kTe(n){const t={x:Y(n,"x","rsqrt","float32")};return fe.runKernel(PA,t)}const lH=ce({rsqrt_:kTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ATe(n){const t={x:Y(n,"x","selu")};return fe.runKernel(OA,t)}const cH=ce({selu_:ATe});function RTe(n,e,t,r,i,a=[1,1],o="NHWC"){const s=Y(n,"x","separableConv2d"),u=Y(e,"depthwiseFilter","separableConv2d"),l=Y(t,"pointwiseFilter","separableConv2d");let c=s,f=!1;if(s.rank===3&&(f=!0,c=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");J(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),J(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),J(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),J(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),J(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);const h=u.shape[2],d=u.shape[3];J(l.shape[2]===h*d,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*d}, but got ${l.shape[2]}.`);const p=Ab(c,u,r,i,o,a),m=Vg(p,l,1,"valid",o);return f?Pe(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const fH=ce({separableConv2d_:RTe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ITe(n,e){const t=Y(n,"x","setdiff1d"),r=Y(e,"y","setdiff1d");J(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),J(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),J(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await t.data(),a=await r.data(),o=new Set(a);let s=0;for(let c=0;c<i.length;c++)o.has(i[c])||s++;const u=new hd([s],t.dtype),l=new hd([s],"int32");for(let c=0,f=0;c<i.length;c++)o.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[u.toTensor(),l.toTensor()]}const hH=ITe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PTe(n){const t={x:Y(n,"x","sign")};return fe.runKernel(FA,t)}const dH=ce({sign_:PTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(n){const t={x:Y(n,"x","sin","float32")};return fe.runKernel(MA,t)}const pH=ce({sin_:DTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Te(n){const t={x:Y(n,"x","sinh")};return fe.runKernel(BA,t)}const vH=ce({sinh_:$Te});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NTe(n,e,t){const r=Y(n,"x","slice1d");return J(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),xn(r,[e],[t])}const gH=ce({slice1d_:NTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OTe(n,e,t){const r=Y(n,"x","slice2d");return J(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),xn(r,e,t)}const mH=ce({slice2d_:OTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(n,e,t){const r=Y(n,"x","slice3d");return J(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),xn(r,e,t)}const yH=ce({slice3d_:LTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(n,e,t){const r=Y(n,"x","slice4d");return J(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),xn(r,e,t)}const bH=ce({slice4d_:MTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BTe(n,e=-1){const t=Y(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},i={dim:e};return fe.runKernel(jA,r,i)}const xH=ce({softmax_:BTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FTe(n){J(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return fe.runKernel(Sk,e)}const Db=ce({fft_:FTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VTe(n){J(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return fe.runKernel($k,e)}const cg=ce({ifft_:VTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const i=Pe(n,[t,e]);r=cg(i)}else{const i=[t,2*(e-1)],a=Pe(gd(n),[t,e]),o=Pe(Wg(n),[t,e]),s=yl(xn(a,[0,1],[t,e-2]),1),u=je(yl(xn(o,[0,1],[t,e-2]),1),At(-1)),l=Mr([a,s],1),c=Mr([o,u],1),f=Pe(uu(l,c),[i[0],i[1]]);r=cg(f)}if(r=gd(r),n.rank===3&&n.shape[0]!==0){const i=r,a=n.shape[0];r=Pe(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const sI=ce({irfft_:zTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(n,e,t=0){const i={x:Y(n,"x","split")},a={numOrSizeSplits:e,axis:t};return fe.runKernel(GA,i,a)}const md=ce({split_:UTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WTe(n,e){J(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let i;if(e!=null&&e<t){const p=n.shape.map(m=>0),g=n.shape.map(m=>m);g[n.shape.length-1]=e,i=xn(n,p,g),t=e}else if(e!=null&&e>t){const p=n.shape.map(g=>g);p[n.shape.length-1]=e-t,i=Mr([n,gl(p)],n.shape.length-1),t=e}else i=n;const a=Bi(i),o=Pe(uu(i,a),[r,t]),s=Db(o),u=Math.floor(t/2)+1,l=gd(s),c=Wg(s),f=md(l,[u,t-u],l.shape.length-1),h=md(c,[u,t-u],c.shape.length-1),d=i.shape.slice();return d[i.shape.length-1]=u,Pe(uu(f[0],h[0]),d)}const $b=ce({rfft_:WTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HTe(n,e){let t=Y(n,"a","squaredDifference"),r=Y(e,"b","squaredDifference");[t,r]=qn(t,r),Yt(t.shape,r.shape);const i={a:t,b:r},a={};return fe.runKernel(QA,i,a)}const uI=ce({squaredDifference_:HTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTe(n,e){const t=Y(n,"x","squeeze","string_or_numeric");return Pe(t,pu(t.shape,e).newShape)}const Aa=ce({squeeze_:GTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jTe(n,e=0){const t=ng(n,"tensors","stack","string_or_numeric");J(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&J(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,i={axis:e};return fe.runKernel(dA,r,i)}const gs=ce({stack_:jTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(n,e=0){const r={x:Y(n,"x","step")},i={alpha:e};return fe.runKernel(hR,r,i)}const lI=ce({step_:qTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XTe(n,e,t,r,i=0,a=0,o=0,s=0,u=0){const c={x:Y(n,"x","stridedSlice","string_or_numeric")},f={begin:e,end:t,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return fe.runKernel(JA,c,f)}const _H=ce({stridedSlice_:XTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KTe(n){const t={x:Y(n,"x","tan","float32")};return fe.runKernel(iR,t)}const wH=ce({tan_:KTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ra(n,e){wf(n);const t=ds(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Tl(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uc(n,e,t){if(wf(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=ds(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cI(n,e,t){if(wf(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=ds(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH(n,e,t){if(wf(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=ds(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CH(n,e,t){if(wf(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=ds(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(n,e,t){if(wf(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=ds(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Tl(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(n,e=1,t=!0){const r=Y(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:t},[s,u]=fe.runKernel(oR,a,o);return{values:s,indices:u}}const EH=ce({topk_:YTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(n,e=0,t=1,r,i){if(Vi(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new nI(e,t,r,!0,i),o=Wn(n,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const kH=ce({truncatedNormal_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(n,e=0){const t=Y(n,"x","unique","string_or_numeric");J(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},i={axis:e},[a,o]=fe.runKernel(uR,r,i);return{values:a,indices:o}}const AH=ce({unique_:QTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(n,e,t){const r=Y(n,"x","unsortedSegmentSum"),i=Y(e,"segmentIds","unsortedSegmentSum","int32");J(Jc(t),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:t};return fe.runKernel(cR,a,o)}const RH=ce({unsortedSegmentSum_:JTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2e(n,e=0){const t=Y(n,"x","unstack","string_or_numeric");J(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},i={axis:e};return fe.runKernel(lR,r,i)}const El=ce({unstack_:e2e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(n,e){return Pb(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PH(n,e=!0,t,r){return fe.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fI(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const r=Wn(n,"int32"),i=Wn([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const o=r.indexToLoc(t[a]),s=a*n.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function t2e(n){const e=Y(n,"condition","whereAsync","bool"),t=await e.data(),r=fI(e.shape,t);return n!==e&&e.dispose(),r}const hI=t2e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function n2e(n,e,t){const r=Y(n,"tensor","boolMask"),i=Y(e,"mask","boolMask","bool"),a=t??0,o=i.rank,s=r.shape;J(o>0,()=>"mask cannot be scalar"),Br(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let g=a;g<a+o;g++)u*=s[g];const l=s.slice(0,a).concat([u],s.slice(a+o)),c=Pe(r,l),f=Pe(i,[-1]),h=await hI(f),d=Aa(h,[1]),p=MR(c,d,a);return n!==r&&r.dispose(),e!==i&&i.dispose(),d.dispose(),c.dispose(),f.dispose(),h.dispose(),p}const DH=n2e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2e(n,e,t){const r=Y(n,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),J(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{J(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?yt(()=>{let o=gd(r),s=Wg(r);return o=fe.runKernel(wv,{x:o},a),s=fe.runKernel(wv,{x:s},a),t&&(s=os(s)),uu(o,s)}):fe.runKernel(wv,i,a)}const fg=ce({transpose_:r2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(n,e,t,r,i=!0){const a=Y(n,"v","movingAverage"),o=Y(e,"x","movingAverage"),s=Y(t,"decay","movingAverage");g8(a,o),J(Un(a.shape,o.shape),()=>"Shape mismatch in v and x");const u=At(1),l=It(u,s);let c=je(It(o,a),l);if(i){J(r!=null,()=>"When using zeroDebias: true, step is required.");const f=Y(r,"step","movingAverage");c=En(c,It(u,pd(s,f)))}return mt(a,c)}const $H=ce({movingAverage_:i2e});function dI(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(a+` update.rank < ${i}. `);if(n.length<r+(t.rank-i))throw new Error(a+` Output shape length < ${r+(t.rank-i)}`);if(t.rank!==i+n.length-r)throw new Error(a+` update.rank != ${i+n.length-r}`);for(let o=0;o<i;++o)if(t.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${t.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<t.rank-i;++o)if(t.shape[o+i]!==n[o+r])throw new Error(a+` updates.shape[${o+i}] (${t.shape[o+i]}) != shape[${o+i}] (${n[o+i]})`)}function pI(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}dI(t,e,n)}function Nb(n,e,t){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=t.length;let o=1;for(let f=i;f<a;++f)o*=t[f];const s=i<1?1:i,u=ze(e.shape)/s,l=[...mr(t.slice(0,i)),1],c=ze(t);return{sliceRank:i,numUpdates:u,sliceSize:o,strides:l,outputSize:c}}const a2e=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Nb,validateInput:pI,validateUpdateShape:dI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2e(n,e,t){Vi(t);const r=Y(n,"indices","scatterND","int32"),i=Y(e,"updates","scatterND");pI(i,r,t);const a={indices:r,updates:i},o={shape:t};return fe.runKernel(DA,a,o)}const NH=ce({scatterND_:o2e});function s2e(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const i=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(n,e,t,r=0){Vi(t);const i=Y(n,"sparseIndices","sparseToDense","int32"),a=Y(e,"sparseValues","sparseToDense","string_or_numeric"),o=Y(r,"defaultValue","sparseToDense",a.dtype);s2e(i,a,t,o);const s={sparseIndices:i,sparseValues:a,defaultValue:o},u={outputShape:t};return fe.runKernel(ZA,s,u)}const OH=ce({sparseToDense_:u2e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l2e(n,e){const t=Y(e,"indices","gatherND","int32"),i={params:Y(n,"x","gatherND","string_or_numeric"),indices:t};return fe.runKernel(Ik,i)}const LH=ce({gatherND_:l2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c2e(n,e){if(e==null)return n.shape.slice();if(Un(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2e(n,e,t,r){const i=Y(n,"x","dropout");if(J(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),J(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof cn?i.clone():i;const a=c2e(i,t),o=1-e,s=En(LR(mt(iI(a,0,1,"float32",r),o)),o);return je(i,s)}const MH=ce({dropout_:f2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vI(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function Ob(n,e,t){const r=1-n%2,i=new Float32Array(n);for(let a=0;a<n;++a){const o=2*Math.PI*a/(n+r-1);i[a]=e-t*Math.cos(o)}return Ra(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function h2e(n,e,t=1){const r=Y(n,"predictions","inTopK"),i=Y(e,"targets","inTopK");J(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),J(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Br(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];J(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const o=await r.data(),s=await i.data(),[u,l]=[o.length/a,a],c=fs("bool",u);for(let f=0;f<u;f++){const h=f*l,d=o.subarray(h,h+l),p=[];for(let g=0;g<d.length;g++)p.push({value:d[g],index:g});p.sort((g,m)=>m.value-g.value),c[f]=0;for(let g=0;g<t;g++)if(p[g].index===s[f]){c[f]=1;break}}return n!==r&&r.dispose(),e!==i&&i.dispose(),Na(c,i.shape,"bool")}const BH=h2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(n,e,t,r,i,a="NHWC",o){let s=n;n.rank===3&&(s=Pe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=Pe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),J(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),J(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),J(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const l=a==="NHWC"?s.shape[3]:s.shape[1],c=a==="NHWC"?u.shape[3]:u.shape[1];J(l===t[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${t[2]}.`),J(c===t[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${t[3]}).`),za("conv2dDerFilter",i,o);const f={x:s,dy:u},h={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:t};return fe.runKernel(JE,f,h)}const p2e=ce({conv2DBackpropFilter_:d2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lb(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return je(n,lI(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function Mb(n,e){let t=e;const r=PR(n.shape,e.shape);return r.length>0&&(t=In(t,r)),Pe(t,n.shape)}function Bb(n,e,t,r){if(e==="linear")return n;if(e==="relu")return Hg(n);if(e==="elu")return DR(n);if(e==="relu6")return aI(n);if(e==="prelu")return QR(n,t);if(e==="leakyrelu")return FR(n,r);if(e==="sigmoid")return as(n);throw new Error(`Unknown fused activation ${e}.`)}const Fb=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(u=u||"linear",Fb(fe.state.gradientDepth,u)===!1){J(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let E=Vg(n,e,t,r,i,a,o);return s!=null&&(E=mt(E,s)),Bb(E,u,l,c)}const f=Y(n,"x","conv2d","float32"),h=Y(e,"filter","conv2d","float32");let d=f,p=!1;f.rank===3&&(p=!0,d=Pe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),J(d.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${d.rank}.`),J(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),za("fused conv2d",r,o);const g=i==="NHWC"?d.shape[3]:d.shape[1];J(h.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${h.shape[2]}.`),J(Ui(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const m=aa(d.shape,h.shape,t,a,r,o);let y;s!=null&&(y=Y(s,"bias","fused conv2d"),[y]=qn(y,f),i==="NHWC"?Yt(m.outShape,y.shape):(J(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),J(y.shape.length===0||y.shape[0]===m.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let b;if(l!=null){const E=l.shape;if(J(E.length<=1||E.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${E.length}.`),E.length===1)J(E[0]===1||E[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the number of output channels (${m.outChannels}).`);else if(E.length===3)try{Yt(E,m.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${E}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(I)}b=Y(l,"prelu weights","fused conv2d")}const _=(E,A)=>{J(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[I,$,D,N]=A,z=Lb(E,D,u);J(ag(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const F=aW($.shape,z,I,t,r),G=p2e($,z,I.shape,t,r),U=[F,G];if(N!=null){const H=Mb(N,z);U.push(H)}return U},w={x:d,filter:h,bias:y,preluActivationWeights:b},T={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return s==null?vs((A,I,$)=>{let D=fe.runKernel(l1,w,T);return $([I,A,D]),p&&(D=Pe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:_}})(d,h):vs((A,I,$,D)=>{let N=fe.runKernel(l1,w,T);return D([I,A,N,$]),p&&(N=Pe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:_}})(d,h,y)}const g2e=ce({fusedConv2d_:v2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m2e(n,e,t,r,i,a=[1,1],o){let s=n;n.rank===3&&(s=Pe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let u=e;u.rank===3&&(u=Pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={x:s,dy:u},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:t};return fe.runKernel(fk,l,c)}const y2e=ce({depthwiseConv2dNativeBackpropFilter_:m2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(n,e,t,r,i,a=[1,1],o){let s=e,u=!1;e.rank===3&&(u=!0,s=Pe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const l={dy:s,filter:t},c={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:n},f=fe.runKernel(hk,l,c);return u?Pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const x2e=ce({depthwiseConv2dNativeBackpropInput_:b2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e({x:n,filter:e,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:u="linear",preluActivationWeights:l,leakyreluAlpha:c}){if(Fb(fe.state.gradientDepth,u)===!1){let T=Ab(n,e,t,r,i,a,o);return s!=null&&(T=mt(T,s)),Bb(T,u,l,c)}const f=Y(n,"x","depthwiseConv2d","float32"),h=Y(e,"filter","depthwiseConv2d","float32");let d=f,p=!1;f.rank===3&&(p=!0,d=Pe(f,[1,f.shape[0],f.shape[1],f.shape[2]])),J(d.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),J(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),J(d.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${d.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),a==null&&(a=[1,1]),J(Ui(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),za("fused depthwiseConv2d",r,o);const g=aa(d.shape,h.shape,t,a,r,o,!0);let m;s!=null&&(m=Y(s,"bias","fused conv2d"),[m]=qn(m,f),Yt(g.outShape,m.shape));let y;l!=null&&(y=Y(l,"prelu weights","fused depthwiseConv2d"));const b=(T,E)=>{J(ag(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[A,I,$,D]=E,N=Lb(T,$,u),z=x2e(I.shape,N,A,t,r,a,o),F=y2e(I,N,A.shape,t,r,a,o);if(D!=null){const G=Mb(m,N);return[z,F,G]}return[z,F]},_={x:d,filter:h,bias:m,preluActivationWeights:y},w={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:u,leakyreluAlpha:c};return s==null?vs((E,A,I)=>{let $=fe.runKernel(c1,_,w);return I([A,E,$]),p&&($=Pe($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(d,h):vs((E,A,I,$)=>{let D=fe.runKernel(c1,_,w);return $([A,E,D,I]),p&&(D=Pe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:b}})(d,h,m)}const w2e=ce({fusedDepthwiseConv2d_:_2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2e({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(Fb(fe.state.gradientDepth,a)===!1){let N=nn(n,e,t,r);return i!=null&&(N=mt(N,i)),Bb(N,a,o,s)}let u=Y(n,"a","fused matMul"),l=Y(e,"b","fused matMul");[u,l]=qn(u,l);const c=t?u.shape[u.rank-2]:u.shape[u.rank-1],f=r?l.shape[l.rank-1]:l.shape[l.rank-2],h=t?u.shape[u.rank-1]:u.shape[u.rank-2],d=r?l.shape[l.rank-2]:l.shape[l.rank-1],p=u.shape.slice(0,-2),g=l.shape.slice(0,-2),m=ze(p),y=ze(g);J(c===f,()=>`Error in fused matMul: inner shapes (${c}) and (${f}) of Tensors with shapes ${u.shape} and ${l.shape} and transposeA=${t} and transposeB=${r} must match.`);const _=Yt(u.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,d]),w=t?Pe(u,[m,c,h]):Pe(u,[m,h,c]),T=r?Pe(l,[y,d,f]):Pe(l,[y,f,d]);let E;i!=null&&(E=Y(i,"bias","fused matMul"),[E]=qn(E,u),Yt(_,E.shape));let A;o!=null&&(A=Y(o,"prelu weights","fused matMul"));const I=(N,z)=>{const[F,G,U,H]=z,X=Lb(Pe(N,U.shape),U,a);let Z,Q;if(!t&&!r?(Z=nn(X,G,!1,!0),Q=nn(F,X,!0,!1)):!t&&r?(Z=nn(X,G,!1,!1),Q=nn(X,F,!0,!1)):t&&!r?(Z=nn(G,X,!1,!0),Q=nn(F,X,!1,!1)):(Z=nn(G,X,!0,!0),Q=nn(X,F,!0,!0)),i!=null){const le=Mb(H,X);return[Z,Q,le]}else return[Z,Q]},$={a:w,b:T,bias:E,preluActivationWeights:A},D={transposeA:t,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?vs((z,F,G)=>{const U=fe.runKernel(u1,$,D);return G([z,F,U]),{value:Pe(U,_),gradFunc:I}})(w,T):vs((z,F,G,U)=>{const H=fe.runKernel(u1,$,D);return U([z,F,H,G]),{value:Pe(H,_),gradFunc:I}})(w,T,E)}const C2e=ce({fusedMatMul_:S2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FH=Object.freeze(Object.defineProperty({__proto__:null,conv2d:g2e,depthwiseConv2d:w2e,matMul:C2e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(n){return Ob(n,.54,.46)}const E2e=ce({hammingWindow_:T2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(n){return Ob(n,.5,.5)}const VH=ce({hannWindow_:k2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(n,e,t,r=!1,i=0){let a=0;const o=[];for(;a+e<=n.size;)o.push(xn(n,a,e)),a+=t;if(r)for(;a<n.size;){const s=a+e-n.size,u=Mr([xn(n,a,e-s),$d([s],i)]);o.push(u),a+=t}return o.length===0?Uc([],[0,e]):Pe(Mr(o),[o.length,e])}const zH=ce({frame_:A2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2e(n,e,t,r,i=VH){r==null&&(r=vI(e));const a=zH(n,e,t),o=je(a,i(e));return $b(o,r)}const I2e=ce({stft_:R2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P2e(n,e,t,r,i="bilinear",a=0){const o=Y(n,"image","cropAndResize"),s=Y(e,"boxes","cropAndResize","float32"),u=Y(t,"boxInd","cropAndResize","int32"),l=s.shape[0];J(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),J(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${s.shape}.`),J(u.rank===1&&u.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${s.shape}.`),J(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),J(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),J(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const c={image:o,boxes:s,boxInd:u},f={method:i,extrapolationValue:a,cropSize:r};return fe.runKernel(sk,c,f)}const D2e=ce({cropAndResize_:P2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2e(n){const e=Y(n,"image","flipLeftRight","float32");J(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return fe.runKernel(Tk,t,{})}const N2e=ce({flipLeftRight_:$2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(n){const e=Y(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];J(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),J(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,t),i[t]=3,Hh(e,i)}const L2e=ce({grayscaleToRGB_:O2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M2e(n,e,t=0,r=.5){const i=Y(n,"image","rotateWithOffset","float32");J(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:t,center:r};return fe.runKernel(dR,a,o)}const B2e=ce({rotateWithOffset_:M2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Od(n,e,t,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=n.shape[0];return t=Math.min(t,o),J(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),J(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),J(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),J(e.rank===1,()=>"scores must be a 1D tensor"),J(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),J(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F2e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const a=Y(n,"boxes","nonMaxSuppression","float32"),o=Y(e,"scores","nonMaxSuppression","float32"),s=Od(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u={maxOutputSize:t,iouThreshold:r,scoreThreshold:i};return fe.runKernel(uA,{boxes:a,scores:o},u)}const V2e=ce({nonMaxSuppression_:F2e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2e(n,e,t){const r=U2e(n,e,t),i=r<0?-(r+1):r;n.splice(i,0,e)}function U2e(n,e,t){return H2e(n,e,t||W2e)}function W2e(n,e){return n>e?1:n<e?-1:0}function H2e(n,e,t){let r=0,i=n.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=t(e,n[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gI(n,e,t,r,i){return bI(n,e,t,r,i,0)}function mI(n,e,t,r,i,a){return bI(n,e,t,r,i,0,!1,a,!0)}function yI(n,e,t,r,i,a){return bI(n,e,t,r,i,a,!0)}function bI(n,e,t,r,i,a,o=!1,s=!1,u=!1){const l=[];for(let m=0;m<e.length;m++)e[m]>i&&l.push({score:e[m],boxIndex:m,suppressBeginIndex:0});l.sort(DM);const c=a>0?-.5/a:0,f=[],h=[];for(;f.length<t&&l.length>0;){const m=l.pop(),{score:y,boxIndex:b,suppressBeginIndex:_}=m;if(y<i)break;let w=!1;for(let T=f.length-1;T>=_;--T){const E=G2e(n,b,f[T]);if(E>=r){w=!0;break}if(m.score=m.score*j2e(r,c,E),m.score<=i)break}m.suppressBeginIndex=f.length,w||(m.score===y?(f.push(b),h.push(m.score)):m.score>i&&z2e(l,m,DM))}const d=f.length,p=t-d;s&&p>0&&(f.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const g={selectedIndices:f};return o&&(g.selectedScores=h),u&&(g.validOutputs=d),g}function G2e(n,e,t){const r=n.subarray(e*4,e*4+4),i=n.subarray(t*4,t*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-a)*(u-o),p=(f-l)*(h-c);if(d<=0||p<=0)return 0;const g=Math.max(a,l),m=Math.max(o,c),y=Math.min(s,f),b=Math.min(u,h),_=Math.max(y-g,0)*Math.max(b-m,0);return _/(d+p-_)}function j2e(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function DM(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function q2e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY){const a=Y(n,"boxes","nonMaxSuppressionAsync"),o=Y(e,"scores","nonMaxSuppressionAsync"),s=Od(a,o,t,r,i);t=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const u=await Promise.all([a.data(),o.data()]),l=u[0],c=u[1],{selectedIndices:f}=gI(l,c,t,r,i);return a!==n&&a.dispose(),o!==e&&o.dispose(),Ra(f,"int32")}const X2e=q2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Y(n,"boxes","nonMaxSuppression"),s=Y(e,"scores","nonMaxSuppression"),u=Od(o,s,t,r,i,a);t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l={boxes:o,scores:s},c={maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},f=fe.runKernel(cA,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}const Y2e=ce({nonMaxSuppressionWithScore_:K2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Z2e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=Y(n,"boxes","nonMaxSuppressionAsync"),s=Y(e,"scores","nonMaxSuppressionAsync"),u=Od(o,s,t,r,i,a);t=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,a=u.softNmsSigma;const l=await Promise.all([o.data(),s.data()]),c=l[0],f=l[1],{selectedIndices:h,selectedScores:d}=yI(c,f,t,r,i,a);return o!==n&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:Ra(h,"int32"),selectedScores:Ra(d)}}const Q2e=Z2e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J2e(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Y(n,"boxes","nonMaxSuppression"),s=Y(e,"scores","nonMaxSuppression"),u=Od(o,s,t,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,h={boxes:o,scores:s},d={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:a},p=fe.runKernel(lA,h,d);return{selectedIndices:p[0],validOutputs:p[1]}}const eEe=ce({nonMaxSuppressionPadded_:J2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tEe(n,e,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=Y(n,"boxes","nonMaxSuppressionAsync"),s=Y(e,"scores","nonMaxSuppressionAsync"),u=Od(o,s,t,r,i,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,[h,d]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:g}=mI(h,d,l,c,f,a);return o!==n&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:Ra(p,"int32"),validOutputs:At(g,"int32")}}const nEe=tEe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(n,e,t=!1,r=!1){const i=Y(n,"images","resizeBilinear");J(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),J(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),J(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:t,halfPixelCenters:r,size:e},l=fe.runKernel(kA,s,u);return o?Pe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const iEe=ce({resizeBilinear_:rEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(n,e,t=!1,r=!1){const i=Y(n,"images","resizeNearestNeighbor");J(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),J(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),J(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),J(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},u={alignCorners:t,halfPixelCenters:r,size:e},l=fe.runKernel(EA,s,u);return o?Pe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const oEe=ce({resizeNearestNeighbor_:aEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(n,e="binary",t=!1,r=.5){const i=Y(n,"image","threshold"),a=.2989,o=.587,s=.114,u=i.shape[0]*i.shape[1];let l=je(Ra([r]),255),c,f,h,d;if(J(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),J(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),J(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),J(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[c,f,h]=md(i,[1,1,1],-1);const m=je(c,a),y=je(f,o),b=je(h,s);d=mt(mt(m,y),b)}else d=n;if(e==="otsu"){const m=IR(sn(oI(d),"int32"),Na([]),256);l=uEe(m,u)}const p=t?Rb(d,l):Nd(d,l);return sn(je(p,255),"int32")}function uEe(n,e){let t=Ra([-1]),r=Ra([0]),i=Ra([0]),a,o,s,u,l,c;for(let f=0;f<n.size-1;f++){a=xn(n,0,f+1),o=xn(n,f+1),l=En(In(a),e),c=En(In(o),e);const h=In(je(a,ml(0,a.size)));s=En(h,In(a));const d=$d(o.shape,a.size),p=mt(ml(0,o.size),d),g=je(o,p);u=En(In(g),In(o));const m=It(s,u),y=It(s,u),b=je(l,c);i=je(je(b,m),y);const _=Nd(i,r);r=af(_,i,r),t=af(_,Ra([f]),t)}return t}const lEe=ce({threshold_:sEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(n,e,t="nearest",r="constant",i=0,a){const o=Y(n,"image","transform","float32"),s=Y(e,"transforms","transform","float32");J(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),J(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),J(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const u={image:o,transforms:s},l={interpolation:t,fillMode:r,fillValue:i,outputShape:a};return fe.runKernel(sR,u,l)}const fEe=ce({transform_:cEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(n,e,t){J(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),J(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`);const r=Y(n,"a","bandPart");J(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);if(!(e<=a))throw new Error(`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`);if(!(t<=o))throw new Error(`bandPart(): numUpper (${t}) must not be greater than the number of columns (${o}).`);e<0&&(e=a),t<0&&(t=o);const s=Pe(ml(0,a,1,"int32"),[-1,1]),u=ml(0,o,1,"int32"),l=It(s,u),c=sg(Rb(l,At(+e,"int32")),BR(l,At(-t,"int32"))),f=gl([a,o],r.dtype);return Pe(gs(El(Pe(r,[-1,a,o])).map(h=>af(c,h,f))),i)}const dEe=ce({bandPart_:hEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(n){let e;if(Array.isArray(n)){e=!1,J(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=n[0].shape[0];for(let a=1;a<n.length;++a)J(n[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${i})`)}else e=!0,n=md(n,n.shape[0],0).map(i=>Aa(i,[0]));J(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let i=0;i<n.length;++i)t.push(fe.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=je(In(je(t[o],a)),t[o]);a=It(a,s)}return En(a,Ug(a,"euclidean"))}));return e?gs(t,0):t}const vEe=ce({gramSchmidt_:pEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(n,e=!1){if(J(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return $M(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((u,l)=>u*l),r=El(Pe(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],a=[];r.forEach(u=>{const[l,c]=$M(u,e);i.push(l),a.push(c)});const o=Pe(gs(i,0),n.shape),s=Pe(gs(a,0),n.shape);return[o,s]}}function $M(n,e=!1){return fe.tidy(()=>{J(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let i=OR(t),a=Js(n);const o=Uc([[1]],[1,1]);let s=Js(o);const u=t>=r?r:t;for(let l=0;l<u;++l){const c=a,f=s,h=i;[s,a,i]=fe.tidy(()=>{const d=xn(a,[l,l],[t-l,1]),p=Ug(d),g=xn(a,[l,l],[1,1]),m=af(Nd(g,0),Uc([[-1]]),Uc([[1]])),y=It(g,je(m,p)),b=En(d,y);b.shape[0]===1?s=Js(o):s=Mr([o,xn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const _=os(En(nn(m,y),p)),w=xn(a,[l,0],[t-l,r]),T=je(_,s),E=fg(s);if(l===0)a=It(w,nn(T,nn(E,w)));else{const $=It(w,nn(T,nn(E,w)));a=Mr([xn(a,[0,0],[l,r]),$],0)}const A=fg(T),I=xn(i,[0,l],[t,i.shape[1]-l]);if(l===0)i=It(I,nn(nn(I,s),A));else{const $=It(I,nn(nn(I,s),A));i=Mr([xn(i,[0,0],[t,l]),$],1)}return[s,a,i]}),vi([c,f,h])}return!e&&t>r&&(i=xn(i,[0,0],[t,r]),a=xn(a,[0,0],[r,r])),[i,a]})}const mEe=ce({qr_:gEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zr;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Zr||(Zr={}));function yEe(n,e,t=Zr.SUM_BY_NONZERO_WEIGHTS){const r=Y(n,"losses","computeWeightedLoss");let i=null;e!=null&&(i=Y(e,"weights","computeWeightedLoss"));const a=i==null?r:je(r,i);if(t===Zr.NONE)return a;if(t===Zr.SUM)return In(a);if(t===Zr.MEAN){if(i==null)return ug(a);{const o=r.size/i.size,s=En(In(a),In(i));return o>1?En(s,At(o)):s}}if(t===Zr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return En(In(a),At(r.size));{const o=je(i,Ju(r.shape)),s=sn(In(KR(o,At(0))),"float32");return En(In(a),s)}}throw Error(`Unknown reduction: ${t}`)}const vu=ce({computeWeightedLoss_:yEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(n,e,t,r=Zr.SUM_BY_NONZERO_WEIGHTS){const i=Y(n,"labels","absoluteDifference"),a=Y(e,"predictions","absoluteDifference");let o=null;t!=null&&(o=Y(t,"weights","absoluteDifference")),Br(i.shape,a.shape,"Error in absoluteDifference: ");const s=Ai(It(i,a));return vu(s,o,r)}const xEe=ce({absoluteDifference_:bEe});function _Ee(n,e,t,r,i=Zr.SUM_BY_NONZERO_WEIGHTS){const a=Y(n,"labels","cosineDistance"),o=Y(e,"predictions","cosineDistance");let s=null;r!=null&&(s=Y(r,"weights","cosineDistance")),Br(a.shape,o.shape,"Error in cosineDistance: ");const u=At(1),l=It(u,In(je(a,o),t,!0));return vu(l,s,i)}const wEe=ce({cosineDistance_:_Ee});function SEe(n,e,t,r=Zr.SUM_BY_NONZERO_WEIGHTS){let i=Y(n,"labels","hingeLoss");const a=Y(e,"predictions","hingeLoss");let o=null;t!=null&&(o=Y(t,"weights","hingeLoss")),Br(i.shape,a.shape,"Error in hingeLoss: ");const s=At(1);i=It(je(At(2),i),s);const u=Hg(It(s,je(i,a)));return vu(u,o,r)}const CEe=ce({hingeLoss_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(n,e,t,r=1,i=Zr.SUM_BY_NONZERO_WEIGHTS){const a=Y(n,"labels","huberLoss"),o=Y(e,"predictions","huberLoss");let s=null;t!=null&&(s=Y(t,"weights","huberLoss")),Br(a.shape,o.shape,"Error in huberLoss: ");const u=At(r),l=Ai(It(o,a)),c=qR(l,u),f=It(l,c),h=mt(je(At(.5),Oa(c)),je(u,f));return vu(h,s,i)}const EEe=ce({huberLoss_:TEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(n,e,t,r=1e-7,i=Zr.SUM_BY_NONZERO_WEIGHTS){const a=Y(n,"labels","logLoss"),o=Y(e,"predictions","logLoss");let s=null;t!=null&&(s=Y(t,"weights","logLoss")),Br(a.shape,o.shape,"Error in logLoss: ");const u=At(1),l=At(r),c=os(je(a,vd(mt(o,l)))),f=je(It(u,a),vd(mt(It(u,o),l))),h=It(c,f);return vu(h,s,i)}const AEe=ce({logLoss_:kEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REe(n,e,t,r=Zr.SUM_BY_NONZERO_WEIGHTS){const i=Y(n,"labels","meanSquaredError"),a=Y(e,"predictions","meanSquaredError");let o=null;t!=null&&(o=Y(t,"weights","meanSquaredError")),Br(i.shape,a.shape,"Error in meanSquaredError: ");const s=uI(i,a);return vu(s,o,r)}const IEe=ce({meanSquaredError_:REe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(n,e){const t=Y(n,"labels","sigmoidCrossEntropyWithLogits"),r=Y(e,"logits","sigmoidCrossEntropyWithLogits");Br(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Hg(r),a=je(r,t),o=VR(vl(os(Ai(r))));return mt(It(i,a),o)}function DEe(n,e,t,r=0,i=Zr.SUM_BY_NONZERO_WEIGHTS){let a=Y(n,"multiClassLabels","sigmoidCrossEntropy");const o=Y(e,"logits","sigmoidCrossEntropy");let s=null;if(t!=null&&(s=Y(t,"weights","sigmoidCrossEntropy")),Br(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const l=At(r),c=At(1),f=At(.5);a=mt(je(a,It(c,l)),je(f,l))}const u=PEe(a,o);return vu(u,s,i)}const $Ee=ce({sigmoidCrossEntropy_:DEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return vs((i,a,o)=>{const u=UR(a,[t],!0),l=It(sn(a,"float32"),u);o([i,l]);const c=os(je(l,i));return{value:In(c,[t]),gradFunc:(d,p)=>{const[g,m]=p,y=oa(d.shape,[t]);return[je(Pe(d,y),It(sn(g,"float32"),vl(m))),je(Pe(d,y),It(vl(m),sn(g,"float32")))]}}})(n,e)}function OEe(n,e,t,r=0,i=Zr.SUM_BY_NONZERO_WEIGHTS){let a=Y(n,"onehotLabels","softmaxCrossEntropy");const o=Y(e,"logits","softmaxCrossEntropy");let s=null;if(t!=null&&(s=Y(t,"weights","softmaxCrossEntropy")),Br(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const l=At(r),c=At(1),f=At(a.shape[1]);a=mt(je(a,It(c,l)),En(l,f))}const u=NEe(a,o);return vu(u,s,i)}const LEe=ce({softmaxCrossEntropy_:OEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(n,e,t,r){const i=Y(n,"indices","sparseFillEmptyRows","int32"),a=Y(e,"values","sparseFillEmptyRows"),o=Y(t,"denseShape","sparseFillEmptyRows","int32"),s=Y(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const u={indices:i,values:a,denseShape:o,defaultValue:s},l=fe.runKernel(qA,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}const BEe=ce({sparseFillEmptyRows_:MEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEe(n,e,t){const r=Y(n,"inputIndices","sparseReshape","int32"),i=Y(e,"inputShape","sparseReshape","int32"),a=Y(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const o={inputIndices:r,inputShape:i,newShape:a},s=fe.runKernel(XA,o);return{outputIndices:s[0],outputShape:s[1]}}const VEe=ce({sparseReshape_:FEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(n,e,t){const r=Y(n,"data","sparseSegmentMean"),i=Y(e,"indices","sparseSegmentMean","int32"),a=Y(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return fe.runKernel(KA,o)}const UEe=ce({sparseSegmentMean_:zEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(n,e,t){const r=Y(n,"data","sparseSegmentSum"),i=Y(e,"indices","sparseSegmentSum","int32"),a=Y(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return fe.runKernel(YA,o)}const HEe=ce({sparseSegmentSum_:WEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(n,e,t,r,i,a,o,s){const u=Y(n,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const l=Y(e,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:t,nGramWidths:r,leftPad:i,rightPad:a,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:l},h=fe.runKernel(eR,f,c);return{nGrams:h[0],nGramsSplits:h[1]}}const jEe=ce({stringNGrams_:GEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(n,e,t=!0){const r=Y(n,"input","stringSplit","string"),i=Y(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const a={skipEmpty:t},o={input:r,delimiter:i},s=fe.runKernel(tR,o,a);return{indices:s[0],values:s[1],shape:s[2]}}const XEe=ce({stringSplit_:qEe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(n,e){const t=Y(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:t};return fe.runKernel(nR,i,r)}const YEe=ce({stringToHashBucketFast_:KEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UH={fft:Db,ifft:cg,rfft:$b,irfft:sI},WH={hammingWindow:E2e,hannWindow:VH,frame:zH,stft:I2e},of={flipLeftRight:N2e,grayscaleToRGB:L2e,resizeNearestNeighbor:oEe,resizeBilinear:iEe,rotateWithOffset:B2e,cropAndResize:D2e,nonMaxSuppression:V2e,nonMaxSuppressionAsync:X2e,nonMaxSuppressionWithScore:Y2e,nonMaxSuppressionWithScoreAsync:Q2e,nonMaxSuppressionPadded:eEe,nonMaxSuppressionPaddedAsync:nEe,threshold:lEe,transform:fEe},HH={bandPart:dEe,gramSchmidt:vEe,qr:mEe},GH={absoluteDifference:xEe,computeWeightedLoss:vu,cosineDistance:wEe,hingeLoss:CEe,huberLoss:EEe,logLoss:AEe,meanSquaredError:IEe,sigmoidCrossEntropy:$Ee,softmaxCrossEntropy:LEe},jH={sparseFillEmptyRows:BEe,sparseReshape:VEe,sparseSegmentMean:UEe,sparseSegmentSum:HEe},qH={stringNGrams:jEe,stringSplit:XEe,stringToHashBucketFast:YEe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XH{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Gu{constructor(){this.classNameMap={}}static getMap(){return Gu.instance==null&&(Gu.instance=new Gu),Gu.instance}static register(e){Gu.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function KH(n){J(n.className!=null,()=>"Class being registered does not have the static className property defined."),J(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),J(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Gu.register(n)}const ZEe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:XH,SerializationMap:Gu,registerClass:KH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kl extends XH{minimize(e,t=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return vi(a),t?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return PW(e,t)}dispose(){this.iterations_!=null&&vi(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:At(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(kl,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xI extends kl{constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=fe.backend.epsilon())}static get className(){return"Adadelta"}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=fe.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:yt(()=>Bi(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:yt(()=>Bi(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedGrads[i].variable,l=this.accumulatedUpdates[i].variable;yt(()=>{const c=mt(je(u,this.rho),je(Oa(s),1-this.rho)),f=je(En(ps(mt(l,this.epsilon)),ps(mt(u,this.epsilon))),s),h=mt(je(l,this.rho),je(Oa(f),1-this.rho));u.assign(c),l.assign(h);const d=mt(je(f,-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(vi(this.accumulatedGrads.map(e=>e.variable)),vi(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _I extends kl{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}static get className(){return"Adagrad"}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=fe.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:yt(()=>$d(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;yt(()=>{const u=mt(s,Oa(o));s.assign(u);const l=mt(je(En(o,ps(mt(u,fe.backend.epsilon()))),-this.learningRate),a);a.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&vi(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wI extends kl{constructor(e,t,r,i=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],yt(()=>{this.accBeta1=At(t).variable(),this.accBeta2=At(r).variable()}),i==null&&(this.epsilon=fe.backend.epsilon())}static get className(){return"Adam"}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);yt(()=>{const r=It(1,this.accBeta1),i=It(1,this.accBeta2);t.forEach((a,o)=>{const s=fe.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:yt(()=>Bi(s).variable(u))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:yt(()=>Bi(s).variable(u))});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedSecondMoment[o].variable,h=mt(je(c,this.beta1),je(l,1-this.beta1)),d=mt(je(f,this.beta2),je(Oa(l),1-this.beta2)),p=En(h,r),g=En(d,i);c.assign(h),f.assign(d);const m=mt(je(En(p,mt(ps(g),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(je(this.accBeta1,this.beta1)),this.accBeta2.assign(je(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&vi(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&vi(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),yt(()=>{this.accBeta1.assign(pd(this.beta1,this.iterations_+1)),this.accBeta2.assign(pd(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SI extends kl{constructor(e,t,r,i=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],yt(()=>{this.iteration=At(0).variable(),this.accBeta1=At(t).variable()}),i==null&&(this.epsilon=fe.backend.epsilon())}static get className(){return"Adamax"}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);yt(()=>{const r=It(1,this.accBeta1),i=En(-this.learningRate,mt(je(this.iteration,this.decay),1));t.forEach((a,o)=>{const s=fe.registeredVariables[a],u=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:Bi(s).variable(u)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:Bi(s).variable(u)});const l=Array.isArray(e)?e[o].tensor:e[a];if(l==null)return;const c=this.accumulatedFirstMoment[o].variable,f=this.accumulatedWeightedInfNorm[o].variable,h=mt(je(c,this.beta1),je(l,1-this.beta1)),d=je(f,this.beta2),p=Ai(l),g=jR(d,p);c.assign(h),f.assign(g);const m=mt(je(En(i,r),En(h,mt(g,this.epsilon))),s);s.assign(m)}),this.iteration.assign(mt(this.iteration,1)),this.accBeta1.assign(je(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&vi(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&vi(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vb extends kl{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}static get className(){return"SGD"}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=fe.registeredVariables[r];yt(()=>{const s=mt(je(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Zo(At(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CI extends Vb{constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=At(this.momentum)}static get className(){return"Momentum"}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=fe.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:yt(()=>Bi(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&yt(()=>{let u;const l=mt(je(this.m,o),s);this.useNesterov?u=mt(je(this.c,mt(s,je(l,this.m))),a):u=mt(je(this.c,l),a),o.assign(l),a.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&vi(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TI extends kl{constructor(e,t=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=fe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}static get className(){return"RMSProp"}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=fe.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:yt(()=>Bi(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:yt(()=>Bi(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:yt(()=>Bi(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const u=this.accumulatedMeanSquares[i].variable,l=this.accumulatedMoments[i].variable;yt(()=>{const c=mt(je(u,this.decay),je(Oa(s),1-this.decay));if(this.centered){const f=this.accumulatedMeanGrads[i].variable,h=mt(je(f,this.decay),je(s,1-this.decay)),d=En(je(s,this.learningRate),ps(It(c,mt(Oa(h),this.epsilon)))),p=mt(je(l,this.momentum),d);u.assign(c),f.assign(h),l.assign(p);const g=It(a,p);a.assign(g)}else{const f=mt(je(u,this.decay),je(Oa(s),1-this.decay)),h=mt(je(l,this.momentum),En(je(s,this.learningRate),ps(mt(f,this.epsilon))));u.assign(f),l.assign(h);const d=It(a,h);a.assign(d)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&vi(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&vi(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&vi(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QEe=[xI,_I,wI,SI,CI,TI,Vb];function JEe(){for(const n of QEe)KH(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke="model",tke=".json",nke=".weights.bin";function NM(n){return new Promise(e=>setTimeout(e)).then(n)}class sf{constructor(e){if(!xe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(sf.URL_SCHEME)&&(e=e.slice(sf.URL_SCHEME.length)),(e==null||e.length===0)&&(e=eke),this.modelJsonFileName=e+tke,this.weightDataFileName=e+nke}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=_8(e,r),a=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=a,await NM(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;s.download=this.weightDataFileName,s.href=t,await NM(()=>s.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Lg(e)}}}}sf.URL_SCHEME="downloads://";class rke{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=i=>{const a=JSON.parse(i.target.result),o=a.modelTopology;if(o==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const u=SR(a,l=>this.loadWeights(l));e(u)},r.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const o of e)t.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(e),a=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(a).then(o=>[t,wR(o)])}loadWeightsFile(e,t){return new Promise((r,i)=>{const a=new FileReader;a.onload=o=>{const s=o.target.result;r(s)},a.onerror=o=>i(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(a=>PM(a.name)),i={};for(const a of e)a.paths.forEach(o=>{const s=PM(o);if(t.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(t.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(s)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const ike=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(sf.URL_SCHEME)?ake(n.slice(sf.URL_SCHEME.length)):null;jn.registerSaveRouter(ike);function ake(n="model"){return new sf(n)}function oke(n){return new rke(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(n,e,t,r){o(n),t=t??0,r=r??1,s(t,r);let i=0;const a=u=>(u.then(l=>{const c=t+ ++i/n.length*(r-t);return e(c),l}),u);function o(u){J(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function s(u,l){J(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),J(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),J(l>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${l}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function YH(n,e){e==null&&(e={});const t=e.fetchFunc==null?xe().platform.fetch:e.fetchFunc,r=n.map(f=>t(f,e.requestInit,{isBinary:!0})),i=0,a=.5,s=(e.onProgress==null?await Promise.all(r):await OM(r,e.onProgress,i,a)).map(f=>f.arrayBuffer()),u=.5,l=1;return e.onProgress==null?await Promise.all(s):await OM(s,e.onProgress,u,l)}async function ske(n,e="",t,r){return ZH(o=>YH(o,{requestInit:r}))(n,e,t)}function ZH(n){return async(e,t="",r)=>{const i=e.map(()=>!1),a={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((d,p)=>{let g=0;d.weights.forEach(m=>{const y="quantization"in m?m.quantization.dtype:m.dtype,b=$C[y]*ze(m.shape),_=()=>{i[p]=!0,a[p]==null&&(a[p]=[]),a[p].push({manifestEntry:m,groupOffset:g,sizeBytes:b})};r!=null?r.forEach((w,T)=>{w===m.name&&(_(),o[T]=!0)}):_(),s.push(m.name),g+=b})}),!o.every(d=>d)){const d=r.filter((p,g)=>!o[g]);throw new Error(`Could not find weights in manifest with names: ${d.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const u=i.reduce((d,p,g)=>(p&&d.push(g),d),[]),l=[];u.forEach(d=>{e[d].paths.forEach(p=>{const g=t+(t.endsWith("/")?"":"/")+p;l.push(g)})});const c=await n(l),f={};let h=0;return u.forEach(d=>{const p=e[d].paths.length;let g=0;for(let w=0;w<p;w++)g+=c[h+w].byteLength;const m=new ArrayBuffer(g),y=new Uint8Array(m);let b=0;for(let w=0;w<p;w++){const T=new Uint8Array(c[h+w]);y.set(T,b),b+=T.byteLength}a[d].forEach(w=>{const T=m.slice(w.groupOffset,w.groupOffset+w.sizeBytes),E=x8(T,[w.manifestEntry]);for(const A in E)f[A]=E[A]}),h+=p}),f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uke="application/octet-stream",lke="application/json";class EI{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(J(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=xe().platform.fetch,J(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&J(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=_8(e,r);t.body.append("model.json",new Blob([JSON.stringify(i)],{type:lke}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:uke}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:Lg(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=t.modelTopology,i=t.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return SR(t,a=>this.loadWeights(a))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=cke(t),a=this.weightPathPrefix||r,o=S8(e),s=[],u=[];for(const c of e)for(const f of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(f)):s.push(a+f+i);this.weightUrlConverter&&s.push(...await Promise.all(u));const l=await YH(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[o,wR(l)]}}EI.URL_SCHEME_REGEX=/^https?:\/\//;function cke(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),i=t>e?n.substring(t):"";return[r+"/",i]}function jC(n){return n.match(EI.URL_SCHEME_REGEX)!=null}const QH=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>jC(r)):t=jC(n),t)return kI(n,e)}return null};jn.registerSaveRouter(QH);jn.registerLoadRouter(QH);function kI(n,e){return new EI(n,e)}function fke(n,e){return kI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nw{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class JH{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class hke{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function dke(n,e,t,r){const i=arguments;return new hke(eG(...i))}function eG(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new nw(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nw({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nw({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function pke(n){return new JH(n)}function vke(n){return new JH(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AI=Object.freeze(Object.defineProperty({__proto__:null,browserFiles:oke,browserHTTPRequest:fke,concatenateArrayBuffers:wR,copyModel:L_e,decodeWeights:x8,encodeWeights:f_e,fromMemory:dke,fromMemorySync:eG,getLoadHandlers:w_e,getModelArtifactsForJSON:SR,getModelArtifactsForJSONSync:w8,getModelArtifactsInfoForJSON:Lg,getSaveHandlers:__e,getWeightSpecs:S8,http:kI,isHTTPScheme:jC,listModels:N_e,loadWeights:ske,moveModel:M_e,registerLoadRouter:x_e,registerSaveRouter:b_e,removeModel:O_e,weightsLoaderFactory:ZH,withSaveHandler:pke,withSaveHandlerSync:vke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gke(n,e,t){const r=Y(n,"labels","confusionMatrix"),i=Y(e,"predictions","confusionMatrix");J(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),J(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),J(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),J(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),J(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);const a=lg(sn(r,"int32"),t),o=lg(sn(i,"int32"),t),s=fg(a),u=nn(s,o);return sn(u,"int32")}const mke=ce({confusionMatrix_:gke});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yke=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:mke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let vc;function tG(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,i=!1,a=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(f1(s1,fe.backendName)!=null){const p={pixels:n},g={numChannels:e};return fe.runKernel(s1,p,g)}const[l,c]=i?[n.videoWidth,n.videoHeight]:[n.width,n.height];let f;if(o)f=n.getContext("2d").getImageData(0,0,l,c).data;else if(r||t)f=n.data;else if(a||i||s){if(vc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")vc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else vc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});vc.canvas.width=l,vc.canvas.height=c,vc.drawImage(n,0,0,l,c),f=vc.getImageData(0,0,l,c).data}let h;if(e===4)h=new Int32Array(f);else{const p=l*c;h=new Int32Array(p*e);for(let g=0;g<p;g++)for(let m=0;m<e;++m)h[g*e+m]=f[g*4+m]}return cI(h,[c,l,e],"int32")}function bke(n){return n!=null&&n.data instanceof Uint8Array}function xke(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function _ke(n){return n!=null&&n.width!==0&&n.height!==0}function wke(n){return xke()&&!(n instanceof ImageBitmap)&&_ke(n)&&!bke(n)}async function Ske(n,e=3){let t=null;if(xe().getBool("WRAP_TO_IMAGEBITMAP")&&wke(n)){let r;try{r=await createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?t=r:t=n}else t=n;return tG(t,e)}async function zb(n,e){let t=Y(n,"img","toPixels");if(!(n instanceof cn)){const l=t;t=sn(l,"int32"),l.dispose()}if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const[r,i]=t.shape.slice(0,2),a=t.rank===2?1:t.shape[2];if(a>4||a===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${a}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`);const o=await t.data(),s=t.dtype==="float32"?255:1,u=new Uint8ClampedArray(i*r*4);for(let l=0;l<r*i;++l){const c=[0,0,0,255];for(let h=0;h<a;h++){const d=o[l*a+h];if(t.dtype==="float32"){if(d<0||d>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${d}.`)}else if(t.dtype==="int32"&&(d<0||d>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${d}.`);a===1?(c[0]=d*s,c[1]=d*s,c[2]=d*s):c[h]=d*s}const f=l*4;u[f+0]=Math.round(c[0]),u[f+1]=Math.round(c[1]),u[f+2]=Math.round(c[2]),u[f+3]=Math.round(c[3])}if(e!=null){e.width=i,e.height=r;const l=e.getContext("2d"),c=new ImageData(u,i,r);l.putImageData(c,0,0)}return t!==n&&t.dispose(),u}const Ub=ce({fromPixels_:tG}),Cke=Object.freeze(Object.defineProperty({__proto__:null,fromPixels:Ub,fromPixelsAsync:Ske,toPixels:zb},Symbol.toStringTag,{value:"Module"}));function RI(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(ze(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let f=0;f<i.length-1;++f)o*=i[f];const s=n.shape,u=i.slice();u.pop();let l=1;for(let f=a;f<t;++f)l*=s[f],u.push(s[f]);const c=[...mr(n.shape).map(f=>f/l),1].slice(0,a);return[u,o,l,c]}const Tke=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:RI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qC=-2,Eke=-1;function nG(n,e,t){const r=n.shape.length;J(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),J(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)J(e[i]+t[i]<=n.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+t[i]}) would overflow input.shape[${i}] (${n.shape[i]})`)}function kke(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function rG(n,e,t){const r=[];for(let i=0;i<n.length;i++)r[i]=Math.ceil((e[i]-n[i])/t[i]);return r}function iG(n,e,t,r){const i=[...n];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<t;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function aG(n,e,t){return t<=n?t:t-(e-1)}function oG(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function Ake(n,e,t,r,i,a,o,s,u){const l=n.length;let c=new Array(l),f=new Array(l),h=new Array(l);if(e.length&&t>0){const d=e[0],p=t+1;c=sG(o,d,p,r,n),f=uG(s,d,p,i,n),h=iG(a,d,p,n)}else for(let d=0;d<l;d++)c[d]=cG(o,r,a,n,d,u),f[d]=fG(s,i,a,n,d,u),h[d]=lG(a,d,u);return{begin:c,end:f,strides:h}}function sG(n,e,t,r,i){const a=[...i],o=oG(t,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const u=aG(e,t,s);let l=r[u];n&1<<u&&(l=0),a[s]=l}return a}function uG(n,e,t,r,i){const a=[...i],o=oG(t,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const u=aG(e,t,s);let l=r[u];n&1<<u&&(l=Number.MAX_SAFE_INTEGER),a[s]=l}for(let s=0;s<a.length;s++){const u=i[s];a[s]<0&&(a[s]+=u),a[s]=Qv(0,a[s],i[s])}return a}function lG(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function cG(n,e,t,r,i,a){let o=e[i];const s=t[i]||1;(n&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),o=Qv(0,o,u-1),o}function fG(n,e,t,r,i,a){let o=e[i];const s=t[i]||1;(n&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const u=r[i];return o<0&&(o+=u),s>0?o=Qv(0,o,u):o=Qv(-1,o,u-1),o}function II(n,e,t){let r=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(let i=r+1;i<t.length;i++)if(e[i]>0||t[i]!==n[i])return!1;return!0}function PI(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function hG(n,e,t){let r;const i=n.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{J(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return t==null?a=new Array(i).fill(-1):typeof t=="number"?a=[t,...new Array(i-1).fill(-1)]:t.length<i?a=t.concat(new Array(i-t.length).fill(-1)):a=t,a=a.map((o,s)=>o>=0?o:(J(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),n.shape[s]-r[s])),[r,a]}function dG(n,e,t,r,i,a,o,s,u){let l;if(r==null?(l=new Array(e.length),l.fill(1)):l=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const f={dims:l.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:l.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};for(let _=0;_<f.dims;_++)c&&1<<_&s&&f.numAddAxisAfterEllipsis++,1<<_&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);const h={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Rke(f,h);let d=!0,p=!0,g=!0;const m=[],y=[];for(let _=0;_<n.length;++_){if(h.strides[_]===0)throw Error(`strides[${_}] must be non-zero`);const w=!!(h.shrinkAxisMask&1<<_),T=n[_];if(T===-1){m.push(w?1:-1);continue}const E=[h.beginMask&1<<_,h.endMask&1<<_],A=[h.strides[_]>0?0:-1,h.strides[_]>0?T:T-1];if(w&&h.strides[_]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&h.strides[_]===1;const I=!!(h.beginMask&1<<_&&h.endMask&1<<_);if(h.beginValid&&h.endValid){if(w){const z=h.begin[_]<0?T+h.begin[_]:h.begin[_];if(h.begin[_]=z,h.end[_]=h.begin[_]+1,z<0||z>=T)throw Error(`slice index ${h.begin[_]} of dimension ${_} out of bounds.`)}else h.begin[_]=LM(h.begin[_],0,h.strides[_],T,E,A),h.end[_]=LM(h.end[_],1,h.strides[_],T,E,A);const N=h.strides[_]===1&&h.begin[_]===0&&h.end[_]===T;d=d&&N,p=p&&(_===0&&h.strides[_]===1||N)}else d=d&&h.strides[_]===1&&I,p=p&&(_===0&&h.strides[_]===1||I);let $,D=!1;if(h.beginValid&&h.endValid?($=h.end[_]-h.begin[_],D=!0):w?($=1,D=!0):I&&T>=0&&(h.strides[_]<0?$=-T:$=T,D=!0),D){let N;$===0||$<0!=h.strides[_]<0?N=0:N=Math.trunc($/h.strides[_])+($%h.strides[_]!==0?1:0),m.push(N)}else m.push(-1)}for(let _=0;_<h.finalShapeGatherIndices.length;++_){const w=h.finalShapeGatherIndices[_];w>=0?y.push(m[w]):w===qC&&y.push(1)}return{finalShapeSparse:y.filter((_,w)=>h.finalShapeGatherIndices[w]!==qC),finalShape:y,isIdentity:d,sliceDim0:p,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function Rke(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const i=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<i;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(qC),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Eke),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function LM(n,e,t,r,i,a){if(i[e])return t>0?a[e]:a[e+1&1];{const o=n<0?r+n:n;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const pG=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:nG,computeFlatOffset:PI,computeOutShape:rG,getNormalizedAxes:Ake,isSliceContinous:II,maskToAxes:kke,parseSliceParams:hG,sliceInfo:dG,startForAxis:cG,startIndicesWithElidedDims:sG,stopForAxis:fG,stopIndicesWithElidedDims:uG,stridesForAxis:lG,stridesWithElidedDims:iG},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Ike="4.2.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vG{static sgd(e){return new Vb(e)}static momentum(e,t,r=!1){return new CI(e,t,r)}static rmsprop(e,t=.9,r=0,i=null,a=!1){return new TI(e,t,r,i,a)}static adam(e=.001,t=.9,r=.999,i=null){return new wI(e,t,r,i)}static adadelta(e=.001,t=.95,r=null){return new xI(e,t,r)}static adamax(e=.002,t=.9,r=.999,i=null,a=0){return new SI(e,t,r,i,a)}static adagrad(e,t=.1){return new _I(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke=vG;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n())();function gG(){return new Promise(n=>Dke(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mG(n,e){const t=n[0].length;n.forEach((i,a)=>{J(i.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),J(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((i,a)=>{for(let o=0;o<t;o++)J(o===e||i[o]===r[o],()=>`Error in concat${t}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function uf(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ao;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(ao||(ao={}));function yG(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let i=1;i<t.length;++i){const a=t[i],o=r[r.length-t.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+n}] = ${a} but shape[${i+n}] = ${s}`)}else r[o]=a}return r}function bG(n){const e={FIRST_DIM_SIZE:ao.FIRST_DIM_SIZE,VALUE_ROWIDS:ao.VALUE_ROWIDS,ROW_LENGTHS:ao.ROW_LENGTHS,ROW_SPLITS:ao.ROW_SPLITS,ROW_LIMITS:ao.ROW_LIMITS,ROW_STARTS:ao.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function xG(n){return n.length===0?0:n[0]===ao.FIRST_DIM_SIZE?n.length-1:n.length}function _G(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(t,r-1);++i){const a=n[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-n.length}] = ${a} but ragged tensor input.flatValues.shape[${i-n.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DI=30;function Wb(n){return n<=DI?n:a1(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wG(n,e,t){const r=t*(typeof n=="number"?n:n[0]),i=e*(typeof n=="number"?n:n[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $I(n,e,t,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(n[0]/t),i=i.concat(n.slice(1));else{i=i.concat(n[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([n[o+1]/e[o],e[o]]);i=i.concat(n.slice(a+1))}return i}function NI(n,e,t=!0){const r=[];if(t){r.push(e);for(let i=e+1;i<n;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<n;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function OI(n,e,t,r=!0){const i=[];r?i.push(n[0]/t):i.push(n[0]*t);for(let a=1;a<n.length;++a)a<=e.length?r?i.push(e[a-1]*n[a]):i.push(n[a]/e[a-1]):i.push(n[a]);return i}function SG(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function CG(n,e,t){const r=n.slice(0,1);for(let i=0;i<t;++i)r.push(n[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TG=1.7580993408473768,EG=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kG=.3275911,AG=.254829592,RG=-.284496736,IG=1.421413741,PG=-1.453152027,DG=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XC(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function $ke(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function Nke(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function Oke(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<n.length;i+=4)t[Math.floor(i/4)]=n[i],r[Math.floor(i/4)]=n[i+1];return{real:t,imag:r}}function Lke(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function Mke(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function Bke(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let i=0;i<Math.ceil(n/2);i++){const a=(e?2:-2)*Math.PI*(i/n);t[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:t,imag:r}}function Fke(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rw="->",Vke=/->/g,MM=",",BM="...";function $G(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(Vke,"").length)/rw.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${rw}").`);const[r,i]=n.split(rw);J(r.indexOf(BM)===-1,()=>`The ellipsis notation ("${BM}") is not supported yet.`);const a=r.split(MM),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const d=i[h];if(!a.some(p=>p.indexOf(d)!==-1))throw new Error(`Output subscripts contain the label ${d} not present in the input subscripts.`);s.indexOf(d)===-1&&s.push(d)}for(let h=0;h<r.length;++h){const d=r[h];s.indexOf(d)===-1&&d!==MM&&s.push(d)}const u=new Array(a.length);for(let h=0;h<o;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);u[h]=[];for(let d=0;d<a[h].length;++d)u[h].push(s.indexOf(a[h][d]))}const l=s.length,c=i.length,f=[];for(let h=c;h<l;++h)f.push(h);return{allDims:s,summedDims:f,idDims:u}}function NG(n,e){let t=new Array(n);t.fill(-1);for(let i=0;i<e.length;++i)t[e[i]]=i;const r=[];for(let i=0;i<n;++i)t[i]===-1&&r.push(i);return t=t.filter(i=>i!==-1),{permutationIndices:t,expandDims:r}}function OG(n,e,t){const r=new Array(n);for(let i=0;i<t.length;++i){const a=t[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:J(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function LG(n,e){const t=n,r=[];let i=0;n.length===0&&t.push(-1),i=n.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<t.length;++o){const s=t[o],u=zke(e,s);for(const l of u)a.indexOf(l)===-1&&(r[o].push(l),a.push(l))}return{path:t,steps:r}}function MG(n){return n.every((e,t)=>e===t)}function zke(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function BG(n,e,t=0){let r=[];if(typeof e=="number")J(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);J(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,u)=>u>0?s+u:s);e[a]=n.shape[t]-o}J(n.shape[t]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FG(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function VG(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function zG(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UG(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function WG(n,e){return`size ${n} must be non-negative, not ${e}`}function HG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function GG(n,e){const t=ze(n),r=ze(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function jG(n,e){const t=ze(n),r=ze(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KC(){return"segment ids must be >= 0"}function qG(){return"segment ids are not increasing"}function XG(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function KG(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YG(n,e){let t=!1,r;for(n<=DI?(r=n,t=!0):r=a1(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=a1(n,r+1);return r}function ZG(n,e,t){const r=[],i=n.length;for(let a=0;a<i;a++)a!==e?r.push(n[a]):r.push(t);return r}function QG(n,e,t,r){const i=e.shape.length,a=n.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let f=0;f<r;++f)if(n.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${n.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);const o=n.shape[t],s=[];let u=1,l=1,c=1;for(let f=0;f<r;++f)s.push(n.shape[f]),u*=n.shape[f];for(let f=r;f<t;f++)s.push(n.shape[f]),l*=n.shape[f];for(let f=r;f<i;f++)s.push(e.shape[f]);for(let f=t+1;f<a;f++)s.push(n.shape[f]),c*=n.shape[f];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:o,outputShape:s}}const Uke=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:QG,computeOutShape:ZG,segOpComputeOptimalWindowSize:YG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hg(n){try{return n.map(e=>ef(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function JG(n){return n.map(e=>Qs(e))}const ej=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:AG,ERF_A2:RG,ERF_A3:IG,ERF_A4:PG,ERF_A5:DG,ERF_P:kG,PARALLELIZE_THRESHOLD:DI,get RowPartitionType(){return ao},SELU_SCALE:EG,SELU_SCALEALPHA:TG,applyActivation:Bb,assertAndGetBroadcastShape:Yt,assertAxesAreInnerMostDims:Co,assertParamsConsistent:mG,assignToTypedArray:Mke,axesAreInnerMostDims:$R,calculateShapes:Nb,checkEinsumDimSizes:OG,checkPadOnDimRoundingMode:za,combineLocations:_W,combineRaggedTensorToTensorShapes:yG,complexWithEvenIndex:Nke,complexWithOddIndex:Oke,computeConv2DInfo:aa,computeConv3DInfo:Bg,computeDefaultPad:kR,computeDilation2DInfo:G8,computeOptimalWindowSize:Wb,computeOutAndReduceShapes:xs,computeOutShape:uf,computePool2DInfo:Tf,computePool3DInfo:Mg,convertConv2DDataFormat:Dd,decodeEinsumEquation:$G,eitherStridesOrDilationsAreOne:Ui,expandShapeToKeepDim:oa,exponent:Fke,exponents:Bke,fromStringArrayToUint8:JG,fromUint8ToStringArray:hg,getAxesPermutation:Ua,getBroadcastDims:og,getComplexWithIndex:Lke,getEinsumComputePath:LG,getEinsumPermutation:NG,getFusedBiasGradient:Mb,getFusedDyActivation:Lb,getImageCenter:wG,getInnerMostAxes:Wa,getPermuted:NI,getRaggedRank:xG,getReductionAxes:PR,getReshaped:$I,getReshapedPermuted:OI,getRowPartitionTypesHelper:bG,getSliceBeginCoords:SG,getSliceSize:CG,getSparseFillEmptyRowsIndicesDenseShapeMismatch:FG,getSparseFillEmptyRowsNegativeIndexErrorMessage:VG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:zG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:HG,getSparseReshapeInputOutputMismatchErrorMessage:jG,getSparseReshapeInputOutputMultipleErrorMessage:GG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:UG,getSparseReshapeNegativeOutputDimErrorMessage:WG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:KG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:KC,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:qG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:XG,getUndoAxesPermutation:NR,isIdentityPermutation:MG,log:Pxe,mergeRealAndImagArrays:XC,prepareAndValidate:RI,prepareSplitSize:BG,segment_util:Uke,shouldFuse:Fb,slice_util:pG,splitRealAndImagArrays:$ke,stridesOrDilationsArePositive:rf,tupleValuesAreOne:ag,upcastType:ho,validateDefaultValueShape:_G,validateInput:pI,validateUpdateShape:dI,warn:Ca},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:gI,nonMaxSuppressionV4Impl:mI,nonMaxSuppressionV5Impl:yI,whereImpl:fI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */JEe();const tj=Object.freeze(Object.defineProperty({__proto__:null,Abs:AE,Acos:RE,Acosh:IE,AdadeltaOptimizer:xI,AdagradOptimizer:_I,AdamOptimizer:wI,AdamaxOptimizer:SI,Add:Sb,AddN:PE,All:DE,Any:$E,ArgMax:NE,ArgMin:OE,Asin:LE,Asinh:ME,Atan:BE,Atan2:VE,Atanh:FE,AvgPool:zE,AvgPool3D:UE,AvgPool3DGrad:JU,AvgPoolGrad:QU,BatchMatMul:WE,BatchToSpaceND:HE,Bincount:GE,BroadcastArgs:jE,BroadcastTo:Sxe,Cast:Cb,Ceil:qE,ClipByValue:XE,Complex:KE,ComplexAbs:YE,Concat:ZE,Conv2D:QE,Conv2DBackpropFilter:JE,Conv2DBackpropInput:ek,Conv3D:tk,Conv3DBackpropFilterV2:e8,Conv3DBackpropInputV2:nk,Cos:rk,Cosh:ik,CropAndResize:sk,Cumprod:ak,Cumsum:ok,DataStorage:FU,DenseBincount:uk,DepthToSpace:lk,DepthwiseConv2dNative:ck,DepthwiseConv2dNativeBackpropFilter:fk,DepthwiseConv2dNativeBackpropInput:hk,Diag:dk,Dilation2D:pk,Dilation2DBackpropFilter:Txe,Dilation2DBackpropInput:Cxe,get ENV(){return EE},Einsum:gk,Elu:mk,EluGrad:t8,Environment:YU,Equal:bk,Erf:yk,Exp:xk,ExpandDims:_k,Expm1:wk,FFT:Sk,Fill:Ck,FlipLeftRight:Tk,Floor:Ek,FloorDiv:kk,FromPixels:s1,FusedBatchNorm:Ak,FusedConv2D:l1,FusedDepthwiseConv2D:c1,GatherNd:Ik,GatherV2:Rk,Greater:Pk,GreaterEqual:Dk,IFFT:$k,Identity:Tb,Imag:Nk,IsFinite:Ok,IsInf:Lk,IsNan:Mk,KernelBackend:CE,LRN:qk,LRNGrad:n8,LeakyRelu:Bk,Less:Fk,LessEqual:Vk,LinSpace:zk,Log:Uk,Log1p:Wk,LogSoftmax:kxe,LogicalAnd:Hk,LogicalNot:Gk,LogicalOr:jk,LogicalXor:Exe,LowerBound:Axe,Max:Xk,MaxPool:Yk,MaxPool3D:Zk,MaxPool3DGrad:i8,MaxPoolGrad:r8,MaxPoolWithArgmax:Qk,Maximum:Kk,Mean:Jk,Min:eA,Minimum:tA,MirrorPad:nA,Mod:rA,MomentumOptimizer:CI,Multinomial:iA,Multiply:aA,Neg:oA,NonMaxSuppressionV3:uA,NonMaxSuppressionV4:lA,NonMaxSuppressionV5:cA,NotEqual:sA,OP_SCOPE_SUFFIX:xR,OneHot:hA,OnesLike:fA,Optimizer:kl,OptimizerConstructors:vG,Pack:dA,PadV2:pA,Pool:Rxe,Pow:vA,Prelu:gA,Prod:mA,RMSPropOptimizer:TI,RaggedGather:yA,RaggedRange:bA,RaggedTensorToTensor:xA,Range:_A,get Rank(){return kC},Real:wA,RealDiv:vk,Reciprocal:SA,get Reduction(){return Zr},Relu:CA,Relu6:AA,Reshape:TA,ResizeBilinear:kA,ResizeBilinearGrad:o8,ResizeNearestNeighbor:EA,ResizeNearestNeighborGrad:a8,Reverse:RA,RotateWithOffset:dR,Round:IA,Rsqrt:PA,SGDOptimizer:Vb,ScatterNd:DA,SearchSorted:$A,Select:NA,Selu:OA,Sigmoid:VA,Sign:FA,Sin:MA,Sinh:BA,Slice:LA,Softmax:jA,Softplus:zA,SpaceToBatchND:HA,SparseFillEmptyRows:qA,SparseReshape:XA,SparseSegmentMean:KA,SparseSegmentSum:YA,SparseToDense:ZA,SplitV:GA,Sqrt:UA,Square:s8,SquaredDifference:QA,Step:hR,StridedSlice:JA,StringNGrams:eR,StringSplit:tR,StringToHashBucketFast:nR,Sub:rR,Sum:WA,Tan:iR,Tanh:aR,Tensor:cn,TensorBuffer:hd,Tile:Eb,TopK:oR,Transform:sR,Transpose:wv,Unique:uR,Unpack:lR,UnsortedSegmentSum:cR,UpperBound:Ixe,Variable:tg,ZerosLike:fR,_FusedMatMul:u1,abs:Ai,acos:N8,acosh:O8,add:mt,addN:L8,all:M8,any:B8,argMax:ER,argMin:F8,asin:V8,asinh:z8,atan:U8,atan2:W8,atanh:H8,avgPool:AR,avgPool3d:j8,backend:$8,backend_util:ej,basicLSTMCell:q8,batchNorm:Fg,batchNorm2d:X8,batchNorm3d:K8,batchNorm4d:Y8,batchToSpaceND:RR,bincount:IR,booleanMaskAsync:DH,broadcastArgs:Z8,broadcastTo:Wh,broadcast_util:hSe,browser:Cke,buffer:Wn,cast:sn,ceil:Q8,clipByValue:J8,clone:Js,complex:uu,concat:Mr,concat1d:eW,concat2d:tW,concat3d:nW,concat4d:rW,conv1d:iW,conv2d:Vg,conv2dTranspose:oW,conv3d:sW,conv3dTranspose:uW,copyRegisteredKernels:Oxe,cos:lW,cosh:cW,cosineWindow:Ob,cumprod:fW,cumsum:hW,customGrad:vs,denseBincount:dW,deprecationWarn:q_e,depthToSpace:pW,depthwiseConv2d:Ab,device_util:l_e,diag:vW,dilation2d:gW,disableDeprecationWarnings:j_e,dispose:vi,disposeVariables:X_e,div:En,divNoNan:mW,dot:yW,dropout:MH,einsum:bW,elu:DR,enableDebugMode:G_e,enableProdMode:H_e,enclosingPowerOfTwo:vI,engine:to,env:xe,equal:zg,erf:xW,euclideanNorm:SW,exp:vl,expandDims:Pi,expm1:CW,eye:OR,fft:Db,fill:$d,findBackend:twe,findBackendFactory:nwe,floor:LR,floorDiv:TR,fused:FH,gather:MR,gatherND:LH,gather_util:Tke,getBackend:P8,getGradient:SC,getKernel:f1,getKernelsForBackend:h1,grad:XSe,grads:KSe,greater:Nd,greaterEqual:BR,ifft:cg,imag:Wg,image:of,inTopKAsync:BH,io:AI,irfft:sI,isFinite:TW,isInf:EW,isNaN:kW,keep:Zo,kernel_impls:Wke,leakyRelu:FR,less:AW,lessEqual:Rb,linalg:HH,linspace:RW,localResponseNormalization:IW,log:vd,log1p:VR,logSigmoid:DW,logSoftmax:$W,logSumExp:UR,logicalAnd:sg,logicalNot:WR,logicalOr:HR,logicalXor:NW,losses:GH,lowerBound:OW,matMul:nn,math:yke,max:zc,maxPool:GR,maxPool3d:LW,maxPoolWithArgmax:MW,maximum:jR,mean:ug,memory:K_e,meshgrid:BW,min:g1,minimum:qR,mirrorPad:XR,mod:FW,moments:VW,movingAverage:$H,mul:je,multiRNNCell:zW,multinomial:UW,neg:os,nextFrame:gG,norm:Ug,notEqual:KR,oneHot:lg,ones:Ju,onesLike:WW,op:ce,outerProduct:HW,pad:Ef,pad1d:GW,pad2d:jW,pad3d:YR,pad4d:qW,pool:XW,pow:pd,prelu:QR,print:CR,prod:KW,profile:Y_e,raggedGather:YW,raggedRange:ZW,raggedTensorToTensor:QW,rand:JW,randomGamma:nH,randomNormal:rI,randomStandardNormal:rH,randomUniform:iI,range:ml,ready:J_e,real:gd,reciprocal:iH,registerBackend:D8,registerGradient:Dxe,registerKernel:pR,relu:Hg,relu6:aI,removeBackend:ewe,reshape:Pe,reverse:yl,reverse1d:aH,reverse2d:oH,reverse3d:sH,reverse4d:uH,rfft:$b,round:oI,rsqrt:lH,scalar:At,scatterND:NH,scatter_util:a2e,searchSorted:Pb,selu:cH,separableConv2d:fH,serialization:ZEe,setBackend:Q_e,setPlatform:rwe,setdiff1dAsync:hH,sigmoid:as,sign:dH,signal:WH,sin:pH,sinh:vH,slice:xn,slice1d:gH,slice2d:mH,slice3d:yH,slice4d:bH,slice_util:pG,softmax:xH,softplus:zR,spaceToBatchND:ZR,sparse:jH,sparseToDense:OH,spectral:UH,split:md,sqrt:ps,square:Oa,squaredDifference:uI,squeeze:Aa,stack:gs,step:lI,stridedSlice:_H,string:qH,sub:It,sum:In,sumOutType:kb,tan:wH,tanh:v1,tensor:Na,tensor1d:Ra,tensor2d:Uc,tensor3d:cI,tensor4d:SH,tensor5d:CH,tensor6d:TH,tensor_util:i_e,test_util:cTe,tidy:yt,tile:Hh,time:Z_e,topk:EH,train:Pke,transpose:fg,truncatedNormal:kH,unique:AH,unregisterGradient:Nxe,unregisterKernel:$xe,unsortedSegmentSum:RH,unstack:El,upcastType:ho,upperBound:IH,util:Hxe,valueAndGrad:YSe,valueAndGrads:ZSe,variable:PH,variableGrads:PW,version_core:Ike,where:af,whereAsync:hI,zeros:gl,zerosLike:Bi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke=xe();Hke.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var va;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(va||(va={}));var FM;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(FM||(FM={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke={};function nj(n){return Gke[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L(n,e,t,r,i){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const s=a.inputIndexStart,u=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?s+1:a.inputIndexEnd;if(a.type==="tensor")return Qr(e.inputNames[a.inputIndexStart],t,r,i);if(a.type==="tensors")return e.inputNames.slice(s,u).map(h=>Qr(h,t,r,i));const l=Qr(e.inputNames.slice(s)[0],t,r,i),c=l.dataSync();return a.type==="number"?c[0]:Vc(l.shape,c)}const o=e.attrParams[n];return o&&o.value}function Qr(n,e,t,r){const[i,a]=ki(n);if(r!=null){const s=r.getHashTableHandleByName(i);if(s!=null)return s}const o=t.currentContextIds.find(s=>!!e[m1(i,s)]);return o!==void 0?e[m1(i,o)][a]:void 0}function jke(n,e,t){return e[m1(n,t.currentContextId)]}function Wo(n,e){const[t,r,i]=ki(n);return[m1(t,e&&e.currentContextId),r,i]}function m1(n,e){return e?`${n}-${e}`:n}function ki(n){const e=n.split(":");if(e.length===1)return[n,0,void 0];const t=e[0],r=e.length===3?e[1]:void 0,i=Number(e[e.length-1]);return[t,i,r]}function d0(n,e,t){let r=L("pad",n,e,t);if(r==="explicit"){r=L("explicitPaddings",n,e,t);const i=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)i[a][0]=r[a*2],i[a][1]=r[a*2+1];return i}return r}function zs(n){return n.kept?n:Js(n)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Xke=Object.freeze(Object.defineProperty({__proto__:null,json:qke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Yke=Object.freeze(Object.defineProperty({__proto__:null,json:Kke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Qke=Object.freeze(Object.defineProperty({__proto__:null,json:Zke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],eAe=Object.freeze(Object.defineProperty({__proto__:null,json:Jke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tAe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],nAe=Object.freeze(Object.defineProperty({__proto__:null,json:tAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],iAe=Object.freeze(Object.defineProperty({__proto__:null,json:rAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aAe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],oAe=Object.freeze(Object.defineProperty({__proto__:null,json:aAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],uAe=Object.freeze(Object.defineProperty({__proto__:null,json:sAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lAe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],cAe=Object.freeze(Object.defineProperty({__proto__:null,json:lAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fAe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],hAe=Object.freeze(Object.defineProperty({__proto__:null,json:fAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dAe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],pAe=Object.freeze(Object.defineProperty({__proto__:null,json:dAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vAe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],gAe=Object.freeze(Object.defineProperty({__proto__:null,json:vAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],yAe=Object.freeze(Object.defineProperty({__proto__:null,json:mAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],xAe=Object.freeze(Object.defineProperty({__proto__:null,json:bAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],wAe=Object.freeze(Object.defineProperty({__proto__:null,json:_Ae},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SAe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],CAe=Object.freeze(Object.defineProperty({__proto__:null,json:SAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],EAe=Object.freeze(Object.defineProperty({__proto__:null,json:TAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],AAe=Object.freeze(Object.defineProperty({__proto__:null,json:kAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],IAe=Object.freeze(Object.defineProperty({__proto__:null,json:RAe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VM{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[Xke,Yke,Qke,eAe,nAe,iAe,oAe,uAe,cAe,hAe,pAe,gAe,yAe,xAe,wAe,CAe,EAe,AAe,IAe],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,t={}){const r=e.node,i=[],a=[],o=[],s=r.reduce((g,m)=>(g[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?i.push(g[m.name]):m.op==="Const"?a.push(g[m.name]):(m.input==null||m.input.length===0)&&o.push(g[m.name]),g),{});let u=[];const l=[];let c={},f={};t!=null&&(c=this.mapSignatureEntries(t.inputs),f=this.mapSignatureEntries(t.outputs));const h=Object.keys(s);h.forEach(g=>{const m=s[g];m.inputNames.forEach((y,b)=>{const[_,,w]=Wo(y),T=s[_];if(T.outputs!=null){const E=T.outputs.indexOf(w);if(E!==-1){const A=`${_}:${E}`;m.inputNames[b]=A}}m.inputs.push(T),T.children.push(m)})}),Object.keys(f).length===0?h.forEach(g=>{const m=s[g];m.children.length===0&&l.push(m)}):Object.keys(f).forEach(g=>{const[m]=Wo(g),y=s[m];y!=null&&(y.signatureKey=f[g],l.push(y))}),Object.keys(c).length>0?Object.keys(c).forEach(g=>{const[m]=Wo(g),y=s[m];y&&(y.signatureKey=c[g],u.push(y))}):u=i;let d={};e.library!=null&&e.library.function!=null&&(d=e.library.function.reduce((g,m)=>(g[m.signature.name]=this.mapFunction(m),g),{}));const p={nodes:s,inputs:u,outputs:l,weights:a,placeholders:i,signature:t,functions:d};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=nj(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((i,a)=>(i[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},i),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((i,a)=>{const o=a.type;let s;switch(a.type){case"string":s=YC(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=YC(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":s=rT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=rT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":s=QC(e.attr,a.tfName,a.defaultValue||0),s===void 0&&a.tfDeprecatedName&&(s=QC(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":s=nT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=nT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":s=ZC(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=ZC(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":s=aT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=aT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":s=tT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=tT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":s=iT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=iT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":s=JC(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=JC(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":s=eT(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=eT(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":s=zM(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=zM(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return i[a.name]={value:s,type:o},i},{})),r}mapFunction(e){const t=e.nodeDef,r=[],i=[];let a={};t!=null&&(a=t.reduce((f,h)=>(f[h.name]=this.mapNode(h),h.op==="Const"&&i.push(f[h.name]),f),{}));const o=[],s=[];e.signature.inputArg.forEach(f=>{const[h]=Wo(f.name),d={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:LI(f.type),type:"dtype"}},children:[]};d.signatureKey=f.name,o.push(d),a[h]=d}),Object.keys(a).forEach(f=>{const h=a[f];h.inputNames.forEach((d,p)=>{const[g,,m]=Wo(d),y=a[g];if(y.outputs!=null){const b=y.outputs.indexOf(m);if(b!==-1){const _=`${g}:${b}`;h.inputNames[p]=_}}h.inputs.push(y),y.children.push(h)})});const l=e.ret;e.signature.outputArg.forEach(f=>{const[h,d]=Wo(l[f.name]),p=a[h];p!=null&&(p.defaultOutput=d,s.push(p))});const c=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:s,weights:i,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function PAe(n){const e=xe().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function rj(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):PAe(n);return e?t:t.toLowerCase()}function YC(n,e,t,r=!1){const i=n[e];return i!=null?rj(i.s,r):t}function ZC(n,e,t){const r=n[e];return r?r.b:t}function QC(n,e,t){const r=n[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:t;return typeof i=="number"?i:parseInt(i,10)}function LI(n){switch(typeof n=="string"&&(n=va[n]),n){case va.DT_FLOAT:case va.DT_HALF:return"float32";case va.DT_INT32:case va.DT_INT64:case va.DT_INT8:case va.DT_UINT8:return"int32";case va.DT_BOOL:return"bool";case va.DT_DOUBLE:return"float32";case va.DT_STRING:return"string";default:return null}}function zM(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function JC(n,e,t){const r=n[e];return r&&r.type?LI(r.type):t}function eT(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(i=>LI(i)):t}function ij(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function tT(n,e,t){const r=n[e];return r&&r.shape?ij(r.shape):t}function nT(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):t}function rT(n,e,t,r=!1){const i=n[e];return i&&i.list&&i.list.s?i.list.s.map(a=>rj(a,r)):t}function iT(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>ij(i)):t}function aT(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DAe{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,a)=>(i[a]=this.getAttr(a),i),{}))}getInput(e){return Qr(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Qr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return QC(this.node.rawAttrs,e,t);if(r.s!=null)return YC(this.node.rawAttrs,e,t);if(r.b!=null)return ZC(this.node.rawAttrs,e,t);if(r.shape!=null)return tT(this.node.rawAttrs,e,t);if(r.type!=null)return JC(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return nT(this.node.rawAttrs,e,t);if(r.list.s!=null)return rT(this.node.rawAttrs,e,t);if(r.list.shape!=null)return iT(this.node.rawAttrs,e,t);if(r.list.b!=null)return aT(this.node.rawAttrs,e,t);if(r.list.type!=null)return eT(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:xR,abs:Ai,acos:N8,acosh:O8,add:mt,addN:L8,all:M8,any:B8,argMax:ER,argMin:F8,asin:V8,asinh:z8,atan:U8,atan2:W8,atanh:H8,avgPool:AR,avgPool3d:j8,basicLSTMCell:q8,batchNorm:Fg,batchNorm2d:X8,batchNorm3d:K8,batchNorm4d:Y8,batchToSpaceND:RR,bincount:IR,booleanMaskAsync:DH,broadcastArgs:Z8,broadcastTo:Wh,buffer:Wn,cast:sn,ceil:Q8,clipByValue:J8,clone:Js,complex:uu,concat:Mr,concat1d:eW,concat2d:tW,concat3d:nW,concat4d:rW,conv1d:iW,conv2d:Vg,conv2dTranspose:oW,conv3d:sW,conv3dTranspose:uW,cos:lW,cosh:cW,cosineWindow:Ob,cumprod:fW,cumsum:hW,denseBincount:dW,depthToSpace:pW,depthwiseConv2d:Ab,diag:vW,dilation2d:gW,div:En,divNoNan:mW,dot:yW,dropout:MH,einsum:bW,elu:DR,enclosingPowerOfTwo:vI,equal:zg,erf:xW,euclideanNorm:SW,exp:vl,expandDims:Pi,expm1:CW,eye:OR,fft:Db,fill:$d,floor:LR,floorDiv:TR,fused:FH,gather:MR,gatherND:LH,greater:Nd,greaterEqual:BR,ifft:cg,imag:Wg,image:of,inTopKAsync:BH,irfft:sI,isFinite:TW,isInf:EW,isNaN:kW,leakyRelu:FR,less:AW,lessEqual:Rb,linalg:HH,linspace:RW,localResponseNormalization:IW,log:vd,log1p:VR,logSigmoid:DW,logSoftmax:$W,logSumExp:UR,logicalAnd:sg,logicalNot:WR,logicalOr:HR,logicalXor:NW,losses:GH,lowerBound:OW,matMul:nn,max:zc,maxPool:GR,maxPool3d:LW,maxPoolWithArgmax:MW,maximum:jR,mean:ug,meshgrid:BW,min:g1,minimum:qR,mirrorPad:XR,mod:FW,moments:VW,movingAverage:$H,mul:je,multiRNNCell:zW,multinomial:UW,neg:os,norm:Ug,notEqual:KR,oneHot:lg,ones:Ju,onesLike:WW,op:ce,outerProduct:HW,pad:Ef,pad1d:GW,pad2d:jW,pad3d:YR,pad4d:qW,pool:XW,pow:pd,prelu:QR,print:CR,prod:KW,raggedGather:YW,raggedRange:ZW,raggedTensorToTensor:QW,rand:JW,randomGamma:nH,randomNormal:rI,randomStandardNormal:rH,randomUniform:iI,range:ml,real:gd,reciprocal:iH,relu:Hg,relu6:aI,reshape:Pe,reverse:yl,reverse1d:aH,reverse2d:oH,reverse3d:sH,reverse4d:uH,rfft:$b,round:oI,rsqrt:lH,scalar:At,scatterND:NH,searchSorted:Pb,selu:cH,separableConv2d:fH,setdiff1dAsync:hH,sigmoid:as,sign:dH,signal:WH,sin:pH,sinh:vH,slice:xn,slice1d:gH,slice2d:mH,slice3d:yH,slice4d:bH,softmax:xH,softplus:zR,spaceToBatchND:ZR,sparse:jH,sparseToDense:OH,spectral:UH,split:md,sqrt:ps,square:Oa,squaredDifference:uI,squeeze:Aa,stack:gs,step:lI,stridedSlice:_H,string:qH,sub:It,sum:In,tan:wH,tanh:v1,tensor:Na,tensor1d:Ra,tensor2d:Uc,tensor3d:cI,tensor4d:SH,tensor5d:CH,tensor6d:TH,tile:Hh,topk:EH,transpose:fg,truncatedNormal:kH,unique:AH,unsortedSegmentSum:RH,unstack:El,upperBound:IH,variable:PH,where:af,whereAsync:hI,zeros:gl,zerosLike:Bi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae=(n,e,t,r=Fr)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(L("a",n,e,t),L("b",n,e,t))];case"AddN":return[r.addN(L("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(L("a",n,e,t),L("b",n,e,t))];case"Mul":return[r.mul(L("a",n,e,t),L("b",n,e,t))];case"RealDiv":case"Div":return[r.div(L("a",n,e,t),L("b",n,e,t))];case"DivNoNan":return[r.divNoNan(L("a",n,e,t),L("b",n,e,t))];case"FloorDiv":return[r.floorDiv(L("a",n,e,t),L("b",n,e,t))];case"Sub":return[r.sub(L("a",n,e,t),L("b",n,e,t))];case"Minimum":return[r.minimum(L("a",n,e,t),L("b",n,e,t))];case"Maximum":return[r.maximum(L("a",n,e,t),L("b",n,e,t))];case"Pow":return[r.pow(L("a",n,e,t),L("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(L("a",n,e,t),L("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe=(n,e,t,r=Fr)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(L("x",n,e,t))];case"Acos":return[r.acos(L("x",n,e,t))];case"Acosh":return[r.acosh(L("x",n,e,t))];case"Asin":return[r.asin(L("x",n,e,t))];case"Asinh":return[r.asinh(L("x",n,e,t))];case"Atan":return[r.atan(L("x",n,e,t))];case"Atan2":return[r.atan2(L("x",n,e,t),L("y",n,e,t))];case"Atanh":return[r.atanh(L("x",n,e,t))];case"Ceil":return[r.ceil(L("x",n,e,t))];case"Complex":return[r.complex(L("real",n,e,t),L("imag",n,e,t))];case"Cos":return[r.cos(L("x",n,e,t))];case"Cosh":return[r.cosh(L("x",n,e,t))];case"Elu":return[r.elu(L("x",n,e,t))];case"Erf":return[r.erf(L("x",n,e,t))];case"Exp":return[r.exp(L("x",n,e,t))];case"Expm1":return[r.expm1(L("x",n,e,t))];case"Floor":return[r.floor(L("x",n,e,t))];case"Log":return[r.log(L("x",n,e,t))];case"Log1p":return[r.log1p(L("x",n,e,t))];case"Imag":return[r.imag(L("x",n,e,t))];case"Neg":return[r.neg(L("x",n,e,t))];case"Reciprocal":return[r.reciprocal(L("x",n,e,t))];case"Real":return[r.real(L("x",n,e,t))];case"Relu":return[r.relu(L("x",n,e,t))];case"Round":return[r.round(L("x",n,e,t))];case"Selu":return[r.selu(L("x",n,e,t))];case"Sigmoid":return[r.sigmoid(L("x",n,e,t))];case"Sin":return[r.sin(L("x",n,e,t))];case"Sign":return[r.sign(L("x",n,e,t))];case"Sinh":return[r.sinh(L("x",n,e,t))];case"Softplus":return[r.softplus(L("x",n,e,t))];case"Sqrt":return[r.sqrt(L("x",n,e,t))];case"Square":return[r.square(L("x",n,e,t))];case"Tanh":return[r.tanh(L("x",n,e,t))];case"Tan":return[r.tan(L("x",n,e,t))];case"ClipByValue":return[r.clipByValue(L("x",n,e,t),L("clipValueMin",n,e,t),L("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(L("x",n,e,t))];case"Rsqrt":return[r.rsqrt(Qr(n.inputNames[0],e,t))];case"Prod":return[r.prod(L("x",n,e,t),L("axes",n,e,t))];case"LeakyRelu":return[r.leakyRelu(L("x",n,e,t),L("alpha",n,e,t))];case"Prelu":return[r.prelu(L("x",n,e,t),L("alpha",n,e,t))];case"IsNan":return[r.isNaN(Qr(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ba(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){J(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const i=n[r],a=e[r];J(i<0||a<0||i===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function UM(n){return!(typeof n=="number"||n.some(e=>e<0))}function Np(n,e,t){let r=oT(n,t);const i=!UM(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(a=>{r=oT(a.shape,r)}),!UM(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function oT(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const i=n[r],a=e[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=i>=0?i:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OAe{constructor(e,t,r,i,a,o,s){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=At(0),Zo(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),ba(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Zo(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,i)=>this.write(r,t[i]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return Na([],[0].concat(this.elementShape));const r=this.readMany(e);return ba(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),gs(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Na([],[0].concat(this.elementShape));const t=[];for(let i=0;i<this.size();i++)t.push(i);const r=this.readMany(t);return ba(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Mr(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,El(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const i=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:t.size/r,o=[];yt(()=>{t=Pe(t,[1,r,a]);for(let u=0;u<e.length;++u){const c=[0,u===0?0:i[u-1],0],f=[1,e[u],a];o[u]=Pe(xn(t,c,f),this.elementShape)}return o});const s=[];for(let u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lf{constructor(e,t,r,i=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e!=null&&e.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);ba(t,a.shape,"TensorList shape mismatch: "),Zo(a)}),this.idTensor=At(0),this.maxNumElements=i,Zo(this.idTensor)}get id(){return this.idTensor.id}copy(){return new lf([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);ba(e,this.elementShape,"TensorList shape mismatch: ");const i=Np(this.elementShape,this.tensors,e);return yt(()=>{const a=this.tensors.map(o=>Pe(o,i));return gs(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Np(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,ba(i.shape,e,"TensorList shape mismatch: "),Pe(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ba(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Zo(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new lf([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);ba(this.tensors[e].shape,t,"TensorList shape mismatch: ");const i=Np(this.elementShape,this.tensors,t);return Pe(this.tensors[e],i)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ba(this.elementShape,t.shape,"TensorList shape mismatch: "),Zo(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ba(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=Np(this.elementShape,this.tensors,r);return e.length===0?Na([],[0].concat(i)):yt(()=>{const a=e.map(o=>Pe(this.tensors[o],i));return gs(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ba(this.elementShape,t,"TensorList shape mismatch: ");const r=Np(this.elementShape,this.tensors,t);return this.size()===0?Na([],[0].concat(r)):yt(()=>{const i=this.tensors.map(a=>Pe(a,r));return Mr(i,0)})}}function LAe(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const i=n.shape.slice(1);ba(i,e,"TensorList shape mismatch: ");const a=El(n);return new lf(a,e,r)}function MAe(n,e,t,r){return new lf([],n,e,r)}function BAe(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new lf([],t,n.dtype,r),o=El(n,0);return e.forEach((s,u)=>{a.setItem(s,o[u])}),a}function FAe(n,e,t){let r=0;const i=e.map(c=>(r+=c,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),o=oT(a,t),s=r===0?0:n.size/r,u=yt(()=>{const c=[];n=Pe(n,[1,r,s]);for(let f=0;f<e.length;++f){const d=[0,f===0?0:i[f-1],0],p=[1,e[f],s];c[f]=Pe(xn(n,d,p),o)}return n.dispose(),c}),l=new lf([],t,n.dtype,e.length);for(let c=0;c<u.length;c++)l.setItem(c,u[c]);return l}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VAe=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=L("thenBranch",n,e,t),i=L("elseBranch",n,e,t),a=L("cond",n,e,t),o=L("args",n,e,t);return(await a.data())[0]?t.functionMap[r].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap):t.functionMap[i].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=L("body",n,e,t),i=L("cond",n,e,t),a=L("args",n,e,t),o=await t.functionMap[i].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),s=a.map(c=>c.id);let u=await o[0].data();o.forEach(c=>{!c.kept&&s.indexOf(c.id)===-1&&c.dispose()});let l=a;for(;u[0];){const c=l;l=await t.functionMap[r].executeFunctionAsync(l,t.tensorArrayMap,t.tensorListMap);const f=l.map(d=>d.id);c.forEach(d=>{!d.kept&&s.indexOf(d.id)===-1&&f.indexOf(d.id)===-1&&d.dispose()});const h=await t.functionMap[i].executeFunctionAsync(l,t.tensorArrayMap,t.tensorListMap);u=await h[0].data(),h.forEach(d=>{!d.kept&&s.indexOf(d.id)===-1&&f.indexOf(d.id)===-1&&d.dispose()})}return l}case"LoopCond":{const r=L("pred",n,e,t);return[zs(r)]}case"Switch":{const r=L("pred",n,e,t);let i=L("data",n,e,t);return i.kept||(i=zs(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=n.inputNames.find(i=>Qr(i,e,t)!==void 0);if(r){const i=Qr(r,e,t);return[zs(i)]}return}case"Enter":{const r=L("frameName",n,e,t),i=L("tensor",n,e,t);return t.enterFrame(r),[zs(i)]}case"Exit":{const r=L("tensor",n,e,t);return t.exitFrame(),[zs(r)]}case"NextIteration":{const r=L("tensor",n,e,t);return t.nextIteration(),[zs(r)]}case"TensorArrayV3":{const r=L("size",n,e,t),i=L("dtype",n,e,t),a=L("elementShape",n,e,t),o=L("dynamicSize",n,e,t),s=L("clearAfterRead",n,e,t),u=L("identicalElementShapes",n,e,t),l=L("name",n,e,t),c=new OAe(l,i,r,a,u,o,s);return t.addTensorArray(c),[c.idTensor,At(1)]}case"TensorArrayWriteV3":{const r=L("tensorArrayId",n,e,t),i=L("index",n,e,t),a=L("tensor",n,e,t),o=t.getTensorArray(r.id);return o.write(i,a),[o.idTensor]}case"TensorArrayReadV3":{const r=L("tensorArrayId",n,e,t),i=L("index",n,e,t);return[t.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=L("tensorArrayId",n,e,t),i=L("indices",n,e,t),a=L("dtype",n,e,t);return[t.getTensorArray(r.id).gather(i,a)]}case"TensorArrayScatterV3":{const r=L("tensorArrayId",n,e,t),i=L("indices",n,e,t),a=L("tensor",n,e,t),o=t.getTensorArray(r.id);return o.scatter(i,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=L("tensorArrayId",n,e,t),i=t.getTensorArray(r.id),a=L("dtype",n,e,t);return[i.concat(a)]}case"TensorArraySplitV3":{const r=L("tensorArrayId",n,e,t),i=L("tensor",n,e,t),a=L("lengths",n,e,t),o=t.getTensorArray(r.id);return o.split(a,i),[o.idTensor]}case"TensorArraySizeV3":{const r=L("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return[At(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=L("tensorArrayId",n,e,t),i=t.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=L("tensorListId",n,e,t),i=L("index",n,e,t),a=L("tensor",n,e,t),o=t.getTensorList(r.id);return o.setItem(i,a),[o.idTensor]}case"TensorListGetItem":{const r=L("tensorListId",n,e,t),i=L("index",n,e,t),a=L("elementShape",n,e,t),o=L("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(i,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=L("indices",n,e,t),i=L("tensor",n,e,t),a=L("elementShape",n,e,t),o=L("numElements",n,e,t),s=BAe(i,r,a,o);return t.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=L("elementShape",n,e,t),i=L("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const o=L(a,n,e,t),s=n.op==="TensorListReserve"?-1:o,u=MAe(r,i,o,s);return t.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=L("tensorListId",n,e,t),i=L("indices",n,e,t),a=L("elementShape",n,e,t),o=L("elementDType",n,e,t);return[t.getTensorList(r.id).gather(i,o,a)]}case"TensorListStack":{const r=L("tensorListId",n,e,t),i=L("elementShape",n,e,t),a=L("elementDType",n,e,t),o=L("numElements",n,e,t);return[t.getTensorList(r.id).stack(i,a,o)]}case"TensorListFromTensor":{const r=L("tensor",n,e,t),i=L("elementShape",n,e,t),a=L("elementDType",n,e,t),o=LAe(r,i,a);return t.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=L("tensorListId",n,e,t),i=t.getTensorList(r.id),a=L("dtype",n,e,t),o=L("elementShape",n,e,t);return[i.concat(a,o)]}case"TensorListPushBack":{const r=L("tensorListId",n,e,t),i=L("tensor",n,e,t),a=t.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=L("tensorListId",n,e,t),i=L("elementShape",n,e,t),a=L("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(i,a)]}case"TensorListSplit":{const r=L("tensor",n,e,t),i=L("elementShape",n,e,t),a=L("lengths",n,e,t),o=FAe(r,a,i);return t.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=L("tensorListId",n,e,t),i=t.getTensorList(r.id);return[At(i.size(),"int32")]}case"TensorListResize":{const r=L("tensorListId",n,e,t),i=L("size",n,e,t),o=t.getTensorList(r.id).resize(i);return t.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WM(n,e,t){const[r,i]=L("fusedOps",n,e,t),a=r==="biasadd",o=!a,s=i==="prelu",u=r==="fusedbatchnorm",l=L("numArgs",n,e,t);if(a){if(s&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=L("strides",n,e,t),f=d0(n,e,t),h=L("dataFormat",n,e,t).toUpperCase(),d=L("dilations",n,e,t);let[p,g]=L("args",n,e,t);o&&(g=p,p=void 0);const m=L("leakyreluAlpha",n,e,t);return{stride:c,pad:f,dataFormat:h,dilations:d,biasArg:p,preluArg:g,activationFunc:i,leakyreluAlpha:m}}const zAe=(n,e,t,r=Fr)=>{switch(n.op){case"Conv1D":{const i=L("stride",n,e,t),a=L("pad",n,e,t),o=L("dataFormat",n,e,t).toUpperCase(),s=L("dilation",n,e,t);return[r.conv1d(L("x",n,e,t),L("filter",n,e,t),i,a,o,s)]}case"Conv2D":{const i=L("strides",n,e,t),a=d0(n,e,t),o=L("dataFormat",n,e,t).toUpperCase(),s=L("dilations",n,e,t);return[r.conv2d(L("x",n,e,t),L("filter",n,e,t),[i[1],i[2]],a,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=WM(n,e,t);return[r.fused.conv2d({x:L("x",n,e,t),filter:L("filter",n,e,t),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:f}=WM(n,e,t);return[r.fused.depthwiseConv2d({x:L("x",n,e,t),filter:L("filter",n,e,t),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=L("outputShape",n,e,t),a=L("strides",n,e,t),o=d0(n,e,t);return[r.conv2dTranspose(L("x",n,e,t),L("filter",n,e,t),i,[a[1],a[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=L("strides",n,e,t),a=d0(n,e,t),o=L("dilations",n,e,t),s=L("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(L("input",n,e,t),L("filter",n,e,t),[i[1],i[2]],a,s,[o[1],o[2]])]}case"Conv3D":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("dataFormat",n,e,t).toUpperCase(),s=L("dilations",n,e,t);return[r.conv3d(L("x",n,e,t),L("filter",n,e,t),[i[1],i[2],i[3]],a,o,[s[1],s[2],s[3]])]}case"AvgPool":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("kernelSize",n,e,t);return[r.avgPool(L("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPool":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("kernelSize",n,e,t);return[r.maxPool(L("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("kernelSize",n,e,t),s=L("includeBatchInIndex",n,e,t),{result:u,indexes:l}=r.maxPoolWithArgmax(L("x",n,e,t),[o[1],o[2]],[i[1],i[2]],a,s);return[u,l]}case"AvgPool3D":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("kernelSize",n,e,t);return[r.avgPool3d(L("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("kernelSize",n,e,t);return[r.maxPool3d(L("x",n,e,t),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{const i=L("strides",n,e,t),a=L("pad",n,e,t),o=L("dilations",n,e,t),s=i[1],u=i[2],l=o[1],c=o[2];return[r.dilation2d(L("x",n,e,t),L("filter",n,e,t),[s,u],a,[l,c],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe=(n,e,t,r=Fr)=>{switch(n.op){case"Fill":{const i=L("shape",n,e,t),a=L("dtype",n,e,t),o=L("value",n,e,t);return[r.fill(i,o,a)]}case"LinSpace":{const i=L("start",n,e,t),a=L("stop",n,e,t),o=L("num",n,e,t);return[r.linspace(i,a,o)]}case"Multinomial":{const i=L("logits",n,e,t),a=L("numSamples",n,e,t),o=L("seed",n,e,t);return[r.multinomial(i,a,o)]}case"OneHot":{const i=L("indices",n,e,t),a=L("depth",n,e,t),o=L("onValue",n,e,t),s=L("offValue",n,e,t),u=L("dtype",n,e,t);return[r.oneHot(i,a,o,s,u)]}case"Ones":return[r.ones(L("shape",n,e,t),L("dtype",n,e,t))];case"OnesLike":return[r.onesLike(L("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(L("shape",n,e,t),L("dtype",n,e,t),L("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(L("shape",n,e,t),L("minval",n,e,t),L("maxval",n,e,t),L("dtype",n,e,t))];case"Range":{const i=L("start",n,e,t),a=L("stop",n,e,t),o=L("step",n,e,t);return[r.range(i,a,o,L("dtype",n,e,t))]}case"TruncatedNormal":{const i=L("shape",n,e,t),a=L("mean",n,e,t),o=L("stdDev",n,e,t),s=L("seed",n,e,t);return[r.truncatedNormal(i,a,o,L("dtype",n,e,t),s)]}case"Zeros":return[r.zeros(L("shape",n,e,t),L("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(L("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iw(n,e,t){const r=L("boxes",n,e,t),i=L("scores",n,e,t),a=L("maxOutputSize",n,e,t),o=L("iouThreshold",n,e,t),s=L("scoreThreshold",n,e,t),u=L("softNmsSigma",n,e,t);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}}const WAe=async(n,e,t,r,i=Fr)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l,softNmsSigma:c}=iw(n,e,t),f=await i.image.nonMaxSuppressionWithScoreAsync(a,o,s,u,l,c);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l}=iw(n,e,t),c=L("padToMaxOutputSize",n,e,t),f=await i.image.nonMaxSuppressionPaddedAsync(a,o,s,u,l,c);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:u,scoreThreshold:l}=iw(n,e,t);return[await i.image.nonMaxSuppressionAsync(a,o,s,u,l)]}case"Where":{const a=i.cast(L("condition",n,e,t),"bool"),o=[await i.whereAsync(a)];return a.dispose(),o}case"ListDiff":return i.setdiff1dAsync(L("x",n,e,t),L("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=(n,e,t,r=Fr)=>{switch(n.op){case"LowerBound":{const i=L("sortedSequence",n,e,t),a=L("values",n,e,t);return[r.lowerBound(i,a)]}case"TopKV2":{const i=L("x",n,e,t),a=L("k",n,e,t),o=L("sorted",n,e,t),s=r.topk(i,a,o);return[s.values,s.indices]}case"UpperBound":{const i=L("sortedSequence",n,e,t),a=L("values",n,e,t);return[r.upperBound(i,a)]}case"Unique":{const i=L("x",n,e,t),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{const i=L("x",n,e,t),a=L("axis",n,e,t),o=r.unique(i,a);return[o.values,o.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe=(n,e,t,r=Fr)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const i=L("default",n,e,t);return[Qr(n.name,e,t)||i];case"Placeholder":return[Qr(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=L("x",n,e,t);return[zs(c)]}case"IdentityN":return L("x",n,e,t).map(c=>zs(c));case"Snapshot":const a=L("x",n,e,t);return[zs(a)];case"Shape":return[r.tensor1d(L("x",n,e,t).shape,"int32")];case"ShapeN":return L("x",n,e,t).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(L("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(L("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=L("x",n,e,t),s=L("data",n,e,t),u=L("message",n,e,t),l=L("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let c=0;c<s.length;c++)console.log(Array.prototype.slice.call(s[c].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jAe{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=At(0),this.tensorMap=new Map,Zo(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return At(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),yt(()=>{const i=El(t),a=r.length,o=i.length;J(a===o,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${o} elements.`);for(let s=0;s<a;s++){const u=r[s],l=i[s];Zo(l),this.tensorMap.set(u,l)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return yt(()=>{const i=[];for(let a=0;a<r.length;a++){const o=r[a],s=this.findWithDefault(o,t);i.push(s)}return gs(i)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qAe=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const i=L("keyDType",n,e,t),a=L("valueDType",n,e,t),o=new jAe(i,a);return r.addHashTable(n.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{const i=L("tableHandle",n,e,t,r),a=L("keys",n,e,t),o=L("values",n,e,t);return[await r.getHashTableById(i.id).import(a,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=L("tableHandle",n,e,t,r),a=L("keys",n,e,t),o=L("defaultValue",n,e,t);return[await r.getHashTableById(i.id).find(a,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=L("tableHandle",n,e,t,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XAe=(n,e,t,r=Fr)=>{switch(n.op){case"ResizeBilinear":{const i=L("images",n,e,t),a=L("size",n,e,t),o=L("alignCorners",n,e,t),s=L("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(i,[a[0],a[1]],o,s)]}case"ResizeNearestNeighbor":{const i=L("images",n,e,t),a=L("size",n,e,t),o=L("alignCorners",n,e,t),s=L("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],o,s)]}case"CropAndResize":{const i=L("image",n,e,t),a=L("boxes",n,e,t),o=L("boxInd",n,e,t),s=L("cropSize",n,e,t),u=L("method",n,e,t),l=L("extrapolationValue",n,e,t);return[r.image.cropAndResize(i,a,o,s,u,l)]}case"ImageProjectiveTransformV3":{const i=L("images",n,e,t),a=L("transforms",n,e,t),o=L("outputShape",n,e,t),s=L("fillValue",n,e,t),u=L("interpolation",n,e,t),l=L("fillMode",n,e,t);return[r.image.transform(i,a,u.toLowerCase(),l.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe=(n,e,t,r=Fr)=>{switch(n.op){case"Equal":return[r.equal(L("a",n,e,t),L("b",n,e,t))];case"NotEqual":return[r.notEqual(L("a",n,e,t),L("b",n,e,t))];case"Greater":return[r.greater(L("a",n,e,t),L("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(L("a",n,e,t),L("b",n,e,t))];case"Less":return[r.less(L("a",n,e,t),L("b",n,e,t))];case"LessEqual":return[r.lessEqual(L("a",n,e,t),L("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(L("a",n,e,t),L("b",n,e,t))];case"LogicalNot":return[r.logicalNot(L("a",n,e,t))];case"LogicalOr":return[r.logicalOr(L("a",n,e,t),L("b",n,e,t))];case"Select":case"SelectV2":return[r.where(L("condition",n,e,t),L("a",n,e,t),L("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAe=(n,e,t,r=Fr)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(L("a",n,e,t),L("b",n,e,t),L("transposeA",n,e,t),L("transposeB",n,e,t))];case"Einsum":return[r.einsum(L("equation",n,e,t),...L("tensors",n,e,t))];case"Transpose":return[r.transpose(L("x",n,e,t),L("perm",n,e,t))];case"_FusedMatMul":const[i,a]=L("fusedOps",n,e,t),o=i==="biasadd",s=a==="prelu",u=L("numArgs",n,e,t),l=L("leakyreluAlpha",n,e,t);if(o){if(s&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,f]=L("args",n,e,t);return[r.fused.matMul({a:L("a",n,e,t),b:L("b",n,e,t),transposeA:L("transposeA",n,e,t),transposeB:L("transposeB",n,e,t),bias:c,activation:a,preluActivationWeights:f,leakyreluAlpha:l})];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZAe=(n,e,t,r=Fr)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(L("x",n,e,t),L("axis",n,e,t),L("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(L("x",n,e,t),L("mean",n,e,t),L("variance",n,e,t),L("offset",n,e,t),L("scale",n,e,t),L("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(L("x",n,e,t),L("mean",n,e,t),L("variance",n,e,t),L("offset",n,e,t),L("scale",n,e,t),L("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(L("x",n,e,t),L("radius",n,e,t),L("bias",n,e,t),L("alpha",n,e,t),L("beta",n,e,t))];case"Softmax":return[r.softmax(L("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(L("x",n,e,t))];case"SparseToDense":return[r.sparseToDense(L("sparseIndices",n,e,t),L("outputShape",n,e,t),L("sparseValues",n,e,t),L("defaultValue",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QAe=(n,e,t,r=Fr)=>{switch(n.op){case"Max":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.max(L("x",n,e,t),s,u)]}case"Mean":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.mean(L("x",n,e,t),s,u)]}case"Min":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.min(L("x",n,e,t),s,u)]}case"Sum":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.sum(L("x",n,e,t),s,u)]}case"All":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.all(L("x",n,e,t),s,u)]}case"Any":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.any(L("x",n,e,t),s,u)]}case"ArgMax":{const s=L("axis",n,e,t);return[r.argMax(L("x",n,e,t),s)]}case"ArgMin":{const s=L("axis",n,e,t);return[r.argMin(L("x",n,e,t),s)]}case"Prod":{const s=L("axis",n,e,t),u=L("keepDims",n,e,t);return[r.prod(L("x",n,e,t),s,u)]}case"Cumprod":{const s=L("axis",n,e,t),u=L("exclusive",n,e,t),l=L("reverse",n,e,t);return[r.cumprod(L("x",n,e,t),s,u,l)]}case"Cumsum":{const s=L("axis",n,e,t),u=L("exclusive",n,e,t),l=L("reverse",n,e,t);return[r.cumsum(L("x",n,e,t),s,u,l)]}case"Bincount":const i=L("x",n,e,t),a=L("weights",n,e,t),o=L("size",n,e,t);return[r.bincount(i,a,o)];case"DenseBincount":{const s=L("x",n,e,t),u=L("weights",n,e,t),l=L("size",n,e,t),c=L("binaryOutput",n,e,t);return[r.denseBincount(s,u,l,c)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JAe=(n,e,t,r=Fr)=>{switch(n.op){case"ConcatV2":case"Concat":{const i=L("n",n,e,t),a=L("axis",n,e,t);let o=L("tensors",n,e,t);return o=o.slice(0,i),[r.concat(o,a)]}case"Gather":{const i=L("x",n,e,t),a=L("indices",n,e,t);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{const i=L("axis",n,e,t),a=L("batchDims",n,e,t),o=L("x",n,e,t),s=L("indices",n,e,t);return[r.gather(o,r.cast(s,"int32"),i,a)]}case"Reverse":{const i=L("dims",n,e,t),a=[];for(let s=0;s<i.length;s++)i[s]&&a.push(s);const o=L("x",n,e,t);return[r.reverse(o,a)]}case"ReverseV2":{const i=L("axis",n,e,t),a=L("x",n,e,t);return[r.reverse(a,i)]}case"Slice":{const i=L("begin",n,e,t),a=L("size",n,e,t);return[r.slice(L("x",n,e,t),i,a)]}case"StridedSlice":{const i=L("begin",n,e,t),a=L("end",n,e,t),o=L("strides",n,e,t),s=L("beginMask",n,e,t),u=L("endMask",n,e,t),l=L("ellipsisMask",n,e,t),c=L("newAxisMask",n,e,t),f=L("shrinkAxisMask",n,e,t),h=L("x",n,e,t);return[r.stridedSlice(h,i,a,o,s,u,l,c,f)]}case"Pack":return yt(()=>{const i=L("axis",n,e,t),a=L("tensors",n,e,t),o=a[0].shape,s=r.squeeze(a[0]).shape,u=a.map(l=>{const c=Un(l.shape,o);if(!c&&!Un(r.squeeze(l).shape,s))throw new Error("the input tensors shape does not match");return c?l:r.reshape(l,o)});return[r.stack(u,i)]});case"Unpack":{const i=L("axis",n,e,t),a=L("tensor",n,e,t);return r.unstack(a,i)}case"Tile":{const i=L("reps",n,e,t);return[r.tile(L("x",n,e,t),i)]}case"Split":case"SplitV":{const i=L("axis",n,e,t),a=L("numOrSizeSplits",n,e,t),o=L("x",n,e,t);return r.split(o,a,i)}case"ScatterNd":{const i=L("indices",n,e,t),a=L("values",n,e,t),o=L("shape",n,e,t);return[r.scatterND(i,a,o)]}case"GatherNd":{const i=L("x",n,e,t),a=L("indices",n,e,t);return[r.gatherND(i,a)]}case"SparseToDense":{const i=L("sparseIndices",n,e,t),a=L("outputShape",n,e,t),o=L("sparseValues",n,e,t),s=L("defaultValue",n,e,t);return[r.sparseToDense(i,o,a,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe=(n,e,t,r=Fr)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:a,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(L("indices",n,e,t),L("values",n,e,t),L("denseShape",n,e,t),L("defaultValue",n,e,t));return[i,a,o,s]}case"SparseReshape":{const{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(L("inputIndices",n,e,t),L("inputShape",n,e,t),L("newShape",n,e,t));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(L("data",n,e,t),L("indices",n,e,t),L("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(L("data",n,e,t),L("indices",n,e,t),L("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe=(n,e,t,r=Fr)=>{switch(n.op){case"FFT":return[r.fft(L("x",n,e,t))];case"IFFT":return[r.ifft(L("x",n,e,t))];case"RFFT":return[r.rfft(L("x",n,e,t))];case"IRFFT":return[r.irfft(L("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nRe=(n,e,t,r=Fr)=>{switch(n.op){case"StringNGrams":{const{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(L("data",n,e,t),L("dataSplits",n,e,t),L("separator",n,e,t),L("nGramWidths",n,e,t),L("leftPad",n,e,t),L("rightPad",n,e,t),L("padWidth",n,e,t),L("preserveShortSequences",n,e,t));return[i,a]}case"StringSplit":{const{indices:i,values:a,shape:o}=r.string.stringSplit(L("input",n,e,t),L("delimiter",n,e,t),L("skipEmpty",n,e,t));return[i,a,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(L("input",n,e,t),L("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rRe=(n,e,t,r=Fr)=>{switch(n.op){case"Cast":return[r.cast(L("x",n,e,t),L("dtype",n,e,t))];case"ExpandDims":{const i=L("axis",n,e,t);return[r.expandDims(L("x",n,e,t),i)]}case"Squeeze":{const i=L("axis",n,e,t);return[r.squeeze(L("x",n,e,t),i)]}case"Reshape":return[r.reshape(L("x",n,e,t),L("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(L("x",n,e,t),L("padding",n,e,t),L("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(L("x",n,e,t),L("padding",n,e,t),L("constantValue",n,e,t))];case"SpaceToBatchND":{const i=L("blockShape",n,e,t),a=L("paddings",n,e,t);return[r.spaceToBatchND(L("x",n,e,t),i,a)]}case"BatchToSpaceND":{const i=L("blockShape",n,e,t),a=L("crops",n,e,t);return[r.batchToSpaceND(L("x",n,e,t),i,a)]}case"DepthToSpace":{const i=L("blockSize",n,e,t),a=L("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(L("x",n,e,t),i,a)]}case"BroadcastTo":return[r.broadcastTo(L("x",n,e,t),L("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(L("s0",n,e,t),L("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HM(n,e,t,r,i=yt){const a=((o,s,u)=>{switch(o.category){case"arithmetic":return i(()=>$Ae(o,s,u));case"basic_math":return i(()=>NAe(o,s,u));case"control":return VAe(o,s,u);case"convolution":return i(()=>zAe(o,s,u));case"creation":return i(()=>UAe(o,s,u));case"dynamic":return WAe(o,s,u);case"evaluation":return i(()=>HAe(o,s,u));case"image":return i(()=>XAe(o,s,u));case"graph":return i(()=>GAe(o,s,u));case"logical":return i(()=>KAe(o,s,u));case"matrices":return i(()=>YAe(o,s,u));case"normalization":return i(()=>ZAe(o,s,u));case"reduction":return i(()=>QAe(o,s,u));case"slice_join":return i(()=>JAe(o,s,u));case"sparse":return i(()=>eRe(o,s,u));case"spectral":return i(()=>tRe(o,s,u));case"string":return i(()=>nRe(o,s,u));case"transformation":return i(()=>rRe(o,s,u));case"hash_table":return qAe(o,s,u,r);case"custom":const l=nj(o.op);if(l&&l.customExecutor)return l.customExecutor(new DAe(o,s,u));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return pl(a)?a.then(o=>[].concat(o)):[].concat(a)}class GM{constructor(e={},t={},r={},i={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jM(n,e,t,r){const i=new Set,a=[];let o=null,s=null;const u=new Set,l=Object.keys(n).map(h=>ki(h)[0]);let c=[];r!=null&&(c=r.map(h=>ki(h.name)[0]));const f=[...e];for(;f.length>0;){const h=f.pop();if((aj(h)||uRe(h)||lRe(h))&&o==null&&(o=h,s=o.children.map(d=>d.name).filter(d=>i.has(d))),i.add(h.name),t[h.name]==null&&l.indexOf(h.name)===-1&&c.indexOf(h.name)===-1){if(h.inputs.length===0){a.push(h.name);continue}h.inputs.forEach(d=>{u.has(d.name)||(u.add(d.name),f.push(d))})}}return{inputs:n,outputs:e,usedNodes:i,missingInputs:a,dynamicNode:o,syncInputs:s}}function iRe(n,e,t){const{usedNodes:r,inputs:i}=t,a=[],o=Object.keys(i).map(c=>ki(c)[0]).map(c=>n.nodes[c]),s=n.initNodes;o.forEach(c=>{r.has(c.name)&&a.push(c)}),n.weights.forEach(c=>{r.has(c.name)&&a.push(c)}),s!=null&&s.forEach(c=>{r.has(c.name)&&a.push(c)});const u=new Set,l=[];for(;a.length>0;){const c=a.pop();u.add(c.name),e[c.name]||l.push(c),c.children.forEach(f=>{!u.has(f.name)&&r.has(f.name)&&f.inputs.every(h=>u.has(h.name))&&a.push(f)})}return l}const aRe=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],oRe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],sRe=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function aj(n){return aRe.indexOf(n.op)>=0}function uRe(n){return oRe.indexOf(n.op)>=0}function lRe(n){return sRe.indexOf(n.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y1{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new y1(e.functions[r],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){const r=e.map(a=>a.name).sort(),i=t.map(a=>a.name).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)}compile(e,t){const r=jM(e,t,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:a,syncInputs:o}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const s=t.map(l=>l.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}return iRe(this.graph,this.weightMap,r)}execute(e,t){e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const i=r.map(f=>this.graph.nodes[ki(f)[0]]),a=t.map(f=>ki(f)[0]);let o=a.map(f=>this.graph.nodes[f]);this.resetIntermediateTensors(),o.length===0&&(o=this._outputs);const s=this.getCompilationKey(i,o);let u=this.compiledMap.get(s);u==null&&(u=this.compile(e,o),this.compiledMap.set(s,u));const l={},c={};return yt(()=>{const f=new GM(this.weightMap,l,c,this.functionExecutorMap),h=Object.assign({},this.weightMap);Object.keys(e).forEach(g=>{const[m,y]=ki(g),b=[];b[y]=e[g],h[m]=b});const d=this.getFrozenTensorIds(h),p={};for(let g=0;g<u.length;g++){const m=u[g];if(!h[m.name]){const y=HM(m,h,f,this._resourceManager);if(pl(y))throw new Error(`The execution of the op '${m.op}' returned a promise. Please use model.executeAsync() instead.`);h[m.name]=y,this.checkTensorForDisposal(m.name,m,h,f,d,a,p)}}return this.parent==null&&f.dispose(d),t.map(g=>Qr(g,h,f))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(t)}checkTensorForDisposal(e,t,r,i,a,o,s){t.category==="control"||o.indexOf(e)!==-1||(r[e].forEach(u=>{u!=null&&(s[u.id]=(s[u.id]||0)+t.children.length)}),t.inputs.forEach(u=>{if(u.category!=="control"){const l=jke(u.name,r,i);l!=null&&l.forEach(c=>{if(c&&!c.kept&&!a.has(c.id)){const f=s[c.id];if(f===1){if(!this.keepTensorForDebug)c.dispose();else{const[h,d]=Wo(t.name,i);this.intermediateTensors[h]?this.intermediateTensors[h][d]=c:(this.intermediateTensors[h]=[],this.intermediateTensors[h][d]=c)}delete s[c.id]}else f!=null&&s[c.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(t=>t.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{this.tensorsMap[e].forEach(r=>{r&&!r.kept&&!r.isDisposed&&!this.keepIds.has(r.id)&&r.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(const e in this.intermediateTensors)this.intermediateTensors[e].forEach(t=>t.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,t,r=!1,i={},a={}){r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=xe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(c){console.warn(c.message)}this.resetIntermediateTensors();const o=new GM(this.weightMap,i,a,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,o,t,r);const s=t.map(c=>Qr(c,this.tensorsMap,o)),u=s.map(c=>c.id),l=Object.keys(e).map(c=>e[c].id);return this.keepIds=new Set([...u,...l,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),this.parent==null&&o.dispose(this.keepIds),s}async executeFunctionAsync(e,t,r){const i=e.reduce((a,o,s)=>(a[this.inputs[s].name]=o,a),{});return this._executeAsync(i,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,i){const a=Object.keys(e),o=a.map(_=>this.graph.nodes[ki(_)[0]]),s=r.map(_=>ki(_)[0]);let u=s.map(_=>this.graph.nodes[_]);u.length===0&&(u=this._outputs);const{usedNodes:l,missingInputs:c,dynamicNode:f,syncInputs:h}=jM(e,u,this.weightMap,this._initNodes),d=[...o,...this.graph.weights,...this._initNodes||[]].map(_=>({node:_,contexts:t.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(_=>{const[w,T]=ki(_),E=[];E[T]=e[_],p[w]=E});const g={},m=this.getFrozenTensorIds(p),y={};for(;d.length>0;){const _=this.processStack(o,d,t,p,y,m,s,g,l);await Promise.all(_)}f==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=u.filter(_=>!aj(_)&&!Qr(_.name,p,t)).map(_=>_.name);if(b.length>0){let _="";throw f!=null&&(_=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${a}]. Consider providing the following inputs: [${c}]. ${_}`)}return p}processStack(e,t,r,i,a,o,s,u,l){const c=[];for(;t.length>0;){const f=t.pop();r.currentContext=f.contexts;let h="";if(f.node.op==="Enter"&&L("isConstant",f.node,i,r)&&([h]=Wo(f.node.name,r)),i[f.node.name]==null){const d=HM(f.node,i,r,this._resourceManager);h||([h]=Wo(f.node.name,r));const p=r.currentContext;pl(d)?c.push(d.then(g=>(i[h]=g,r.currentContext=p,this.checkTensorForDisposal(h,f.node,i,r,o,s,u),this.processChildNodes(f.node,t,r,i,a,l),g))):(i[h]=d,this.checkTensorForDisposal(h,f.node,i,r,o,s,u),this.processChildNodes(f.node,t,r,i,a,l))}else this.processChildNodes(f.node,t,r,i,a,l)}return c}processChildNodes(e,t,r,i,a,o){e.children.forEach(s=>{const[u]=Wo(s.name,r);a[u]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(l=>!!Qr(l,i,r))&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})):s.inputNames.every(l=>!!Qr(l,i,r))&&(a[u]=!0,t.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[i]=ki(t),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const o=a.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((u,l)=>o[l]===-1||o[l]===u);J(s,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&J(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){const t={};for(const r in e)if(this._signature!=null&&this._signature.inputs!=null&&this._signature.inputs[r]!=null){const i=this._signature.inputs[r];t[i.name]=e[r]}else t[r]=e[r];return t}checkInputs(e){const t=Object.keys(e).filter(r=>{const[i]=ki(r);return this.graph.nodes[i]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>this._signature!=null&&this._signature.outputs!=null&&this._signature.outputs[t]!=null?this._signature.outputs[t].name:t,{})}checkOutputs(e){e.forEach(t=>{const[r]=ki(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class cRe{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fRe="?tfjs-format=file",hRe="model.json";class dRe{constructor(e,t={},r=AI){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new cRe}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return pl(e)?e.then(t=>this.loadSync(t)):this.loadSync(e)}loadSync(e){this.artifacts=e;const t=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(r=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}this.signature=r,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;const i=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new y1(VM.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=VM.Instance.transformGraph(e.modelInitializer);this.initializer=new y1(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){const r=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){const i=r instanceof cn?[r]:r,a={};return i.forEach((o,s)=>a[this.structuredOutputKeys[s]]=o),a}return r}normalizeInputs(e){if(!(e instanceof cn)&&!Array.isArray(e))return e;if(e=Array.isArray(e)?e:[e],e.length!==this.inputNodes.length)throw new Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,r,i)=>(t[r]=e[i],t),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function MI(n,e={},t=AI){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=pRe(n));const r=new dRe(n,e,t);return await r.load(),r}function pRe(n){return n.endsWith("/")||(n=n+"/"),`${n}${hRe}${fRe}`}var vRe={};(function(){var n;function e(S){var R=0;return function(){return R<S.length?{done:!1,value:S[R++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,R,O){return S==Array.prototype||S==Object.prototype||(S[R]=O.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof Da=="object"&&Da];for(var R=0;R<S.length;++R){var O=S[R];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var i=r(this);function a(S,R){if(R)e:{var O=i;S=S.split(".");for(var j=0;j<S.length-1;j++){var re=S[j];if(!(re in O))break e;O=O[re]}S=S[S.length-1],j=O[S],R=R(j),R!=j&&R!=null&&t(O,S,{configurable:!0,writable:!0,value:R})}}a("Symbol",function(S){function R(oe){if(this instanceof R)throw new TypeError("Symbol is not a constructor");return new O(j+(oe||"")+"_"+re++,oe)}function O(oe,ue){this.h=oe,t(this,"description",{configurable:!0,writable:!0,value:ue})}if(S)return S;O.prototype.toString=function(){return this.h};var j="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",re=0;return R}),a("Symbol.iterator",function(S){if(S)return S;S=Symbol("Symbol.iterator");for(var R="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),O=0;O<R.length;O++){var j=i[R[O]];typeof j=="function"&&typeof j.prototype[S]!="function"&&t(j.prototype,S,{configurable:!0,writable:!0,value:function(){return o(e(this))}})}return S});function o(S){return S={next:S},S[Symbol.iterator]=function(){return this},S}function s(S){var R=typeof Symbol<"u"&&Symbol.iterator&&S[Symbol.iterator];return R?R.call(S):{next:e(S)}}function u(S){if(!(S instanceof Array)){S=s(S);for(var R,O=[];!(R=S.next()).done;)O.push(R.value);S=O}return S}var l=typeof Object.assign=="function"?Object.assign:function(S,R){for(var O=1;O<arguments.length;O++){var j=arguments[O];if(j)for(var re in j)Object.prototype.hasOwnProperty.call(j,re)&&(S[re]=j[re])}return S};a("Object.assign",function(S){return S||l});var c=typeof Object.create=="function"?Object.create:function(S){function R(){}return R.prototype=S,new R},f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var h;e:{var d={a:!0},p={};try{p.__proto__=d,h=p.a;break e}catch{}h=!1}f=h?function(S,R){if(S.__proto__=R,S.__proto__!==R)throw new TypeError(S+" is not extensible");return S}:null}var g=f;function m(S,R){if(S.prototype=c(R.prototype),S.prototype.constructor=S,g)g(S,R);else for(var O in R)if(O!="prototype")if(Object.defineProperties){var j=Object.getOwnPropertyDescriptor(R,O);j&&Object.defineProperty(S,O,j)}else S[O]=R[O];S.za=R.prototype}function y(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function b(S){if(S.m)throw new TypeError("Generator is already running");S.m=!0}y.prototype.u=function(S){this.i=S};function _(S,R){S.l={ma:R,na:!0},S.h=S.s||S.v}y.prototype.return=function(S){this.l={return:S},this.h=this.v};function w(S,R,O){return S.h=O,{value:R}}function T(S){this.h=new y,this.i=S}function E(S,R){b(S.h);var O=S.h.j;return O?A(S,"return"in O?O.return:function(j){return{value:j,done:!0}},R,S.h.return):(S.h.return(R),I(S))}function A(S,R,O,j){try{var re=R.call(S.h.j,O);if(!(re instanceof Object))throw new TypeError("Iterator result "+re+" is not an object");if(!re.done)return S.h.m=!1,re;var oe=re.value}catch(ue){return S.h.j=null,_(S.h,ue),I(S)}return S.h.j=null,j.call(S.h,oe),I(S)}function I(S){for(;S.h.h;)try{var R=S.i(S.h);if(R)return S.h.m=!1,{value:R.value,done:!1}}catch(O){S.h.i=void 0,_(S.h,O)}if(S.h.m=!1,S.h.l){if(R=S.h.l,S.h.l=null,R.na)throw R.ma;return{value:R.return,done:!0}}return{value:void 0,done:!0}}function $(S){this.next=function(R){return b(S.h),S.h.j?R=A(S,S.h.j.next,R,S.h.u):(S.h.u(R),R=I(S)),R},this.throw=function(R){return b(S.h),S.h.j?R=A(S,S.h.j.throw,R,S.h.u):(_(S.h,R),R=I(S)),R},this.return=function(R){return E(S,R)},this[Symbol.iterator]=function(){return this}}function D(S){function R(j){return S.next(j)}function O(j){return S.throw(j)}return new Promise(function(j,re){function oe(ue){ue.done?j(ue.value):Promise.resolve(ue.value).then(R,O).then(oe,re)}oe(S.next())})}function N(S){return D(new $(new T(S)))}a("Promise",function(S){function R(ue){this.i=0,this.j=void 0,this.h=[],this.u=!1;var pe=this.l();try{ue(pe.resolve,pe.reject)}catch(Se){pe.reject(Se)}}function O(){this.h=null}function j(ue){return ue instanceof R?ue:new R(function(pe){pe(ue)})}if(S)return S;O.prototype.i=function(ue){if(this.h==null){this.h=[];var pe=this;this.j(function(){pe.m()})}this.h.push(ue)};var re=i.setTimeout;O.prototype.j=function(ue){re(ue,0)},O.prototype.m=function(){for(;this.h&&this.h.length;){var ue=this.h;this.h=[];for(var pe=0;pe<ue.length;++pe){var Se=ue[pe];ue[pe]=null;try{Se()}catch(Fe){this.l(Fe)}}}this.h=null},O.prototype.l=function(ue){this.j(function(){throw ue})},R.prototype.l=function(){function ue(Fe){return function(Ge){Se||(Se=!0,Fe.call(pe,Ge))}}var pe=this,Se=!1;return{resolve:ue(this.I),reject:ue(this.m)}},R.prototype.I=function(ue){if(ue===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(ue instanceof R)this.L(ue);else{e:switch(typeof ue){case"object":var pe=ue!=null;break e;case"function":pe=!0;break e;default:pe=!1}pe?this.F(ue):this.s(ue)}},R.prototype.F=function(ue){var pe=void 0;try{pe=ue.then}catch(Se){this.m(Se);return}typeof pe=="function"?this.M(pe,ue):this.s(ue)},R.prototype.m=function(ue){this.v(2,ue)},R.prototype.s=function(ue){this.v(1,ue)},R.prototype.v=function(ue,pe){if(this.i!=0)throw Error("Cannot settle("+ue+", "+pe+"): Promise already settled in state"+this.i);this.i=ue,this.j=pe,this.i===2&&this.K(),this.H()},R.prototype.K=function(){var ue=this;re(function(){if(ue.D()){var pe=i.console;typeof pe<"u"&&pe.error(ue.j)}},1)},R.prototype.D=function(){if(this.u)return!1;var ue=i.CustomEvent,pe=i.Event,Se=i.dispatchEvent;return typeof Se>"u"?!0:(typeof ue=="function"?ue=new ue("unhandledrejection",{cancelable:!0}):typeof pe=="function"?ue=new pe("unhandledrejection",{cancelable:!0}):(ue=i.document.createEvent("CustomEvent"),ue.initCustomEvent("unhandledrejection",!1,!0,ue)),ue.promise=this,ue.reason=this.j,Se(ue))},R.prototype.H=function(){if(this.h!=null){for(var ue=0;ue<this.h.length;++ue)oe.i(this.h[ue]);this.h=null}};var oe=new O;return R.prototype.L=function(ue){var pe=this.l();ue.T(pe.resolve,pe.reject)},R.prototype.M=function(ue,pe){var Se=this.l();try{ue.call(pe,Se.resolve,Se.reject)}catch(Fe){Se.reject(Fe)}},R.prototype.then=function(ue,pe){function Se(ct,Qe){return typeof ct=="function"?function(_t){try{Fe(ct(_t))}catch(Dt){Ge(Dt)}}:Qe}var Fe,Ge,gt=new R(function(ct,Qe){Fe=ct,Ge=Qe});return this.T(Se(ue,Fe),Se(pe,Ge)),gt},R.prototype.catch=function(ue){return this.then(void 0,ue)},R.prototype.T=function(ue,pe){function Se(){switch(Fe.i){case 1:ue(Fe.j);break;case 2:pe(Fe.j);break;default:throw Error("Unexpected state: "+Fe.i)}}var Fe=this;this.h==null?oe.i(Se):this.h.push(Se),this.u=!0},R.resolve=j,R.reject=function(ue){return new R(function(pe,Se){Se(ue)})},R.race=function(ue){return new R(function(pe,Se){for(var Fe=s(ue),Ge=Fe.next();!Ge.done;Ge=Fe.next())j(Ge.value).T(pe,Se)})},R.all=function(ue){var pe=s(ue),Se=pe.next();return Se.done?j([]):new R(function(Fe,Ge){function gt(_t){return function(Dt){ct[_t]=Dt,Qe--,Qe==0&&Fe(ct)}}var ct=[],Qe=0;do ct.push(void 0),Qe++,j(Se.value).T(gt(ct.length-1),Ge),Se=pe.next();while(!Se.done)})},R});function z(S,R){S instanceof String&&(S+="");var O=0,j=!1,re={next:function(){if(!j&&O<S.length){var oe=O++;return{value:R(oe,S[oe]),done:!1}}return j=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}a("Array.prototype.keys",function(S){return S||function(){return z(this,function(R){return R})}}),a("Array.prototype.fill",function(S){return S||function(R,O,j){var re=this.length||0;for(0>O&&(O=Math.max(0,re+O)),(j==null||j>re)&&(j=re),j=Number(j),0>j&&(j=Math.max(0,re+j)),O=Number(O||0);O<j;O++)this[O]=R;return this}});function F(S){return S||Array.prototype.fill}a("Int8Array.prototype.fill",F),a("Uint8Array.prototype.fill",F),a("Uint8ClampedArray.prototype.fill",F),a("Int16Array.prototype.fill",F),a("Uint16Array.prototype.fill",F),a("Int32Array.prototype.fill",F),a("Uint32Array.prototype.fill",F),a("Float32Array.prototype.fill",F),a("Float64Array.prototype.fill",F),a("Object.is",function(S){return S||function(R,O){return R===O?R!==0||1/R===1/O:R!==R&&O!==O}}),a("Array.prototype.includes",function(S){return S||function(R,O){var j=this;j instanceof String&&(j=String(j));var re=j.length;for(O=O||0,0>O&&(O=Math.max(O+re,0));O<re;O++){var oe=j[O];if(oe===R||Object.is(oe,R))return!0}return!1}}),a("String.prototype.includes",function(S){return S||function(R,O){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(R instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(R,O||0)!==-1}});var G=this||self;function U(S,R){S=S.split(".");var O=G;S[0]in O||typeof O.execScript>"u"||O.execScript("var "+S[0]);for(var j;S.length&&(j=S.shift());)S.length||R===void 0?O[j]&&O[j]!==Object.prototype[j]?O=O[j]:O=O[j]={}:O[j]=R}function H(S){var R;e:{if((R=G.navigator)&&(R=R.userAgent))break e;R=""}return R.indexOf(S)!=-1}var X=Array.prototype.map?function(S,R){return Array.prototype.map.call(S,R,void 0)}:function(S,R){for(var O=S.length,j=Array(O),re=typeof S=="string"?S.split(""):S,oe=0;oe<O;oe++)oe in re&&(j[oe]=R.call(void 0,re[oe],oe,S));return j},Z={},Q=null;function le(S){var R=S.length,O=3*R/4;O%3?O=Math.floor(O):"=.".indexOf(S[R-1])!=-1&&(O="=.".indexOf(S[R-2])!=-1?O-2:O-1);var j=new Uint8Array(O),re=0;return ge(S,function(oe){j[re++]=oe}),re!==O?j.subarray(0,re):j}function ge(S,R){function O(Se){for(;j<S.length;){var Fe=S.charAt(j++),Ge=Q[Fe];if(Ge!=null)return Ge;if(!/^[\s\xa0]*$/.test(Fe))throw Error("Unknown base64 encoding at char: "+Fe)}return Se}be();for(var j=0;;){var re=O(-1),oe=O(0),ue=O(64),pe=O(64);if(pe===64&&re===-1)break;R(re<<2|oe>>4),ue!=64&&(R(oe<<4&240|ue>>2),pe!=64&&R(ue<<6&192|pe))}}function be(){if(!Q){Q={};for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),R=["+/=","+/","-_=","-_.","-_"],O=0;5>O;O++){var j=S.concat(R[O].split(""));Z[O]=j;for(var re=0;re<j.length;re++){var oe=j[re];Q[oe]===void 0&&(Q[oe]=re)}}}}var ke=typeof Uint8Array<"u",Ae=!(H("Trident")||H("MSIE"))&&typeof G.btoa=="function";function de(S){if(!Ae){var R;R===void 0&&(R=0),be(),R=Z[R];for(var O=Array(Math.floor(S.length/3)),j=R[64]||"",re=0,oe=0;re<S.length-2;re+=3){var ue=S[re],pe=S[re+1],Se=S[re+2],Fe=R[ue>>2];ue=R[(ue&3)<<4|pe>>4],pe=R[(pe&15)<<2|Se>>6],Se=R[Se&63],O[oe++]=Fe+ue+pe+Se}switch(Fe=0,Se=j,S.length-re){case 2:Fe=S[re+1],Se=R[(Fe&15)<<2]||j;case 1:S=S[re],O[oe]=R[S>>2]+R[(S&3)<<4|Fe>>4]+Se+j}return O.join("")}for(R="";10240<S.length;)R+=String.fromCharCode.apply(null,S.subarray(0,10240)),S=S.subarray(10240);return R+=String.fromCharCode.apply(null,S),btoa(R)}var Ce=RegExp("[-_.]","g");function ye(S){switch(S){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Ee(S){if(!Ae)return le(S);Ce.test(S)&&(S=S.replace(Ce,ye)),S=atob(S);for(var R=new Uint8Array(S.length),O=0;O<S.length;O++)R[O]=S.charCodeAt(O);return R}var De;function Me(){return De||(De=new Uint8Array(0))}var Ie={},Be=typeof Uint8Array.prototype.slice=="function",et=0,xt=0;function Vt(S){var R=0>S;S=Math.abs(S);var O=S>>>0;S=Math.floor((S-O)/4294967296),R&&(O=s(ir(O,S)),R=O.next().value,S=O.next().value,O=R),et=O>>>0,xt=S>>>0}var Xn=typeof BigInt=="function";function ir(S,R){return R=~R,S?S=~S+1:R+=1,[S,R]}function bi(S,R){this.i=S>>>0,this.h=R>>>0}function xr(S){if(!S)return se||(se=new bi(0,0));if(!/^-?\d+$/.test(S))return null;if(16>S.length)Vt(Number(S));else if(Xn)S=BigInt(S),et=Number(S&BigInt(4294967295))>>>0,xt=Number(S>>BigInt(32)&BigInt(4294967295));else{var R=+(S[0]==="-");xt=et=0;for(var O=S.length,j=R,re=(O-R)%6+R;re<=O;j=re,re+=6)j=Number(S.slice(j,re)),xt*=1e6,et=1e6*et+j,4294967296<=et&&(xt+=et/4294967296|0,et%=4294967296);R&&(R=s(ir(et,xt)),S=R.next().value,R=R.next().value,et=S,xt=R)}return new bi(et,xt)}var se;function dt(S,R){return Error("Invalid wire type: "+S+" (at position "+R+")")}function Dn(){return Error("Failed to read varint, encoding is invalid.")}function Kn(S,R){return Error("Tried to read past the end of the data "+R+" > "+S)}function un(){throw Error("Invalid UTF8")}function xi(S,R){return R=String.fromCharCode.apply(null,R),S==null?R:S+R}var Wi=void 0,To,Eo=typeof TextDecoder<"u",Ga,Wd=typeof TextEncoder<"u",Hi;function ua(S){if(S!==Ie)throw Error("illegal external caller")}function fr(S,R){if(ua(R),this.V=S,S!=null&&S.length===0)throw Error("ByteString should be constructed with non-empty values")}function Il(){return Hi||(Hi=new fr(null,Ie))}function Pl(S){ua(Ie);var R=S.V;return R=R==null||ke&&R!=null&&R instanceof Uint8Array?R:typeof R=="string"?Ee(R):null,R==null?R:S.V=R}function ko(S){if(typeof S=="string")return{buffer:Ee(S),C:!1};if(Array.isArray(S))return{buffer:new Uint8Array(S),C:!1};if(S.constructor===Uint8Array)return{buffer:S,C:!1};if(S.constructor===ArrayBuffer)return{buffer:new Uint8Array(S),C:!1};if(S.constructor===fr)return{buffer:Pl(S)||Me(),C:!0};if(S instanceof Uint8Array)return{buffer:new Uint8Array(S.buffer,S.byteOffset,S.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Yn(S,R){this.i=null,this.m=!1,this.h=this.j=this.l=0,Bt(this,S,R)}function Bt(S,R,O){O=O===void 0?{}:O,S.S=O.S===void 0?!1:O.S,R&&(R=ko(R),S.i=R.buffer,S.m=R.C,S.l=0,S.j=S.i.length,S.h=S.l)}Yn.prototype.reset=function(){this.h=this.l};function Pr(S,R){if(S.h=R,R>S.j)throw Kn(S.j,R)}function _s(S){var R=S.i,O=S.h,j=R[O++],re=j&127;if(j&128&&(j=R[O++],re|=(j&127)<<7,j&128&&(j=R[O++],re|=(j&127)<<14,j&128&&(j=R[O++],re|=(j&127)<<21,j&128&&(j=R[O++],re|=j<<28,j&128&&R[O++]&128&&R[O++]&128&&R[O++]&128&&R[O++]&128&&R[O++]&128)))))throw Dn();return Pr(S,O),re}function _r(S,R){if(0>R)throw Error("Tried to read a negative byte length: "+R);var O=S.h,j=O+R;if(j>S.j)throw Kn(R,S.j-O);return S.h=j,O}var Gi=[];function Ao(){this.h=[]}Ao.prototype.length=function(){return this.h.length},Ao.prototype.end=function(){var S=this.h;return this.h=[],S};function Dl(S,R,O){for(;0<O||127<R;)S.h.push(R&127|128),R=(R>>>7|O<<25)>>>0,O>>>=7;S.h.push(R)}function ja(S,R){for(;127<R;)S.h.push(R&127|128),R>>>=7;S.h.push(R)}function mu(S,R){if(Gi.length){var O=Gi.pop();Bt(O,S,R),S=O}else S=new Yn(S,R);this.h=S,this.j=this.h.h,this.i=this.l=-1,this.setOptions(R)}mu.prototype.setOptions=function(S){S=S===void 0?{}:S,this.ca=S.ca===void 0?!1:S.ca},mu.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function $l(S){var R=S.h;if(R.h==R.j)return!1;S.j=S.h.h;var O=_s(S.h)>>>0;if(R=O>>>3,O&=7,!(0<=O&&5>=O))throw dt(O,S.j);if(1>R)throw Error("Invalid field number: "+R+" (at position "+S.j+")");return S.l=R,S.i=O,!0}function yu(S){switch(S.i){case 0:if(S.i!=0)yu(S);else e:{S=S.h;for(var R=S.h,O=R+10,j=S.i;R<O;)if(!(j[R++]&128)){Pr(S,R);break e}throw Dn()}break;case 1:S=S.h,Pr(S,S.h+8);break;case 2:S.i!=2?yu(S):(R=_s(S.h)>>>0,S=S.h,Pr(S,S.h+R));break;case 5:S=S.h,Pr(S,S.h+4);break;case 3:R=S.l;do{if(!$l(S))throw Error("Unmatched start-group tag: stream EOF");if(S.i==4){if(S.l!=R)throw Error("Unmatched end-group tag");break}yu(S)}while(1);break;default:throw dt(S.i,S.j)}}var Vr=[];function Nl(){this.j=[],this.i=0,this.h=new Ao}function hr(S,R){R.length!==0&&(S.j.push(R),S.i+=R.length)}function st(S,R){if(R=R.R){hr(S,S.h.end());for(var O=0;O<R.length;O++)hr(S,Pl(R[O])||Me())}}var $e=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function la(S,R){return $e?S[$e]|=R:S.A!==void 0?S.A|=R:(Object.defineProperties(S,{A:{value:R,configurable:!0,writable:!0,enumerable:!1}}),R)}function ws(S,R){$e?S[$e]&&(S[$e]&=~R):S.A!==void 0&&(S.A&=~R)}function _n(S){var R;return $e?R=S[$e]:R=S.A,R??0}function ar(S,R){$e?S[$e]=R:S.A!==void 0?S.A=R:Object.defineProperties(S,{A:{value:R,configurable:!0,writable:!0,enumerable:!1}})}function Ss(S){return la(S,1),S}function Hd(S,R){ar(R,(S|0)&-51)}function bu(S,R){ar(R,(S|18)&-41)}var Cs={};function Ts(S){return S!==null&&typeof S=="object"&&!Array.isArray(S)&&S.constructor===Object}var Ro,Pf=[];ar(Pf,23),Ro=Object.freeze(Pf);function Es(S){if(_n(S.o)&2)throw Error("Cannot mutate an immutable Message")}function ks(S){var R=S.length;(R=R?S[R-1]:void 0)&&Ts(R)?R.g=1:(R={},S.push((R.g=1,R)))}function Ol(S){var R=S.i+S.G;return S.B||(S.B=S.o[R]={})}function zr(S,R){return R===-1?null:R>=S.i?S.B?S.B[R]:void 0:S.o[R+S.G]}function oi(S,R,O,j){Es(S),Io(S,R,O,j)}function Io(S,R,O,j){S.j&&(S.j=void 0),R>=S.i||j?Ol(S)[R]=O:(S.o[R+S.G]=O,(S=S.B)&&R in S&&delete S[R])}function Ll(S,R,O,j){var re=zr(S,R);Array.isArray(re)||(re=Ro);var oe=_n(re);if(oe&1||Ss(re),j)oe&2||la(re,2),O&1||Object.freeze(re);else{j=!(O&2);var ue=oe&2;O&1||!ue?j&&oe&16&&!ue&&ws(re,16):(re=Ss(Array.prototype.slice.call(re)),Io(S,R,re))}return re}function ae(S,R){var O=zr(S,R),j=O==null?O:typeof O=="number"||O==="NaN"||O==="Infinity"||O==="-Infinity"?Number(O):void 0;return j!=null&&j!==O&&Io(S,R,j),j}function W(S,R,O,j,re){S.h||(S.h={});var oe=S.h[O],ue=Ll(S,O,3,re);if(!oe){var pe=ue;oe=[];var Se=!!(_n(S.o)&16);ue=!!(_n(pe)&2);var Fe=pe;!re&&ue&&(pe=Array.prototype.slice.call(pe));for(var Ge=ue,gt=0;gt<pe.length;gt++){var ct=pe[gt],Qe=R,_t=!1;if(_t=_t===void 0?!1:_t,ct=Array.isArray(ct)?new Qe(ct):_t?new Qe:void 0,ct!==void 0){Qe=ct.o;var Dt=_t=_n(Qe);ue&&(Dt|=2),Se&&(Dt|=16),Dt!=_t&&ar(Qe,Dt),Qe=Dt,Ge=Ge||!!(2&Qe),oe.push(ct)}}return S.h[O]=oe,Se=_n(pe),R=Se|33,R=Ge?R&-9:R|8,Se!=R&&(Ge=pe,Object.isFrozen(Ge)&&(Ge=Array.prototype.slice.call(Ge)),ar(Ge,R),pe=Ge),Fe!==pe&&Io(S,O,pe),(re||j&&ue)&&la(oe,2),j&&Object.freeze(oe),oe}return re||(re=Object.isFrozen(oe),j&&!re?Object.freeze(oe):!j&&re&&(oe=Array.prototype.slice.call(oe),S.h[O]=oe)),oe}function M(S,R,O){var j=!!(_n(S.o)&2);if(R=W(S,R,O,j,j),S=Ll(S,O,3,j),!(j||_n(S)&8)){for(j=0;j<R.length;j++){if(O=R[j],_n(O.o)&2){var re=_i(O,!1);re.j=O}else re=O;O!==re&&(R[j]=re,S[j]=re.o)}la(S,8)}return R}function V(S,R,O){if(O!=null&&typeof O!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof O+": "+O);oi(S,R,O)}function te(S,R,O,j,re){Es(S);var oe=W(S,O,R,!1,!1);return O=j??new O,S=Ll(S,R,2,!1),re!=null?(oe.splice(re,0,O),S.splice(re,0,O.o)):(oe.push(O),S.push(O.o)),O.C()&&ws(S,8),O}function he(S,R){return S??R}function ve(S,R,O){return O=O===void 0?0:O,he(ae(S,R),O)}var we;function Oe(S){switch(typeof S){case"number":return isFinite(S)?S:String(S);case"object":if(S)if(Array.isArray(S)){if(_n(S)&128)return S=Array.prototype.slice.call(S),ks(S),S}else{if(ke&&S!=null&&S instanceof Uint8Array)return de(S);if(S instanceof fr){var R=S.V;return R==null?"":typeof R=="string"?R:S.V=de(R)}}}return S}function He(S,R,O,j){if(S!=null){if(Array.isArray(S))S=We(S,R,O,j!==void 0);else if(Ts(S)){var re={},oe;for(oe in S)re[oe]=He(S[oe],R,O,j);S=re}else S=R(S,j);return S}}function We(S,R,O,j){var re=_n(S);j=j?!!(re&16):void 0,S=Array.prototype.slice.call(S);for(var oe=0;oe<S.length;oe++)S[oe]=He(S[oe],R,O,j);return O(re,S),S}function at(S){return S.ja===Cs?S.toJSON():Oe(S)}function ot(S,R){S&128&&ks(R)}function zt(S,R,O){if(O=O===void 0?bu:O,S!=null){if(ke&&S instanceof Uint8Array)return S.length?new fr(new Uint8Array(S),Ie):Il();if(Array.isArray(S)){var j=_n(S);return j&2?S:R&&!(j&32)&&(j&16||j===0)?(ar(S,j|2),S):(S=We(S,zt,j&4?bu:O,!0),R=_n(S),R&4&&R&2&&Object.freeze(S),S)}return S.ja===Cs?ft(S):S}}function $n(S,R,O,j,re,oe,ue){if(S=S.h&&S.h[O]){if(j=_n(S),j&2?j=S:(oe=X(S,ft),bu(j,oe),Object.freeze(oe),j=oe),Es(R),ue=j==null?Ro:Ss([]),j!=null){for(oe=!!j.length,S=0;S<j.length;S++){var pe=j[S];oe=oe&&!(_n(pe.o)&2),ue[S]=pe.o}oe=(oe?8:0)|1,S=_n(ue),(S&oe)!==oe&&(Object.isFrozen(ue)&&(ue=Array.prototype.slice.call(ue)),ar(ue,S|oe)),R.h||(R.h={}),R.h[O]=j}else R.h&&(R.h[O]=void 0);Io(R,O,ue,re)}else oi(R,O,zt(j,oe,ue),re)}function ft(S){return _n(S.o)&2||(S=_i(S,!0),la(S.o,2)),S}function _i(S,R){var O=S.o,j=[];la(j,16);var re=S.constructor.h;if(re&&j.push(re),re=S.B,re){j.length=O.length,j.fill(void 0,j.length,O.length);var oe={};j[j.length-1]=oe}_n(O)&128&&ks(j),R=R||S.C()?bu:Hd,oe=S.constructor,we=j,j=new oe(j),we=void 0,S.R&&(j.R=S.R.slice()),oe=!!(_n(O)&16);for(var ue=re?O.length-1:O.length,pe=0;pe<ue;pe++)$n(S,j,pe-S.G,O[pe],!1,oe,R);if(re)for(var Se in re)$n(S,j,+Se,re[Se],!0,oe,R);return j}function kt(S,R,O){S==null&&(S=we),we=void 0;var j=this.constructor.i||0,re=0<j,oe=this.constructor.h,ue=!1;if(S==null){S=oe?[oe]:[];var pe=48,Se=!0;re&&(j=0,pe|=128),ar(S,pe)}else{if(!Array.isArray(S)||oe&&oe!==S[0])throw Error();var Fe=pe=la(S,0);if((Se=(16&Fe)!==0)&&((ue=(32&Fe)!==0)||(Fe|=32)),re){if(128&Fe)j=0;else if(0<S.length){var Ge=S[S.length-1];if(Ts(Ge)&&"g"in Ge){j=0,Fe|=128,delete Ge.g;var gt=!0,ct;for(ct in Ge){gt=!1;break}gt&&S.pop()}}}else if(128&Fe)throw Error();pe!==Fe&&ar(S,Fe)}this.G=(oe?0:-1)-j,this.h=void 0,this.o=S;e:{if(oe=this.o.length,j=oe-1,oe&&(oe=this.o[j],Ts(oe))){this.B=oe,this.i=j-this.G;break e}R!==void 0&&-1<R?(this.i=Math.max(R,j+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!re&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(O){R=Se&&!ue&&!0,re=this.i;var Qe;for(Se=0;Se<O.length;Se++)ue=O[Se],ue<re?(ue+=this.G,(j=S[ue])?ca(j,R):S[ue]=Ro):(Qe||(Qe=Ol(this)),(j=Qe[ue])?ca(j,R):Qe[ue]=Ro)}}kt.prototype.toJSON=function(){return We(this.o,at,ot)},kt.prototype.C=function(){return!!(_n(this.o)&2)};function ca(S,R){if(Array.isArray(S)){var O=_n(S),j=1;!R||O&2||(j|=16),(O&j)!==j&&ar(S,O|j)}}kt.prototype.ja=Cs,kt.prototype.toString=function(){return this.o.toString()};function As(S,R,O){if(O){var j={},re;for(re in O){var oe=O[re],ue=oe.ra;ue||(j.J=oe.xa||oe.oa.W,oe.ia?(j.aa=Do(oe.ia),ue=function(pe){return function(Se,Fe,Ge){return pe.J(Se,Fe,Ge,pe.aa)}}(j)):oe.ka?(j.Z=Rs(oe.da.P,oe.ka),ue=function(pe){return function(Se,Fe,Ge){return pe.J(Se,Fe,Ge,pe.Z)}}(j)):ue=j.J,oe.ra=ue),ue(R,S,oe.da),j={J:j.J,aa:j.aa,Z:j.Z}}}st(R,S)}var ji=Symbol();function si(S,R,O){return S[ji]||(S[ji]=function(j,re){return R(j,re,O)})}function qi(S){var R=S[ji];if(!R){var O=_u(S);R=function(j,re){return wu(j,re,O)},S[ji]=R}return R}function xu(S){var R=S.ia;if(R)return qi(R);if(R=S.wa)return si(S.da.P,R,S.ka)}function gn(S){var R=xu(S),O=S.da,j=S.oa.U;return R?function(re,oe){return j(re,oe,O,R)}:function(re,oe){return j(re,oe,O)}}function Po(S,R){var O=S[R];return typeof O=="function"&&O.length===0&&(O=O(),S[R]=O),Array.isArray(O)&&(Ps in O||$o in O||0<O.length&&typeof O[0]=="function")?O:void 0}function on(S,R,O,j,re,oe){R.P=S[0];var ue=1;if(S.length>ue&&typeof S[ue]!="number"){var pe=S[ue++];O(R,pe)}for(;ue<S.length;){O=S[ue++];for(var Se=ue+1;Se<S.length&&typeof S[Se]!="number";)Se++;switch(pe=S[ue++],Se-=ue,Se){case 0:j(R,O,pe);break;case 1:(Se=Po(S,ue))?(ue++,re(R,O,pe,Se)):j(R,O,pe,S[ue++]);break;case 2:Se=ue++,Se=Po(S,Se),re(R,O,pe,Se,S[ue++]);break;case 3:oe(R,O,pe,S[ue++],S[ue++],S[ue++]);break;case 4:oe(R,O,pe,S[ue++],S[ue++],S[ue++],S[ue++]);break;default:throw Error("unexpected number of binary field arguments: "+Se)}}return R}var ui=Symbol();function Do(S){var R=S[ui];if(!R){var O=Is(S);R=function(j,re){return Su(j,re,O)},S[ui]=R}return R}function Rs(S,R){var O=S[ui];return O||(O=function(j,re){return As(j,re,R)},S[ui]=O),O}var $o=Symbol();function Df(S,R){S.push(R)}function $f(S,R,O){S.push(R,O.W)}function Nf(S,R,O,j){var re=Do(j),oe=Is(j).P,ue=O.W;S.push(R,function(pe,Se,Fe){return ue(pe,Se,Fe,oe,re)})}function Of(S,R,O,j,re,oe){var ue=Rs(j,oe),pe=O.W;S.push(R,function(Se,Fe,Ge){return pe(Se,Fe,Ge,j,ue)})}function Is(S){var R=S[$o];return R||(R=on(S,S[$o]=[],Df,$f,Nf,Of),Ps in S&&$o in S&&(S.length=0),R)}var Ps=Symbol();function Ml(S,R){S[0]=R}function Lf(S,R,O,j){var re=O.U;S[R]=j?function(oe,ue,pe){return re(oe,ue,pe,j)}:re}function Ds(S,R,O,j,re){var oe=O.U,ue=qi(j),pe=_u(j).P;S[R]=function(Se,Fe,Ge){return oe(Se,Fe,Ge,pe,ue,re)}}function Nn(S,R,O,j,re,oe,ue){var pe=O.U,Se=si(j,re,oe);S[R]=function(Fe,Ge,gt){return pe(Fe,Ge,gt,j,Se,ue)}}function _u(S){var R=S[Ps];return R||(R=on(S,S[Ps]={},Ml,Lf,Ds,Nn),Ps in S&&$o in S&&(S.length=0),R)}function wu(S,R,O){for(;$l(R)&&R.i!=4;){var j=R.l,re=O[j];if(!re){var oe=O[0];oe&&(oe=oe[j])&&(re=O[j]=gn(oe))}if(!re||!re(R,S,j)){re=R,j=S,oe=re.j,yu(re);var ue=re;if(!ue.ca){if(re=ue.h.h-oe,ue.h.h=oe,ue=ue.h,re==0)re=Il();else{if(oe=_r(ue,re),ue.S&&ue.m)re=ue.i.subarray(oe,oe+re);else{ue=ue.i;var pe=oe;re=oe+re,re=pe===re?Me():Be?ue.slice(pe,re):new Uint8Array(ue.subarray(pe,re))}re=re.length==0?Il():new fr(re,Ie)}(oe=j.R)?oe.push(re):j.R=[re]}}}return S}function Su(S,R,O){for(var j=O.length,re=j%2==1,oe=re?1:0;oe<j;oe+=2)(0,O[oe+1])(R,S,O[oe]);As(S,R,re?O[0]:void 0)}function No(S,R){return{U:S,W:R}}var Ur=No(function(S,R,O){if(S.i!==5)return!1;S=S.h;var j=S.i,re=S.h,oe=j[re],ue=j[re+1],pe=j[re+2];return j=j[re+3],Pr(S,S.h+4),ue=(oe<<0|ue<<8|pe<<16|j<<24)>>>0,S=2*(ue>>31)+1,oe=ue>>>23&255,ue&=8388607,oi(R,O,oe==255?ue?NaN:1/0*S:oe==0?S*Math.pow(2,-149)*ue:S*Math.pow(2,oe-150)*(ue+Math.pow(2,23))),!0},function(S,R,O){if(R=ae(R,O),R!=null){ja(S.h,8*O+5),S=S.h;var j=+R;j===0?0<1/j?et=xt=0:(xt=0,et=2147483648):isNaN(j)?(xt=0,et=2147483647):(j=(O=0>j?-2147483648:0)?-j:j,34028234663852886e22<j?(xt=0,et=(O|2139095040)>>>0):11754943508222875e-54>j?(j=Math.round(j/Math.pow(2,-149)),xt=0,et=(O|j)>>>0):(R=Math.floor(Math.log(j)/Math.LN2),j*=Math.pow(2,-R),j=Math.round(8388608*j),16777216<=j&&++R,xt=0,et=(O|R+127<<23|j&8388607)>>>0)),O=et,S.h.push(O>>>0&255),S.h.push(O>>>8&255),S.h.push(O>>>16&255),S.h.push(O>>>24&255)}}),Gd=No(function(S,R,O){if(S.i!==0)return!1;var j=S.h,re=0,oe=S=0,ue=j.i,pe=j.h;do{var Se=ue[pe++];re|=(Se&127)<<oe,oe+=7}while(32>oe&&Se&128);for(32<oe&&(S|=(Se&127)>>4),oe=3;32>oe&&Se&128;oe+=7)Se=ue[pe++],S|=(Se&127)<<oe;if(Pr(j,pe),128>Se)j=re>>>0,Se=S>>>0,(S=Se&2147483648)&&(j=~j+1>>>0,Se=~Se>>>0,j==0&&(Se=Se+1>>>0)),j=4294967296*Se+(j>>>0);else throw Dn();return oi(R,O,S?-j:j),!0},function(S,R,O){R=zr(R,O),R!=null&&(typeof R=="string"&&xr(R),R!=null&&(ja(S.h,8*O),typeof R=="number"?(S=S.h,Vt(R),Dl(S,et,xt)):(O=xr(R),Dl(S.h,O.i,O.h))))}),Bl=No(function(S,R,O){return S.i!==0?!1:(oi(R,O,_s(S.h)),!0)},function(S,R,O){if(R=zr(R,O),R!=null&&R!=null)if(ja(S.h,8*O),S=S.h,O=R,0<=O)ja(S,O);else{for(R=0;9>R;R++)S.h.push(O&127|128),O>>=7;S.h.push(1)}}),Fl=No(function(S,R,O){if(S.i!==2)return!1;var j=_s(S.h)>>>0;S=S.h;var re=_r(S,j);if(S=S.i,Eo){var oe=S,ue;(ue=To)||(ue=To=new TextDecoder("utf-8",{fatal:!0})),S=re+j,oe=re===0&&S===oe.length?oe:oe.subarray(re,S);try{var pe=ue.decode(oe)}catch(gt){if(Wi===void 0){try{ue.decode(new Uint8Array([128]))}catch{}try{ue.decode(new Uint8Array([97])),Wi=!0}catch{Wi=!1}}throw!Wi&&(To=void 0),gt}}else{pe=re,j=pe+j,re=[];for(var Se=null,Fe,Ge;pe<j;)Fe=S[pe++],128>Fe?re.push(Fe):224>Fe?pe>=j?un():(Ge=S[pe++],194>Fe||(Ge&192)!==128?(pe--,un()):re.push((Fe&31)<<6|Ge&63)):240>Fe?pe>=j-1?un():(Ge=S[pe++],(Ge&192)!==128||Fe===224&&160>Ge||Fe===237&&160<=Ge||((oe=S[pe++])&192)!==128?(pe--,un()):re.push((Fe&15)<<12|(Ge&63)<<6|oe&63)):244>=Fe?pe>=j-2?un():(Ge=S[pe++],(Ge&192)!==128||(Fe<<28)+(Ge-144)>>30||((oe=S[pe++])&192)!==128||((ue=S[pe++])&192)!==128?(pe--,un()):(Fe=(Fe&7)<<18|(Ge&63)<<12|(oe&63)<<6|ue&63,Fe-=65536,re.push((Fe>>10&1023)+55296,(Fe&1023)+56320))):un(),8192<=re.length&&(Se=xi(Se,re),re.length=0);pe=xi(Se,re)}return oi(R,O,pe),!0},function(S,R,O){if(R=zr(R,O),R!=null){var j=!1;if(j=j===void 0?!1:j,Wd){if(j&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(R))throw Error("Found an unpaired surrogate");R=(Ga||(Ga=new TextEncoder)).encode(R)}else{for(var re=0,oe=new Uint8Array(3*R.length),ue=0;ue<R.length;ue++){var pe=R.charCodeAt(ue);if(128>pe)oe[re++]=pe;else{if(2048>pe)oe[re++]=pe>>6|192;else{if(55296<=pe&&57343>=pe){if(56319>=pe&&ue<R.length){var Se=R.charCodeAt(++ue);if(56320<=Se&&57343>=Se){pe=1024*(pe-55296)+Se-56320+65536,oe[re++]=pe>>18|240,oe[re++]=pe>>12&63|128,oe[re++]=pe>>6&63|128,oe[re++]=pe&63|128;continue}else ue--}if(j)throw Error("Found an unpaired surrogate");pe=65533}oe[re++]=pe>>12|224,oe[re++]=pe>>6&63|128}oe[re++]=pe&63|128}}R=re===oe.length?oe:oe.subarray(0,re)}ja(S.h,8*O+2),ja(S.h,R.length),hr(S,S.h.end()),hr(S,R)}}),Vl=No(function(S,R,O,j,re){if(S.i!==2)return!1;R=te(R,O,j),O=S.h.j,j=_s(S.h)>>>0;var oe=S.h.h+j,ue=oe-O;if(0>=ue&&(S.h.j=oe,re(R,S,void 0,void 0,void 0),ue=oe-S.h.h),ue)throw Error("Message parsing ended unexpectedly. Expected to read "+(j+" bytes, instead read "+(j-ue)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return S.h.h=oe,S.h.j=O,!0},function(S,R,O,j,re){if(R=M(R,j,O),R!=null)for(j=0;j<R.length;j++){var oe=S;ja(oe.h,8*O+2);var ue=oe.h.end();hr(oe,ue),ue.push(oe.i),oe=ue,re(R[j],S),ue=S;var pe=oe.pop();for(pe=ue.i+ue.h.length()-pe;127<pe;)oe.push(pe&127|128),pe>>>=7,ue.i++;oe.push(pe),ue.i++}});function zl(S){return function(R,O){e:{if(Vr.length){var j=Vr.pop();j.setOptions(O),Bt(j.h,R,O),R=j}else R=new mu(R,O);try{var re=_u(S),oe=wu(new re.P,R,re);break e}finally{re=R.h,re.i=null,re.m=!1,re.l=0,re.j=0,re.h=0,re.S=!1,R.l=-1,R.i=-1,100>Vr.length&&Vr.push(R)}oe=void 0}return oe}}function Cu(S){return function(){var R=new Nl;Su(this,R,Is(S)),hr(R,R.h.end());for(var O=new Uint8Array(R.i),j=R.j,re=j.length,oe=0,ue=0;ue<re;ue++){var pe=j[ue];O.set(pe,oe),oe+=pe.length}return R.j=[O],O}}function Oo(S){kt.call(this,S)}m(Oo,kt);var Ul=[Oo,1,Bl,2,Ur,3,Fl,4,Fl];Oo.prototype.l=Cu(Ul);function Tu(S){kt.call(this,S,-1,Mf)}m(Tu,kt),Tu.prototype.addClassification=function(S,R){return te(this,1,Oo,S,R),this};var Mf=[1],Bf=zl([Tu,1,Vl,Ul]);function $s(S){kt.call(this,S)}m($s,kt);var Ff=[$s,1,Ur,2,Ur,3,Ur,4,Ur,5,Ur];$s.prototype.l=Cu(Ff);function jd(S){kt.call(this,S,-1,Zb)}m(jd,kt);var Zb=[1],Qg=zl([jd,1,Vl,Ff]);function Vf(S){kt.call(this,S)}m(Vf,kt);var qd=[Vf,1,Ur,2,Ur,3,Ur,4,Ur,5,Ur,6,Gd],Qb=zl(qd);Vf.prototype.l=Cu(qd);function Xd(S,R,O){if(O=S.createShader(O===0?S.VERTEX_SHADER:S.FRAGMENT_SHADER),S.shaderSource(O,R),S.compileShader(O),!S.getShaderParameter(O,S.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+S.getShaderInfoLog(O));return O}function Jb(S){return M(S,Oo,1).map(function(R){var O=zr(R,1);return{index:O??0,qa:ve(R,2),label:zr(R,3)!=null?he(zr(R,3),""):void 0,displayName:zr(R,4)!=null?he(zr(R,4),""):void 0}})}function Jg(S){return{x:ve(S,1),y:ve(S,2),z:ve(S,3),visibility:ae(S,4)!=null?ve(S,4):void 0}}function Kd(S,R){this.i=S,this.h=R,this.m=0}function Yd(S,R,O){return ex(S,R),typeof S.h.canvas.transferToImageBitmap=="function"?Promise.resolve(S.h.canvas.transferToImageBitmap()):O?Promise.resolve(S.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(S.h.canvas):(S.j===void 0&&(S.j=document.createElement("canvas")),new Promise(function(j){S.j.height=S.h.canvas.height,S.j.width=S.h.canvas.width,S.j.getContext("2d",{}).drawImage(S.h.canvas,0,0,S.h.canvas.width,S.h.canvas.height),j(S.j)}))}function ex(S,R){var O=S.h;if(S.s===void 0){var j=Xd(O,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),re=Xd(O,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),oe=O.createProgram();if(O.attachShader(oe,j),O.attachShader(oe,re),O.linkProgram(oe),!O.getProgramParameter(oe,O.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+O.getProgramInfoLog(oe));j=S.s=oe,O.useProgram(j),re=O.getUniformLocation(j,"sampler0"),S.l={O:O.getAttribLocation(j,"aVertex"),N:O.getAttribLocation(j,"aTex"),ya:re},S.v=O.createBuffer(),O.bindBuffer(O.ARRAY_BUFFER,S.v),O.enableVertexAttribArray(S.l.O),O.vertexAttribPointer(S.l.O,2,O.FLOAT,!1,0,0),O.bufferData(O.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),O.STATIC_DRAW),O.bindBuffer(O.ARRAY_BUFFER,null),S.u=O.createBuffer(),O.bindBuffer(O.ARRAY_BUFFER,S.u),O.enableVertexAttribArray(S.l.N),O.vertexAttribPointer(S.l.N,2,O.FLOAT,!1,0,0),O.bufferData(O.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),O.STATIC_DRAW),O.bindBuffer(O.ARRAY_BUFFER,null),O.uniform1i(re,0)}j=S.l,O.useProgram(S.s),O.canvas.width=R.width,O.canvas.height=R.height,O.viewport(0,0,R.width,R.height),O.activeTexture(O.TEXTURE0),S.i.bindTexture2d(R.glName),O.enableVertexAttribArray(j.O),O.bindBuffer(O.ARRAY_BUFFER,S.v),O.vertexAttribPointer(j.O,2,O.FLOAT,!1,0,0),O.enableVertexAttribArray(j.N),O.bindBuffer(O.ARRAY_BUFFER,S.u),O.vertexAttribPointer(j.N,2,O.FLOAT,!1,0,0),O.bindFramebuffer(O.DRAW_FRAMEBUFFER?O.DRAW_FRAMEBUFFER:O.FRAMEBUFFER,null),O.clearColor(0,0,0,0),O.clear(O.COLOR_BUFFER_BIT),O.colorMask(!0,!0,!0,!0),O.drawArrays(O.TRIANGLE_FAN,0,4),O.disableVertexAttribArray(j.O),O.disableVertexAttribArray(j.N),O.bindBuffer(O.ARRAY_BUFFER,null),S.i.bindTexture2d(0)}function em(S){this.h=S}var tx=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function tm(S,R){return R+S}function Zd(S,R){window[S]=R}function nm(S){var R=document.createElement("script");return R.setAttribute("src",S),R.setAttribute("crossorigin","anonymous"),new Promise(function(O){R.addEventListener("load",function(){O()},!1),R.addEventListener("error",function(){O()},!1),document.body.appendChild(R)})}function rm(){return N(function(S){switch(S.h){case 1:return S.s=2,w(S,WebAssembly.instantiate(tx),4);case 4:S.h=3,S.s=0;break;case 2:return S.s=0,S.l=null,S.return(!1);case 3:return S.return(!0)}})}function Qd(S){if(this.h=S,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=S&&S.locateFile||tm,typeof window=="object")var R=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")R=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=R,S.options){R=s(Object.keys(S.options));for(var O=R.next();!O.done;O=R.next()){O=O.value;var j=S.options[O].default;j!==void 0&&(this.l[O]=typeof j=="function"?j():j)}}}n=Qd.prototype,n.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function nx(S){var R,O,j,re,oe,ue,pe,Se,Fe,Ge,gt;return N(function(ct){switch(ct.h){case 1:return S.ga?(R=S.h.files===void 0?[]:typeof S.h.files=="function"?S.h.files(S.l):S.h.files,w(ct,rm(),2)):ct.return();case 2:if(O=ct.i,typeof window=="object")return Zd("createMediapipeSolutionsWasm",{locateFile:S.locateFile}),Zd("createMediapipeSolutionsPackedAssets",{locateFile:S.locateFile}),ue=R.filter(function(Qe){return Qe.data!==void 0}),pe=R.filter(function(Qe){return Qe.data===void 0}),Se=Promise.all(ue.map(function(Qe){var _t=zf(S,Qe.url);if(Qe.path!==void 0){var Dt=Qe.path;_t=_t.then(function(An){return S.overrideFile(Dt,An),Promise.resolve(An)})}return _t})),Fe=Promise.all(pe.map(function(Qe){return Qe.simd===void 0||Qe.simd&&O||!Qe.simd&&!O?nm(S.locateFile(Qe.url,S.ha)):Promise.resolve()})).then(function(){var Qe,_t,Dt;return N(function(An){if(An.h==1)return Qe=window.createMediapipeSolutionsWasm,_t=window.createMediapipeSolutionsPackedAssets,Dt=S,w(An,Qe(_t),2);Dt.i=An.i,An.h=0})}),Ge=function(){return N(function(Qe){return S.h.graph&&S.h.graph.url?Qe=w(Qe,zf(S,S.h.graph.url),0):(Qe.h=0,Qe=void 0),Qe})}(),w(ct,Promise.all([Fe,Se,Ge]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return j=R.filter(function(Qe){return Qe.simd===void 0||Qe.simd&&O||!Qe.simd&&!O}).map(function(Qe){return S.locateFile(Qe.url,S.ha)}),importScripts.apply(null,u(j)),re=S,w(ct,createMediapipeSolutionsWasm(Module),6);case 6:re.i=ct.i,S.m=new OffscreenCanvas(1,1),S.i.canvas=S.m,oe=S.i.GL.createContext(S.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),S.i.GL.makeContextCurrent(oe),ct.h=4;break;case 7:if(S.m=document.createElement("canvas"),gt=S.m.getContext("webgl2",{}),!gt&&(gt=S.m.getContext("webgl",{}),!gt))return alert("Failed to create WebGL canvas context when passing video frame."),ct.return();S.K=gt,S.i.canvas=S.m,S.i.createContext(S.m,!0,!0,{});case 4:S.j=new S.i.SolutionWasm,S.ga=!1,ct.h=0}})}function im(S){var R,O,j,re,oe,ue,pe,Se;return N(function(Fe){if(Fe.h==1){if(S.h.graph&&S.h.graph.url&&S.fa===S.h.graph.url)return Fe.return();if(S.u=!0,!S.h.graph||!S.h.graph.url){Fe.h=2;return}return S.fa=S.h.graph.url,w(Fe,zf(S,S.h.graph.url),3)}for(Fe.h!=2&&(R=Fe.i,S.j.loadGraph(R)),O=s(Object.keys(S.D)),j=O.next();!j.done;j=O.next())re=j.value,S.j.overrideFile(re,S.D[re]);if(S.D={},S.h.listeners)for(oe=s(S.h.listeners),ue=oe.next();!ue.done;ue=oe.next())pe=ue.value,rx(S,pe);Se=S.l,S.l={},S.setOptions(Se),Fe.h=0})}n.reset=function(){var S=this;return N(function(R){S.j&&(S.j.reset(),S.s={},S.v={}),R.h=0})},n.setOptions=function(S,R){var O=this;if(R=R||this.h.options){for(var j=[],re=[],oe={},ue=s(Object.keys(S)),pe=ue.next();!pe.done;oe={X:oe.X,Y:oe.Y},pe=ue.next())if(pe=pe.value,!(pe in this.l&&this.l[pe]===S[pe])){this.l[pe]=S[pe];var Se=R[pe];Se!==void 0&&(Se.onChange&&(oe.X=Se.onChange,oe.Y=S[pe],j.push(function(Fe){return function(){var Ge;return N(function(gt){if(gt.h==1)return w(gt,Fe.X(Fe.Y),2);Ge=gt.i,Ge===!0&&(O.u=!0),gt.h=0})}}(oe))),Se.graphOptionXref&&(pe=Object.assign({},{calculatorName:"",calculatorIndex:0},Se.graphOptionXref,{valueNumber:Se.type===1?S[pe]:0,valueBoolean:Se.type===0?S[pe]:!1,valueString:Se.type===2?S[pe]:""}),re.push(pe)))}(j.length!==0||re.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(re),this.F=(this.F===void 0?[]:this.F).concat(j))}};function am(S){var R,O,j,re,oe,ue,pe;return N(function(Se){switch(Se.h){case 1:if(!S.u)return Se.return();if(!S.F){Se.h=2;break}R=s(S.F),O=R.next();case 3:if(O.done){Se.h=5;break}return j=O.value,w(Se,j(),4);case 4:O=R.next(),Se.h=3;break;case 5:S.F=void 0;case 2:if(S.H){for(re=new S.i.GraphOptionChangeRequestList,oe=s(S.H),ue=oe.next();!ue.done;ue=oe.next())pe=ue.value,re.push_back(pe);S.j.changeOptions(re),re.delete(),S.H=void 0}S.u=!1,Se.h=0}})}n.initialize=function(){var S=this;return N(function(R){return R.h==1?w(R,nx(S),2):R.h!=3?w(R,im(S),3):w(R,am(S),0)})};function zf(S,R){var O,j;return N(function(re){return R in S.L?re.return(S.L[R]):(O=S.locateFile(R,""),j=fetch(O).then(function(oe){return oe.arrayBuffer()}),S.L[R]=j,re.return(j))})}n.overrideFile=function(S,R){this.j?this.j.overrideFile(S,R):this.D[S]=R},n.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},n.send=function(S,R){var O=this,j,re,oe,ue,pe,Se,Fe,Ge,gt;return N(function(ct){switch(ct.h){case 1:return O.h.inputs?(j=1e3*(R??performance.now()),w(ct,O.I,2)):ct.return();case 2:return w(ct,O.initialize(),3);case 3:for(re=new O.i.PacketDataList,oe=s(Object.keys(S)),ue=oe.next();!ue.done;ue=oe.next())if(pe=ue.value,Se=O.h.inputs[pe]){e:{var Qe=S[pe];switch(Se.type){case"video":var _t=O.s[Se.stream];if(_t||(_t=new Kd(O.i,O.K),O.s[Se.stream]=_t),_t.m===0&&(_t.m=_t.i.createTexture()),typeof HTMLVideoElement<"u"&&Qe instanceof HTMLVideoElement)var Dt=Qe.videoWidth,An=Qe.videoHeight;else typeof HTMLImageElement<"u"&&Qe instanceof HTMLImageElement?(Dt=Qe.naturalWidth,An=Qe.naturalHeight):(Dt=Qe.width,An=Qe.height);An={glName:_t.m,width:Dt,height:An},Dt=_t.h,Dt.canvas.width=An.width,Dt.canvas.height=An.height,Dt.activeTexture(Dt.TEXTURE0),_t.i.bindTexture2d(_t.m),Dt.texImage2D(Dt.TEXTURE_2D,0,Dt.RGBA,Dt.RGBA,Dt.UNSIGNED_BYTE,Qe),_t.i.bindTexture2d(0),_t=An;break e;case"detections":for(_t=O.s[Se.stream],_t||(_t=new em(O.i),O.s[Se.stream]=_t),_t.data||(_t.data=new _t.h.DetectionListData),_t.data.reset(Qe.length),An=0;An<Qe.length;++An){Dt=Qe[An];var wn=_t.data,dr=wn.setBoundingBox,wi=An,Wr=Dt.la,qt=new Vf;if(V(qt,1,Wr.sa),V(qt,2,Wr.ta),V(qt,3,Wr.height),V(qt,4,Wr.width),V(qt,5,Wr.rotation),oi(qt,6,Wr.pa),Wr=qt.l(),dr.call(wn,wi,Wr),Dt.ea)for(wn=0;wn<Dt.ea.length;++wn){qt=Dt.ea[wn],dr=_t.data,wi=dr.addNormalizedLandmark,Wr=An,qt=Object.assign({},qt,{visibility:qt.visibility?qt.visibility:0});var pr=new $s;V(pr,1,qt.x),V(pr,2,qt.y),V(pr,3,qt.z),qt.visibility&&V(pr,4,qt.visibility),qt=pr.l(),wi.call(dr,Wr,qt)}if(Dt.ba)for(wn=0;wn<Dt.ba.length;++wn)dr=_t.data,wi=dr.addClassification,Wr=An,qt=Dt.ba[wn],pr=new Oo,V(pr,2,qt.qa),qt.index&&oi(pr,1,qt.index),qt.label&&oi(pr,3,qt.label),qt.displayName&&oi(pr,4,qt.displayName),qt=pr.l(),wi.call(dr,Wr,qt)}_t=_t.data;break e;default:_t={}}}switch(Fe=_t,Ge=Se.stream,Se.type){case"video":re.pushTexture2d(Object.assign({},Fe,{stream:Ge,timestamp:j}));break;case"detections":gt=Fe,gt.stream=Ge,gt.timestamp=j,re.pushDetectionList(gt);break;default:throw Error("Unknown input config type: '"+Se.type+"'")}}return O.j.send(re),w(ct,O.I,4);case 4:re.delete(),ct.h=0}})};function om(S,R,O){var j,re,oe,ue,pe,Se,Fe,Ge,gt,ct,Qe,_t,Dt,An;return N(function(wn){switch(wn.h){case 1:if(!O)return wn.return(R);for(j={},re=0,oe=s(Object.keys(O)),ue=oe.next();!ue.done;ue=oe.next())pe=ue.value,Se=O[pe],typeof Se!="string"&&Se.type==="texture"&&R[Se.stream]!==void 0&&++re;1<re&&(S.M=!1),Fe=s(Object.keys(O)),ue=Fe.next();case 2:if(ue.done){wn.h=4;break}if(Ge=ue.value,gt=O[Ge],typeof gt=="string")return Dt=j,An=Ge,w(wn,sm(S,Ge,R[gt]),14);if(ct=R[gt.stream],gt.type==="detection_list"){if(ct){for(var dr=ct.getRectList(),wi=ct.getLandmarksList(),Wr=ct.getClassificationsList(),qt=[],pr=0;pr<dr.size();++pr){var Lo=Qb(dr.get(pr)),ix=ve(Lo,1),Uf=ve(Lo,2),ep=ve(Lo,3),tp=ve(Lo,4),np=ve(Lo,5,0),Eu=void 0;Eu=Eu===void 0?0:Eu,Lo={la:{sa:ix,ta:Uf,height:ep,width:tp,rotation:np,pa:he(zr(Lo,6),Eu)},ea:M(Qg(wi.get(pr)),$s,1).map(Jg),ba:Jb(Bf(Wr.get(pr)))},qt.push(Lo)}dr=qt}else dr=[];j[Ge]=dr,wn.h=7;break}if(gt.type==="proto_list"){if(ct){for(dr=Array(ct.size()),wi=0;wi<ct.size();wi++)dr[wi]=ct.get(wi);ct.delete()}else dr=[];j[Ge]=dr,wn.h=7;break}if(ct===void 0){wn.h=3;break}if(gt.type==="float_list"){j[Ge]=ct,wn.h=7;break}if(gt.type==="proto"){j[Ge]=ct,wn.h=7;break}if(gt.type!=="texture")throw Error("Unknown output config type: '"+gt.type+"'");return Qe=S.v[Ge],Qe||(Qe=new Kd(S.i,S.K),S.v[Ge]=Qe),w(wn,Yd(Qe,ct,S.M),13);case 13:_t=wn.i,j[Ge]=_t;case 7:gt.transform&&j[Ge]&&(j[Ge]=gt.transform(j[Ge])),wn.h=3;break;case 14:Dt[An]=wn.i;case 3:ue=Fe.next(),wn.h=2;break;case 4:return wn.return(j)}})}function sm(S,R,O){var j;return N(function(re){return typeof O=="number"||O instanceof Uint8Array||O instanceof S.i.Uint8BlobList?re.return(O):O instanceof S.i.Texture2dDataOut?(j=S.v[R],j||(j=new Kd(S.i,S.K),S.v[R]=j),re.return(Yd(j,O,S.M))):re.return(void 0)})}function rx(S,R){for(var O=R.name||"$",j=[].concat(u(R.wants)),re=new S.i.StringList,oe=s(R.wants),ue=oe.next();!ue.done;ue=oe.next())re.push_back(ue.value);oe=S.i.PacketListener.implement({onResults:function(pe){for(var Se={},Fe=0;Fe<R.wants.length;++Fe)Se[j[Fe]]=pe.get(Fe);var Ge=S.listeners[O];Ge&&(S.I=om(S,Se,R.outs).then(function(gt){gt=Ge(gt);for(var ct=0;ct<R.wants.length;++ct){var Qe=Se[j[ct]];typeof Qe=="object"&&Qe.hasOwnProperty&&Qe.hasOwnProperty("delete")&&Qe.delete()}gt&&(S.I=gt)}))}}),S.j.attachMultiListener(re,oe),re.delete()}n.onResults=function(S,R){this.listeners[R||"$"]=S},U("Solution",Qd),U("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function um(S){switch(S===void 0&&(S=0),S){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function Jd(S){var R=this;S=S||{},this.h=new Qd({locateFile:S.locateFile,files:function(O){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:um(O.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(O){var j,re,oe;return N(function(ue){return ue.h==1?(j=um(O),re="third_party/mediapipe/modules/selfie_segmentation/"+j,w(ue,zf(R.h,j),2)):(oe=ue.i,R.h.overrideFile(re,oe),ue.return(!0))})}}}})}n=Jd.prototype,n.close=function(){return this.h.close(),Promise.resolve()},n.onResults=function(S){this.h.onResults(S)},n.initialize=function(){var S=this;return N(function(R){return w(R,S.h.initialize(),0)})},n.reset=function(){this.h.reset()},n.send=function(S){var R=this;return N(function(O){return w(O,R.h.send(S),0)})},n.setOptions=function(S){this.h.setOptions(S)},U("SelfieSegmentation",Jd),U("VERSION","0.1.1675465747")}).call(Da);/**
    * @license
    * Copyright 2022 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var sT=function(n,e){return sT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},sT(n,e)};function oj(n,e){function t(){this.constructor=n}sT(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Xr=function(){return Xr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},Xr.apply(this,arguments)};function fn(n,e,t,r){return new(t||(t=Promise))(function(i,a){function o(l){try{u(r.next(l))}catch(c){a(c)}}function s(l){try{u(r.throw(l))}catch(c){a(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof t?c:new t(function(f){f(c)})).then(o,s)}u((r=r.apply(n,e||[])).next())})}function hn(n,e){var t,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(f){c=[6,f],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}function b1(n){return n instanceof SVGAnimatedLength?n.baseVal.value:n}function BI(n){return fn(this,void 0,void 0,function(){var e,t;return hn(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),n instanceof cn?[4,zb(n,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=b1(n.width),e.height=b1(n.height),t=e.getContext("2d"),n instanceof ImageData?t.putImageData(n,0,0):t.drawImage(n,0,0),r.label=3;case 3:return[2,e]}})})}function sj(n){return fn(this,void 0,void 0,function(){var e,t,r,i,a,o;return hn(this,function(s){switch(s.label){case 0:return n instanceof cn?(e=n.shape.slice(0,2),t=e[0],r=e[1],i=ImageData.bind,[4,zb(n)]):[3,2];case 1:return[2,new(i.apply(ImageData,[void 0,s.sent(),r,t]))];case 2:return a=document.createElement("canvas"),o=a.getContext("2d"),a.width=b1(n.width),a.height=b1(n.height),o.drawImage(n,0,0),[2,o.getImageData(0,0,a.width,a.height)]}})})}function uj(n){return fn(this,void 0,void 0,function(){var e,t;return hn(this,function(r){switch(r.label){case 0:return n instanceof SVGImageElement||n instanceof OffscreenCanvas?[4,BI(n)]:[3,2];case 1:return t=r.sent(),[3,3];case 2:t=n,r.label=3;case 3:return e=t,[2,Ub(e,4)]}})})}function Hb(n){if(n<0||n>=256)throw new Error("Mask value must be in range [0, 255] but got "+n);if(!Number.isInteger(n))throw new Error("Mask value must be an integer but got "+n)}function lj(n){var e=n.shape[2],t=ER(n,2),r=Pe(t,[-1]);return lg(r,e)}function yy(n,e){return yt(function(){return sn(Nd(n,At(e)),"int32")})}function gRe(n,e){var t=e.shape,r=t[0],i=t[1],a=t[2];return yt(function(){var o=lj(e),s=Pi(ml(0,a,1,"int32"),1),u=sn(nn(o,s),"int32"),l=Pe(u,[r,i]),c=mt(l,At(1,"int32"));return It(function(f,h){return je(f,h)}(c,n),At(1,"int32"))})}var cj=function(){function n(e,t){this.model=e,this.outputStride=t;var r=this.model.inputs[0].shape;J(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return n.prototype.predict=function(e){var t=this;return yt(function(){var r=t.preprocessInput(sn(e,"float32")),i=Pi(r,0),a=t.model.predict(i).map(function(s){return Aa(s,[0])}),o=t.nameOutputResults(a);return{heatmapScores:as(o.heatmap),offsets:o.offsets,displacementFwd:o.displacementFwd,displacementBwd:o.displacementBwd,segmentation:o.segmentation,partHeatmaps:o.partHeatmaps,longOffsets:o.longOffsets,partOffsets:o.partOffsets}})},n.prototype.dispose=function(){this.model.dispose()},n}(),mRe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return oj(e,n),e.prototype.preprocessInput=function(t){return yt(function(){return It(En(t,127.5),1)})},e.prototype.nameOutputResults=function(t){return{offsets:t[0],segmentation:t[1],partHeatmaps:t[2],longOffsets:t[3],heatmap:t[4],displacementFwd:t[5],displacementBwd:t[6],partOffsets:t[7]}},e}(cj),Gb=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],oo=Gb.length,x1=Gb.reduce(function(n,e,t){return n[e]=t,n},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(n){var e=n[0],t=n[1];return[x1[e],x1[t]]});function FI(n,e,t){var r=n[0],i=n[1],a=e[0],o=e[1],s=t.top,u=t.bottom;return[o/(t.left+t.right+i),a/(s+u+r)]}function fj(n,e,t,r){return{y:r.get(n,e,t),x:r.get(n,e,t+oo)}}function hj(n,e,t){var r=fj(n.heatmapY,n.heatmapX,n.id,t),i=r.y,a=r.x;return{x:n.heatmapX*e+a,y:n.heatmapY*e+i}}function qM(n,e,t){return n<e?e:n>t?t:n}function XM(n,e){return{x:n.x+e.x,y:n.y+e.y}}function yRe(n,e,t){t===void 0&&(t=.3);for(var r=0,i=0,a=0;a<n.length;a++)e.keypoints[a].score>t&&(i+=1,r+=Math.pow(n[a].x-e.keypoints[a].position.x,2)+Math.pow(n[a].y-e.keypoints[a].position.y,2));return i===0?r=1/0:r/=i,r}function bRe(n,e,t,r,i,a,o){for(var s=o[0],u=o[1],l=t(n),c=l.y*r+l.x,f=i[oo*(2*c)+e],h=i[oo*(2*c+1)+e],d=n.y+f,p=n.x+h,g=0;g<a;g++){d=Math.min(d,s-1);var m=t({x:p=Math.min(p,u-1),y:d}),y=m.y*r+m.x;d+=f=i[oo*(2*y)+e],p+=h=i[oo*(2*y+1)+e]}return{x:p,y:d}}function dj(n,e,t,r,i,a,o,s,u,l){for(var c=i[0],f=i[1],h=a[0],d=a[1],p=s[0],g=s[1],m=[],y=function(I){return function($,D,N,z){var F=D[0],G=D[1],U=N[0],H=N[1],X=Math.round(((F+$.y+1)*H-1)/z);return{x:Math.round(((G+$.x+1)*U-1)/z),y:X}}(I,[c,f],[h,d],u)},b=0;b<r;b++){var _=bRe(n,b,y,o,e,l,[p,g]);m.push(_)}for(var w=-1,T=1/0,E=0;E<t.length;E++){var A=yRe(m,t[E]);A<T&&(w=E,T=A)}return w}function pj(n,e){var t=n[0],r=n[1];return[Math.round((r-1)/e+1),Math.round((t-1)/e+1)]}function vj(n,e,t,r,i,a,o,s,u,l,c){for(var f=o[0],h=o[1],d=n.shape,p=d[0],g=d[1],m=e.shape.slice(0,2),y=m[0],b=m[1],_=Pe(e,[y,b,2,oo]),w=new Float32Array(c*oo*3).fill(0),T=0;T<t.length;T++)for(var E=T*oo*3,A=t[T],I=0;I<oo;I++){var $=A.keypoints[I],D=E+3*I;w[D]=$.score,w[D+1]=$.position.y,w[D+2]=$.position.x}var N=FI([r,i],[f,h],s),z=N[0],F=N[1],G=Na(w,[c,oo,3]),U=s.top,H=s.left,X={variableNames:["segmentation","longOffsets","poses"],outputShape:[p,g],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+U+", "+F+", "+a+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+H+", "+z+", "+a+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+c+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+oo+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+u+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(i-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+U+", "+F+", "+a+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+H+", "+z+", "+a+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+l+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return $8().compileAndRun(X,[n,_,G])}function gj(){return P8()==="webgl"}function xRe(n,e,t,r,i,a,o,s,u,l,c,f){var h=o[0],d=o[1];return u===void 0&&(u=.2),l===void 0&&(l=8),c===void 0&&(c=.3),f===void 0&&(f=10),fn(this,void 0,void 0,function(){var p,g,m,y,b;return hn(this,function(_){switch(_.label){case 0:return p=t.filter(function(w){return w.score>=u}),gj()?(m=yt(function(){var w=vj(n,e,p,r,i,a,[h,d],s,l,c,f),T=to().makeTensorFromDataId(w.dataId,w.shape,w.dtype);return p.map(function(E,A){return function(I,$){return yt(function(){return sn(zg(I,At($)),"int32")})}(T,A)})}),[4,Promise.all(m.map(function(w){return w.data()}))]):[3,2];case 1:return g=_.sent(),m.forEach(function(w){return w.dispose()}),[3,5];case 2:return[4,n.data()];case 3:return y=_.sent(),[4,e.data()];case 4:b=_.sent(),g=function(w,T,E,A,I,$,D,N,z,F){var G=D[0],U=D[1];F===void 0&&(F=5);for(var H=E.map(function(ye){return new Uint8Array(A*I).fill(0)}),X=N.top,Z=N.left,Q=FI([A,I],[G,U],N),le=Q[0],ge=Q[1],be=pj([G,U],$)[0],ke=0;ke<A;ke+=1)for(var Ae=0;Ae<I;Ae+=1){var de=ke*I+Ae;if(w[de]===1){var Ce=dj({x:Ae,y:ke},T,E,F,[X,Z],[le,ge],be,[A,I],$,z);Ce>=0&&(H[Ce][de]=1)}}return H}(y,b,p,r,i,a,[h,d],s,l),_.label=5;case 5:return[2,g.map(function(w,T){return{data:w,pose:p[T],width:i,height:r}})]}})})}function _Re(n,e,t,r,i,a,o,s,u,l,c,f,h){var d=s[0],p=s[1];return l===void 0&&(l=.2),c===void 0&&(c=8),f===void 0&&(f=.3),h===void 0&&(h=10),fn(this,void 0,void 0,function(){var g,m,y,b,_,w;return hn(this,function(T){switch(T.label){case 0:return g=r.filter(function(E){return E.score>=l}),gj()?(y=yt(function(){var E=vj(n,e,g,i,a,o,[d,p],u,c,f,h),A=to().makeTensorFromDataId(E.dataId,E.shape,E.dtype);return g.map(function(I,$){return function(D,N,z){return yt(function(){return It(je(sn(zg(D,At(z)),"int32"),mt(N,1)),1)})}(A,t,$)})}),[4,Promise.all(y.map(function(E){return E.data()}))]):[3,2];case 1:return m=T.sent(),y.forEach(function(E){return E.dispose()}),[3,6];case 2:return[4,n.data()];case 3:return b=T.sent(),[4,e.data()];case 4:return _=T.sent(),[4,t.data()];case 5:w=T.sent(),m=function(E,A,I,$,D,N,z,F,G,U,H){var X=F[0],Z=F[1];H===void 0&&(H=5);for(var Q=$.map(function(Me){return new Int32Array(D*N).fill(-1)}),le=G.top,ge=G.left,be=FI([D,N],[X,Z],G),ke=be[0],Ae=be[1],de=pj([X,Z],z)[0],Ce=0;Ce<D;Ce+=1)for(var ye=0;ye<N;ye+=1){var Ee=Ce*N+ye;if(E[Ee]===1){var De=dj({x:ye,y:Ce},A,$,H,[le,ge],[ke,Ae],de,[D,N],z,U);De>=0&&(Q[De][Ee]=I[Ee])}}return Q}(b,_,w,g,i,a,o,[d,p],u,c),T.label=6;case 6:return[2,m.map(function(E,A){return{pose:g[A],data:E,height:i,width:a}})]}})})}function aw(n){return Math.floor(n/2)}var wRe=function(){function n(e,t){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=t}return n.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},n.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},n.prototype.empty=function(){return this.numberOfElements===-1},n.prototype.size=function(){return this.numberOfElements+1},n.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},n.prototype.max=function(){return this.priorityQueue[0]},n.prototype.swim=function(e){for(;e>0&&this.less(aw(e),e);)this.exchange(e,aw(e)),e=aw(e)},n.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}},n.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},n.prototype.less=function(e,t){return this.getValueAt(e)<this.getValueAt(t)},n.prototype.exchange=function(e,t){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=r},n}();function SRe(n,e,t,r,i,a){for(var o=a.shape,s=o[0],u=o[1],l=!0,c=Math.max(t-i,0),f=Math.min(t+i+1,s),h=c;h<f;++h){for(var d=Math.max(r-i,0),p=Math.min(r+i+1,u),g=d;g<p;++g)if(a.get(h,g,n)>e){l=!1;break}if(!l)break}return l}var mj=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(n){var e=n[0],t=n[1];return[x1[e],x1[t]]}),ow=mj.map(function(n){return n[1]}),KM=mj.map(function(n){return n[0]});function sw(n,e,t,r){return{y:qM(Math.round(n.y/e),0,t-1),x:qM(Math.round(n.x/e),0,r-1)}}function YM(n,e,t,r,i,a,o,s){s===void 0&&(s=2);for(var u=r.shape,l=u[0],c=u[1],f=function(b,_,w){var T=w.shape[2]/2;return{y:w.get(_.y,_.x,b),x:w.get(_.y,_.x,T+b)}}(n,sw(e.position,a,l,c),o),h=XM(e.position,f),d=0;d<s;d++){var p=sw(h,a,l,c),g=fj(p.y,p.x,t,i);h=XM({x:p.x*a,y:p.y*a},{x:g.x,y:g.y})}var m=sw(h,a,l,c),y=r.get(m.y,m.x,t);return{position:h,part:Gb[t],score:y}}function CRe(n,e,t,r,i,a){var o=e.shape[2],s=ow.length,u=new Array(o),l=n.part,c=n.score,f=hj(l,r,t);u[l.id]={score:c,part:Gb[l.id],position:f};for(var h=s-1;h>=0;--h){var d=ow[h],p=KM[h];u[d]&&!u[p]&&(u[p]=YM(h,u[d],p,e,t,r,a))}for(h=0;h<s;++h)d=KM[h],p=ow[h],u[d]&&!u[p]&&(u[p]=YM(h,u[d],p,e,t,r,i));return u}function yj(n,e,t,r){var i=t.x,a=t.y;return n.some(function(o){var s,u,l,c,f,h,d=o.keypoints[r].position;return s=a,u=i,l=d.y,c=d.x,(f=l-s)*f+(h=c-u)*h<=e})}function TRe(n,e,t){var r=t.reduce(function(i,a,o){var s=a.position,u=a.score;return yj(n,e,s,o)||(i+=u),i},0);return r/t.length}function by(n,e,t,r,i,a,o,s){o===void 0&&(o=.5),s===void 0&&(s=20);for(var u=[],l=function(p,g,m){for(var y=m.shape,b=y[0],_=y[1],w=y[2],T=new wRe(b*_*w,function(D){return D.score}),E=0;E<b;++E)for(var A=0;A<_;++A)for(var I=0;I<w;++I){var $=m.get(E,A,I);$<p||SRe(I,$,E,A,g,m)&&T.enqueue({score:$,part:{heatmapY:E,heatmapX:A,id:I}})}return T}(o,1,n),c=s*s;u.length<a&&!l.empty();){var f=l.dequeue();if(!yj(u,c,hj(f.part,i,e),f.part.id)){var h=CRe(f,n,e,i,t,r),d=TRe(u,c,h);u.push({keypoints:h,score:d})}}return u}var Op,ERe=[-123.15,-115.9,-103.06],kRe=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return oj(e,n),e.prototype.preprocessInput=function(t){return mt(t,ERe)},e.prototype.nameOutputResults=function(t){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5];return{offsets:s,segmentation:t[6],partHeatmaps:u,longOffsets:o,heatmap:a,displacementFwd:i,displacementBwd:r,partOffsets:t[7]}},e}(cj),ZM="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",QM="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function Yp(n){if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)return function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")}(n);if(typeof ImageData<"u"&&n instanceof ImageData)return[n.height,n.width];if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)return function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]}(n);if(n instanceof cn)return[n.shape[0],n.shape[1]];throw new Error("error: Unknown input type: "+n+".")}function JM(n,e){return function(t,r){return(t-1)%r==0}(n,e)?n:Math.floor(n/e)*e+1}var Zp={low:"low",medium:"medium",high:"high",full:"full"},ARe=((Op={})[Zp.low]=.25,Op[Zp.medium]=.5,Op[Zp.high]=.75,Op[Zp.full]=1,Op);function xy(n,e,t){var r=t[0],i=t[1],a=function(o){if(typeof o=="string"){var s=ARe[o];return J(typeof s=="number",function(){return"string value of inputResolution must be one of "+Object.values(Zp).join(",")+" but was "+o+"."}),s}return J(typeof o=="number"&&o<=2&&o>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+o}),o}(n);return[JM(r*a,e),JM(i*a,e)]}function lh(n,e,t,r,i){var a=e[0],o=e[1],s=t[0],u=t[1],l=r[0],c=l[0],f=l[1],h=r[1],d=h[0],p=h[1];return i===void 0&&(i=!1),yt(function(){var g=of.resizeBilinear(n,[s,u],!0);return i&&(g=as(g)),function(m,y,b){var _=y[0],w=y[1],T=b[0],E=T[0],A=T[1],I=b[1],$=I[0],D=I[1];return yt(function(){var N=Pi(m);return Aa(of.cropAndResize(N,[[E/(_+E+A-1),$/(w+$+D-1),(E+_-1)/(_+E+A-1),($+w-1)/(w+$+D-1)]],[0],[_,w]),[0])})}(g,[a,o],[[c,f],[d,p]])})}function _y(n,e){var t=e[0],r=e[1],i=Yp(n),a=i[0],o=i[1],s=r/t,u=[0,0,0,0],l=u[0],c=u[1],f=u[2],h=u[3];o/a<s?(l=0,c=0,f=Math.round(.5*(s*a-o)),h=Math.round(.5*(s*a-o))):(l=Math.round(.5*(1/s*o-a)),c=Math.round(.5*(1/s*o-a)),f=0,h=0);var d=yt(function(){var p=function(g){return g instanceof cn?g:Ub(g)}(n);return p=YR(p,[[l,c],[f,h],[0,0]]),of.resizeBilinear(p,[t,r])});return{resized:d,padding:{top:l,left:f,right:h,bottom:c}}}function wy(n){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,Promise.all(n.map(function(t){return t.buffer()}))]})})}function Sy(n,e,t,r,i){var a=e[0],o=e[1],s=t[0],u=t[1],l=function(c,f,h,d,p){return d===void 0&&(d=0),p===void 0&&(p=0),h===1&&f===1&&d===0&&p===0?c:c.map(function(g){return function(m,y,b,_,w){return _===void 0&&(_=0),w===void 0&&(w=0),{score:m.score,keypoints:m.keypoints.map(function(T){var E=T.score,A=T.part,I=T.position;return{score:E,part:A,position:{x:I.x*b+w,y:I.y*y+_}}})}}(g,f,h,d,p)})}(n,(a+r.top+r.bottom)/s,(o+r.left+r.right)/u,-r.top,-r.left);return i?function(c,f){return f<=0?c:c.map(function(h){return function(d,p){return{score:d.score,keypoints:d.keypoints.map(function(g){var m=g.score,y=g.part,b=g.position;return{score:m,part:y,position:{x:p-1-b.x,y:b.y}}})}}(h,f)})}(l,o):l}var eB={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},tB=["MobileNetV1","ResNet50"],nB={MobileNetV1:[8,16,32],ResNet50:[32,16]},rB={MobileNetV1:[.5,.75,1],ResNet50:[1]},iB=[1,2,4],Cy={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Ty={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function aB(n){var e=n.segmentationThreshold,t=n.maxDetections,r=n.scoreThreshold,i=n.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(t<=0)throw new Error("Invalid maxDetections "+t+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(i<=0)throw new Error("Invalid nmsRadius "+i+".")}function oB(n){var e=n.segmentationThreshold,t=n.maxDetections,r=n.scoreThreshold,i=n.nmsRadius,a=n.minKeypointScore,o=n.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(t<=0)throw new Error("Invalid maxDetections "+t+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(i<=0)throw new Error("Invalid nmsRadius "+i+".");if(a<0||a>1)throw new Error("Invalid minKeypointScore "+a+".Should be in range [0.0, 1.0]");if(o<=0||o>20)throw new Error("Invalid refineSteps "+o+".Should be in range [1, 20]")}var bj=function(){function n(e){this.baseModel=e}return n.prototype.predictForPersonSegmentation=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},n.prototype.predictForPersonSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,partHeatmapLogits:t.partHeatmaps,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd}},n.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var t=this.baseModel.predict(e);return{segmentLogits:t.segmentation,longOffsets:t.longOffsets,heatmapScores:t.heatmapScores,offsets:t.offsets,displacementFwd:t.displacementFwd,displacementBwd:t.displacementBwd,partHeatmaps:t.partHeatmaps}},n.prototype.segmentPersonActivation=function(e,t,r){var i=this;r===void 0&&(r=.5);var a=Yp(e),o=a[0],s=a[1],u=xy(t,this.baseModel.outputStride,[o,s]),l=_y(e,u),c=l.resized,f=l.padding,h=yt(function(){var b=i.predictForPersonSegmentation(c),_=b.segmentLogits,w=b.heatmapScores,T=b.offsets,E=b.displacementFwd,A=b.displacementBwd,I=c.shape,$=I[0],D=I[1],N=lh(_,[o,s],[$,D],[[f.top,f.bottom],[f.left,f.right]],!0);return{segmentation:yy(Aa(N),r),heatmapScores:w,offsets:T,displacementFwd:E,displacementBwd:A}}),d=h.segmentation,p=h.heatmapScores,g=h.offsets,m=h.displacementFwd,y=h.displacementBwd;return c.dispose(),{segmentation:d,heatmapScores:p,offsets:g,displacementFwd:m,displacementBwd:y,padding:f,internalResolutionHeightAndWidth:u}},n.prototype.segmentPerson=function(e,t){return t===void 0&&(t=Cy),fn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,p,g,m,y,b,_,w;return hn(this,function(T){switch(T.label){case 0:return aB(t=Xr(Xr({},Cy),t)),r=this.segmentPersonActivation(e,t.internalResolution,t.segmentationThreshold),i=r.segmentation,a=r.heatmapScores,o=r.offsets,s=r.displacementFwd,u=r.displacementBwd,l=r.padding,c=r.internalResolutionHeightAndWidth,f=i.shape,h=f[0],d=f[1],[4,i.data()];case 1:return p=T.sent(),i.dispose(),[4,wy([a,o,s,u])];case 2:return g=T.sent(),m=g[0],y=g[1],b=g[2],_=g[3],w=Sy(w=by(m,y,b,_,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[h,d],c,l,!1),a.dispose(),o.dispose(),s.dispose(),u.dispose(),[2,{height:h,width:d,data:p,allPoses:w}]}})})},n.prototype.segmentMultiPerson=function(e,t){return t===void 0&&(t=Ty),fn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,p,g,m,y,b,_,w,T,E,A,I=this;return hn(this,function($){switch($.label){case 0:return oB(t=Xr(Xr({},Ty),t)),r=Yp(e),i=r[0],a=r[1],o=xy(t.internalResolution,this.baseModel.outputStride,[i,a]),s=_y(e,o),u=s.resized,l=s.padding,c=yt(function(){var D,N=I.predictForMultiPersonInstanceSegmentationAndPart(u),z=N.segmentLogits,F=N.longOffsets,G=N.heatmapScores,U=N.offsets,H=N.displacementFwd,X=N.displacementBwd,Z=lh(z,[i,a],o,[[l.top,l.bottom],[l.left,l.right]],!0);return D=F,{segmentation:yy(Aa(Z),t.segmentationThreshold),longOffsets:D,heatmapScoresRaw:G,offsetsRaw:U,displacementFwdRaw:H,displacementBwdRaw:X}}),f=c.segmentation,h=c.longOffsets,d=c.heatmapScoresRaw,p=c.offsetsRaw,g=c.displacementFwdRaw,m=c.displacementBwdRaw,[4,wy([d,p,g,m])];case 1:return y=$.sent(),b=y[0],_=y[1],w=y[2],T=y[3],E=Sy(E=by(b,_,w,T,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[i,a],o,l,!1),[4,xRe(f,h,E,i,a,this.baseModel.outputStride,o,l,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return A=$.sent(),u.dispose(),f.dispose(),h.dispose(),d.dispose(),p.dispose(),g.dispose(),m.dispose(),[2,A]}})})},n.prototype.segmentPersonPartsActivation=function(e,t,r){var i=this;r===void 0&&(r=.5);var a=Yp(e),o=a[0],s=a[1],u=xy(t,this.baseModel.outputStride,[o,s]),l=_y(e,u),c=l.resized,f=l.padding,h=yt(function(){var b=i.predictForPersonSegmentationAndPart(c),_=b.segmentLogits,w=b.partHeatmapLogits,T=b.heatmapScores,E=b.offsets,A=b.displacementFwd,I=b.displacementBwd,$=c.shape,D=$[0],N=$[1],z=lh(_,[o,s],[D,N],[[f.top,f.bottom],[f.left,f.right]],!0),F=lh(w,[o,s],[D,N],[[f.top,f.bottom],[f.left,f.right]],!0);return{partSegmentation:gRe(yy(Aa(z),r),F),heatmapScores:T,offsets:E,displacementFwd:A,displacementBwd:I}}),d=h.partSegmentation,p=h.heatmapScores,g=h.offsets,m=h.displacementFwd,y=h.displacementBwd;return c.dispose(),{partSegmentation:d,heatmapScores:p,offsets:g,displacementFwd:m,displacementBwd:y,padding:f,internalResolutionHeightAndWidth:u}},n.prototype.segmentPersonParts=function(e,t){return t===void 0&&(t=Cy),fn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,p,g,m,y,b,_,w;return hn(this,function(T){switch(T.label){case 0:return aB(t=Xr(Xr({},Cy),t)),r=this.segmentPersonPartsActivation(e,t.internalResolution,t.segmentationThreshold),i=r.partSegmentation,a=r.heatmapScores,o=r.offsets,s=r.displacementFwd,u=r.displacementBwd,l=r.padding,c=r.internalResolutionHeightAndWidth,f=i.shape,h=f[0],d=f[1],[4,i.data()];case 1:return p=T.sent(),i.dispose(),[4,wy([a,o,s,u])];case 2:return g=T.sent(),m=g[0],y=g[1],b=g[2],_=g[3],w=Sy(w=by(m,y,b,_,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[h,d],c,l,!1),a.dispose(),o.dispose(),s.dispose(),u.dispose(),[2,{height:h,width:d,data:p,allPoses:w}]}})})},n.prototype.segmentMultiPersonParts=function(e,t){return t===void 0&&(t=Ty),fn(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,d,p,g,m,y,b,_,w,T,E,A,I,$=this;return hn(this,function(D){switch(D.label){case 0:return oB(t=Xr(Xr({},Ty),t)),r=Yp(e),i=r[0],a=r[1],o=xy(t.internalResolution,this.baseModel.outputStride,[i,a]),s=_y(e,o),u=s.resized,l=s.padding,c=yt(function(){var N=$.predictForMultiPersonInstanceSegmentationAndPart(u),z=N.segmentLogits,F=N.longOffsets,G=N.heatmapScores,U=N.offsets,H=N.displacementFwd,X=N.displacementBwd,Z=N.partHeatmaps,Q=lh(z,[i,a],o,[[l.top,l.bottom],[l.left,l.right]],!0),le=lh(Z,[i,a],o,[[l.top,l.bottom],[l.left,l.right]],!0),ge=F,be=yy(Aa(Q),t.segmentationThreshold),ke=function(Ae){var de=Ae.shape,Ce=de[0],ye=de[1],Ee=de[2];return yt(function(){var De=lj(Ae),Me=Pi(ml(0,Ee,1,"int32"),1),Ie=sn(nn(De,Me),"int32");return Pe(Ie,[Ce,ye])})}(le);return{segmentation:be,longOffsets:ge,heatmapScoresRaw:G,offsetsRaw:U,displacementFwdRaw:H,displacementBwdRaw:X,partSegmentation:ke}}),f=c.segmentation,h=c.longOffsets,d=c.heatmapScoresRaw,p=c.offsetsRaw,g=c.displacementFwdRaw,m=c.displacementBwdRaw,y=c.partSegmentation,[4,wy([d,p,g,m])];case 1:return b=D.sent(),_=b[0],w=b[1],T=b[2],E=b[3],A=Sy(A=by(_,w,T,E,this.baseModel.outputStride,t.maxDetections,t.scoreThreshold,t.nmsRadius),[i,a],o,l,!1),[4,_Re(f,h,y,A,i,a,this.baseModel.outputStride,o,l,t.scoreThreshold,t.refineSteps,t.minKeypointScore,t.maxDetections)];case 2:return I=D.sent(),u.dispose(),f.dispose(),h.dispose(),d.dispose(),p.dispose(),g.dispose(),m.dispose(),y.dispose(),[2,I]}})})},n.prototype.dispose=function(){this.baseModel.dispose()},n}();function RRe(n){return fn(this,void 0,void 0,function(){var e,t,r,i,a,o;return hn(this,function(s){switch(s.label){case 0:if(e=n.outputStride,t=n.quantBytes,r=n.multiplier,tj==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return i=function(u,l,c){var f={1:"100",.75:"075",.5:"050"},h="model-stride"+u+".json";return c===4?QM+"float/"+f[l]+"/"+h:QM+"quant"+c+"/"+f[l]+"/"+h}(e,r,t),[4,MI(n.modelUrl||i)];case 1:return a=s.sent(),o=new mRe(a,e),[2,new bj(o)]}})})}function IRe(n){return fn(this,void 0,void 0,function(){var e,t,r,i,a;return hn(this,function(o){switch(o.label){case 0:if(e=n.outputStride,t=n.quantBytes,tj==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=function(s,u){var l="model-stride"+s+".json";return u===4?ZM+"float/"+l:ZM+"quant"+u+"/"+l}(e,t),[4,MI(n.modelUrl||r)];case 1:return i=o.sent(),a=new kRe(i,e),[2,new bj(a)]}})})}function PRe(n){return n===void 0&&(n=eB),fn(this,void 0,void 0,function(){return hn(this,function(e){return(n=function(t){if((t=t||eB).architecture==null&&(t.architecture="MobileNetV1"),tB.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+tB);if(t.outputStride==null&&(t.outputStride=16),nB[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+nB[t.architecture]+" for architecture "+t.architecture+".");if(t.multiplier==null&&(t.multiplier=1),rB[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+rB[t.architecture]+" for architecture "+t.architecture+".");if(t.quantBytes==null&&(t.quantBytes=4),iB.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+iB+" for architecture "+t.architecture+".");return t}(n)).architecture==="ResNet50"?[2,IRe(n)]:n.architecture==="MobileNetV1"?[2,RRe(n)]:[2,null]})})}var uT=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],sB=function(){function n(e){this.mask=e}return n.prototype.toCanvasImageSource=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,BI(this.mask)]})})},n.prototype.toImageData=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,this.mask]})})},n.prototype.toTensor=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,uj(this.mask)]})})},n.prototype.getUnderlyingType=function(){return"imagedata"},n}();function DRe(n){if(Hb(n),n!==255)throw new Error("Foreground id must be 255 but got "+n);return"person"}function $Re(n){if(Hb(n),n>=uT.length)throw new Error("Invalid body part value "+n);return uT[n]}var NRe=function(){function n(e){this.bodyPixModel=e}return n.prototype.segmentPeople=function(e,t){return fn(this,void 0,void 0,function(){var r,i,a,o;return hn(this,function(s){switch(s.label){case 0:return e instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(e,0,0),e=r),t.segmentBodyParts?t.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(e,t)]:[3,2]:[3,5];case 1:return a=s.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(e,t)];case 3:a=[s.sent()],s.label=4;case 4:return i=a.map(function(u){var l=u.data,c=u.width,f=u.height,h=new Uint8ClampedArray(c*f*4).fill(0);return l.forEach(function(d,p){d===-1?(h[4*p]=uT.length,h[4*p+3]=0):(h[4*p]=d,h[4*p+3]=255)}),{maskValueToLabel:$Re,mask:new sB(new ImageData(h,c,f))}}),[3,10];case 5:return t.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(e,t)]:[3,7];case 6:return o=s.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(e,t)];case 8:o=[s.sent()],s.label=9;case 9:i=o.map(function(u){var l=u.data,c=u.width,f=u.height,h=new Uint8ClampedArray(c*f*4).fill(0);return l.forEach(function(d,p){d===0?(h[4*p]=0,h[4*p+3]=0):(h[4*p]=255,h[4*p+3]=255)}),{maskValueToLabel:DRe,mask:new sB(new ImageData(h,c,f))}}),s.label=10;case 10:return[2,i]}})})},n.prototype.dispose=function(){this.bodyPixModel.dispose()},n.prototype.reset=function(){},n}();function ORe(n){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,PRe(n).then(function(t){return new NRe(t)})]})})}var uB={runtime:"mediapipe",modelType:"general"},LRe=function(){function n(e){this.mask=e}return n.prototype.toCanvasImageSource=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,this.mask]})})},n.prototype.toImageData=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,sj(this.mask)]})})},n.prototype.toTensor=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,uj(this.mask)]})})},n.prototype.getUnderlyingType=function(){return"canvasimagesource"},n}();function MRe(n){return Hb(n),"person"}var BRe=function(){function n(e){var t,r=this;this.selfieMode=!1,this.selfieSegmentationSolution=new vRe.SelfieSegmentation({locateFile:function(i,a){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:a+"/"+i}}),e.modelType==="landscape"?t=1:t=0,this.selfieSegmentationSolution.setOptions({modelSelection:t,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(i){r.segmentation=[{maskValueToLabel:MRe,mask:new LRe(i.segmentationMask)}]})}return n.prototype.segmentPeople=function(e,t){return fn(this,void 0,void 0,function(){var r,i;return hn(this,function(a){switch(a.label){case 0:return t&&t.flipHorizontal&&t.flipHorizontal!==this.selfieMode&&(this.selfieMode=t.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),e instanceof cn?(i=ImageData.bind,[4,zb(e)]):[3,2];case 1:return r=new(i.apply(ImageData,[void 0,a.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,a.label=3;case 3:return e=r,[4,this.selfieSegmentationSolution.send({image:e})];case 4:return a.sent(),[2,this.segmentation]}})})},n.prototype.dispose=function(){this.selfieSegmentationSolution.close()},n.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},n.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},n}();function FRe(n){return fn(this,void 0,void 0,function(){var e,t;return hn(this,function(r){switch(r.label){case 0:return e=function(i){if(i==null)return Xr({},uB);var a=Xr({},i);return a.runtime="mediapipe",a.modelType==null&&(a.modelType=uB.modelType),a}(n),[4,(t=new BRe(e)).initialize()];case 1:return r.sent(),[2,t]}})})}function VRe(n,e,t,r){var i=n.width,a=n.height,o=r?-1:1,s=Math.cos(n.rotation),u=Math.sin(n.rotation),l=n.xCenter,c=n.yCenter,f=1/e,h=1/t,d=new Array(16);return d[0]=i*s*o*f,d[1]=-a*u*f,d[2]=0,d[3]=(-.5*i*s*o+.5*a*u+l)*f,d[4]=i*u*o*h,d[5]=a*s*h,d[6]=0,d[7]=(-.5*a*s-.5*i*u*o+c)*h,d[8]=0,d[9]=0,d[10]=i*f,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,function(p){if(p.length!==16)throw new Error("Array length must be 16 but got "+p.length);return[[p[0],p[1],p[2],p[3]],[p[4],p[5],p[6],p[7]],[p[8],p[9],p[10],p[11]],[p[12],p[13],p[14],p[15]]]}(d)}function xj(n){return n instanceof cn?{height:n.shape[0],width:n.shape[1]}:{height:n.height,width:n.width}}function uw(n,e){J(n.width!==0,function(){return e+" width cannot be 0."}),J(n.height!==0,function(){return e+" height cannot be 0."})}function zRe(n,e){var t=function(r,i,a,o){var s=i-r,u=o-a;if(s===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var l=u/s;return{scale:l,offset:a-r*l}}(0,255,e[0],e[1]);return yt(function(){return mt(je(n,t.scale),t.offset)})}function URe(n,e,t){var r=e.outputTensorSize,i=e.keepAspectRatio,a=e.borderMode,o=e.outputTensorFloatRange,s=xj(n),u=function(h,d){return d?{xCenter:d.xCenter*h.width,yCenter:d.yCenter*h.height,width:d.width*h.width,height:d.height*h.height,rotation:d.rotation}:{xCenter:.5*h.width,yCenter:.5*h.height,width:h.width,height:h.height,rotation:0}}(s,t),l=function(h,d,p){if(p===void 0&&(p=!1),!p)return{top:0,left:0,right:0,bottom:0};var g=d.height,m=d.width;uw(d,"targetSize"),uw(h,"roi");var y,b,_=g/m,w=h.height/h.width,T=0,E=0;return _>w?(y=h.width,b=h.width*_,E=(1-w/_)/2):(y=h.height/_,b=h.height,T=(1-_/w)/2),h.width=y,h.height=b,{top:E,left:T,right:T,bottom:E}}(u,r,i),c=VRe(u,s.width,s.height,!1),f=yt(function(){var h,d=(h=n)instanceof cn?h:Ub(h),p=Uc(function(y,b,_){return uw(_,"inputResolution"),[1/_.width*y[0][0]*b.width,1/_.height*y[0][1]*b.width,y[0][3]*b.width,1/_.width*y[1][0]*b.height,1/_.height*y[1][1]*b.height,y[1][3]*b.height,0,0]}(c,s,r),[1,8]),g=a==="zero"?"constant":"nearest",m=of.transform(Pi(sn(d,"float32")),p,"bilinear",g,0,[r.height,r.width]);return o!=null?zRe(m,o):m});return{imageTensor:f,padding:l,transformationMatrix:c}}function WRe(n,e,t){return yt(function(){var r=Aa(n,[0]),i=r.shape[2];if(i===1){var a=r;switch(e.activation){case"none":break;case"sigmoid":a=as(a);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+e.activation+")")}var o=t?of.resizeBilinear(a,[t.height,t.width]):a;return Aa(o,[2])}throw new Error("Unsupported number of tensor channels "+i)})}var lB={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},cB={flipHorizontal:!1},HRe={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},GRe={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},jRe={activation:"none"},qRe=function(){function n(e){this.mask=e}return n.prototype.toCanvasImageSource=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,BI(this.mask)]})})},n.prototype.toImageData=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,sj(this.mask)]})})},n.prototype.toTensor=function(){return fn(this,void 0,void 0,function(){return hn(this,function(e){return[2,this.mask]})})},n.prototype.getUnderlyingType=function(){return"tensor"},n}();function XRe(n){return Hb(n),"person"}var _1,KRe=function(){function n(e,t){this.modelType=e,this.model=t}return n.prototype.segmentPeople=function(e,t){return fn(this,void 0,void 0,function(){var r,i=this;return hn(this,function(a){return t=function(o){if(o==null)return Xr({},cB);var s=Xr({},o);return s.flipHorizontal==null&&(s.flipHorizontal=cB.flipHorizontal),s}(t),e==null?(this.reset(),[2,[]]):(r=yt(function(){var o=URe(e,i.modelType==="general"?HRe:GRe).imageTensor,s=xn(i.model.predict(o),[0,0,0,1],-1),u=xj(e),l=WRe(s,jRe,u),c=Pi(l,2),f=Ef(c,[[0,0],[0,0],[0,1]]);return XR(f,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:XRe,mask:new qRe(r)}]])})})},n.prototype.dispose=function(){this.model.dispose()},n.prototype.reset=function(){},n}();function YRe(n){return fn(this,void 0,void 0,function(){var e,t,r;return hn(this,function(i){switch(i.label){case 0:return e=function(a){if(a==null)return Xr({},lB);var o=Xr({},a);if(o.runtime="tfjs",o.modelType==null&&(o.modelType=lB.modelType),o.modelType!=="general"&&o.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+o.modelType);return o.modelUrl==null&&(o.modelType==="general"?o.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":o.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),o}(n),t=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,MI(e.modelUrl,{fromTFHub:t})];case 1:return r=i.sent(),[2,new KRe(e.modelType,r)]}})})}function _Ve(n,e){return fn(this,void 0,void 0,function(){var t,r;return hn(this,function(i){switch(n){case _1.MediaPipeSelfieSegmentation:if(t=void 0,(r=e)!=null){if(r.runtime==="tfjs")return[2,YRe(r)];if(r.runtime==="mediapipe")return[2,FRe(r)];t=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+t);case _1.BodyPix:return[2,ORe(r=e)];default:throw new Error(n+" is not a supported model name.")}})})}(function(n){n.BodyPix="BodyPix",n.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(_1||(_1={}));function ZRe(n,e,t,r,i,a){a===void 0&&(a={r:0,g:255,b:255,a:255});for(var o=-i;o<=i;o++)for(var s=-i;s<=i;s++)if(o!==0&&s!==0){var u=(e+o)*r+(t+s);n[4*u+0]=a.r,n[4*u+1]=a.g,n[4*u+2]=a.b,n[4*u+3]=a.a}}function QRe(n,e,t,r,i,a,o){o===void 0&&(o=1);for(var s=0,u=-o;u<=o;u++)for(var l=-o;l<=o;l++)if(u!==0&&l!==0){var c=(e+u)*r+(t+l);(!i[n[4*c]]||n[4*c+3]<a)&&(s+=1)}return s>0}function wVe(n,e,t,r,i,a){return e===void 0&&(e={r:0,g:0,b:0,a:0}),t===void 0&&(t={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),i===void 0&&(i=.5),a===void 0&&(a=Array.from(Array(256).keys())),fn(this,void 0,void 0,function(){var o,s,u,l,c,f,h,d,p,g,m,y,b,_;return hn(this,function(w){switch(w.label){case 0:return(o=Array.isArray(n)?n:[n]).length===0?[2,null]:[4,Promise.all(o.map(function(T){return T.mask.toImageData()}))];case 1:for(s=w.sent(),u=s[0],l=u.width,c=u.height,f=new Uint8ClampedArray(l*c*4),h=Math.round(255*i),d=new Array(256).fill(!1),a.forEach(function(T){return d[T]=!0}),p=0;p<c;p++)for(g=0;g<l;g++)for(f[4*(m=p*l+g)+0]=t.r,f[4*m+1]=t.g,f[4*m+2]=t.b,f[4*m+3]=t.a,y=0,b=s;y<b.length;y++)_=b[y],d[_.data[4*m]]&&_.data[4*m+3]>=h&&(f[4*m]=e.r,f[4*m+1]=e.g,f[4*m+2]=e.b,f[4*m+3]=e.a,r&&p-1>=0&&p+1<c&&g-1>=0&&g+1<l&&QRe(_.data,p,g,l,d,h)&&ZRe(f,p,g,l,1));return[2,new ImageData(f,l,c)]}})})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cc={},Ey={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function JRe(n,e){Cc[n]=e}function po(n,e){if(!(n in Cc)||e!=null){const r=tIe(n,e);if(r!==null)Cc[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=Cc[n];return t==null||t.isContextLost()?(delete Cc[n],po(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Cc[n])}function eIe(n){if(typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function tIe(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??eIe(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Cc[n]},!1),xe().getBool("SOFTWARE_WEBGL_ENABLED")&&(Ey.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",Ey)||t.getContext("experimental-webgl",Ey):t.getContext("webgl2",Ey)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dg;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(dg||(dg={}));var ea;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(ea||(ea={}));var Cr;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Cr||(Cr={}));function Gg(n,e){return[e,n]}function nIe(n,e){return n*e}function ky(n){const e=ze(n),t=Math.ceil(e/4);return i1(t)}function Ld(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function rIe(n,e){const[t,r]=Ld(n,e);return t*r*4}function VI(n,e){const t=n;let r,i,a,o,s,u,l,c,f,h;return xe().getNumber("WEBGL_VERSION")===2?(r=t.R32F,i=t.R16F,a=t.RGBA16F,o=t.RGBA32F,s=t.RED,l=4,c=1,f=t.HALF_FLOAT,h=t.FLOAT,u=t.RGBA8):(r=n.RGBA,i=n.RGBA,a=n.RGBA,o=t.RGBA,s=n.RGBA,l=4,c=4,f=e!=null?e.HALF_FLOAT_OES:null,h=n.FLOAT,u=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:u,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Je(n,e){const t=e();return xe().getBool("DEBUG")&&iIe(n),t}function iIe(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+uIe(n,e))}const aIe=596e-10,oIe=65504;function sIe(n){return!!(xe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||aIe<Math.abs(n)&&Math.abs(n)<oIe)}function uIe(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Ay(n,e){return gu(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function lIe(n,e){const t=gu(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Je(n,()=>n.shaderSource(t,e)),Je(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function cIe(n,e){const t=gu(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Je(n,()=>n.shaderSource(t,e)),Je(n,()=>n.compileShader(t)),xe().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw _j(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const fIe=/ERROR: [0-9]+:([0-9]+):/g;function _j(n,e){const t=fIe.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],i=n.split(`
`),a=i.length.toString().length+2,o=i.map((f,h)=>Fc((h+1).toString(),a)+f);let s=0;for(let f=0;f<o.length;f++)s=Math.max(o[f].length,s);const u=o.slice(0,r-1),l=o.slice(r-1,r),c=o.slice(r);console.log(u.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Fc(l[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function hIe(n){return gu(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function dIe(n,e){if(Je(n,()=>n.linkProgram(e)),!xe().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function lw(n,e){if(Je(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function pIe(n,e){const t=gu(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Je(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),Je(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function vIe(n,e){const t=gu(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return Je(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),Je(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function gIe(n){return gu(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function mIe(n,e){const t=xe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,i=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function yIe(n){return gu(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function fB(n,e,t,r,i,a,o){const s=n.getAttribLocation(e,t);return s===-1?!1:(Je(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),Je(n,()=>n.vertexAttribPointer(s,i,n.FLOAT,!1,a,o)),Je(n,()=>n.enableVertexAttribArray(s)),!0)}function bIe(n,e,t){CIe(n,t),Je(n,()=>n.activeTexture(n.TEXTURE0+t)),Je(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function xIe(n,e,t){return gu(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function _Ie(n,e,t){return n.getUniformLocation(e,t)}function wIe(n,e,t,r){Je(n,()=>bIe(n,e,r)),Je(n,()=>n.uniform1i(t,r))}function cw(n,e,t){Je(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),Je(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function hB(n,e){Je(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),Je(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function Ry(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+SIe(n,e))}function SIe(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function gu(n,e,t){const r=Je(n,()=>e());if(r==null)throw new Error(t);return r}function CIe(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const i=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${i}.`)}}function yd(n,e=2){return ze(n.slice(0,n.length-e))}function bd(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function Iy(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[yd(n),...bd(n)]),e}function TIe(n,e=!1){let t=xe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=xe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&xe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((s,u)=>u>=n.length-2?_b(n[u]):n[u]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=pu(n).newShape);let i=ze(n),a=null;n.length<=1&&i<=t?a=[1,i]:n.length===2&&n[0]<=t&&n[1]<=t?a=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?a=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?a=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?a=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(a=[n[0],n[1]*n[2]*n[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const s=yd(n);let u=2,l=2;n.length&&([u,l]=bd(n)),i=s*(u/2)*(l/2),a=i1(i).map(c=>c*2)}else a=i1(i);return a}function Py(n){return n%2===0}function w1(n,e){if(n=n.slice(-2),e=e.slice(-2),Un(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||Py(t)&&Py(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Py(n[0])&&Py(e[0])}let fw,hw;function EIe(n){if(fw==null){const e=po(n);fw=e.getParameter(e.MAX_TEXTURE_SIZE)}return fw}function kIe(n){if(hw==null){const e=po(n);hw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,hw)}function AIe(n){if(n===0)return 0;let e;const t=po(n);return Ia(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:Ia(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ia(n,e){return n.getExtension(e)!=null}function dB(n){try{if(po(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function RIe(n){if(n===0)return!1;const e=po(n);if(n===1){if(!Ia(e,"OES_texture_float"))return!1}else if(!Ia(e,"EXT_color_buffer_float"))return!1;return lT(e)}function IIe(n){if(n===0)return!1;const e=po(n);if(n===1){if(!Ia(e,"OES_texture_float")||!Ia(e,"WEBGL_color_buffer_float"))return!1}else{if(Ia(e,"EXT_color_buffer_float"))return lT(e);const r="EXT_color_buffer_half_float";if(Ia(e,r)){const i=e.getExtension(r);return PIe(e,i)}return!1}return lT(e)}function lT(n){const e=VI(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);const r=1,i=1;n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(a),o}function PIe(n,e){const t=VI(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);const i=1,a=1;n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,i,a,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const s=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(o),s}function DIe(n){return n!==2?!1:po(n).fenceSync!=null}function jg(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&J(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ut=xe();ut.registerFlag("HAS_WEBGL",()=>ut.getNumber("WEBGL_VERSION")>0);ut.registerFlag("WEBGL_VERSION",()=>dB(2)?2:dB(1)?1:0);ut.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ut.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ut.get("WEBGL_VERSION")===2);ut.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ut.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ut.registerFlag("WEBGL_PACK",()=>ut.getBool("HAS_WEBGL"));ut.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_CLIP",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_PACK_REDUCE",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_LAZILY_UNPACK",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_CONV_IM2COL",()=>ut.getBool("WEBGL_PACK"));ut.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>EIe(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>kIe(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=ut.getNumber("WEBGL_VERSION");return n===0?0:AIe(n)});ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ut.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!yR());ut.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>RIe(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ut.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ut.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ut.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>IIe(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_FENCE_API_ENABLED",()=>DIe(ut.getNumber("WEBGL_VERSION")));ut.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ut.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ut.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)});ut.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>yR()?1:-1,n=>{if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)});ut.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ut.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ut.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ut.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ut.registerFlag("WEBGL_EXP_CONV",()=>!1);ut.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ut.getBool("IS_TEST"));ut.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ut.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ut.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ut.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ii(){let n,e,t,r,i,a,o,s,u,l;return xe().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=xe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(n,e,t="index"){const r=mr(e);return r.map((i,a)=>{const o=`int ${n[a]} = ${t} / ${i}`,s=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${i}`:`index -= ${n[a]} * ${i}`;return`${o}; ${s};`}).join("")}function jb(n,e,t="index"){const r=mr(e);return r.map((i,a)=>{const o=`int ${n[a]} = ${t} / outShapeStrides[${a}]`,s=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * outShapeStrides[${a}]`:`index -= ${n[a]} * outShapeStrides[${a}]`;return`${o}; ${s};`}).join("")}function $Ie(n,e){const t=n.length,r=n.map(a=>`${e}[${a}]`),i=new Array(t-1);i[t-2]=r[t-1];for(let a=t-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function NIe(n,e,t="index"){const r=n.map((a,o)=>o),i=$Ie(r,e);return i.map((a,o)=>{const s=`int ${n[o]} = ${t} / ${i[o]}`,u=o===i.length-1?`int ${n[o+1]} = ${t} - ${n[o]} * ${i[o]}`:`index -= ${n[o]} * ${i[o]}`;return`${s}; ${u};`}).join("")}function zI(n){const e=mr(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function UI(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const wj=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Sj}=ej;function OIe(n,e,t){const r=[];if(n.forEach(d=>{const p=ze(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),t.enableShapeUniforms){const{uniformShape:g}=WI(t.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`);break}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});const i=r.join(`
`),a=n.map(d=>LIe(d,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),o=e.texShape,s=ii(),u=FIe(s);let l,c,f=UIe(s);return e.isPacked?(l=MIe(e.logicalShape,o,t.enableShapeUniforms),c=zIe(s)):(l=BIe(e.logicalShape,o,t.enableShapeUniforms),c=VIe(s)),t.packedInputs&&(f+=jIe),[f,u,c,i,l,a,t.userCode].join(`
`)}function Md(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return iPe(n,e);case 1:return oPe(n,e);case 2:return uPe(n,e);case 3:return cPe(n,e);case 4:return hPe(n,e);case 5:return dPe(n);case 6:return pPe(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function Cj(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return rPe(n);case 1:return aPe(n,e);case 2:return sPe(n,e);case 3:return lPe(n,e);default:return fPe(n,e)}}function LIe(n,e,t=!1,r){let i="";t?i+=Cj(n,r):i+=Md(n,r);const a=n.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(t?i+=vPe(n,e):i+=gPe(n,e)),i}function MIe(n,e,t){switch(n.length){case 0:return Tj();case 1:return qIe(n,e,t);case 2:return tPe(n,e,t);case 3:return KIe(n,e,t);default:return ZIe(n,e,t)}}function BIe(n,e,t){switch(n.length){case 0:return Tj();case 1:return XIe(n,e,t);case 2:return nPe(n,e,t);case 3:return YIe(n,e,t);case 4:return QIe(n,e,t);case 5:return JIe(n,e);case 6:return ePe(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function FIe(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function VIe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function zIe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function UIe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${WIe}
    ${HIe}
    ${GIe}
  `}const WIe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,HIe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,GIe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jIe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Tj(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function qIe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function XIe(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function KIe(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[2]/2),a=i*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function YIe(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${jb(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=Af(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function ZIe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(n[n.length-1]/2),a=i*Math.ceil(n[n.length-2]/2);let o=a,s="",u="b, r, c";for(let l=2;l<n.length-1;l++)o*=n[n.length-l-1],s=`
      int b${l} = index / ${o};
      index -= b${l} * ${o};
    `+s,u=`b${l}, `+u;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${n.length}(${u});
    }
  `}function QIe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${jb(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Af(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function JIe(n,e){const t=Af(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function ePe(n,e){const t=Af(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function tPe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Un(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function nPe(n,e,t){return Un(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function Rf(n){return`offset${n}`}function rPe(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=ii();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function iPe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[i,a]=n.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=Rf(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${o});
      return sampleTexture(${t}, uv);
    }
  `;const[s,u]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${u}, ${o});
      return sampleTexture(${t}, uv);
    }
  `}function aPe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=n.shapeInfo.texShape,a=ii();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${t}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }
  `}function oPe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Bd(n)}
      }
    `;const i=n.shapeInfo.texShape,a=i[0],o=i[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const s=Rf(t);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);
        return sampleTexture(${t}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${s});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});
      return sampleTexture(${t}, uv);
    }
  `}function sPe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,o=a[0],s=a[1],u=ii();if(a!=null&&Un(t,a))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${u.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${u.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(t[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${l[0]}, ${l[1]}, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function uPe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Un(t,a)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=a[0],d=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${d}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=pu(t),u=o;if(u.length<t.length){const h=Fd(n,u),d=["row","col"];return`
      ${Md(h,e)}
      float ${i}(int row, int col) {
        return ${i}(${Vd(d,s)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${Bd(n)}
      }
    `;const l=a[0],c=a[1],f=Rf(r);return c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
      return sampleTexture(${r}, uv);
    }
  `:l===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${f}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${f}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${f};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${f};
    vec2 uv = uvFromFlat(${l}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function lPe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(t[0]===1){const h=t.slice(1),d=[1,2],p=Fd(n,h),g=["b","row","col"];return`
        ${Cj(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Vd(g,d)});
        }
      `}const s=ii();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const u=o[0],l=o[1],c=Math.ceil(t[2]/2),f=c*Math.ceil(t[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${u}, ${l}, ${f}, ${c}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function cPe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[1]*t[2],o=t[2],{newShape:s,keptDims:u}=pu(t),l=s;if(l.length<t.length){const g=Fd(n,l),m=["row","col","depth"];return`
        ${Md(g,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Vd(m,u)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${Bd(n)}
      }
    `;const c=n.shapeInfo.texShape,f=c[0],h=c[1],d=n.shapeInfo.flatOffset;if(h===a&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${f}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&d==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Rf(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${f}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function fPe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=ii();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${t}, uv);
    }
  `;const a=n.shapeInfo.logicalShape,o=a.length,s=n.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],f=Math.ceil(a[o-1]/2);let h=f*Math.ceil(a[o-2]/2),d="int b, int row, int col",p=`b * ${h} + (row / 2) * ${f} + (col / 2)`;for(let g=2;g<o-1;g++)d=`int b${g}, `+d,h*=a[o-g-1],p=`b${g} * ${h} + `+p;return`
    vec4 ${r}(${d}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${l});
      return ${i.texture2D}(${t}, uv);
    }
  `}function hPe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[3],o=t[2]*a,s=t[1]*o,{newShape:u,keptDims:l}=pu(t);if(u.length<t.length){const b=Fd(n,u),_=["row","col","depth","depth2"];return`
      ${Md(b,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Vd(_,l)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${Bd(n)}
      }
    `;const c=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,h=f[0],d=f[1],p=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(d===s&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(d===a&&c==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Rf(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${g}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${h}, ${d}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function dPe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:u,keptDims:l}=pu(e);if(u.length<e.length){const g=Fd(n,u),m=["row","col","depth","depth2","depth3"];return`
      ${Md(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Vd(m,l)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${a}, ${i})) +
          depth3;
        ${Bd(n)}
      }
    `;const c=n.shapeInfo.flatOffset,f=n.shapeInfo.texShape,h=f[0],d=f[1];if(d===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${d}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(d===i&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${d}.0, ${h}.0);
        return sampleTexture(${t}, uv);
      }
    `;const p=Rf(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${a} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${d}, index);
      return sampleTexture(${t}, uv);
    }
  `}function pPe(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:i,keptDims:a}=pu(e);if(i.length<e.length){const m=Fd(n,i),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Md(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Vd(y,a)});
      }
    `}const o=e[5],s=e[4]*o,u=e[3]*s,l=e[2]*u,c=e[1]*l;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${l}, ${u}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Bd(n)}
      }
    `;const f=n.shapeInfo.flatOffset,h=n.shapeInfo.texShape,d=h[0],p=h[1];if(p===c&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${l}, ${u}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(p===o&&f==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${d}.0);
        return sampleTexture(${t}, uv);
      }
    `;const g=Rf(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${l} + depth * ${u} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${g};
      vec2 uv = uvFromFlat(${d}, ${p}, index);
      return sampleTexture(${t}, uv);
    }
  `}function Bd(n){const e=n.name,t=ze(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function vPe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",a=n.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=Sj(n.shapeInfo.logicalShape,e.logicalShape),u=Pn(o),l=o-a;let c;const f=["x","y","z","w","u","v"];a===0?c="":o<2&&s.length>=1?c="coords = 0;":c=s.map(b=>`coords.${f[b+l]} = 0;`).join(`
`);let h="";o<2&&a>0?h="coords":h=n.shapeInfo.logicalShape.map((b,_)=>`coords.${f[_+l]}`).join(", ");let d="return outputValue;";const g=ze(n.shapeInfo.logicalShape)===1,y=ze(e.logicalShape)===1;if(a===1&&!g&&!y)d=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)o===1?d=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:d=`
        return vec4(outputValue.x);
      `;else if(s.length){const b=a-2,_=a-1;s.indexOf(b)>-1&&s.indexOf(_)>-1?d="return vec4(outputValue.x);":s.indexOf(b)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(_)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${u} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${d}
    }
  `}function gPe(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=n.shapeInfo.texShape,s=n.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!n.shapeInfo.isUniform&&s===u&&n.shapeInfo.flatOffset==null&&Un(o,a))return`
      float ${i}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const l=Pn(u),c=Sj(n.shapeInfo.logicalShape,e.logicalShape),f=u-s;let h;const d=["x","y","z","w","u","v"];s===0?h="":u<2&&c.length>=1?h="coords = 0;":h=c.map(g=>`coords.${d[g+f]} = 0;`).join(`
`);let p="";return u<2&&s>0?p="coords":p=n.shapeInfo.logicalShape.map((g,m)=>`coords.${d[m+f]}`).join(", "),`
    float ${i}() {
      ${l} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function Pn(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function WI(n,e,t){const{newShape:r,keptDims:i}=pu(e),a=e.length,o=n&&a===3&&e[0]===1,s=o?e.slice(1):r,u=!n&&a>1&&!Un(e,t)&&r.length<a||o;return{useSqueezeShape:u,uniformShape:u?s:e,keptDims:i}}function Fd(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function Vd(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mPe(n,e,t,r){const i=t.map((c,f)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[f],shapeInfo:h}}),a=i.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=OIe(i,o,e),u=cIe(n.gl,s),l=n.createProgram(u);return xe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:e,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:a,outShapeInfo:o},Ej(n,e,l))}function Ej(n,e,t){const r={},i={},a={},o=[];let s,u,l,c=null,f=null;f=n.getUniformLocation(t,"NAN",!1),xe().getNumber("WEBGL_VERSION")===1&&(c=n.getUniformLocation(t,"INFINITY",!1));const h=!1;for(let d=0;d<e.variableNames.length;d++){const p=e.variableNames[d];r[p]=n.getUniformLocation(t,p,h),r[`offset${p}`]=n.getUniformLocation(t,`offset${p}`,h),e.enableShapeUniforms&&(i[`${p}Shape`]=n.getUniformLocation(t,`${p}Shape`,h),a[`${p}TexShape`]=n.getUniformLocation(t,`${p}TexShape`,h))}return e.enableShapeUniforms&&(s=n.getUniformLocation(t,"outShape",h),l=n.getUniformLocation(t,"outShapeStrides",h),u=n.getUniformLocation(t,"outTexShape",h)),e.customUniforms&&e.customUniforms.forEach((d,p)=>{o[p]=n.getUniformLocation(t,d.name,h)}),{uniformLocations:r,customUniformLocations:o,infLoc:c,nanLoc:f,inShapesLocations:i,inTexShapesLocations:a,outShapeLocation:s,outShapeStridesLocation:l,outTexShapeLocation:u}}function pB(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const i=t.logicalShape,a=e[r],o=a.shape;if(!Un(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(t.isUniform&&a.isUniform)return;const s=t.texShape,u=a.isUniform?null:a.texData.texShape;if(!Un(s,u))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${u} must match`)})}function yPe(n,e,t,r,i){e.program.enableShapeUniforms||(pB(e.inShapeInfos,t),pB([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):n.setOutputMatrixTexture(a.texture,o[0],o[1]),n.setProgram(e.webGLProgram),xe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN),t.forEach((u,l)=>{const c=e.program.variableNames[l],f=e.uniformLocations[c],h=e.uniformLocations[`offset${c}`],d=e.inShapesLocations[`${c}Shape`],p=e.inTexShapesLocations[`${c}TexShape`];if(d){const{uniformShape:g}=WI(e.program.packedInputs,u.shape,u.texData.texShape);switch(g.length){case 1:n.gl.uniform1iv(d,new Int32Array(g));break;case 2:n.gl.uniform2iv(d,new Int32Array(g));break;case 3:n.gl.uniform3iv(d,new Int32Array(g));break;case 4:n.gl.uniform4iv(d,new Int32Array(g));break}}if(p&&n.gl.uniform2i(p,u.texData.texShape[0],u.texData.texShape[1]),f!=null){if(u.isUniform){if(ze(u.shape)<2)n.gl.uniform1f(f,u.uniformValues[0]);else{let g=u.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),n.gl.uniform1fv(f,g)}return}u.texData.slice!=null&&h!=null&&n.gl.uniform1i(h,u.texData.slice.flatOffset),n.setInputMatrixTexture(u.texData.texture.texture,f,l)}});const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:n.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const u=mr(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(u));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(u));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(u));break}}e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i&&e.program.customUniforms.forEach((u,l)=>{const c=e.customUniformLocations[l],f=i[l];if(u.type==="float")n.gl.uniform1fv(c,f);else if(u.type==="vec2")n.gl.uniform2fv(c,f);else if(u.type==="vec3")n.gl.uniform3fv(c,f);else if(u.type==="vec4")n.gl.uniform4fv(c,f);else if(u.type==="int")n.gl.uniform1iv(c,f);else if(u.type==="ivec2")n.gl.uniform2iv(c,f);else if(u.type==="ivec3")n.gl.uniform3iv(c,f);else if(u.type==="ivec4")n.gl.uniform4iv(c,f);else throw Error(`uniform type ${u.type} is not supported yet.`)}),n.executeProgram()}function bPe(n,e,t){let r="";e.concat(t).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!o.isUniform){const u=o.texData.texShape,{useSqueezeShape:l,uniformShape:c,keptDims:f}=WI(n.packedInputs,o.shape,u);let h="",d="",p="";if(c.length===1&&n.packedInputs){const T=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];h=`${T[0]>1}_${T[1]>1}`}else if(c.length===2&&!n.packedInputs)d=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!n.packedInputs){const T=mr(c);p=`${T[0]===u[1]}_${T[T.length-1]===u[1]}`}const g=o.shape.length,m=c.length===2&&Un(o.shape,u),y=ze(o.shape)===1,b=og(o.shape,t.shape),_=!n.packedInputs&&g===t.shape.length&&Un(u,t.texData.texShape),w=n.packedInputs||c.length>2?"":`${u[0]>1}_${u[1]>1}`;r+=`${g}_${_}_${l?f:""}_${c.length}_${y}_${b}_${m}_${h}_${d}_${p}_${w}_${s}`}else{const u=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${u}_${s}`}});const i=n.userCode;let a=n.constructor.name;return a+="_"+r+"_"+i+`${xe().getNumber("WEBGL_VERSION")}`,a}function ai(n){return xe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xPe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=dg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ii();this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?jb(["r","c","d"],e):Af(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Pe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=dg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=ii();this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?jb(["r","c","d"],e):Af(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wPe{constructor(e){this.variableNames=["A"],this.outTexUsage=ea.DOWNLOAD;const t=ii();this.outputShape=e,this.userCode=`
      ${wj}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SPe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ea.DOWNLOAD;const t=ii();this.outputShape=e,this.userCode=`
      ${wj}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe={R:0,G:1,B:2,A:3};class vB{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=ii();this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let o="";for(let s=0;s<r.length;s++){const u=r[s];o+=`
          if(offset == ${s}) {
            result = values[${CPe[u]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?UI():zI(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TPe{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=ii();this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length);let i="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const u=o*2+s;i+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${u}] = values[0];
            } else if (offset == 1) {
              result[${u}] = values[1];
            } else if (offset == 2) {
              result[${u}] = values[2];
            } else {
              result[${u}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?UI():zI(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(n){const e=ii(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return lIe(n,t)}function kPe(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return pIe(n,e)}function APe(n){const e=new Uint16Array([0,1,2,2,1,3]);return vIe(n,e)}function qg(n,e,t,r,i,a){mIe(e,t);const o=gIe(n),s=n.TEXTURE_2D;return Je(n,()=>n.bindTexture(s,o)),Je(n,()=>n.texParameteri(s,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),Je(n,()=>n.texParameteri(s,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),Je(n,()=>n.texParameteri(s,n.TEXTURE_MIN_FILTER,n.NEAREST)),Je(n,()=>n.texParameteri(s,n.TEXTURE_MAG_FILTER,n.NEAREST)),xe().getNumber("WEBGL_VERSION")===1?Je(n,()=>n.texImage2D(s,0,r,e,t,0,i,a,null)):Je(n,()=>n.texStorage2D(s,1,r,e,t)),Je(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:o,texShape:[t,e]}}function kj(n){return n.internalFormatFloat}function RPe(n,e,t,r){const[i,a]=Gg(e,t);return qg(n,i,a,kj(r),r.textureFormatFloat,n.FLOAT)}function Aj(n){return n.internalFormatHalfFloat}function IPe(n,e,t,r){const[i,a]=Gg(e,t);return qg(n,i,a,Aj(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Rj(n){return n.downloadTextureFormat}function PPe(n,e,t,r){const[i,a]=Gg(e,t);return qg(n,i,a,Rj(r),n.RGBA,n.UNSIGNED_BYTE)}function Ij(n){return n.internalFormatPackedFloat}function DPe(n,e,t,r){const[i,a]=Ld(e,t);return qg(n,i,a,Ij(r),n.RGBA,n.FLOAT)}function Pj(n){return n.internalFormatPackedHalfFloat}function $Pe(n,e,t,r){const[i,a]=Ld(e,t);return qg(n,i,a,Pj(r),n.RGBA,r.textureTypeHalfFloat)}function NPe(n,e,t){return Je(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),fB(n,e,"clipSpacePos",t,3,20,0)&&fB(n,e,"uv",t,2,20,12)}function OPe(n,e,t,r,i,a){Je(n,()=>n.bindTexture(n.TEXTURE_2D,e));let o,s,u;i instanceof Uint8Array?(o=new Uint8Array(t*r*4),s=n.UNSIGNED_BYTE,u=n.RGBA):(o=new Float32Array(t*r*4),s=n.FLOAT,u=a.internalFormatPackedFloat),o.set(i),xe().getNumber("WEBGL_VERSION")===2?Je(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,s,o)):Je(n,()=>n.texImage2D(n.TEXTURE_2D,0,u,t,r,0,n.RGBA,s,o)),Je(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function LPe(n,e,t){Je(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?xe().getNumber("WEBGL_VERSION")===2?Je(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):Je(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):xe().getNumber("WEBGL_VERSION")===2?Je(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):Je(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),Je(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function MPe(n,e,t,r){const i=n.createBuffer();Je(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,i));const s=4*4*e*t;return Je(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)),Je(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),Je(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),i}function BPe(n,e,t){const r=n,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function FPe(n,e,t,r){const[i,a]=Gg(e,t),o=4,s=new Uint8Array(nIe(e*t,o));return Je(n,()=>n.readPixels(0,0,i,a,r.downloadTextureFormat,n.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function VPe(n,e,t,r,i,a,o,s){const u=n,l=new Float32Array(rIe(a,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function zPe(n,e,t){const r=new Float32Array(e*t*4);return Je(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=xe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,JRe(t,e)):this.gl=po(t),e=this.gl,xe().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>Je(a,()=>a.createVertexArray()),this.bindVertexArray=o=>Je(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>Je(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>Je(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Je(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>Je(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Je(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>Je(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),xe().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Ay(this.gl,a),Ia(this.gl,o))this.textureHalfFloatExtension=Ay(this.gl,o);else if(xe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ia(this.gl,i))this.colorBufferHalfFloatExtension=Ay(this.gl,i);else if(xe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ia(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ia(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=kPe(this.gl),this.indexBuffer=APe(this.gl),this.framebuffer=yIe(this.gl),this.textureConfig=VI(this.gl,this.textureHalfFloatExtension)}get debug(){return xe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Je(e,()=>e.finish()),Je(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Je(e,()=>e.deleteFramebuffer(this.framebuffer)),Je(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Je(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Je(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),RPe(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),IPe(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),PPe(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),LPe(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,i){this.throwIfDisposed(),OPe(this.gl,e,t,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),$Pe(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),DPe(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(hB(this.gl,this.framebuffer),this.outputTexture=null),Je(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>FPe(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,i,a,o){return VPe(this.gl,e,t,r,i,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return BPe(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const i=MPe(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(xe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(a,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},t=a}else xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>zPe(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=EPe(t));const r=hIe(t);Je(t,()=>t.attachShader(r,this.vertexShader)),Je(t,()=>t.attachShader(r,e)),dIe(t,r);let i;return i=Object.assign(r,{vao:this.createVertexArray()}),this.bindVertexArray(i.vao),Je(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),console.assert(NPe(t,i,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&lw(t,i),this.setProgram(i),i}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Je(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&(this.bindVertexArray(this.program.vao),this.debug&&lw(this.gl,this.program)),Je(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?xIe(this.gl,e,t):_Ie(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),Je(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),wIe(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[i,a]=Ld(t,r);this.setOutputMatrixTextureDriver(e,i,a)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&lw(this.gl,this.program),Ry(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Je(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Je(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Ay(this.gl,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await wC(()=>this.disposed||this.isQueryAvailable(e,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=UPe(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in xe().platform&&(r=xe().platform.setTimeoutCustom.bind(xe().platform)),wC(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),cw(this.gl,e,this.framebuffer),this.debug&&Ry(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(cw(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ry(this.gl)):hB(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;cw(i,e,this.framebuffer),this.debug&&Ry(i),this.outputTexture=e,Je(i,()=>i.viewport(0,0,t,r)),Je(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),Je(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function UPe(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WPe(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sa(n){return(e,t,r,i,a)=>{const o=Yt(e,t),s=o.length,u=mr(o),l=ze(o),c=fs(a,l),f=e.length,h=t.length,d=mr(e),p=mr(t),g=og(e,o),m=og(t,o);if(g.length+m.length===0)for(let y=0;y<c.length;++y)c[y]=n(r[y%r.length],i[y%i.length]);else for(let y=0;y<c.length;++y){const b=wb(y,s,u),_=b.slice(-f);g.forEach(A=>_[A]=0);const w=o1(_,f,d),T=b.slice(-h);m.forEach(A=>T[A]=0);const E=o1(T,h,p);c[y]=n(r[w],i[E])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(n,e,t,r){if(r==="int32"){const i=Int32Array.from(n);return[e,"int32",i]}if(r==="bool"){const i=Og([0],t),[a,o]=sa((s,u)=>s!==u?1:0)(e,[],n,i,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GPe=sa((n,e)=>n+e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jPe(n,e,t,r,i){const a=ze(r),o=su(i,t);for(let s=0;s<n.length;s++){const u=n[s];if(u<0)throw new Error("Input x must be non-negative!");u>=i||(a>0?o[u]+=e[s]:o[u]+=1)}return o}function qPe(n,e,t,r=!1){const i=n.shape[0],a=n.shape[1],o=Wn([i,t],e.dtype);for(let s=0;s<i;s++)for(let u=0;u<a;u++){const l=n.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=t||(r?o.set(1,s,l):e.size>0?o.set(o.get(s,l)+e.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Al(n){return(e,t,r)=>{const i=fs(t,e.length);for(let a=0;a<e.length;++a)i[a]=n(e[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XPe=Al(n=>Math.ceil(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(n,e,t,r){const i=Er(t,ze(e));if(r&&t!=="string"){let a=0;n.forEach(o=>{const s=ze(o.shape);i.set(o.vals,a),a+=s})}else{let a=0;n.forEach(o=>{const s=t==="string"?hg(o.vals):o.vals;let u=0;for(let l=0;l<o.shape[0];++l){const c=l*e[1]+a;for(let f=0;f<o.shape[1];++f)i[c+f]=s[u++]}a+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YPe=sa((n,e)=>n===e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe=Al(n=>Math.exp(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe=Al(n=>Math.expm1(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe=Al(n=>Math.floor(n));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(n,e,t,r,i,a,o,s,u){const l=Wn([r,a],t);for(let c=0;c<r;c++){const f=[];let h=0;for(let d=0;d<i;d++){const p=n[c*i+d];h+=p*o[d],f.push(p)}if(h<0||h>=u/a)throw new Error(`Invalid indices: ${f} does not index into ${s}`);for(let d=0;d<a;d++)l.values[c*a+d]=e.get(...e.indexToLoc(h*a+d))}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(n,e,t){const r=Wn(t,n.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),s=o[0],u=o[2],l=e.locToIndex([s,u]);o[2]=e.values[l];const c=n.locToIndex(o);0<=c&&c<n.values.length&&(r.values[i]=n.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nDe=sa((n,e)=>n>e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rDe=sa((n,e)=>n>=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iDe=sa((n,e)=>n<e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aDe=sa((n,e)=>n<=e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(n,e,t){const r=(e-n)/(t-1),i=su(t,"float32");i[0]=n;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sDe=Al(n=>Math.log(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(n,e,t,r){const i=fs(r,ze(t));for(let a=0;a<i.length;++a){const o=a*e;let s=n[o];for(let u=0;u<e;++u){const l=n[o+u];(Number.isNaN(l)||l>s)&&(s=l)}i[a]=s}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lDe=sa((n,e)=>Math.max(n,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=sa((n,e)=>Math.min(n,e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dj=sa((n,e)=>n*e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fDe(n,e,t){const r=Cf(-1,t);return Dj([],e,r,n,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDe=sa((n,e)=>n!==e?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(n,e,t,r,i){const a=e.length,o=ze(e),s=mr(e),u=mr(i),l=fs(t,ze(i));for(let c=0;c<o;++c){const f=wb(c,a,s),h=new Array(f.length);for(let p=0;p<h.length;p++)h[p]=f[r[p]];const d=o1(h,a,u);l[d]=n[c]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(n,e,t,r){const[i,a]=xs(n,r),o=ho(e,"int32"),s=su(ze(i),o),u=ze(a);for(let l=0;l<s.length;++l){const c=l*u;let f=1;for(let h=0;h<u;++h)f*=t[c+h];s[l]=f}return{outVals:s,outShape:i,outDtype:o}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(n,e,t){n.forEach((r,i)=>{if(r<0||r>=t){const a=wb(i,e.length,mr(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${t})`)}})}function gDe(n,e){for(let t=0;t<n.length;++t){const r=n[t],i=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function mDe(n,e,t,r){const i=[];let a=0;const o=e.length-1+t.length,s=new Array(o).fill(null).map(()=>[0]);gDe(t,r);let u=1;for(let l=0;l<e.length-1;++l){u*=e[l];const c=e[l+1];for(let f=1;f<u+1;++f)s[l].push(f*c)}for(let l=0;l<n.length;++l){let c=n[l],f=n[l]+1;for(let h=0;h<t.length;++h){const d=t[h],p=h+e.length-1;if(p>=0){const g=s[p],m=g[g.length-1]-d[c];for(let y=c;y<f;++y)s[p].push(d[y+1]+m)}c=d[c],f=d[f]}f!==c&&(i.push([c,f]),a+=f-c)}return{outSplits:s,valueSlices:i,numValues:a}}function yDe(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,i=Er("int32",r);e.push(i),n[t].forEach((a,o)=>i[o]=a)}return e}function gB(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function bDe(n,e,t,r,i,a){const o=gB(e,2)[1],s=gB(a,2)[1];let u=0;for(const l of t)for(let c=l[0];c<l[1];++c){for(let f=0;f<r;++f)i[u*s+f]=n[c*o+f];++u}}function xDe(n,e,t,r,i){const a=e.slice();a[0]=i;const o=Er(t,ze(a)),s=n.length,u=s===0?0:s/e[0];return bDe(n,e,r,u,o,a),[o,a]}function _De(n,e,t,r,i,a,o,s){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const u=e[0][0]-1;if(vDe(a,o,u),r.length===0)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:f,numValues:h}=mDe(a,o,n,l),d=yDe(c),p=xDe(t,r,i,f,h);return[d,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mB=2147483647;function wDe(n,e,t,r,i,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=e.length===0,u=i.length===0,l=o.length===0,c=[];s||c.push(e[0]),u||c.push(i[0]),l||c.push(o[0]);for(let m=1;m<c.length;++m)if(c[m]!==c[m-1])throw new Error("starts, limits, and deltas must have the same shape");const f=c.length===0?1:c[0],h=Er("int32",f+1);h[0]=0;for(let m=0;m<f;++m){const y=s?n[0]:n[m],b=u?r[0]:r[m],_=l?a[0]:a[m];if(_===0)throw new Error("Requires delta != 0");let w;if(_>0&&b<y||_<0&&b>y)w=0;else if(w=Math.ceil(Math.abs((b-y)/_)),w>mB)throw new Error(`Requires ((limit - start) / delta) <= ${mB}`);h[m+1]=h[m]+w}const d=h[f],p=Er(t,d);let g=0;for(let m=0;m<f;++m){const y=h[m+1]-h[m];let b=s?n[0]:n[m];const _=l?a[0]:a[m];for(let w=0;w<y;++w)p[g++]=b,b+=_}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var da=ao;class S1{constructor(e,t,r,i,a,o,s,u,l,c){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=bG(c),this.raggedRank=xG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===da.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===da.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case da.VALUE_ROWIDS:return S1.getMaxWidthValueRowID(t);case da.ROW_SPLITS:return S1.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${da[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let i=0;i<t-1;++i){const a=e[i+1]-e[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,i=e[0],a=0;for(let o=1;o<t;++o){const s=e[o];s!==i&&(i=s,a=Math.max(o-r,a),r=o)}return Math.max(t-r,a)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return bB(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;_G(r,t);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=yG(this.raggedRank,i,t);o[0]<0&&(o[0]=e);for(let s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o}calculateFirstParentOutputIndex(e,t,r){const i=Math.min(e,r),a=[];let o=0;for(let s=0;s<i;++s,o+=t)a.push(o);for(let s=i;s<e;++s)a.push(-1);return J(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,r,i){const a=e.length,o=[];for(let s=0;s<a-1;++s){const u=e[s+1]-e[s];let l=Math.min(i,u),c=t[s];c===-1&&(l=0);for(let f=0;f<l;++f)o.push(c),c+=r;for(let f=0;f<u-l;++f)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,r,i){const a=e.length,o=[];if(a===0)return[];let s=0,u=e[0];if(u>=t.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${t.length}`);let l=t[u];o.push(l);for(let c=1;c<a;++c){const f=e[c];if(f===u)l>=0&&(++s,s<i?l+=r:l=-1);else{if(s=0,u=f,f>=t.length)throw new Error(`Got nextValueRowId=${f} which is not less than ${t.length}`);l=t[f]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,r,i){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case da.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,r,i);case da.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,r,i);default:throw new Error(`Unsupported partition type: ${da[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case da.FIRST_DIM_SIZE:return e[0];case da.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case da.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${da[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let u=i.length-2;u>=0;--u)i[u]=i[u+1]*r[u+1];const a=bB(r,!1),o=Er(this.valuesDType,ze(a));if(i[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(t,i[0],r[0]);for(let l=1;l<=this.raggedRank;++l)u=this.calculateOutputIndex(l-1,u,i[l],r[l]);this.setOutput(this.raggedRank,u,o,a)}return[a,o]}setOutput(e,t,r,i){if(r.length===0)return;const a=this.values,o=r;let s=i.slice();s=s.slice(e+1);const u=ze(s),l=t.length;let c=this.defaultValue;if(c.length!==u&&c.length!==1){const p=this.defaultValueShape;yt(()=>{const g=Pe(c,p);c=Wh(g,s).dataSync()})}let f=0,h=0,d=0;for(let p=0;p<=l;++p){let g=p<l?t[p]:-1;if(g===d){++d;continue}if(h<d){const m=a.subarray(f*u),y=o.subarray(h*u),b=(d-h)*u;yB(y,m,b)}if(p>=l){const m=r.length;g=Math.floor(m/u)}if(g>d)if(this.defaultValue.length===1)o.subarray(d*u,g*u).fill(this.defaultValue[0]),d=g;else for(;g>d;){const m=o.slice(d*u);yB(m,c,u),++d}g<0?(f=p+1,h=d):(f=p,h=d,d=h+1)}}}function yB(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function bB(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function SDe(n,e,t,r,i,a,o,s,u,l){return new S1(n,e,t,r,i,a,o,s,u,l).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(n,e,t,r){const i=n===e,a=n<e&&t<0,o=e<n&&t>1;if(i||a||o)return su(0,r);const s=Math.abs(Math.ceil((e-n)/t)),u=su(s,r);e<n&&t===1&&(t=-1),u[0]=n;for(let l=1;l<u.length;l++)u[l]=u[l-1]+t;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TDe=Al(n=>1/Math.sqrt(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(n,e,t,r,i,a,o,s,u,l){const c=[r/i,i],f=n.values,h=e.values;if(r===0)return Wn(t,e.dtype);const d=Wn(c,e.dtype);typeof u=="string"||typeof u=="number"?d.values.fill(u):typeof u=="boolean"&&d.values.fill(+u);for(let p=0;p<a;p++){const g=[];let m=0;for(let y=0;y<o;y++){const b=f[p*o+y];g.push(b),m+=b*s[y]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${g} does not index into ${t}`);for(let y=0;y<i;y++)l?d.values[m*i+y]+=h[p*i+y]:d.values[m*i+y]=e.rank===0?h[0]:h[p*i+y]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kDe=Al(n=>1/(1+Math.exp(-n)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(n,e,t,r,i){const a=II(r,e,t),o=ze(t),s=mr(r);if(a){const f=PI(e,s);return i==="string"?n.slice(f,f+o):n.subarray(f,f+o)}const u=i==="string"?hg(n):n,l=Wn(r,i,u),c=Wn(t,i);for(let f=0;f<c.size;++f){const h=c.indexToLoc(f),d=h.map((p,g)=>p+e[g]);c.set(l.get(...d),...h)}return i==="string"?JG(c.values):c.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(n,e,t,r,i,a,o){const s=e[0],u=a[0],l=new Array(u),c=new Array(s),f=e[1];if(u===0){if(s!==0)throw new Error(FG(s));const m=Er(t,0),y=Er(i,0);return[m,[0,f],y,l,c]}let h=!0,d=0;const p=new Array(u).fill(0);for(let m=0;m<s;++m){const y=n[m*f];if(y<0)throw new Error(VG(m,y));if(y>=u)throw new Error(zG(m,y,u));++p[y],h=h&&y>=d,d=y}let g=!0;for(let m=0;m<u;++m){const y=p[m]===0;l[m]=y,g=g&&!y,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(g&&h){const m=n,y=r;for(let b=0;b<s;++b)c[b]=b;return[m,[s,f],y,l,c]}else{const m=p[u-1],y=Er(t,m*f),b=Er(i,m),_=new Array(u).fill(0);for(let w=0;w<s;++w){const T=n[w*f],E=_[T],A=(T===0?0:p[T-1])+E;_[T]++;for(let I=0;I<f;++I)y[A*f+I]=n[w*f+I];b[A]=r[w],c[w]=A}for(let w=0;w<u;++w)if(_[w]===0){const E=w===0?0:p[w-1];y[E*f+0]=w;for(let A=1;A<f;++A)y[E*f+A]=0;b[E]=o}return[y,[m,f],b,l,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(n,e,t,r,i){const a=ze(r),o=e[0],s=i.length,u=[];let l=1,c=-1;for(let m=0;m<s;++m){const y=i[m];if(y===-1){if(c!==-1)throw new Error(UG(c,m));c=m,u.push(1)}else{if(y<0)throw new Error(WG(m,y));l*=y,u.push(y)}}if(c!==-1){if(l<=0)throw new Error(HG());const m=Math.trunc(a/l);if(l*m!==a)throw new Error(GG(r,u));u[c]=m}if(ze(u)!==a)throw new Error(jG(r,u));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let m=h-2;m>=0;--m)d[m]=d[m+1]*r[m+1]}const p=[];if(s>0){p[s-1]=1;for(let m=s-2;m>=0;--m)p[m]=p[m+1]*u[m+1]}const g=Er(t,o*s);for(let m=0;m<o;++m){let y=0;for(let b=0;b<h;++b)y+=n[m*h+b]*d[b];for(let b=0;b<s;++b)g[m*s+b]=Math.trunc(y/p[b]),y%=p[b]}return[g,[o,s],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(n,e,t,r,i,a=!1,o=0){const s=r.length,u=[e[0],n.length/e[0]],l=u[1],f=s>0?i[s-1]+1:0;if(f<0)throw new Error(KC());const h=e.slice();h[0]=f;const d=h.reduce((_,w)=>_*w,1),p=Er(t,d);if(s===0)return f>0&&p.fill(o),[p,h];if(f<=0)throw new Error(KC());let g=0,m=1,y=0,b=i[g];for(;;){let _=0;if(m<s){if(_=i[m],b===_){++m;continue}if(b>=_)throw new Error(qG())}if(b<0||b>=f)throw new Error(XG(b,f));b>y&&p.fill(o,y*l,b*l);for(let w=g;w<m;++w){const T=r[w];if(T<0||T>=u[0])throw new Error(KG(w,r[w],u[0]));for(let E=0;E<l;E++)p[b*l+E]+=n[T*l+E]}if(a)for(let w=0;w<l;w++)p[b*l+w]/=m-g;if(g=m,++m,y=b+1,b=_,m>s)break}return y<f&&p.fill(o,y*l,f*l),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DDe=Al(n=>Math.sqrt(n));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $De=sa((n,e)=>{const t=n-e;return t*t});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(n,e,t,r){const i=Wn(n,e.dtype);for(let a=0;a<i.size;a++){const o=i.indexToLoc(a),s=new Array(o.length);for(let u=0;u<s.length;u++)s[u]=o[u]*t[u]+r[u];i.set(e.get(...s),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ODe{constructor(e,t,r,i,a,o){this.separator=Qs(e),this.nGramWidths=t,this.leftPad=Qs(r),this.rightPad=Qs(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,i,a,o){for(let s=0;s<a;++s){const u=this.getPadWidth(o),l=Math.max(0,u-s),c=Math.max(0,u-(a-(s+1))),f=o-(l+c),h=t+(l>0?0:s-u);let d=0;d+=l*this.leftPad.length;for(let b=0;b<f;++b)d+=e[h+b].length;d+=c*this.rightPad.length;const p=l+c+f-1;d+=p*this.separator.length,r[i+s]=new Uint8Array(d);const g=r[i+s];let m=0;const y=b=>b.forEach(_=>g[m++]=_);for(let b=0;b<l;++b)y(this.leftPad),y(this.separator);for(let b=0;b<f-1;++b)y(e[h+b]),y(this.separator);if(f>0){y(e[h+f-1]);for(let b=0;b<c;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<c-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,t){const r=e.length,i=t.length;if(i>0){let u=t[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let l=1;l<i;++l){let c=t[l]>=u;if(c=c&&t[l]<=r,!c)throw new Error(`Invalid split value ${t[l]}, must be in [${u}, ${r}]`);u=t[l]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const a=i-1,o=Er("int32",i);if(r===0||i===0){const u=new Array(r);for(let l=0;l<=a;++l)o[l]=0;return[u,o]}o[0]=0;for(let u=1;u<=a;++u){const l=t[u]-t[u-1];let c=0;this.nGramWidths.forEach(f=>{c+=this.getNumNGrams(l,f)}),this.preserveShort&&l>0&&c===0&&(c=1),o[u]=o[u-1]+c}const s=new Array(o[a]);for(let u=0;u<a;++u){const l=t[u];let c=o[u];if(this.nGramWidths.forEach(f=>{const h=t[u+1]-t[u],d=this.getNumNGrams(h,f);this.createNGrams(e,l,s,c,d,f),c+=d}),this.preserveShort&&c===o[u]){const f=t[u+1]-t[u];if(f===0)continue;const h=f+2*this.padWidth,d=1;this.createNGrams(e,l,s,c,d,h)}}return[s,o]}}function LDe(n,e,t,r,i,a,o,s){return new ODe(t,r,i,a,o,s).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(n,e,t,r){if(!n.length)return;if(e.length===0){for(let a=0;a<n.length;++a)r.push(n.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=n.indexOf(a);for(;o!==-1;){const s=n.subarray(0,o);(!t||s.length!==0)&&r.push(s),n=n.subarray(o+1),o=n.indexOf(a)}(!t||n.length!==0)&&r.push(n);return}let i=0;for(let a=0;a<n.length+1;a++)if(a===n.length||e.indexOf(n[a])!==-1){const o=n.subarray(i,a);(!t||o.length!==0)&&r.push(o),i=a+1}}function BDe(n,e,t){const r=n.length,i=[];let a=0,o=0;const s=new Array(r);for(let h=0;h<r;++h){const d=i.length;MDe(n[h],e,t,i);const p=i.length-d;s[h]=p,a+=p,o=Math.max(o,p)}const u=Er("int32",a*2),l=new Array(a),c=[r,o];let f=0;for(let h=0;h<r;++h)for(let d=0;d<s[h];++d)u[f*2]=h,u[f*2+1]=d,l[f]=i[f],++f;return[u,l,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(n,e){const t=Er("int32",n.length);for(let r=0;r<n.length;++r)t[r]=p8(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VDe=sa((n,e)=>n-e);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDe(n,e){const t=new Array(n.rank);for(let i=0;i<t.length;i++)t[i]=n.shape[i]*e[i];const r=Wn(t,n.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),o=new Array(n.rank);for(let u=0;u<o.length;u++)o[u]=a[u]%n.shape[u];const s=n.locToIndex(o);r.values[i]=n.values[s]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qp=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function $j(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const s=r-t+1,u=e-t+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*Math.sign(u-s/2),h=Math.max(t,Math.floor(e-u*c/s+f)),d=Math.min(r,Math.floor(e+(s-u)*c/s+f));$j(n,e,h,d)}const i=n[e];let a=t,o=r;for(Hs(n,t,e),Qp(n[r],i)>0&&Hs(n,t,r);a<o;){for(Hs(n,a,o),a++,o--;Qp(n[a],i)<0;)a=a+1;for(;Qp(n[o],i)>0;)o=o-1}Qp(n[t],i)===0?Hs(n,t,o):(o=o+1,Hs(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function UDe(n,e,t,r,i){const a=e[e.length-1],[o,s]=[n.length/a,a],u=fs(t,o*r),l=fs("int32",o*r);for(let f=0;f<o;f++){const h=f*s,d=n.subarray(h,h+s);let p=new Array(d.length);d.forEach((b,_)=>p[_]={value:b,index:_}),r<p.length&&($j(p,r),p=p.slice(0,r)),i&&p.sort(Qp);const g=f*r,m=u.subarray(g,g+r),y=l.subarray(g,g+r);for(let b=0;b<r;b++)m[b]=p[b].value,y[b]=p[b].index}const c=e.slice();return c[c.length-1]=r,[Wn(c,t,u),Wn(c,"int32",l)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(n,e,t,r){const i=cr(e,t)[0],a=[1,t[0],1];for(let p=0;p<i;p++)a[0]*=t[p];a[1]=t[i];for(let p=i+1;p<t.length;p++)a[2]*=t[p];const o={},s=new Int32Array(t[i]),u=new hd(a,r,n),l=[],c=a[0]===1&&a[2]===1;for(let p=0;p<t[i];p++){let g;if(c)g=n[p].toString();else{const m=[];for(let y=0;y<a[0];y++)for(let b=0;b<a[2];b++)m.push(u.get(y,p,b));g=m.join(",")}if(o[g]!==void 0)s[p]=o[g];else{const m=Object.keys(o).length;o[g]=m,s[p]=m,l.push(p)}}const f=a.slice();f[1]=Object.keys(o).length;const h=new hd(f,r);l.forEach((p,g)=>{for(let m=0;m<a[0];m++)for(let y=0;y<a[2];y++)h.set(u.get(m,p,y),m,g,y)});const d=t.slice();return d[i]=f[1],{outputValues:h.values,outputShape:d,indices:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HDe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:GPe,bincountImpl:jPe,bincountReduceImpl:qPe,castImpl:HPe,ceilImpl:XPe,concatImpl:KPe,equalImpl:YPe,expImpl:ZPe,expm1Impl:QPe,floorImpl:JPe,gatherNdImpl:eDe,gatherV2Impl:tDe,greaterEqualImpl:rDe,greaterImpl:nDe,lessEqualImpl:aDe,lessImpl:iDe,linSpaceImpl:oDe,logImpl:sDe,maxImpl:uDe,maximumImpl:lDe,minimumImpl:cDe,multiplyImpl:Dj,negImpl:fDe,notEqualImpl:hDe,prodImpl:pDe,raggedGatherImpl:_De,raggedRangeImpl:wDe,raggedTensorToTensorImpl:SDe,rangeImpl:CDe,rsqrtImpl:TDe,scatterImpl:EDe,sigmoidImpl:kDe,simpleAbsImpl:WPe,sliceImpl:ADe,sparseFillEmptyRowsImpl:RDe,sparseReshapeImpl:IDe,sparseSegmentReductionImpl:PDe,sqrtImpl:DDe,squaredDifferenceImpl:$De,stridedSliceImpl:NDe,stringNGramsImpl:LDe,stringSplitImpl:BDe,stringToHashBucketFastImpl:FDe,subImpl:VDe,tileImpl:zDe,topKImpl:UDe,transposeImpl:dDe,uniqueImpl:WDe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:GDe,bincountImpl:Nj,bincountReduceImpl:jDe,castImpl:qDe,ceilImpl:XDe,concatImpl:KDe,equalImpl:YDe,expImpl:ZDe,expm1Impl:QDe,floorImpl:JDe,gatherNdImpl:e$e,gatherV2Impl:t$e,greaterImpl:n$e,greaterEqualImpl:r$e,lessImpl:i$e,lessEqualImpl:a$e,linSpaceImpl:o$e,logImpl:s$e,maxImpl:u$e,maximumImpl:l$e,minimumImpl:c$e,multiplyImpl:f$e,negImpl:h$e,notEqualImpl:d$e,prodImpl:p$e,raggedGatherImpl:v$e,raggedRangeImpl:g$e,raggedTensorToTensorImpl:m$e,rangeImpl:y$e,rsqrtImpl:b$e,scatterImpl:x$e,sigmoidImpl:_$e,simpleAbsImpl:Oj,sliceImpl:w$e,sparseFillEmptyRowsImpl:S$e,sparseReshapeImpl:C$e,sparseSegmentReductionImpl:Lj,sqrtImpl:T$e,stridedSliceImpl:E$e,stringNGramsImpl:k$e,stringSplitImpl:A$e,stringToHashBucketFastImpl:R$e,subImpl:I$e,tileImpl:P$e,topKImpl:D$e,transposeImpl:HI,uniqueImpl:$$e}=HDe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mj(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function Jr(n,e){return e===1?[n]:Mj(n,e)}function N$e(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O$e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ai(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=Jr("rc",this.rank),r=Pn(this.rank),i=this.getOutOfBoundsCondition(t),a=this.getSetup(t),o=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bj{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${L$e(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?UI():zI(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function L$e(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?NIe(["r","c","d"],"inputShape"):Af(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M$e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,r){const i=_B(t,r),a=wB(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=xB(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const u=this.freeTextures[a].shift();return this.usedTextures[a].push(u),u}let s;return i===Cr.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Cr.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Cr.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Cr.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Cr.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,r,i){if(this.freeTextures==null)return;const a=_B(r,i),o=wB(t,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);const s=xB(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),u=xe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");u!==-1&&this._numBytesAllocated>u?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const l=this.usedTextures[o],c=l.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function B$e(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function xB(n,e,t,r,i){const a=F$e(e,r);let o;if(i){const[u,l]=Ld(n[0],n[1]);o=u*l}else{const[u,l]=Gg(n[0],n[1]);o=u*l}const s=B$e(t,a);return o*s}function F$e(n,e){switch(n){case Cr.PACKED_2X2_FLOAT32:return Ij(e);case Cr.PACKED_2X2_FLOAT16:return Pj(e);case Cr.UNPACKED_FLOAT32:return kj(e);case Cr.UNPACKED_FLOAT16:return Aj(e);case Cr.PACKED_4X1_UNSIGNED_BYTE:return Rj(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function V$e(n){return xe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Cr.PACKED_2X2_FLOAT32:Cr.UNPACKED_FLOAT32:n?Cr.PACKED_2X2_FLOAT16:Cr.UNPACKED_FLOAT16}function _B(n,e){if(n===ea.UPLOAD)return Cr.PACKED_2X2_FLOAT32;if(n===ea.RENDER||n==null)return V$e(e);if(n===ea.DOWNLOAD||n===ea.PIXELS)return Cr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function wB(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qo{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ha="if (isnan(x)) return x;",z$e="return x;",SB="return abs(x);",U$e="return (x >= 0.0) ? x : (exp(x) - 1.0);",W$e=Ha+`
  return (x < 0.0) ? 0.0 : x;
`,H$e=Ha+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Wu="return x;",G$e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e="return x;",q$e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,X$e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,K$e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Y$e="return 1.0 / (1.0 + exp(-1.0 * x));";class el{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z$e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length);const t=e.length,r=Jr("rc",t),i=Pn(t),a=N$e(t,r),o=r.slice(-2),s=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q$e=fI,J$e=1e-7,eNe=1e-4,Dy={};function tNe(n){return n in Dy||(Dy[n]={}),Dy[n]}const nNe=xe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),rNe=600;function iNe(){return xe().global.screen==null?1024:xe().global.screen.height*xe().global.screen.width*window.devicePixelRatio*rNe/1024/1024}class qb extends CE{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!xe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof dw)t=e;else{const r=po(xe().getNumber("WEBGL_VERSION"),e);t=new dw(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=po(xe().getNumber("WEBGL_VERSION"));t=new dw(r),this.binaryCache=tNe(xe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new M$e(this.gpgpu),this.numMBBeforeWarning=iNe(),this.texData=new FU(this,to())}nextDataId(){return qb.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,i,a,o){const s=this.makeTensorInfo(t,r),u=this.texData.get(s.dataId);u.isPacked=!1,u.texture={texture:e,texShape:[i,a]},u.texShape=[i,a];const l=Iy(t),c=new vB(l,!1,o),f=this.runWebGLProgram(c,[s],r,[[i,a]]);return f.shape=t,u.texture=null,this.disposeIntermediateTensorInfo(s),f.dataId}write(e,t,r){if((xe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||xe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:t,dtype:r,values:e,usage:ea.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,i,a){if(xe().getBool("DEBUG")&&this.checkNumericalProblems(t),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:t,usage:ea.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:a,slice:o,shape:s,isPacked:u}=t;if(o!=null){let h;u?h=new el(s,Wu):h=new Qo(s,Wu);const d=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:i}],i),p=this.readSync(d.dataId);return this.disposeIntermediateTensorInfo(d),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const l=this.activeTimers!=null;let c;l&&(c=xa());let f;if(i==="complex64"){const h=this.readSync(a.real.dataId),d=this.readSync(a.imag.dataId);f=XC(h,d)}else f=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=xa()-c),this.convertAndCacheOnCPU(e,f)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(g=>p.push(g))}const t=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,complexTensorInfos:s,isPacked:u}=t;if(a!=null){let p;u?p=new el(i,Wu):p=new Qo(i,Wu);const g=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),m=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(xe().getBool("DEBUG")&&!xe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&xe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l=null,c;if(o!=="complex64"&&xe().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);l=this.gpgpu.createBufferFromTexture(p.texture.texture,...ky(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let f;if(o==="complex64"){const p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),g=p[0],m=p[1];f=XC(g,m)}else if(l==null)f=this.getValuesFromTexture(e);else{const p=ze(i);f=this.gpgpu.downloadFloat32MatrixFromBuffer(l,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),l!=null){const p=this.gpgpu.gl;Je(p,()=>p.deleteBuffer(l))}const h=this.convertAndCacheOnCPU(e,f),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&to().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,t={}){const r=this.texData.get(e),{values:i,shape:a,slice:o,dtype:s,isPacked:u,texture:l}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let d;u?d=new el(a,Wu):d=new Qo(a,Wu);const p=this.runWebGLProgram(d,[{dataId:e,shape:a,dtype:s}],s),g=this.readToGPU(p,t);return this.disposeIntermediateTensorInfo(p),g}if(l==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),f=to().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:f},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(i=>ef(i));return Wn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Wn(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!sIe(r))throw xe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:i}=this.texData.get(e),a=ze(t);if(xe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),d=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(d.texture.texture,...ky(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),p}const o=xe().getBool("WEBGL_PACK")&&i===!0,s=o?Iy(t):t,u=o?new SPe(s):new wPe(s),l=this.runWebGLProgram(u,[{shape:s,dtype:r,dataId:e}],"float32"),c=this.texData.get(l.dataId),f=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),f}timerAvailable(){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=hs(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),o=hs(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=t,i&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const u=await Promise.all(a);s.kernelMs=zU(u),s.getExtraProfileInfo=()=>u.map((l,c)=>({name:o[c],ms:l})).map(l=>`${l.name}: ${l.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:xa(),endMs:null}}endTimer(e){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=xa(),e)}async getQueryTime(e){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:i,usage:a,isPacked:o,slice:s}=this.texData.get(e),u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),t!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(t,i,a,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=nNe){return xe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ze(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Ca("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return Q$e(e.shape,t)}packedUnaryOp(e,t,r){const i=new el(e.shape,t),a=this.compileAndRun(i,[e],r);return to().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=Oj(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(xe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,SB,e.dtype);const t=new Qo(e.shape,SB),r=this.compileAndRun(t,[e]);return to().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let i;if(t==="string"&&r!=null&&r.length>0&&Ys(r[0])){const a=r.map(o=>Qs(o));i=this.write(a,e,t)}else i=this.write(r,e,t);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:t}}makeOutput(e,t,r){return to().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new Z$e(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new O$e(e.shape),r=!0;return this.runWebGLProgram(t,[e],e.dtype,null,r)}packedReshape(e,t){const r=[yd(e.shape),...bd(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[yd(t),...bd(t)],o=new Bj(a,r),s=!0,u=[r],l=this.runWebGLProgram(o,[i],e.dtype,u,s);return{dataId:l.dataId,shape:t,dtype:l.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:i,shape:a,dtype:o}=r;if(t!=null){const h=ze(a),d=t[0]*t[1]*4;J(h<=d,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=Iy(a);let u;i?u=new _Pe(s):u=new xPe(s);const l=!0,c=[t??ky(s)],f=this.runWebGLProgram(u,[{shape:s,dtype:o,dataId:e}],o,c,l,t);return{dtype:o,shape:a,dataId:f.dataId}}runWebGLProgram(e,t,r,i,a=!1,o){const s=this.makeTensorInfo(e.outputShape,r),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===dg.DENSE){const y=o??ky(e.outputShape);u.texShape=y.map(b=>b*2)}if(e.outTexUsage!=null&&(u.usage=e.outTexUsage),ze(s.shape)===0)return u.values=fs(s.dtype,0),s;const l=[],c=t.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(y.dataId);if(b.texture==null){if(!e.packedInputs&&ze(y.shape)<=xe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!b.isPacked!=!!e.packedInputs)y=b.isPacked?this.unpackTensor(y):this.packTensor(y),l.push(y),b=this.texData.get(y.dataId);else if(b.isPacked&&!w1(b.shape,y.shape)){const _=y,w=y.shape;y.shape=b.shape,y=this.packedReshape(y,w),l.push(y),b=this.texData.get(y.dataId),_.shape=w}return{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(s.dataId);const f={shape:s.shape,texData:u,isUniform:!1},h=bPe(e,c,f),d=this.getAndSaveBinary(h,()=>mPe(this.gpgpu,e,c,f)),p=this.activeTimers!=null;let g;p&&(g=this.startTimer()),xe().get("ENGINE_COMPILE_ONLY")||yPe(this.gpgpu,d,c,f,i),l.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));const m=xe().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const y=xa();y-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!xe().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&a===!1){const y=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),y}return s}compileAndRun(e,t,r,i,a=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,i,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(xe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=yt(()=>{if(!xe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=xe().getBool("DEBUG");xe().set("DEBUG",!1);const t=this.abs(At(1e-8)).dataSync()[0];if(xe().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?J$e:eNe}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:i,values:a,texture:o,usage:s,isPacked:u}=t;if(o!=null)return;const l=this.activeTimers!=null;let c;l&&(c=xa());let f=t.texShape;if(f==null&&(f=TIe(r,u),t.texShape=f),a!=null){const h=Iy(r);let d,p=f[1],g=f[0];const m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(u||!m)&&([p,g]=Ld(f[0],f[1])),u?d=new TPe(h,m):d=new vB(h,m);const y=m?[g,p]:f,b=this.makeTensorInfo(y,i),_=this.texData.get(b.dataId);m?_.usage=ea.PIXELS:_.usage=ea.UPLOAD,_.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,g,a);const w=[[g,p]],T=!0,E=this.runWebGLProgram(d,[b],i,w,T),A=this.texData.get(E.dataId);t.texShape=A.texShape,t.isPacked=A.isPacked,t.usage=A.usage,xe().get("ENGINE_COMPILE_ONLY")?this.disposeData(E.dataId):(t.texture=A.texture,t.values=null,this.texData.delete(E.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=xa()-c)}else{const h=this.acquireTexture(f,s,i,u);t.texture=h}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:i}=r;return t!=null&&(r.values=aNe(t,i)),r.values}acquireTexture(e,t,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,i)}computeBytes(e,t){return e[0]*e[1]*Jv(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(t),i(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await gG(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(_j(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const[,e]of Object.entries(this.binaryCache)){const{uniformLocations:t,customUniformLocations:r,infLoc:i,nanLoc:a,inShapesLocations:o,inTexShapesLocations:s,outShapeLocation:u,outShapeStridesLocation:l,outTexShapeLocation:c}=Ej(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=a,e.inShapesLocations=o,e.inTexShapesLocations=s,e.outShapeLocation=u,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:i,height:a,width:o,channels:s}=e,u=to().backend;if(!u.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=u.writeTexture(i,t,r,a,o,s);return to().makeTensorFromDataId(l,t,r,u)}}qb.nextDataId=0;function aNe(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bR()&&D8("webgl",()=>new qb,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GI=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class xd{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=Yt(t,r),this.enableShapeUniforms=ai(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xg=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Kg{constructor(e,t,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Yt(t,r);const a=this.outputShape.length;this.enableShapeUniforms=ai(a);let o="";if(i)if(a===0||ze(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Pn(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const u=Jr("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${u[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${u[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${u[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${u[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fi(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const oNe={kernelName:Tb,backendName:"webgl",kernelFunc:Fi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(n){const{inputs:e,backend:t}=n,{real:r,imag:i}=e,a=t.makeTensorInfo(r.shape,"complex64"),o=t.texData.get(a.dataId),s=Fi({inputs:{x:r},backend:t}),u=Fi({inputs:{x:i},backend:t});return o.complexTensorInfos={real:s,imag:u},a}const sNe={kernelName:KE,backendName:"webgl",kernelFunc:Rl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fj="return (a < 0.) ? b * a : a;",Vj=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function uNe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{alpha:a}=r,o=t.makeTensorInfo([],"float32",Cf(a,"float32")),s=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kg(Vj,i.shape,o.shape):new xd(Fj,i.shape,o.shape),u=t.runWebGLProgram(s,[i,o],"float32");return t.disposeIntermediateTensorInfo(o),u}const lNe={kernelName:Bk,backendName:"webgl",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zj="return (a < 0.) ? b * a : a;",Uj=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function cNe(n){const{inputs:e,backend:t}=n,{x:r,alpha:i}=e,a=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kg(Uj,r.shape,i.shape):new xd(zj,r.shape,i.shape);return t.runWebGLProgram(a,[r,i],"float32")}const fNe={kernelName:gA,backendName:"webgl",kernelFunc:cNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zd="if (isnan(x)) return x;";function Qt({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,u=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&t!=null){const f=s.texData.get(o.dataId),h=t(f.values,u);return s.makeTensorInfo(o.shape,u,h)}const l=xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return l?c=new el(o.shape,e):c=new Qo(o.shape,n),s.runWebGLProgram(c,[o],u)}}function Ir({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:u,b:l}=o,c=s;if(r&&u.dtype==="complex64"){const p=c.texData.get(u.dataId),g=c.texData.get(l.dataId),[m,y]=[[p.complexTensorInfos.real,g.complexTensorInfos.real],[p.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(_=>{const[w,T]=_,E={dataId:w.dataId,dtype:w.dtype,shape:u.shape},A={dataId:T.dataId,dtype:T.dtype,shape:l.shape},I=new xd(n,u.shape,l.shape);return c.runWebGLProgram(I,[E,A],ho(w.dtype,T.dtype))}),b=Rl({inputs:{real:m,imag:y},backend:c});return c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(y),b}const f=a||ho(u.dtype,l.dtype);if((u.dtype==="string"||l.dtype==="string"||c.shouldExecuteOnCPU([u,l]))&&i!=null){const p=c.texData.get(u.dataId).values,g=c.texData.get(l.dataId).values,m=u.dtype==="string"?hg(p):p,y=u.dtype==="string"?hg(g):g,[b,_]=i(u.shape,l.shape,m,y,f),w=c.makeTensorInfo(_,f),T=c.texData.get(w.dataId);return T.values=b,w}const h=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let d;return h?d=new Kg(e,u.shape,l.shape,t):d=new xd(n,u.shape,l.shape),c.runWebGLProgram(d,[u,l],f)}}function pg(n,e=!1){if(n==="linear")return e?j$e:z$e;if(n==="relu")return e?X$e:W$e;if(n==="elu")return e?q$e:U$e;if(n==="relu6")return e?K$e:H$e;if(n==="prelu")return e?Uj:zj;if(n==="leakyrelu")return e?Vj:Fj;if(n==="sigmoid")return e?Y$e:G$e;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wj{constructor(e,t,r,i=!1,a=!1,o=!1,s=null,u=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ai(this.outputShape.length);const c=i?e[1]:e[2],f=Math.ceil(c/2),h=i?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",y="";s&&(u?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:l?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:m=`vec4 activation(vec4 x) {
          ${s}
        }`,y="result = activation(result);");const b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let _="rc.x",w="rc.x";e[0]<t[0]?_=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(w=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${f}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${_};
        int batchB = ${w};
        for (int i = 0; i < ${f}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${d});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${g[0]});
          result += (${p[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class TB{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Yt(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EB="return a * b;";function jI(n){const{inputs:e,backend:t}=n,{a:r,b:i}=e,a=ho(r.dtype,i.dtype);if(r.dtype==="complex64"){const s=t.texData.get(r.dataId),u=t.texData.get(i.dataId),l=new TB(CB.REAL,r.shape,i.shape),c=new TB(CB.IMAG,r.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],h=t.runWebGLProgram(l,f,"float32"),d=t.runWebGLProgram(c,f,"float32"),p=Rl({inputs:{real:h,imag:d},backend:t});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),p}if(t.shouldExecuteOnCPU([r,i])){const s=t.texData.get(r.dataId),u=t.texData.get(i.dataId),[l,c]=f$e(r.shape,i.shape,s.values,u.values,a),f=t.makeTensorInfo(c,a),h=t.texData.get(f.dataId);return h.values=l,f}let o;return xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Kg(EB,r.shape,i.shape):o=new xd(EB,r.shape,i.shape),t.runWebGLProgram(o,[r,i],a)}const hNe={kernelName:aA,backendName:"webgl",kernelFunc:jI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dNe(n,e,t){const r=[yd(n.shape),...bd(n.shape)],i={dtype:n.dtype,shape:r,dataId:n.dataId},a=[yd(e),...bd(e)],o=new Bj(a,r),s=!0,u=[r],l=t.runWebGLProgram(o,[i],n.dtype,u,s);return{dataId:l.dataId,shape:e,dtype:l.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ye(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{shape:a}=r,o=t,s=ze(i.shape),u=UU(a,s),l=ze(u);J(s===l,()=>`The new shape (${u}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(i.dataId);return c.isPacked&&!w1(i.shape,u)&&!(c.texture!==null&&w1(c.shape,u))?dNe(i,u,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:u,dtype:i.dtype})}const pNe={kernelName:TA,backendName:"webgl",kernelFunc:Ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kB{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];const s=Math.floor(r/4)*4,u=r%4;let l="sumValue += dot(values, ones);";if(t!=null){const f=1/t;l=`sumValue += dot(values * ${Jc(f)?f.toPrecision(2):f}, ones);`}let c="";a%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${l}
        }

        int inIdx = inOffset + ${s};
        if (${u===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${l}
        } else if (${u===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${l}
        } else if (${u===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${l}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vNe{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];let s="0.0",u="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",u="min"):t==="max"&&(s="-1.0 / 1e-20",u="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?l="sumValue":t==="prod"?l="prodValue":t==="all"?l="allValue":t==="any"&&(l="anyValue");const c=Math.floor(r/4)*4,f=r%4;let h=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${u}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${u}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,d="vec4";t==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):t==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===2}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${f===3}) {
          ${d} values = ${d}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gNe(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=Wb(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function If(n,e,t,r){const i=gNe(n.shape);let a=n;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:u,outSize:l}=i[o];let c,f;t==="mean"?c=o===0?new kB({windowSize:u,inSize:s,batchSize:n.shape[0],outSize:l},s):new kB({windowSize:u,inSize:s,batchSize:n.shape[0],outSize:l}):c=new vNe({windowSize:u,inSize:s,batchSize:n.shape[0],outSize:l},t),f=a,a=r.runWebGLProgram(c,[a],e),f.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(f)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mNe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[t[o]];this.outputShape=r,this.rank=r.length;const i=Pn(this.rank),a=yNe(t);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function yNe(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<n.length;i++)r[n[i]]=t[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bNe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[t[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Pn(this.rank),a=Mj("rc",this.rank),o=new Array(this.rank);for(let c=0;c<t.length;c++)o[t[c]]=a[c];const s=`vec2(${o.slice(-2).join()})`,u=`++${a[this.rank-1]} < ${r[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${l};
      if(${u}) {
        result[1] = ${l};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${l};
        if(${u}) {
          result[3] = ${l};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xb(n,e,t){const r=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bNe(n.shape,e):new mNe(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xNe(n,e,t,r){const i=e,a=n.shape.length,o=cr(i,n.shape);let s=o;const u=Ua(s,a),l=u!=null;let c=n;l&&(c=Xb(n,u,r),s=Wa(s.length,a)),Co("sum",s,a);const[f,h]=xs(c.shape,s);let d=f;t&&(d=oa(f,o));const p=ze(h),m=ze(n.shape)/p,y=Ye({inputs:{x:c},attrs:{shape:[m,p]},backend:r}),b=kb(n.dtype),_=If(y,b,"sum",r),w=Ye({inputs:{x:_},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(_),l&&r.disposeIntermediateTensorInfo(c),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kb(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,keepDims:o}=r;return xNe(i,a,o,t)}const _Ne={kernelName:WA,backendName:"webgl",kernelFunc:Kb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ti(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{perm:a}=r,o=t,s=i.shape.length,u=new Array(s);for(let c=0;c<u.length;c++)u[c]=i.shape[a[c]];let l;if(o.shouldExecuteOnCPU([i])){const f=o.texData.get(i.dataId).values,h=HI(f,i.shape,i.dtype,a,u);l=o.makeTensorInfo(u,i.dtype);const d=o.texData.get(l.dataId);d.values=h}else l=Xb(i,a,o);return l}const wNe={kernelName:wv,backendName:"webgl",kernelFunc:ti};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hj=1e3;function C1({a:n,b:e,transposeA:t,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:u=null}){const l=n.shape.length,c=e.shape.length,f=t?n.shape[l-2]:n.shape[l-1],h=r?e.shape[c-1]:e.shape[c-2],d=t?n.shape[l-1]:n.shape[l-2],p=r?e.shape[c-2]:e.shape[c-1],g=n.shape.slice(0,-2),m=e.shape.slice(0,-2),y=ze(g),b=ze(m),w=Yt(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([d,p]);J(f===h,()=>`Error in matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const T=t?[y,f,d]:[y,d,f],E=r?[b,p,h]:[b,h,p],A=Ye({inputs:{x:n},backend:i,attrs:{shape:T}}),I=Ye({inputs:{x:e},backend:i,attrs:{shape:E}}),$=[A,I],D=Math.max(y,b),N=t?A.shape[1]:A.shape[2],z=a!=null,F=o!=null,G=u==="leakyrelu",U=u!=null?pg(u,!0):null,H=z||F||G||U!=null;let X;if((d===1||p===1)&&N>Hj&&H===!1){let Q=A,le=I;t&&(Q=ti({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),$.push(Q)),r&&(le=ti({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),$.push(le));const ge=p!==1,be=p===1;let ke=Q;ge&&(ke=Ye({inputs:{x:Q},backend:i,attrs:{shape:[D,N,1]}}),$.push(ke));const Ae=p===1?2:1;let de=le;be&&(de=Ye({inputs:{x:le},backend:i,attrs:{shape:[D,1,N]}}),$.push(de));const Ce=jI({inputs:{a:ke,b:de},backend:i});X=Kb({inputs:{x:Ce},backend:i,attrs:{axis:Ae,keepDims:!0}}),$.push(Ce)}else{const Q=ho(n.dtype,e.dtype),le=new Wj(T,E,[D,d,p],t,r,z,U,F,G),ge=[A,I];if(a!=null&&ge.push(a),F&&ge.push(o),G){const be=i.makeTensorInfo([],"float32",Cf(s,"float32"));ge.push(be),$.push(be)}X=i.runWebGLProgram(le,ge,Q)}const Z=Ye({inputs:{x:X},backend:i,attrs:{shape:w}});$.push(X);for(const Q of $)i.disposeIntermediateTensorInfo(Q);return Z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SNe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:f}=r;return C1({a:i,b:a,transposeA:u,transposeB:l,backend:t,bias:o,preluActivationWeights:s,leakyreluAlpha:f,activation:c})}const CNe={kernelName:u1,backendName:"webgl",kernelFunc:SNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB="return abs(x);";function TNe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=t.texData.get(r.dataId),o=Oj(a.values);return t.makeTensorInfo(r.shape,r.dtype,o)}let i;return xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new el(r.shape,AB):i=new Qo(r.shape,AB),t.runWebGLProgram(i,[r],r.dtype)}const ENe={kernelName:AE,backendName:"webgl",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kNe=Ha+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,ANe=Qt({opSnippet:kNe}),RNe={kernelName:RE,backendName:"webgl",kernelFunc:ANe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe=Ha+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,PNe=Qt({opSnippet:INe}),DNe={kernelName:IE,backendName:"webgl",kernelFunc:PNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RB="return a + b;",$Ne=Ir({opSnippet:RB,packedOpSnippet:RB,supportsComplex:!0,cpuKernelImpl:GDe}),NNe={kernelName:Sb,backendName:"webgl",kernelFunc:$Ne};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ONe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LNe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return Fi({inputs:{x:r[0]},backend:t});if(r.length>xe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const u=Math.floor(r.length/2),l=p0({inputs:r.slice(0,u),backend:t}),c=p0({inputs:r.slice(u),backend:t});return p0({inputs:[l,c],backend:t})}const i=r.map(u=>u.dtype).reduce((u,l)=>ho(u,l)),a=r.map(u=>u.shape),s=xe().getBool("WEBGL_PACK")?new LNe(r[0].shape,a):new ONe(r[0].shape,a);return t.runWebGLProgram(s,r,i)}const MNe={kernelName:PE,backendName:"webgl",kernelFunc:p0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BNe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=cr(a,i.shape);let l=u;const c=Ua(l,s);let f=i;c!=null&&(f=ti({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Wa(l.length,s)),Co("all",l,s);const[h,d]=xs(f.shape,l),p=ze(d),g=Ye({inputs:{x:f},backend:t,attrs:{shape:[-1,p]}}),m=If(g,g.dtype,"all",t);let y;if(o){const b=oa(h,u);y=Ye({inputs:{x:m},backend:t,attrs:{shape:b}})}else y=Ye({inputs:{x:m},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),c!=null&&t.disposeIntermediateTensorInfo(f),y}const FNe={kernelName:DE,backendName:"webgl",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VNe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=cr(a,i.shape);let l=u;const c=Ua(l,s);let f=i;c!=null&&(f=ti({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Wa(l.length,s)),Co("any",l,s);const[h,d]=xs(f.shape,l),p=ze(d),g=Ye({inputs:{x:f},backend:t,attrs:{shape:[-1,p]}}),m=If(g,g.dtype,"any",t);let y;if(o){const b=oa(h,u);y=Ye({inputs:{x:m},backend:t,attrs:{shape:b}})}else y=Ye({inputs:{x:m},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),c!=null&&t.disposeIntermediateTensorInfo(f),y}const zNe={kernelName:$E,backendName:"webgl",kernelFunc:VNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UNe{constructor(e,t,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s=t==="max"?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${u};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WNe{constructor(e,t,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,J(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const s=this.outputShape,u=s.length,l=Pn(u),c=Jr("coords",u);let f,h;if(o===1){h=u+1;const I=Pn(h);f=`
        ${I} sourceLocR = ${I}(${c.join()}, 0);
        ++${c[u-1]};
        ${I} sourceLocG = ${I}(${c.join()}, 0);
        ++${c[u-2]};
        ${I} sourceLocA = ${I}(${c.join()}, 0);
        --${c[u-1]};
        ${I} sourceLocB = ${I}(${c.join()}, 0);
        --${c[u-2]};`}else h=u,f=`
        ${l} sourceLocR = coords;
        ++${c[u-1]};
        ${l} sourceLocG = coords;
        ++${c[u-2]};
        ${l} sourceLocA = coords;
        --${c[u-1]};
        ${l} sourceLocB = coords;
        --${c[u-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],g=d.map(I=>"int "+I),m=Jr("sourceLocR",h-1).concat("inIdx.r"),y=Jr("sourceLocG",h-1).concat("inIdx.g"),b=Jr("sourceLocB",h-1).concat("inIdx.b"),_=Jr("sourceLocA",h-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",T=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${_.join()})));`,E=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${_.join()}) : 0.)`,A=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${d.join()}),
                                          vec2(${d.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${d.join()}),
                               vec2(${d.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${l} coords = getOutputCoords();
        bool hasNextCol = ${c[u-1]} < ${s[u-1]-1};
        bool hasNextRow = ${c[u-2]} < ${s[u-2]-1};
        ${f}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${E};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${T}
          vec4 candidate = ${E};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gj(n,e,t,r=null){let i=e.shape[0],a=e.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const o=Wb(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},u=new UNe(s,t,r==null),l=[e];r!=null&&l.push(r);const c=n.runWebGLProgram(u,l,"int32");if(c.shape[1]===1)return c;const f=Gj(n,e,t,c);return n.disposeIntermediateTensorInfo(c),f}function jj(n,e,t,r=null){const i=r!=null?r.shape:e.shape,a=i[i.length-1],o=Wb(a),s=new WNe(i,o,t,r==null),u=r==null?[e]:[e,r],l=n.runWebGLProgram(s,u,"int32");if(l.shape.length===e.shape.length){const c=jj(n,e,t,l);return n.disposeIntermediateTensorInfo(l),c}return l}function qj(n,e,t,r){const i=[t];if(Co("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!xe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=n.texData.get(e.dataId),s=o!==null&&o.isPacked;let u=e;s&&(u=n.unpackTensor(e),a.push(u));const[l,c]=xs(u.shape,i),f=ze(c),h=Ye({inputs:{x:u},backend:n,attrs:{shape:[-1,f]}});a.push(h);const d=Gj(n,h,r);a.push(d);const p=Ye({inputs:{x:d},backend:n,attrs:{shape:l}});return a.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}return jj(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a}=r;let o=cr(a,i.shape);const s=Ua(o,i.shape.length);let u=i;const l=[];s!=null&&(u=ti({inputs:{x:i},backend:t,attrs:{perm:s}}),l.push(u),o=Wa(o.length,u.shape.length)),Co("argMax",[o[0]],u.shape.length);const c=qj(t,u,o[0],"max");return l.forEach(f=>t.disposeIntermediateTensorInfo(f)),c}const GNe={kernelName:NE,backendName:"webgl",kernelFunc:HNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jNe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a}=r;let o=cr(a,i.shape);const s=Ua(o,i.shape.length);let u=i;const l=[];s!=null&&(u=ti({inputs:{x:i},backend:t,attrs:{perm:s}}),l.push(u),o=Wa(o.length,u.shape.length)),Co("argMin",[o[0]],u.shape.length);const c=qj(t,u,o[0],"min");return l.forEach(f=>t.disposeIntermediateTensorInfo(f)),c}const qNe={kernelName:OE,backendName:"webgl",kernelFunc:jNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XNe=Ha+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,KNe=Qt({opSnippet:XNe}),YNe={kernelName:LE,backendName:"webgl",kernelFunc:KNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZNe=Ha+"return log(x + sqrt(x * x + 1.0));",QNe=Qt({opSnippet:ZNe}),JNe={kernelName:ME,backendName:"webgl",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eOe=Ha+`
  return atan(x);
`,tOe=Qt({opSnippet:eOe}),nOe={kernelName:BE,backendName:"webgl",kernelFunc:tOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rOe=GI+`
  return atan(a, b);
`,iOe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xg+`
  return result;
`,aOe=Ir({opSnippet:rOe,packedOpSnippet:iOe}),oOe={kernelName:VE,backendName:"webgl",kernelFunc:aOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe=Ha+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,uOe=Qt({opSnippet:sOe}),lOe={kernelName:FE,backendName:"webgl",kernelFunc:uOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vg{constructor(e,t,r,i=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const g=t==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(g||(b="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${u});
        const ivec2 pads = ivec2(${d}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${f};
              wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?m:y:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(w="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,E=o%4,A=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${u});
      const ivec2 pads = ivec2(${d}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${f};
            wR += ${l}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${T}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${T};
          if (${E===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${E===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${w});
      }
    `}}class qI{constructor(e,t,r,i=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,u=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,f=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,m=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const _=t==="avg";let w="0.0";if(_||(w="-1.0 / 1e-20"),r){const D=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${u}, ${l});
        const ivec3 pads = ivec3(${m}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${d};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${f}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${D} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let E=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(E="avgValue / max(count, 1.0)");const A=Math.floor(o/4)*4,I=o%4,$=`
      if (${_}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${u}, ${l});
      const ivec3 pads = ivec3(${m}, ${y}, ${b});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${A};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${$}
            }
          }
        }
        setOutput(${E});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;jg(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;J(Ui(o,l),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Tf(i.shape,a,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&Un(c.inShape,c.outShape))return Fi({inputs:{x:i},backend:t});const f=new vg(c,"avg",!1);return t.runWebGLProgram(f,[i],"float32")}const fOe={kernelName:zE,backendName:"webgl",kernelFunc:cOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r,c=[1,1,1],f=Mg(i.shape,a,o,c,s,u,l),h=new qI(f,"avg",!1);return t.runWebGLProgram(h,[i],"float32")}const dOe={kernelName:UE,backendName:"webgl",kernelFunc:hOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pOe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${f});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${u};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${l};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class vOe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=f-1-e.padInfo.front,g=h-1-e.padInfo.top,m=d-1-e.padInfo.left,y=1/(t*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${g}, ${m});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${l}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${d};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:a}=e,o=a,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],h=Mg(o.shape,s,u,f,l,c),d=new vOe(h);return t.runWebGLProgram(d,[i],o.dtype)}const mOe={kernelName:JU,backendName:"webgl",kernelFunc:gOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:a}=e,o=a;jg([i,a],"avgPoolGrad");const{filterSize:s,strides:u,pad:l}=r,c=Tf(o.shape,s,u,1,l),f=new pOe(c);return t.runWebGLProgram(f,[i],o.dtype)}const bOe={kernelName:QU,backendName:"webgl",kernelFunc:yOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(n){const{inputs:e,backend:t,attrs:r}=n,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;return C1({a:i,b:a,transposeA:o,transposeB:s,backend:t})}const _Oe={kernelName:WE,backendName:"webgl",kernelFunc:xOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wOe{constructor(e,t,r,i,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Yt(e,t),Yt(e,r);let s="0.0";i!=null&&(Yt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let u="1.0";a!=null&&(Yt(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${u};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SOe{constructor(e,t,r,i,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Yt(e,t),Yt(e,r);let s="vec4(0.0)";i!=null&&(Yt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let u="vec4(1.0)";a!=null&&(Yt(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${u};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COe=({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=n;J(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=t;u==null&&(u=.001);const l=[r,i,a];let c=null;o!=null&&(c=o.shape,l.push(o));let f=null;s!=null&&(f=s.shape,l.push(s));const h=xe().getBool("WEBGL_PACK_NORMALIZATION")?new SOe(r.shape,i.shape,a.shape,c,f,u):new wOe(r.shape,i.shape,a.shape,c,f,u);return e.runWebGLProgram(h,l,l[0].dtype)},TOe={kernelName:Ak,backendName:"webgl",kernelFunc:COe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EOe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=Pn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=kOe(this.rank);let i;const a=e.map((o,s)=>`sourceLoc.${cT[s]} = start[${s}] + coords.${cT[s]};`);i=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const cT=["x","y","z","w","u","v"];function kOe(n){if(n===1)return"sourceLoc";if(n<=6)return cT.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AOe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=Pn(this.rank),r=Jr("coords",this.rank),i=Jr("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,u=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((c,f)=>`start[${f}]`).join()});`:e.map((c,f)=>`${i[f]} = ${r[f]} + start[${f}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${l}
        vec4 result = vec4(0.);
        ${s}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ROe(n,e,t,r){const i=r.texData.get(n.dataId),a=r.makeTensorInfo(t,n.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=t,o.dtype=n.dtype;let s=PI(e,mr(n.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||n.dataId};const u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),a}function Ud(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:a,size:o}=r,[s,u]=hG(i,a,o);if(nG(i,s,u),ze(u)===0)return t.makeTensorInfo(u,i.dtype,[]);if(t.shouldExecuteOnCPU([i])||i.dtype==="string"){const f=t.texData.get(i.dataId),h=w$e(f.values,s,u,i.shape,i.dtype);return t.makeTensorInfo(u,i.dtype,h)}const{isPacked:l}=t.texData.get(i.dataId),c=II(i.shape,s,u);if(l||!c){const f=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new AOe(u):new EOe(u),h=[s];return t.runWebGLProgram(f,[i],i.dtype,h)}return t.uploadToGPU(i.dataId),ROe(i,s,u,t)}const IOe={kernelName:LA,backendName:"webgl",kernelFunc:Ud};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:a,crops:o}=r;J(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((b,_)=>b*_),u=$I(i.shape,a,s),l=NI(u.length,a.length),c=OI(i.shape,a,s),f=SG(o,a.length),h=CG(c,o,a.length),d=[],p=Ye({inputs:{x:i},backend:t,attrs:{shape:u}}),g=ti({inputs:{x:p},backend:t,attrs:{perm:l}}),m=Ye({inputs:{x:g},backend:t,attrs:{shape:c}}),y=Ud({inputs:{x:m},backend:t,attrs:{begin:f,size:h}});return d.push(p),d.push(g),d.push(m),d.forEach(b=>t.disposeIntermediateTensorInfo(b)),y},DOe={kernelName:HE,backendName:"webgl",kernelFunc:POe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:a}=e,{size:o}=r,s=t.readSync(i.dataId),u=t.readSync(a.dataId),l=Nj(s,u,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,l)}const NOe={kernelName:GE,backendName:"webgl",kernelFunc:$Oe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(n){const{inputs:e,backend:t}=n,{s0:r,s1:i}=e,a=t.readSync(r.dataId),o=t.readSync(i.dataId),s=Yt(Array.from(a),Array.from(o));return t.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const LOe={kernelName:jE,backendName:"webgl",kernelFunc:OOe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOe="return float(a != b);",Xj=Ir({opSnippet:MOe,cpuKernelImpl:d$e,dtype:"bool"}),BOe={kernelName:sA,backendName:"webgl",kernelFunc:Xj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yg(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Fi({inputs:{x:i.complexTensorInfos.real},backend:t})}const FOe={kernelName:wA,backendName:"webgl",kernelFunc:Yg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VOe="return float(int(x));";function zOe(n,e){const t=new Qo(n.shape,VOe),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fT(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Fi({inputs:{x:i},backend:t});const o=gl(i.shape),s=fT({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),u=Rl({inputs:{real:s,imag:o},backend:t});return o.dispose(),t.disposeIntermediateTensorInfo(s),u}if(i.dtype==="complex64"){const o=Yg({inputs:{input:i},backend:t}),s=fT({inputs:{x:o},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(o),s}if(!GU(i.dtype,a)){const o=Fi({inputs:{x:i},backend:t});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(t.shouldExecuteOnCPU([i])){const o=t.texData.get(i.dataId).values,[s,u,l]=qDe(o,i.shape,i.dtype,a);return t.makeTensorInfo(s,u,l)}if(a==="int32")return zOe(i,t);if(a==="bool"){const o=t.makeTensorInfo([],"bool",fs("bool",1)),u=Xj({inputs:{a:i,b:o},backend:t});return t.disposeIntermediateTensorInfo(o),u}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const UOe={kernelName:Cb,backendName:"webgl",kernelFunc:fT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB="return ceil(x);",WOe=Qt({opSnippet:IB,packedOpSnippet:IB,cpuKernelImpl:XDe}),HOe={kernelName:qE,backendName:"webgl",kernelFunc:WOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GOe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qOe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{clipValueMin:a,clipValueMax:o}=r;let s;xe().getBool("WEBGL_PACK_CLIP")?s=new jOe(i.shape):s=new GOe(i.shape);const u=[[a],[o]];return t.runWebGLProgram(s,[i],i.dtype,u)}const XOe={kernelName:XE,backendName:"webgl",kernelFunc:qOe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KOe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PB(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function YOe(n){const{inputs:e,backend:t}=n,{x:r}=e,i=t.texData.get(r.dataId),a=new KOe(r.shape),o=[PB(r,i.complexTensorInfos.real),PB(r,i.complexTensorInfos.imag)];return t.runWebGLProgram(a,o,o[0].dtype)}const ZOe={kernelName:YE,backendName:"webgl",kernelFunc:YOe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QOe{constructor(e){this.outputShape=[],this.outputShape=uf(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const s=t[o-1];r.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const i=t.length,a=t[t.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JOe{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=uf(e,t);const r=this.outputShape,i=r.length,a=Pn(i),o=Jr("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((g,m)=>`T${m}`);const u=new Array(e.length-1);u[0]=e[0][t];for(let g=1;g<u.length;g++)u[g]=u[g-1]+e[g][t];const l=s[t],c=s.slice(-2),f=s.join();let h=`if (${l} < ${u[0]}) {
        return getChannel(
            getT0(${f}), vec2(${c.join()}));
        }`;for(let g=1;g<u.length;g++){const m=u[g-1];h+=`
        if (${l} < ${u[g]}  && ${l} >= ${u[g-1]}) {
          return getChannel(
            getT${g}(${$y(s,l,m)}),
            vec2(${$y(c,l,m)}));
        }`}const d=u.length,p=u[u.length-1];h+=`
        return getChannel(
          getT${d}(${$y(s,l,p)}),
          vec2(${$y(c,l,p)}));`,this.userCode=`
      float getValue(${s.map(g=>"int "+g)}) {
        ${h}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function $y(n,e,t){const r=n.indexOf(e);return n.map((a,o)=>o===r?`${a} - ${t}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yb(n){const{inputs:e,backend:t}=n,{input:r}=e,i=t.texData.get(r.dataId);return Fi({inputs:{x:i.complexTensorInfos.imag},backend:t})}const eLe={kernelName:Nk,backendName:"webgl",kernelFunc:Yb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jp(n,e,t){const r=n[0].dtype;if(r==="complex64"){const d=n.map(b=>Yg({inputs:{input:b},backend:t})),p=n.map(b=>Yb({inputs:{input:b},backend:t})),g=Jp(d,e,t),m=Jp(p,e,t),y=Rl({inputs:{real:g,imag:m},backend:t});return d.forEach(b=>t.disposeIntermediateTensorInfo(b)),p.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),y}let i=t.shouldExecuteOnCPU(n);if(r==="string"&&(i=!0),i){const d=n.map(w=>{const E=[-1,ze(w.shape.slice(e))];return Ye({inputs:{x:w},backend:t,attrs:{shape:E}})}),p=d.map(w=>({vals:t.readSync(w.dataId),shape:w.shape})),g=uf(d.map(w=>w.shape),1),m=d[0].shape[0]===1,y=KDe(p,g,r,m),b=uf(n.map(w=>w.shape),e),_=t.makeTensorInfo(b,r,y);return d.forEach(w=>t.disposeIntermediateTensorInfo(w)),_}const a=n.filter(d=>ze(d.shape)>0),o=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const d=o?new Qo(n[0].shape,Wu):new el(n[0].shape,Wu);return t.runWebGLProgram(d,n,r)}const s=xe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const d=[];for(let g=0;g<a.length;g+=s){const m=a.slice(g,g+s);d.push(Jp(m,e,t))}const p=Jp(d,e,t);for(const g of d)t.disposeIntermediateTensorInfo(g);return p}if(o){const d=new JOe(a.map(p=>p.shape),e);return t.runWebGLProgram(d,a,r)}const{tensors2D:u,outShape:l}=tLe(a,e,t),c=new QOe(u.map(d=>d.shape)),f=t.runWebGLProgram(c,u,r);u.forEach(d=>t.disposeIntermediateTensorInfo(d));const h=Ye({inputs:{x:f},attrs:{shape:l},backend:t});return t.disposeIntermediateTensorInfo(f),h}function tLe(n,e,t){const r=uf(n.map(a=>a.shape),e);return{tensors2D:n.map(a=>Ye({inputs:{x:a},attrs:{shape:[-1,ze(a.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kj(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r,a=cr(i,e[0].shape)[0],o=e.map(l=>l.shape);mG(o,a);const s=uf(e.map(l=>l.shape),a);if(ze(s)===0)return t.makeTensorInfo(s,e[0].dtype,[]);const u=e.filter(l=>ze(l.shape)>0);return u.length===1?Fi({inputs:{x:u[0]},backend:t}):Jp(u,a,t)}const nLe={kernelName:ZE,backendName:"webgl",kernelFunc:Kj};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yj{constructor(e,t=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,g=e.inChannels%4,m=e.dataFormat==="channelsLast",y=m?1:2,b=m?2:3,_=m?3:1;let w="",T="";r&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,T="result = activation(result);");const E=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${u}, ${l});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${_}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${d}; wC++) {
            int xC = xCCorner + wC * ${f};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${E}
        ${T}
        setOutput(result);
      }
    `}}class rLe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,f=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=Math.floor(e.inChannels/4)*4,g=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${t}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${f}; wF++) {
          int xF = xFCorner + wF * ${u};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${l};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zj{constructor(e,t=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ai(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<c;m++)h+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;h+=`
     for (int r = 0; r < ${l}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<c;m++)h+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(f+1)/2;m++){const y=m*2;if(h+=`
           xC = xCCorner + ${y*u};
           `,s===1){if(y<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,u===1&&y>0?h+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<c)){const b=o%2===0?_b(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,u>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:h+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?h+=`
                     xC${y+1} = xTexelC${y};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<c&&(h+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<c&&(h+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<c&&(h+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let d="",p="";r&&(i?d=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?d=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:d=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${d}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iLe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ai(this.outputShape.length);const{dataFormat:r}=t,i=ii(),a=r==="channelsLast",o=a?1:2,s=a?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let c=0;c<=1;c++)for(let f=0;f<=1;f++)l+=`
          blockIndex = rc.z + ${f};
          pos = rc.y + ${c};

          ${u}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+f}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${l}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T1(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function Qj({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const u=n.shape,l=r.texData.get(n.dataId),c=t.inChannels,f=u[0]*u[1]*u[2],h=t.outChannels,d=t.dataFormat==="channelsLast",p=!1,g=!1;let m;const y=[];if(a!=null){const w=T1(a.shape,d);w!=null&&(a=Ye({inputs:{x:a},backend:r,attrs:{shape:w}}),y.push(a))}if(i!=null){const w=T1(i.shape,d);w!=null&&(i=Ye({inputs:{x:i},backend:r,attrs:{shape:w}}),y.push(i))}if(!((f===1||h===1)&&c>Hj)&&l.isPacked&&d&&l.texture!=null&&u[2]%2!==0&&Un(l.shape.slice(-3),u.slice(-3))){const w=u[0]*u[1]*(u[2]+1),T={dataId:n.dataId,shape:[1,w,t.inChannels],dtype:n.dtype},E=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,J(w1(l.shape,T.shape),()=>`packed reshape ${l.shape} to ${T.shape} isn't free`);const A=Ye({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});y.push(A);const I=C1({a:T,b:A,backend:r,transposeA:p,transposeB:g,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),$=r.texData.get(I.dataId);J($.isPacked,()=>"batchMatMul result is expected to be packed"),l.shape=E,$.shape=t.outShape,m=Fi({inputs:{x:I},backend:r}),m.shape=t.outShape,y.push(I)}else{const w=t.outHeight*t.outWidth,T=Ye({inputs:{x:n},backend:r,attrs:{shape:d?[t.batchSize,w,t.inChannels]:[t.batchSize,t.inChannels,w]}}),E=Ye({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),A=C1({a:d?T:E,b:d?E:T,transposeA:!d,transposeB:g,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});m=Ye({inputs:{x:A},backend:r,attrs:{shape:t.outShape}}),y.push(T),y.push(E),y.push(A)}for(const w of y)r.disposeIntermediateTensorInfo(w);return m}function Jj({x:n,filter:e,convInfo:t,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:u,filterHeight:l,inChannels:c,outWidth:f,outHeight:h,dataFormat:d}=t,p=d==="channelsLast",g=u*l*c,m=h*f,y=[t.batchSize,g,m],b=!0,_=!1,w=[];if(a!=null){const Z=T1(a.shape,p);Z!=null&&(a=Ye({inputs:{x:a},backend:r,attrs:{shape:Z}}),w.push(a))}if(i!=null){const Z=T1(i.shape,p);Z!=null&&(i=Ye({inputs:{x:i},backend:r,attrs:{shape:Z}}),w.push(i))}const T=Ye({inputs:{x:e},backend:r,attrs:{shape:[1,g,ze(e.shape)/g]}});w.push(T);const E=new iLe(y,t),A=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],I=r.runWebGLProgram(E,[n],"float32",A),$=Ye({inputs:{x:I},backend:r,attrs:{shape:y}});w.push(I),w.push($);const D=i!=null,N=a!=null,z=s==="leakyrelu",F=s?pg(s,!0):null,G=new Wj(p?$.shape:T.shape,p?T.shape:$.shape,p?[t.batchSize,m,t.outChannels]:[t.batchSize,t.outChannels,m],b,_,D,F,N,z),U=p?[$,T]:[T,$];if(i&&U.push(i),N&&U.push(a),z){const Z=r.makeTensorInfo([],"float32",Cf(o,"float32"));U.push(Z),w.push(Z)}const H=r.runWebGLProgram(G,U,"float32"),X=Ye({inputs:{x:H},backend:r,attrs:{shape:t.outShape}});w.push(H);for(const Z of w)r.disposeIntermediateTensorInfo(Z);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r,f=Dd(u),h=aa(i.shape,a.shape,o,l,s,c,!1,f);let d;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))d=Qj({x:i,filter:a,convInfo:h,backend:t});else if(h.strideWidth<=2&&f==="channelsLast"&&xe().getBool("WEBGL_EXP_CONV")){const g=new Zj(h),m=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];d=t.runWebGLProgram(g,[i,a],"float32",m)}else if(xe().getBool("WEBGL_CONV_IM2COL"))d=Jj({x:i,filter:a,convInfo:h,backend:t});else{const g=new Yj(h);d=t.runWebGLProgram(g,[i,a],"float32")}const p=Ye({inputs:{x:d},backend:t,attrs:{shape:h.outShape}});return t.disposeIntermediateTensorInfo(d),p}const oLe={kernelName:QE,backendName:"webgl",kernelFunc:aLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${o}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class uLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",s=t-1-e.padInfo.top,u=r-1-e.padInfo.left,l=o?1:2,c=o?2:3,f=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${f}];

        ivec2 dyCorner = ivec2(coords[${l}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,u=t-1-e.padInfo.front,l=r-1-e.padInfo.top,c=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${u}, ${l}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,f=Dd(u),h=aa(i.shape,c,o,1,s,l,!1,f),d=new sLe(h);return t.runWebGLProgram(d,[i,a],"float32")}const hLe={kernelName:JE,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,f=Dd(l),h=aa(o,a.shape,s,1,u,c,!1,f),d=new uLe(h);return t.runWebGLProgram(d,[i,a],"float32")}const pLe={kernelName:ek,backendName:"webgl",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u}=r,l=Bg(i.shape,a.shape,o,u,s),c=new rLe(l);return t.runWebGLProgram(c,[i,a],"float32")}const gLe={kernelName:tk,backendName:"webgl",kernelFunc:vLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:u}=r,l=Bg(i.shape,u,o,1,s),c=new lLe(l);return t.runWebGLProgram(c,[i,a],"float32")}const yLe={kernelName:e8,backendName:"webgl",kernelFunc:mLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:u}=r,l=Bg(u,a.shape,s,1,o),c=new cLe(l);return t.runWebGLProgram(c,[i,a],"float32")}const xLe={kernelName:nk,backendName:"webgl",kernelFunc:bLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Le=zd+`
  return cos(x);
`,wLe=Qt({opSnippet:_Le}),SLe={kernelName:rk,backendName:"webgl",kernelFunc:wLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,TLe=Qt({opSnippet:CLe}),ELe={kernelName:ik,backendName:"webgl",kernelFunc:TLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kLe{constructor(e,t,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,u,l]=e,[c]=t,[f,h]=r;this.outputShape=[c,f,h,l];const d=i==="bilinear"?1:0,[p,g]=[`${s-1}.0`,`${u-1}.0`],[m,y,b]=f>1?[`${(s-1)/(f-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[_,w,T]=h>1?[`${(u-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${_});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${w};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${T};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${d} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe=n=>{const{inputs:e,backend:t,attrs:r}=n,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:u,extrapolationValue:l}=r,c=new kLe(i.shape,a.shape,s,u,l);return t.runWebGLProgram(c,[i,a,o],"float32")},RLe={kernelName:sk,backendName:"webgl",kernelFunc:ALe};var gg;(function(n){n.Prod="*",n.Sum="+"})(gg||(gg={}));class DB{constructor(e,t,r,i){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===gg.Prod?"1.0":"0.0",s=r?o:`getX(${$B(a,"coords",this.op)})`,u=this.outputShape[this.outputShape.length-1];let l="",c="";r?(l=i?`end != ${u-1}`:"end != 0",c=i?"end + 1":"end - 1"):(l=i?`end + pow2 < ${u}`:"end >= pow2",c=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Pn(a)} coords = getOutputCoords();
        int end = ${NB(a,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${l}) {
          int idx = ${c};
          ${NB(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${$B(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function $B(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function NB(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(n,e,t,r,i,a){const o=e.shape.length,s=Ua([r],o);let u=e;s!=null&&(u=ti({inputs:{x:e},backend:t,attrs:{perm:s}}));const l=Wa(1,o)[0];if(l!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=u.shape[l];let f=Fi({inputs:{x:u},backend:t});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const d=new DB(n,u.shape,!1,a),p=[[h]],g=f;f=t.runWebGLProgram(d,[f],f.dtype,p),t.disposeIntermediateTensorInfo(g)}if(i){const h=new DB(n,u.shape,i,a),d=f;f=t.runWebGLProgram(h,[f],f.dtype),t.disposeIntermediateTensorInfo(d)}if(s!=null){const h=NR(s),d=ti({inputs:{x:f},backend:t,attrs:{perm:h}});return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(u),d}return f}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return e9(gg.Prod,i,t,a,o,s)}const PLe={kernelName:ak,backendName:"webgl",kernelFunc:ILe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return e9(gg.Sum,i,t,a,o,s)}const $Le={kernelName:ok,backendName:"webgl",kernelFunc:DLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const u=t.readSync(i.dataId),l=t.readSync(a.dataId),c=Nj(u,l,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,c)}else if(i.shape.length===2){const u=t.bufferSync(i),l=t.bufferSync(a),c=jDe(u,l,o,s);return t.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const OLe={kernelName:uk,backendName:"webgl",kernelFunc:NLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LLe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockSize:a,dataFormat:o}=r,s=i.shape[0],u=o==="NHWC"?i.shape[1]:i.shape[2],l=o==="NHWC"?i.shape[2]:i.shape[3],c=o==="NHWC"?i.shape[3]:i.shape[1],f=u*a,h=l*a,d=c/(a*a),p=o==="NHWC"?[s,f,h,d]:[s,d,f,h],g=new LLe(p,a,o);return t.runWebGLProgram(g,[i],i.dtype)}const BLe={kernelName:lk,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t9{constructor(e,t=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ai(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,u=e.outChannels/e.inChannels;let l="",c="";r&&(i?l=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?l=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:l=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${l}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${u};
        int q = d2 - d1 * ${u};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${f}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n9{constructor(e,t=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ai(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,u=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,h=f;let d=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<f;y++)d+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;d+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let y=0;y<f;y++)d+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;d+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(h+1)/2;y++){const b=y*2;if(d+=`
          xC = xCCorner + ${b*l};
          `,u===1){if(b<f&&(s%2===1?(d+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,l===1&&b>0?d+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:d+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):d+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<f)){const _=s%2===0?_b(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(d+=`
                  xCOffset = xC + imod(pads[1], 2) + ${_};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,l>1?d+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:d+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):_===1?d+=`
                    xC${b+1} = xTexelC${b};
                    `:d+=`
                    xCOffset = xC + ${_};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<f&&(s%2===1?(d+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<f&&(d+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(d+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<f&&(d+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<f&&(d+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<f&&(d+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}d+=`
    }
  `,d+=`
      }
    `;let p="",g="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,g="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${d}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u,dimRoundingMode:l}=r;let c=u;c==null&&(c=[1,1]),J(Ui(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=aa(i.shape,a.shape,o,c,s,l,!0);let h;xe().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?h=new n9(f):h=new t9(f);const d=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return t.runWebGLProgram(h,[i,a],"float32",d)}const VLe={kernelName:ck,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ULe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,s=r-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${u}; dm++) {
              int d2 = d1 * ${u} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,dy:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r,f=aa(i.shape,c,o,s,u,l,!0),h=new zLe(f);return t.runWebGLProgram(h,[i,a],"float32")}const HLe={kernelName:fk,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GLe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r,f=aa(c,a.shape,o,s,u,l,!0),h=new ULe(f);return t.runWebGLProgram(h,[i,a],"float32")}const jLe={kernelName:hk,backendName:"webgl",kernelFunc:GLe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qLe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(n){const{inputs:e,backend:t}=n,{x:r}=e,i=[...r.shape,...r.shape],a=ze(r.shape),o=Ye({inputs:{x:r},backend:t,attrs:{shape:[a]}}),s=new qLe(a),u=t.runWebGLProgram(s,[o],o.dtype),l=Ye({inputs:{x:u},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),l}const KLe={kernelName:dk,backendName:"webgl",kernelFunc:XLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YLe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:i,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:u,dilationHeight:l,dilationWidth:c}=e,{top:f,left:h}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${f}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${l};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${u}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a}=e,{strides:o,pad:s,dilations:u}=r,l=G8(i.shape,a.shape,o,s,"NHWC",u);let c;const f=new YLe(l);c=t.runWebGLProgram(f,[i,a],"float32");const h=Ye({inputs:{x:c},backend:t,attrs:{shape:l.outShape}});return t.disposeIntermediateTensorInfo(c),h}const QLe={kernelName:pk,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JLe(n){const{inputs:e,backend:t,attrs:r}=n,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:u}=$G(i,a.length);OG(o.length,u,a);const{path:l,steps:c}=LG(s,u),f=c.length;let h=null,d=o.length;const p=[];for(let g=0;g<f;++g){for(const m of c[g]){const{permutationIndices:y,expandDims:b}=NG(d,u[m]);let _;MG(y)?_=a[m]:(_=ti({inputs:{x:a[m]},backend:t,attrs:{perm:y}}),p.push(_));const w=_.shape.slice();for(let T=0;T<b.length;++T)w.splice(b[T],0,1);Un(_.shape,w)||(_=Ye({inputs:{x:_},backend:t,attrs:{shape:w}}),p.push(_)),h===null?h=_:(h=jI({inputs:{a:_,b:h},backend:t}),p.push(h))}g<f-1&&(l[g]>=0&&(h=Kb({inputs:{x:h},backend:t,attrs:{axis:l[g]-(o.length-d),keepDims:!1}}),p.push(h)),d--)}for(const g of p)g!==h&&t.disposeIntermediateTensorInfo(g);return h}const eMe={kernelName:gk,backendName:"webgl",kernelFunc:JLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",nMe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,rMe=Qt({opSnippet:tMe,packedOpSnippet:nMe}),iMe={kernelName:mk,backendName:"webgl",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMe="return (b >= 1.0) ? a : a * (b + 1.0);",oMe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,sMe=n=>{const{inputs:e,backend:t}=n,{dy:r,y:i}=e,a=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kg(oMe,r.shape,i.shape):new xd(aMe,r.shape,i.shape);return t.runWebGLProgram(a,[r,i],r.dtype)},uMe={kernelName:t8,backendName:"webgl",kernelFunc:sMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lMe=`
  return vec4(equal(a, b));
`,cMe="return float(a == b);",fMe=Ir({opSnippet:cMe,packedOpSnippet:lMe,dtype:"bool",cpuKernelImpl:YDe}),hMe={kernelName:bk,backendName:"webgl",kernelFunc:fMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dMe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${kG};
  float a1 = ${AG};
  float a2 = ${RG};
  float a3 = ${IG};
  float a4 = ${PG};
  float a5 = ${DG};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,pMe=Qt({opSnippet:dMe}),vMe={kernelName:yk,backendName:"webgl",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gMe=zd+`
  return exp(x);
`,mMe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,r9=Qt({opSnippet:gMe,packedOpSnippet:mMe,cpuKernelImpl:ZDe,dtype:"float32"}),yMe={kernelName:xk,backendName:"webgl",kernelFunc:r9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hT(n){const{inputs:e,attrs:t,backend:r}=n,{dim:i}=t,{input:a}=e,o=a.shape.length,s=a.shape.slice();let u=i;return i<0&&(J(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+i+1),s.splice(u,0,1),Ye({inputs:{x:a},backend:r,attrs:{shape:s}})}const bMe={kernelName:_k,backendName:"webgl",kernelFunc:hT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OB="return exp(x) - 1.0;",xMe=Qt({opSnippet:OB,packedOpSnippet:OB,cpuKernelImpl:QDe}),_Me={kernelName:wk,backendName:"webgl",kernelFunc:xMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LB{constructor(e,t,r){this.variableNames=["real","imag"];const i=t[1];this.outputShape=t;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i9(n,e,t){const r=t.texData.get(n.dataId),i=ze(n.shape),a=n.shape[n.shape.length-1],o=i/a,s=Ye({inputs:{x:n},backend:t,attrs:{shape:[o,a]}}),u=s.shape,l=new LB("real",u,e),c=new LB("imag",u,e),f=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],h=t.runWebGLProgram(l,f,"float32"),d=t.runWebGLProgram(c,f,"float32"),p=Rl({inputs:{real:h,imag:d},backend:t});t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d);const g=Ye({inputs:{x:p},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(p),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(n){const{inputs:e,backend:t}=n,{input:r}=e;return i9(r,!1,t)}const SMe={kernelName:Sk,backendName:"webgl",kernelFunc:wMe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CMe{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zg(n){const{backend:e,attrs:t}=n,{shape:r,value:i}=t;let{dtype:a}=t;if(a=a||$g(i),a==="string"){const o=Er(a,ze(r));return o.fill(i),e.makeTensorInfo(r,a,o)}else{const o=new CMe(r,i),s=[[i]];return e.runWebGLProgram(o,[],a,s)}}const TMe={kernelName:Ck,backendName:"webgl",kernelFunc:Zg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EMe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kMe={kernelName:Tk,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,i=new EMe(t.shape);return r.runWebGLProgram(i,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MB="return floor(x);",AMe=Qt({opSnippet:MB,packedOpSnippet:MB,cpuKernelImpl:JDe}),RMe={kernelName:Ek,backendName:"webgl",kernelFunc:AMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IMe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,PMe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,DMe=Ir({opSnippet:IMe,packedOpSnippet:PMe,dtype:"int32"}),$Me={kernelName:kk,backendName:"webgl",kernelFunc:DMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NMe{constructor(e){this.variableNames=["A"];const t=ii(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OMe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=ii(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe={kernelName:s1,backendName:"webgl",kernelFunc:MMe};let ch,pw=xe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function MMe(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:i}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[u,l]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[l,u],f=[l,u,a];if(s||o){const g=xe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ch==null||g!==pw)&&(pw=g,ch=document.createElement("canvas").getContext("2d",{willReadFrequently:pw})),ch.canvas.width=u,ch.canvas.height=l,ch.drawImage(i,0,0,u,l),i=ch.canvas}const h=t.makeTensorInfo(c,"int32");t.texData.get(h.dataId).usage=ea.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(h.dataId),i);const d=xe().getBool("WEBGL_PACK")?new OMe(f):new NMe(f),p=t.runWebGLProgram(d,[h],"int32");return t.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,g=Dd(c),m=aa(i.shape,a.shape,u,f,l,h,!1,g);let y;const b=[],_=o!=null,w=s!=null,T=d==="leakyrelu",E=()=>{const I=[i,a],$=(D,N)=>{if(N==="NCHW"&&D.shape.length===1&&D.shape[0]!==1){const z=Ye({inputs:{x:D},backend:t,attrs:{shape:[D.shape[0],1,1]}});return b.push(z),z}return D};if(_&&I.push($(o,c)),w&&I.push($(s,c)),T){const D=t.makeTensorInfo([],"float32",Cf(p,"float32"));I.push(D),b.push(D)}return I};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))y=Qj({x:i,filter:a,convInfo:m,backend:t,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else if(m.strideWidth<=2&&g==="channelsLast"&&xe().getBool("WEBGL_EXP_CONV")){const I=d?pg(d,!0):null,$=new Zj(m,_,I,w,T),D=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],N=E();y=t.runWebGLProgram($,N,"float32",D)}else if(xe().getBool("WEBGL_CONV_IM2COL"))y=Jj({x:i,filter:a,convInfo:m,backend:t,bias:o,activation:d,preluActivationWeights:s,leakyreluAlpha:p});else{const I=d?pg(d,!1):null,$=new Yj(m,_,I,w,T),D=E();y=t.runWebGLProgram($,D,"float32")}const A=Ye({inputs:{x:y},backend:t,attrs:{shape:m.outShape}});return b.push(y),b.forEach(I=>t.disposeIntermediateTensorInfo(I)),A}const FMe={kernelName:l1,backendName:"webgl",kernelFunc:BMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:u,pad:l,dilations:c,dimRoundingMode:f,activation:h,leakyreluAlpha:d}=r,p=[];let g=c;g==null&&(g=[1,1]),J(Ui(u,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${u} and dilations '${g}'`);const m=aa(i.shape,a.shape,u,g,l,f,!0),y=xe().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=h?pg(h,y):null,_=[i,a],w=o!=null,T=s!=null,E=h==="leakyrelu";if(w&&_.push(o),T&&_.push(s),E){const D=t.makeTensorInfo([],"float32",Cf(d,"float32"));_.push(D),p.push(D)}let A;y?A=new n9(m,w,b,T,E):A=new t9(m,w,b,T,E);const I=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],$=t.runWebGLProgram(A,_,"float32",I);return p.forEach(D=>t.disposeIntermediateTensorInfo(D)),$}const zMe={kernelName:c1,backendName:"webgl",kernelFunc:VMe};class UMe{constructor(e,t,r,i){this.sliceDim=e,this.strides=t,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=Pn(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(n){const{inputs:e,backend:t}=n,{params:r,indices:i}=e,a=i.shape,o=a[a.length-1],s=ze(r.shape),[u,l,c,f]=RI(r,i),h=Ye({inputs:{x:i},backend:t,attrs:{shape:[l,o]}}),d=Ye({inputs:{x:r},backend:t,attrs:{shape:[ze(r.shape)/c,c]}});if(t.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const y=t.readSync(i.dataId),b=t.bufferSync(r),_=e$e(y,b,r.dtype,l,o,c,f,r.shape,s);return t.makeTensorInfo(u,r.dtype,_.values)}const p=new UMe(o,f,[l,c],r.shape),g=t.runWebGLProgram(p,[d,h],d.dtype),m=Ye({inputs:{x:g},backend:t,attrs:{shape:u}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(g),m}const HMe={kernelName:Ik,backendName:"webgl",kernelFunc:WMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GMe{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=Pn(this.rank),i=jMe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function jMe(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<n.length;i++)i===2?r.push("index"):r.push(`${t[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a9(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,indices:a}=e,{axis:o,batchDims:s}=r,u=cr(o,i.shape)[0];if(xe().get("DEBUG")){const b=t.readSync(a.dataId),_=i.shape[u];for(let w=0;w<b.length;++w){const T=b[w];J(T<=_-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${_-1}]`)}}const l=QG(i,a,u,s),c=ze(a.shape),f=[],h=Ye({inputs:{x:i},backend:t,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),d=Ye({inputs:{x:a},backend:t,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(h),f.push(d);const p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(t.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const b=t.bufferSync(d),_=t.bufferSync(h),w=t$e(_,b,p);return f.forEach(T=>t.disposeIntermediateTensorInfo(T)),t.makeTensorInfo(l.outputShape,w.dtype,w.values)}const g=new GMe(h.shape,p),m=t.runWebGLProgram(g,[h,d],h.dtype);f.push(m);const y=Ye({inputs:{x:m},backend:t,attrs:{shape:l.outputShape}});return f.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}const qMe={kernelName:Rk,backendName:"webgl",kernelFunc:a9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XMe="return float(a > b);",KMe=`
  return vec4(greaterThan(a, b));
`,YMe=Ir({opSnippet:XMe,packedOpSnippet:KMe,cpuKernelImpl:n$e,dtype:"bool"}),ZMe={kernelName:Pk,backendName:"webgl",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QMe="return float(a >= b);",JMe=`
  return vec4(greaterThanEqual(a, b));
`,eBe=Ir({opSnippet:QMe,packedOpSnippet:JMe,dtype:"bool",cpuKernelImpl:r$e}),tBe={kernelName:Dk,backendName:"webgl",kernelFunc:eBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nBe(n){const{inputs:e,backend:t}=n,{input:r}=e;return i9(r,!0,t)}const rBe={kernelName:$k,backendName:"webgl",kernelFunc:nBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iBe="return float(!isnan(x) && !isinf(x));",aBe=Qt({opSnippet:iBe,dtype:"bool"}),oBe={kernelName:Ok,backendName:"webgl",kernelFunc:aBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe="return float(isinf(x));",uBe=Qt({opSnippet:sBe,dtype:"bool"}),lBe={kernelName:Lk,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cBe="return float(isnan(x));",fBe=Qt({opSnippet:cBe,dtype:"bool"}),hBe={kernelName:Mk,backendName:"webgl",kernelFunc:fBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe="return float(a < b);",pBe=`
  return vec4(lessThan(a, b));
`,vBe=Ir({opSnippet:dBe,packedOpSnippet:pBe,cpuKernelImpl:i$e,dtype:"bool"}),gBe={kernelName:Fk,backendName:"webgl",kernelFunc:vBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mBe="return float(a <= b);",yBe=`
  return vec4(lessThanEqual(a, b));
`,bBe=Ir({opSnippet:mBe,packedOpSnippet:yBe,cpuKernelImpl:a$e,dtype:"bool"}),xBe={kernelName:Vk,backendName:"webgl",kernelFunc:bBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(n){const{backend:e,attrs:t}=n,{start:r,stop:i,num:a}=t,o=o$e(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const wBe={kernelName:zk,backendName:"webgl",kernelFunc:_Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SBe=zd+`
  return x < 0.0 ? 0./0. : log(x);
`,CBe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,TBe=Qt({opSnippet:SBe,packedOpSnippet:CBe,cpuKernelImpl:s$e}),EBe={kernelName:Uk,backendName:"webgl",kernelFunc:TBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe=zd+`
  return log(1.0 + x);
`,ABe=Qt({opSnippet:kBe}),RBe={kernelName:Wk,backendName:"webgl",kernelFunc:ABe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IBe="return float(a >= 1.0 && b >= 1.0);",PBe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,DBe=Ir({opSnippet:IBe,packedOpSnippet:PBe,dtype:"bool"}),$Be={kernelName:Hk,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NBe="return float(!(x >= 1.0));",OBe=Qt({opSnippet:NBe}),LBe={kernelName:Gk,backendName:"webgl",kernelFunc:OBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MBe="return float(a >= 1.0 || b >= 1.0);",BBe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,FBe=Ir({opSnippet:MBe,packedOpSnippet:BBe,dtype:"bool"}),VBe={kernelName:jk,backendName:"webgl",kernelFunc:FBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zBe{constructor(e,t,r,i,a){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${i}) * sum`;a===.5?u=`inversesqrt(${l})`:a===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${u};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UBe{constructor(e,t,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;this.outputShape=e;let u;const l=`float(${r}) + float(${i}) * sum`;a===.5?u=`inversesqrt(${l})`:a===1?u=`1.0/(${l})`:u=`exp(log(${l}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${u};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:u}=r,l=xe().getBool("WEBGL_PACK_NORMALIZATION")?new UBe(i.shape,a,o,s,u):new zBe(i.shape,a,o,s,u);return t.runWebGLProgram(l,[i],i.dtype)},HBe={kernelName:qk,backendName:"webgl",kernelFunc:WBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GBe{constructor(e,t,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jBe=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:u,alpha:l,beta:c}=r,f=new GBe(i.shape,s,u,l,c);return t.runWebGLProgram(f,[i,a,o],i.dtype)},qBe={kernelName:n8,backendName:"webgl",kernelFunc:jBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XBe(n,e,t,r){const i=ze(e),o=ze(n.shape)/i,s=Ye({inputs:{x:n},attrs:{shape:[o,i]},backend:r}),u=If(s,n.dtype,"max",r),l=Ye({inputs:{x:u},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,u=cr(a,i.shape);let l=u;const c=Ua(l,s),f=c!=null,h=t.shouldExecuteOnCPU([i]);let d=i;if(f){if(h){const _=t.texData.get(d.dataId).values,w=new Array(s);for(let A=0;A<w.length;A++)w[A]=i.shape[c[A]];const T=HI(_,i.shape,i.dtype,c,w);d=t.makeTensorInfo(w,i.dtype);const E=t.texData.get(d.dataId);E.values=T}else d=Xb(i,c,t);l=Wa(l.length,s)}Co("max",l,s);const[p,g]=xs(d.shape,l);let m=p;o&&(m=oa(p,u));let y;if(h){const _=t.texData.get(d.dataId).values,w=u$e(_,ze(g),m,i.dtype);y=t.makeTensorInfo(m,i.dtype);const T=t.texData.get(y.dataId);T.values=w}else y=XBe(d,g,m,t);return f&&t.disposeIntermediateTensorInfo(d),y}const KBe={kernelName:Xk,backendName:"webgl",kernelFunc:o9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=GI+`
  return max(a, b);
`,ZBe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xg+`
  return result;
`,QBe=Ir({opSnippet:YBe,packedOpSnippet:ZBe,cpuKernelImpl:l$e}),JBe={kernelName:Kk,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e;jg(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:u}=r,l=1;J(Ui(o,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`);const c=Tf(i.shape,a,o,l,s,u);if(c.filterWidth===1&&c.filterHeight===1&&Un(c.inShape,c.outShape))return Fi({inputs:{x:i},backend:t});const f=new vg(c,"max",!1);return t.runWebGLProgram(f,[i],i.dtype)}const t3e={kernelName:Yk,backendName:"webgl",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{filterSize:a,strides:o,pad:s,dataFormat:u,dimRoundingMode:l}=r,c=[1,1,1],f=Mg(i.shape,a,o,c,s,l,u),h=new qI(f,"max",!1);return t.runWebGLProgram(h,[i],i.dtype)}const r3e={kernelName:Zk,backendName:"webgl",kernelFunc:n3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i3e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,u=o-1-e.padInfo.left,l=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class a3e{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.front,h=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=u*l*c-1;this.userCode=`
      const ivec3 pads = ivec3(${f}, ${h}, ${d});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${u};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${l};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${l} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:a}=e,o=a,{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,f=[1,1,1],h=Mg(o.shape,s,u,f,l,c),d=new qI(h,"max",!0),p=t.runWebGLProgram(d,[o],o.dtype),g=new a3e(h),m=t.runWebGLProgram(g,[i,p],o.dtype);return t.disposeIntermediateTensorInfo(p),m}const s3e={kernelName:i8,backendName:"webgl",kernelFunc:o3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(n){const{inputs:e,backend:t,attrs:r}=n,{dy:i,input:a,output:o}=e,s=a;jg([a,o],"maxPoolGrad");const{filterSize:u,strides:l,pad:c,dimRoundingMode:f}=r,h=Tf(s.shape,u,l,1,c,f),d=!0,p=new vg(h,"max",d),g=t.runWebGLProgram(p,[s],s.dtype),m=new i3e(h),y=t.runWebGLProgram(m,[i,g],s.dtype);return t.disposeIntermediateTensorInfo(g),y}const l3e={kernelName:r8,backendName:"webgl",kernelFunc:u3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(n,e,t,r){let i=new vg(t,"max",!1);const a=r.runWebGLProgram(i,[n],"float32");i=new vg(t,"max",!0,!0,e);const o=r.runWebGLProgram(i,[n],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e={kernelName:Qk,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,u=t;J(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const l=[1,1];J(Ui(a,l),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${l}'`);const c=Tf(r.shape,i,a,l,o),[f,h]=c3e(r,s,c,u);return[f,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(n,e,t,r){const i=ze(e),o=ze(n.shape)/i,s=Ye({inputs:{x:n},attrs:{shape:[o,i]},backend:r}),u=If(s,"float32","mean",r),l=Ye({inputs:{x:u},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3e={kernelName:Jk,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:i,axis:a}=e,o=t,s=r.shape.length,u=cr(a,r.shape);let l=u;const c=Ua(l,s),f=c!=null,h=o.shouldExecuteOnCPU([r]),d=[];let p=r;if(f){if(h){const w=o.texData.get(p.dataId).values,T=new Array(s);for(let I=0;I<T.length;I++)T[I]=r.shape[c[I]];const E=HI(w,r.shape,r.dtype,c,T);p=o.makeTensorInfo(T,r.dtype);const A=o.texData.get(p.dataId);A.values=E}else p=Xb(r,c,o);d.push(p),l=Wa(l.length,s)}Co("sum",l,s);const[g,m]=xs(p.shape,l);let y=g;i&&(y=oa(g,u));const b=h3e(p,m,y,o);for(const _ of d)o.disposeIntermediateTensorInfo(_);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=cr(a,i.shape);let l=u;const c=Ua(l,s);let f=i;c!=null&&(f=ti({inputs:{x:i},backend:t,attrs:{perm:c}}),l=Wa(l.length,i.shape.length)),Co("min",l,s);const[h,d]=xs(f.shape,l),p=ze(d),g=Ye({inputs:{x:f},backend:t,attrs:{shape:[-1,p]}}),m=If(g,g.dtype,"min",t);let y;if(o){const b=oa(h,u);y=Ye({inputs:{x:m},backend:t,attrs:{shape:b}})}else y=Ye({inputs:{x:m},backend:t,attrs:{shape:h}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(m),c!=null&&t.disposeIntermediateTensorInfo(f),y}const v3e={kernelName:eA,backendName:"webgl",kernelFunc:p3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e=GI+`
  return min(a, b);
`,m3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Xg+`
  return result;
`,y3e=Ir({opSnippet:g3e,packedOpSnippet:m3e,cpuKernelImpl:c$e}),b3e={kernelName:tA,backendName:"webgl",kernelFunc:y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x3e{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((c,f)=>c[0]+e[f]+c[1]);const i=e.length,a=Pn(i),o=t.map(c=>c[0]).join(","),s=t.map((c,f)=>c[0]+e[f]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),l=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${l};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${l};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${l};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _3e{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((p,g)=>p[0]+e[g]+p[1]);const i=e.length,a=Pn(i),o=t.map(p=>p[0]).join(","),s=t.map((p,g)=>p[0]+e[g]).join(","),u=Jr("rc",i),l=Jr("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,h=r==="reflect"?0:1;let d="";if(i===1){const p=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
      `}else{const p=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;d=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${l.join()}), ${f});
        ${u[i-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${l.join()}), ${f});
        }
        rc = outputLoc;
        ${u[i-2]} += 1;
        if(${u[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${l.join()}), ${f});
          ${u[i-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${l.join()}), ${f});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${d}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w3e=({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:i,mode:a}=t,o=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _3e(r.shape,i,a):new x3e(r.shape,i,a);return e.runWebGLProgram(o,[r],r.dtype)},S3e={kernelName:nA,backendName:"webgl",kernelFunc:w3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,T3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Xg+`
  return result;
`,E3e=Ir({opSnippet:C3e,packedOpSnippet:T3e}),k3e={kernelName:rA,backendName:"webgl",kernelFunc:E3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A3e{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,I3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,s9=Ir({opSnippet:R3e,packedOpSnippet:I3e,checkOutOfBounds:!0}),P3e={kernelName:vk,backendName:"webgl",kernelFunc:s9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BB="return a - b;",u9=Ir({opSnippet:BB,packedOpSnippet:BB,supportsComplex:!0,cpuKernelImpl:I$e}),D3e={kernelName:rR,backendName:"webgl",kernelFunc:u9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l9(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{dim:a}=r,o=cr([a],i.shape),s=o9({inputs:{x:i},backend:t,attrs:{reductionIndices:o,keepDims:!1}}),u=oa(s.shape,o),l=Ye({inputs:{x:s},backend:t,attrs:{shape:u}}),c=u9({inputs:{a:i,b:l},backend:t}),f=r9({inputs:{x:c},backend:t}),h=Kb({inputs:{x:f},backend:t,attrs:{axis:o,keepDims:!1}}),d=Ye({inputs:{x:h},backend:t,attrs:{shape:u}}),p=s9({inputs:{a:f,b:d},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(l),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),p}const $3e={kernelName:jA,backendName:"webgl",kernelFunc:l9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(n){const{inputs:e,backend:t,attrs:r}=n,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r,u=s?i:l9({inputs:{logits:i},backend:t,attrs:{dim:i.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new A3e(l,c,a),h=[[o]],d=t.runWebGLProgram(f,[u],"int32",h);return s||t.disposeIntermediateTensorInfo(u),d}const O3e={kernelName:iA,backendName:"webgl",kernelFunc:N3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e=Ha+`
  return -x;
`,M3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function B3e(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const a=t.texData.get(r.dataId),[o,s]=h$e(a.values,r.shape,r.dtype);return t.makeTensorInfo(s,r.dtype,o)}let i;return xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new el(r.shape,M3e):i=new Qo(r.shape,L3e),t.runWebGLProgram(i,[r],r.dtype)}const F3e={kernelName:oA,backendName:"webgl",kernelFunc:B3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3e=gI;function z3e(n){Ca("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=r,l=t.readSync(i.dataId),c=t.readSync(a.dataId),{selectedIndices:f}=V3e(l,c,o,s,u);return t.makeTensorInfo([f.length],"int32",new Int32Array(f))}const U3e={kernelName:uA,backendName:"webgl",kernelFunc:z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3e=mI;function H3e(n){Ca("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r,c=t.readSync(i.dataId),f=t.readSync(a.dataId),{selectedIndices:h,validOutputs:d}=W3e(c,f,o,s,u,l);return[t.makeTensorInfo([h.length],"int32",new Int32Array(h)),t.makeTensorInfo([],"int32",new Int32Array([d]))]}const G3e={kernelName:lA,backendName:"webgl",kernelFunc:H3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3e=yI;function q3e(n){Ca("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r,c=t.readSync(i.dataId),f=t.readSync(a.dataId),h=o,d=s,p=u,g=l,{selectedIndices:m,selectedScores:y}=j3e(c,f,h,d,p,g);return[t.makeTensorInfo([m.length],"int32",new Int32Array(m)),t.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const X3e={kernelName:cA,backendName:"webgl",kernelFunc:q3e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K3e{constructor(e,t,r,i){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3e=n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:u}=r,l=ze(i.shape),c=new K3e(l,o,s,u),f=Ye({inputs:{x:i},backend:t,attrs:{shape:[l]}}),h=t.runWebGLProgram(c,[f],a);t.disposeIntermediateTensorInfo(f);const d=[...i.shape,o],p=Ye({inputs:{x:h},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(h),p},Z3e={kernelName:hA,backendName:"webgl",kernelFunc:Y3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E1(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const i=Yg({inputs:{input:r},backend:t}),a=E1({inputs:{x:i},backend:t}),o=Yb({inputs:{input:r},backend:t}),s=E1({inputs:{x:o},backend:t}),u=Rl({inputs:{real:a,imag:s},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(s),u}else return Zg({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const Q3e={kernelName:fR,backendName:"webgl",kernelFunc:E1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=Yg({inputs:{input:r},backend:t}),a=c9({inputs:{x:i},backend:t}),o=Yb({inputs:{input:r},backend:t}),s=E1({inputs:{x:o},backend:t}),u=Rl({inputs:{real:a,imag:s},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(s),u}else return Zg({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const J3e={kernelName:fA,backendName:"webgl",kernelFunc:c9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(n){const{inputs:e,backend:t,attrs:r}=n,{axis:i}=r;if(e.length===1)return hT({inputs:{input:e[0]},backend:t,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(c=>{Br(a,c.shape,"All tensors passed to stack must have matching shapes"),J(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],u=e.map(c=>{const f=hT({inputs:{input:c},backend:t,attrs:{dim:i}});return s.push(f),f}),l=Kj({inputs:u,backend:t,attrs:{axis:i}});return s.forEach(c=>t.disposeIntermediateTensorInfo(c)),l}const tFe={kernelName:dA,backendName:"webgl",kernelFunc:eFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nFe{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((l,c)=>l[0]+e[c]+l[1]);const i=e.length,a=Pn(i),o=t.map(l=>l[0]).join(","),s=t.map((l,c)=>l[0]+e[c]).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${u}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rFe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((g,m)=>g[0]+e[m]+g[1]);const i=e.length,a=Pn(i),o=t.map(g=>g[0]).join(","),s=t.map((g,m)=>g[0]+e[m]).join(","),u=Jr("rc",i),l=Jr("source",i),c=`${u[i-1]} < ${this.outputShape[i-1]}`,f=i===1?"source":`vec2(${l.slice(-2).join()})`,h=[`${a} rc = outputLoc;`,`${u[i-1]} += 1;
       if(${c}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${u[i-2]} += 1;
       if(${u[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${u[i-1]} += 1;
         if(${c}) {`],d=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let g=0,m=i===1?2:4;g<m;g++)p+=`
        ${h[g]}
        if (${d}) {
          result[${g}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${g}] = getChannel(getX(${l.join()}), ${f});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{paddings:a,constantValue:o}=r;if(ze(i.shape)===0){const l=a.map((c,f)=>c[0]+i.shape[f]+c[1]);return Zg({backend:t,attrs:{shape:l,value:o,dtype:i.dtype}})}const s=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rFe(i.shape,a,o):new nFe(i.shape,a,o),u=[[o]];return t.runWebGLProgram(s,[i],i.dtype,u)},iFe={kernelName:pA,backendName:"webgl",kernelFunc:f9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,oFe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Xg+`
  return result;
`,sFe=Ir({opSnippet:aFe,packedOpSnippet:oFe}),uFe={kernelName:vA,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,u=[],l=cr(a,i.shape);let c=l;const f=Ua(c,s);let h=i;f!=null&&(h=ti({inputs:{x:i},backend:t,attrs:{perm:f}}),c=Wa(c.length,s),u.push(h)),Co("prod",c,s);let d;if(t.shouldExecuteOnCPU([h])){const p=t.texData.get(h.dataId).values,{outVals:g,outShape:m,outDtype:y}=p$e(h.shape,h.dtype,p,c);d=t.makeTensorInfo(m,y,g)}else{const[p,g]=xs(h.shape,c),m=ze(g),y=Ye({inputs:{x:h},backend:t,attrs:{shape:[-1,m]}}),b=kb(i.dtype),_=If(y,b,"prod",t);d=Ye({inputs:{x:_},backend:t,attrs:{shape:p}}),u.push(y),u.push(_)}if(o){u.push(d);const p=oa(d.shape,l);d=Ye({inputs:{x:d},backend:t,attrs:{shape:p}})}return u.forEach(p=>t.disposeIntermediateTensorInfo(p)),d}const cFe={kernelName:mA,backendName:"webgl",kernelFunc:lFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,u=i.map(y=>t.readSync(y.dataId)),l=i.map(y=>y.shape),c=t.readSync(a.dataId),f=t.readSync(o.dataId),[h,d,p]=v$e(u,l,c,a.shape,a.dtype,f,o.shape,s),g=h.map(y=>t.makeTensorInfo([y.length],"int32",y)),m=t.makeTensorInfo(p,a.dtype,d);return g.concat([m])}const hFe={kernelName:yA,backendName:"webgl",kernelFunc:fFe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(n){const{inputs:e,backend:t}=n,{starts:r,limits:i,deltas:a}=e,o=t.readSync(r.dataId),s=t.readSync(i.dataId),u=t.readSync(a.dataId),[l,c]=g$e(o,r.shape,r.dtype,s,i.shape,u,a.shape),f=t.makeTensorInfo([l.length],"int32",l),h=t.makeTensorInfo([c.length],r.dtype,c);return[f,h]}const pFe={kernelName:bA,backendName:"webgl",kernelFunc:dFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:u}=r,l=t.readSync(i.dataId),c=t.readSync(a.dataId),f=t.readSync(o.dataId),h=s.map(m=>t.readSync(m.dataId)),d=s.map(m=>m.shape),[p,g]=m$e(l,i.shape,c,a.shape,a.dtype,f,o.shape,h,d,u);return t.makeTensorInfo(p,a.dtype,g)}const gFe={kernelName:xA,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h9=n=>{const{backend:e,attrs:t}=n,{start:r,stop:i,step:a,dtype:o}=t,s=y$e(r,i,a,o);return e.makeTensorInfo([s.length],o,s)},mFe={kernelName:_A,backendName:"webgl",kernelFunc:h9};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yFe="return 1.0 / x;",bFe=Qt({opSnippet:yFe}),xFe={kernelName:SA,backendName:"webgl",kernelFunc:bFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Fe=Ha+`
  return (x < 0.0) ? 0.0 : x;
`,wFe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SFe=Qt({opSnippet:_Fe,packedOpSnippet:wFe}),CFe={kernelName:CA,backendName:"webgl",kernelFunc:SFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe=Ha+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,EFe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kFe=Qt({opSnippet:TFe,packedOpSnippet:EFe}),AFe={kernelName:AA,backendName:"webgl",kernelFunc:kFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RFe{constructor(e,t,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,t,r,l];const c=[i&&t>1?s-1:s,i&&r>1?u-1:u],f=[i&&t>1?t-1:t,i&&r>1?r-1:r];let h;a?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IFe{constructor(e,t,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,t,r,l];const c=[i&&t>1?s-1:s,i&&r>1?u-1:u],f=[i&&t>1?t-1:t,i&&r>1?r-1:r];let h;a?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[u,l]=s,c=xe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new IFe(i.shape,u,l,a,o):new RFe(i.shape,u,l,a,o);return t.runWebGLProgram(c,[i],"float32")}const DFe={kernelName:kA,backendName:"webgl",kernelFunc:PFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Fe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,a]=t,[,o,s]=e,u=[r&&o>1?i-1:i,r&&s>1?a-1:a],l=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,g=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NFe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:a}=e,{alignCorners:o}=r,s=new $Fe(a.shape,i.shape,o);return t.runWebGLProgram(s,[a],a.dtype)}const OFe={kernelName:o8,backendName:"webgl",kernelFunc:NFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LFe{constructor(e,t,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,t,r,l];const c=[i&&t>1?s-1:s,i&&r>1?u-1:u],f=[i&&t>1?t-1:t,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/f[0]},
          ${c[1]/f[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${u}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MFe{constructor(e,t,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,u,l]=e;this.outputShape=[o,t,r,l];const c=[i&&t>1?s-1:s,i&&r>1?u-1:u],f=[i&&t>1?t-1:t,i&&r>1?r-1:r],h=i?"0.5":"0.0";let d;a?d="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/f[0]},
          ${c[1]/f[1]},
          ${c[1]/f[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${u}.0,
                                     ${u}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${l-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[u,l]=s,c=xe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new MFe(i.shape,u,l,a,o):new LFe(i.shape,u,l,a,o);return t.runWebGLProgram(c,[i],i.dtype)}const FFe={kernelName:EA,backendName:"webgl",kernelFunc:BFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VFe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,i,a]=t,[,o,s]=e,u=[r&&o>1?i-1:i,r&&s>1?a-1:a],l=[r&&o>1?o-1:o,r&&s>1?s-1:s],c=u[0]/l[0],f=u[1]/l[1],h=1/c,d=1/f,p=Math.ceil(h)*2+2,g=Math.ceil(d)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${f});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${d});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${u[0]}) *
                (float(dyR) / float(${l[0]}));

            float sourceFracCol =
                float(${u[1]}) *
                  (float(dyC) / float(${l[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zFe(n){const{inputs:e,backend:t,attrs:r}=n,{images:i,dy:a}=e,{alignCorners:o}=r,s=new VFe(a.shape,i.shape,o);return t.runWebGLProgram(s,[a],a.dtype)}const UFe={kernelName:a8,backendName:"webgl",kernelFunc:zFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WFe{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=s=>t.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,a=e.map((s,u)=>i(u)).join(","),o=Pn(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HFe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Jr("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,s=Pn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${u(i.slice())};
          if(${a}){
            result.g = ${l(i.slice())};
          }
          if(${o}) {
            result.b = ${c(i.slice())};
            if(${a}) {
              result.a = ${f(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function u(p){return h(p)}function l(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function f(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const g=e.map((b,_)=>d(_,p)),m=g.join(","),y=g.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${y}))`}function d(p,g){return t.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${g[p]} - 1`:`${g[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{dims:a}=r,o=i.shape.length,s=cr(a,i.shape);if(o===0)return Fi({inputs:{x:i},backend:t});const u=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HFe(i.shape,s):new WFe(i.shape,s);return t.runWebGLProgram(u,[i],i.dtype)}const jFe={kernelName:RA,backendName:"webgl",kernelFunc:GFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qFe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let a="";typeof t=="number"?a=`float outputValue = ${t.toFixed(2)};`:a=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XFe={kernelName:dR,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:i,fillValue:a,center:o}=e,s=t,u=new qFe(r.shape,a),[l,c]=wG(o,r.shape[1],r.shape[2]),f=[[l,c,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(u,[r],r.dtype,f)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KFe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,YFe=Qt({opSnippet:KFe}),ZFe={kernelName:IA,backendName:"webgl",kernelFunc:YFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QFe="return inversesqrt(x);",JFe=Qt({opSnippet:QFe,cpuKernelImpl:b$e}),e4e={kernelName:PA,backendName:"webgl",kernelFunc:JFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d9{constructor(e,t,r,i,a,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Pn(a.length),l=Pn(o.length);let c="";r===1?c="i":r===2&&(c="i, j");const f=`getIndices(${c})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const d=`getUpdates(${h})`,p=t>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${l} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${d};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(n){const{inputs:e,backend:t,attrs:r}=n,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:f}=Nb(a,i,o),h=[f/l,l];if(f===0)return t.makeTensorInfo(o,i.dtype);const d=Ye({inputs:{x:i},backend:t,attrs:{shape:[u,s]}}),p=Ye({inputs:{x:a},backend:t,attrs:{shape:[u,l]}}),g=t.makeTensorInfo([],"float32",new Float32Array([0])),m=new d9(u,s,d.shape.length,p.shape.length,c,h),y=t.runWebGLProgram(m,[p,d,g],p.dtype),b=Ye({inputs:{x:y},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(g),b}const n4e={kernelName:DA,backendName:"webgl",kernelFunc:t4e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r4e{constructor(e,t,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,s=xe().getNumber("WEBGL_VERSION")===2?a:o,u=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${u} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:i,values:a}=e,{side:o}=r,s=new r4e(i.shape[0],i.shape[1],a.shape[1],o),u=[[i.shape[1]]];return t.runWebGLProgram(s,[i,a],"int32",u)}const a4e={kernelName:$A,backendName:"webgl",kernelFunc:i4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o4e{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[];for(let c=0;c<t.length;c++)l.push(`${s[c]}`),c<e&&u.push(`${s[c]}`);i=u.join(),a=l.join()}const o=Pn(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4e(n){const{inputs:e,backend:t}=n,{condition:r,t:i,e:a}=e,o=new o4e(r.shape.length,i.shape,i.shape.length);return t.runWebGLProgram(o,[r,i,a],ho(i.dtype,a.dtype))}const u4e={kernelName:NA,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${TG};
  float scale = ${EG};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,c4e=Qt({opSnippet:l4e}),f4e={kernelName:OA,backendName:"webgl",kernelFunc:c4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=zd+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,d4e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,p4e=Qt({opSnippet:h4e,packedOpSnippet:d4e,cpuKernelImpl:_$e}),v4e={kernelName:VA,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,m4e=Qt({opSnippet:g4e}),y4e={kernelName:FA,backendName:"webgl",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e=zd+`
  return sin(x);
`,x4e=Qt({opSnippet:b4e}),_4e={kernelName:MA,backendName:"webgl",kernelFunc:x4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,S4e=Qt({opSnippet:w4e}),C4e={kernelName:BA,backendName:"webgl",kernelFunc:S4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,E4e=Qt({opSnippet:T4e}),k4e={kernelName:zA,backendName:"webgl",kernelFunc:E4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{blockShape:a,paddings:o}=r;J(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((y,b)=>y*b),u=[[0,0]];u.push(...o);for(let y=1+a.length;y<i.shape.length;++y)u.push([0,0]);const l=[],c=f9({inputs:{x:i},backend:t,attrs:{paddings:u,constantValue:0}}),f=$I(c.shape,a,s,!1),h=NI(f.length,a.length,!1),d=OI(c.shape,a,s,!1),p=Ye({inputs:{x:c},backend:t,attrs:{shape:f}}),g=ti({inputs:{x:p},backend:t,attrs:{perm:h}}),m=Ye({inputs:{x:g},backend:t,attrs:{shape:d}});return l.push(c),l.push(p),l.push(g),l.forEach(y=>t.disposeIntermediateTensorInfo(y)),m},R4e={kernelName:HA,backendName:"webgl",kernelFunc:A4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(n){const{inputs:e,backend:t}=n,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=t.readSync(r.dataId),u=t.readSync(i.dataId),l=t.readSync(a.dataId),c=t.readSync(o.dataId)[0],[f,h,d,p,g]=S$e(s,r.shape,r.dtype,u,i.dtype,l,c);return[t.makeTensorInfo(h,r.dtype,f),t.makeTensorInfo([h[0]],i.dtype,d),t.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),t.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const P4e={kernelName:qA,backendName:"webgl",kernelFunc:I4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4e(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(t.readSync(i.dataId)),s=t.readSync(r.dataId),u=Array.from(t.readSync(a.dataId)),[l,c,f]=C$e(s,r.shape,r.dtype,o,u);return[t.makeTensorInfo(c,r.dtype,l),t.makeTensorInfo([f.length],a.dtype,new Int32Array(f))]}const $4e={kernelName:XA,backendName:"webgl",kernelFunc:D4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4e(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=t.readSync(r.dataId),s=t.readSync(i.dataId),u=t.readSync(a.dataId),[l,c]=Lj(o,r.shape,r.dtype,s,u,!0);return t.makeTensorInfo(c,r.dtype,l)}const O4e={kernelName:KA,backendName:"webgl",kernelFunc:N4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4e(n){const{inputs:e,backend:t}=n,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=t.readSync(r.dataId),s=t.readSync(i.dataId),u=t.readSync(a.dataId),[l,c]=Lj(o,r.shape,r.dtype,s,u);return t.makeTensorInfo(c,r.dtype,l)}const M4e={kernelName:YA,backendName:"webgl",kernelFunc:L4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=Nb(a,i,s),d=!1;if(a.dtype==="string"){const y=t.bufferSync(i),b=t.bufferSync(a),_=ef(t.readSync(o.dataId)[0]),w=x$e(y,b,s,h,c,l,u,f,_,d);return t.makeTensorInfo(s,w.dtype,w.values)}const p=new d9(l,u,i.shape.length,a.shape.length,f,[h,1],d),g=t.runWebGLProgram(p,[a,i,o],a.dtype),m=Ye({inputs:{x:g},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(g),m}const F4e={kernelName:ZA,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=cr(o,i.shape)[0],u=BG(i,a,s),l=i.shape.length,c=new Array(l).fill(0),f=i.shape.slice();return u.map(h=>{const d=[...f];d[s]=h;const p=Ud({inputs:{x:i},backend:t,attrs:{begin:c,size:d}});return c[s]+=h,p})}const z4e={kernelName:GA,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FB="return sqrt(x);",U4e=Qt({opSnippet:FB,packedOpSnippet:FB,cpuKernelImpl:T$e}),W4e={kernelName:UA,backendName:"webgl",kernelFunc:U4e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e="return x * x;",G4e=Qt({opSnippet:H4e}),j4e={kernelName:s8,backendName:"webgl",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VB="return (a - b) * (a - b);",q4e=Ir({opSnippet:VB,packedOpSnippet:VB}),X4e={kernelName:QA,backendName:"webgl",kernelFunc:q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K4e({inputs:n,attrs:e,backend:t}){const{x:r}=n,i=Ha+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Qo(r.shape,i);return t.runWebGLProgram(a,[r],r.dtype)}const Y4e={kernelName:hR,backendName:"webgl",kernelFunc:K4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z4e{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=Pn(r.length),o=Pn(r.length);let s="";if(i===1)s="coords * strides + begin";else{let u=0;s=r.map((l,c)=>(u++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${u-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{begin:a,end:o,strides:s,beginMask:u,endMask:l,ellipsisMask:c,newAxisMask:f,shrinkAxisMask:h}=r,{finalShapeSparse:d,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:y,begin:b,end:_,strides:w}=dG(i.shape,a,o,s,u,l,c,f,h);let T;if(g)T=Ye({inputs:{x:i},backend:t,attrs:{shape:p}});else if(m||y){J(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const A=rG(b,_,w),I=Ud({inputs:{x:i},backend:t,attrs:{begin:b,size:A}});T=Ye({inputs:{x:I},backend:t,attrs:{shape:p}}),t.disposeIntermediateTensorInfo(I)}else if(t.shouldExecuteOnCPU([i])){const I=t.readSync(i.dataId),$=Wn(i.shape,i.dtype,I),D=E$e(d,$,w,b);T=t.makeTensorInfo(p,i.dtype,D.values)}else{const I=new Z4e(b,w,d);T=t.runWebGLProgram(I,[i],i.dtype)}const E=Ye({inputs:{x:T},backend:t,attrs:{shape:p}});return t.disposeIntermediateTensorInfo(T),E}const J4e={kernelName:JA,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5e(n){const{inputs:e,backend:t,attrs:r}=n,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:f}=e,h=t.readSync(c.dataId),d=t.readSync(f.dataId),[p,g]=k$e(h,d,i,a,o,s,u,l);return[t.makeTensorInfo([p.length],"string",p),t.makeTensorInfo(f.shape,"int32",g)]}const t5e={kernelName:eR,backendName:"webgl",kernelFunc:e5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5e(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=t.readSync(a.dataId),u=t.readSync(o.dataId)[0],[l,c,f]=A$e(s,u,i),h=c.length;return[t.makeTensorInfo([h,2],"int32",l),t.makeTensorInfo([h],"string",c),t.makeTensorInfo([2],"int32",new Int32Array(f))]}const r5e={kernelName:tR,backendName:"webgl",kernelFunc:n5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=t.readSync(a.dataId),s=R$e(o,i);return t.makeTensorInfo(a.shape,"int32",s)}const a5e={kernelName:nR,backendName:"webgl",kernelFunc:i5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o5e="return tan(x);",s5e=Qt({opSnippet:o5e}),u5e={kernelName:iR,backendName:"webgl",kernelFunc:s5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,c5e=Qt({opSnippet:l5e}),f5e={kernelName:aR,backendName:"webgl",kernelFunc:c5e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h5e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*t[o];this.outputShape=r,this.rank=r.length;const i=Pn(this.rank),a=d5e(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function d5e(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<n.length;i++)r.push(`imod(${t[i]}, ${n[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const u=t.readSync(i.dataId),l=i.dtype==="string"?u.map(h=>ef(h)):u,c=Wn(i.shape,i.dtype,l),f=P$e(c,a);return t.makeTensorInfo(f.shape,f.dtype,f.values)}const o=new h5e(i.shape,a);return t.runWebGLProgram(o,[i],i.dtype)}const p5e={kernelName:Eb,backendName:"webgl",kernelFunc:p9};class v5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class g5e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function zB(n){let e=1;for(;e<n;)e*=2;return e}function m5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i}=e,{k:a,sorted:o}=r,s=xe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=xe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=i.shape,c=l[l.length-1];if(t.shouldExecuteOnCPU([i])||c<s||a>u){const D=t.readSync(i.dataId),[N,z]=D$e(D,l,i.dtype,a,o);return[t.makeTensorInfo(N.shape,N.dtype,N.values),t.makeTensorInfo(z.shape,z.dtype,z.values)]}if(a===0)return l[l.length-1]=0,[t.makeTensorInfo(l,i.dtype,[]),t.makeTensorInfo(l,"int32",[])];if(c===1)return[i,Zg({attrs:{shape:l,dtype:"int32",value:0},backend:t})];const f=t.texData.get(i.dataId),h=f!==null&&f.isPacked,d=h?t.unpackTensor(i):i,g=ze(l)/c,m=Ye({inputs:{x:d},attrs:{shape:[g,c]},backend:t});h&&gc(t,d);const y=zB(a),b=zB(c);let _=null;const w=()=>_===null?[m,m]:[m,_],T=(D,N,z)=>{const F=w(),G=new v5e(z),H=[[c],[_===null?1:0],[Number.NEGATIVE_INFINITY],[D],[N]],X=_;_=t.runWebGLProgram(G,F,"int32",H),gc(t,X)};for(let D=1;D<y;D*=2){const N=D*2;for(let z=D;z>=1;z/=2)T(N,z,[g,b])}for(let D=b;D>y;D/=2){const N=w(),z=new g5e([g,D/2]),G=[[c],[_===null?1:0],[y]],U=_;_=t.runWebGLProgram(z,N,"int32",G),gc(t,U);const H=y/2,X=H*2;for(let Z=H;Z>=1;Z/=2)T(X,Z,_.shape)}let E=_;_=Ud({inputs:{x:_},backend:t,attrs:{begin:0,size:[g,a]}}),gc(t,E);let A=a9({inputs:{x:m,indices:_},backend:t,attrs:{axis:1,batchDims:1}});gc(t,m);const I=l.slice(0,-1);I.push(a),E=_,_=Ye({inputs:{x:_},attrs:{shape:I},backend:t}),gc(t,E);const $=A;return A=Ye({inputs:{x:A},attrs:{shape:I},backend:t}),gc(t,$),[A,_]}const y5e={kernelName:oR,backendName:"webgl",kernelFunc:m5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b5e{constructor(e,t,r,i,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let u;switch(i){case"constant":u=1;break;case"reflect":u=2;break;case"wrap":u=3;break;case"nearest":u=4;break;default:u=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${u} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${u} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(n){const{inputs:e,backend:t,attrs:r}=n,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:u,outputShape:l}=r,[c,f,h,d]=i.shape,[p,g]=l??[f,h],m=[c,p,g,d],y=new b5e(f,h,o,s,u,m);return t.runWebGLProgram(y,[i,a],"float32")}const _5e={kernelName:sR,backendName:"webgl",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(n){const{inputs:e,attrs:t,backend:r}=n,{axis:i}=t,{x:a}=e;jg(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:u,indices:l}=$$e(o,i,a.shape,a.dtype);return[r.makeTensorInfo(u,a.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}const S5e={kernelName:uR,backendName:"webgl",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5e(n){const{inputs:e,backend:t,attrs:r}=n,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,u=i.shape[a],l=new Array(s-1);let c=0;for(let g=0;g<s;g++)g!==a&&(l[c++]=o.shape[g]);const f=[],h=new Array(s).fill(0),d=o.shape.slice();d[a]=1;const p=new Array(u);for(let g=0;g<p.length;g++){h[a]=g;const m=Ud({inputs:{x:o},backend:t,attrs:{begin:h,size:d}}),y=Ye({inputs:{x:m},backend:t,attrs:{shape:l}});p[g]=y,f.push(m)}return f.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}const T5e={kernelName:lR,backendName:"webgl",kernelFunc:C5e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E5e{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/r);this.outputShape=[i,s];const u="0.0",l="sumValue",c=Math.floor(r/4)*4,f=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let d="";a%r>0&&(d=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${u};

      float getValue(int batch, int inIdx) {
        ${d}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${f===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${f===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${f===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${l});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5e(n){const{inputs:e,backend:t,attrs:r}=n,{x:i,segmentIds:a}=e,{numSegments:o}=r,s=i.shape.length,u=[];let l=0;const c=Ua([l],s);let f=i;c!=null&&(f=ti({inputs:{x:i},backend:t,attrs:{perm:c}}),u.push(f),l=Wa(1,s)[0]);const h=ZG(f.shape,l,o),d=ze([f.shape[l]]),p=Ye({inputs:{x:f},backend:t,attrs:{shape:[-1,d]}});u.push(p);const g=kb(i.dtype),m=(w,T,E,A,I)=>{const $=w.shape[0],D=w.shape[1],N=YG(D,I),z={windowSize:N,inSize:D,batchSize:$,numSegments:I},F=new E5e(z,T),G=t.compileAndRun(F,[w,E],A);if(u.push(G),G.shape[1]===I)return G;const U=h9({backend:t,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),H=p9({inputs:{x:U},backend:t,attrs:{reps:[D/N]}});return u.push(U),u.push(H),m(G,T,H,A,I)},y=m(p,"unsortedSegmentSum",a,g,o),b=Ye({inputs:{x:y},backend:t,attrs:{shape:h}});let _=b;if(c!=null){u.push(b);const w=NR(c);_=ti({inputs:{x:_},backend:t,attrs:{perm:w}})}return u.forEach(w=>t.disposeIntermediateTensorInfo(w)),_}const A5e={kernelName:cR,backendName:"webgl",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=[CNe,ENe,RNe,DNe,NNe,MNe,FNe,zNe,GNe,qNe,YNe,JNe,nOe,oOe,lOe,fOe,dOe,mOe,bOe,_Oe,TOe,DOe,NOe,LOe,UOe,HOe,XOe,sNe,ZOe,nLe,oLe,hLe,pLe,gLe,yLe,xLe,SLe,ELe,RLe,PLe,$Le,OLe,BLe,VLe,HLe,jLe,KLe,QLe,eMe,iMe,uMe,hMe,vMe,yMe,bMe,_Me,SMe,TMe,kMe,RMe,$Me,LMe,FMe,zMe,HMe,qMe,ZMe,tBe,oNe,rBe,eLe,oBe,lBe,hBe,lNe,gBe,xBe,wBe,EBe,RBe,$Be,LBe,VBe,HBe,qBe,KBe,JBe,t3e,r3e,s3e,l3e,f3e,d3e,v3e,b3e,S3e,k3e,O3e,hNe,F3e,U3e,G3e,X3e,BOe,Z3e,J3e,tFe,iFe,uFe,fNe,cFe,hFe,pFe,gFe,mFe,FOe,P3e,xFe,CFe,AFe,pNe,DFe,OFe,FFe,UFe,jFe,XFe,ZFe,e4e,n4e,a4e,u4e,f4e,v4e,y4e,_4e,C4e,IOe,$3e,k4e,R4e,P4e,$4e,O4e,M4e,F4e,z4e,W4e,j4e,X4e,Y4e,J4e,t5e,r5e,a5e,D3e,_Ne,u5e,f5e,p5e,y5e,_5e,wNe,S5e,T5e,A5e,Q3e];for(const n of R5e)pR(n);export{gVe as A,uVe as B,oVe as C,yVe as D,J5e as E,bVe as F,fVe as G,vVe as H,hVe as I,sVe as J,lVe as K,hV as L,iVe as M,aVe as N,xVe as O,H5e as P,W5e as Q,tVe as R,_1 as S,_Ve as T,wVe as U,eVe as a,N5e as b,K5e as c,Y5e as d,X5e as e,z5e as f,U5e as g,F5e as h,D5e as i,P5e as j,yx as k,nVe as l,$5e as m,O5e as n,L5e as o,Q5e as p,B5e as q,M5e as r,V5e as s,Cx as t,Z5e as u,ou as v,pVe as w,dVe as x,cVe as y,mVe as z};
